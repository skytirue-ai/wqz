!function(){function t(t,r){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,r){if(t){if("string"==typeof t)return e(t,r);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(t,r):void 0}}(t))||r&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,f=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return u=t.done,t},e:function(t){f=!0,a=t},f:function(){try{u||null==n.return||n.return()}finally{if(f)throw a}}}}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function r(t){var e="function"==typeof Map?new Map:void 0;return r=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return function(t,e,r){if(i())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var o=new(t.bind.apply(t,n));return r&&u(o,r.prototype),o}(t,arguments,o(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),u(r,t)},r(t)}function n(t,e,r){return e=o(e),function(t,e){if(e&&("object"==y(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,i()?Reflect.construct(e,r||[],o(t).constructor):e.apply(t,r))}function i(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(i=function(){return!!t})()}function o(t){return o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},o(t)}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,v(n.key),n)}}function c(t,e,r){return e&&s(t.prototype,e),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach(function(e){h(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function h(t,e,r){return(e=v(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function v(t){var e=function(t,e){if("object"!=y(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==y(e)?e:e+""}function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}System.register(["./vendor-legacy-BtxBVL23.js"],function(e,i){var o,u,s,l,h,v,p,w,g,m,b,E,B,O,S,x,k,R,I,A,N,q,P,j,H,z,Z,F,T,L,C,_,D,U,V,K,M,Y,W,G,$,J,Q,X,tt,et,rt,nt,it,ot,at,ut,ft,st,ct;function lt(t,e){var r=t%e;return r>=C?r:e+r}function dt(t,e,r){for(var n=t;e-- >C;)n*=n,n%=r;return n}function ht(t,e){if(t===C)throw new Error("invert: expected non-zero number");if(e<=C)throw new Error("invert: expected positive modulus, got "+e);for(var r=lt(t,e),n=e,i=C,o=_,a=_,u=C;r!==C;){var f=n/r,s=n%r,c=i-a*f,l=o-u*f;n=r,r=s,i=a,o=u,a=c,u=l}if(n!==_)throw new Error("invert: does not exist");return lt(i,e)}function vt(t,e){var r=(t.ORDER+_)/V,n=t.pow(e,r);if(!t.eql(t.sqr(n),e))throw new Error("Cannot find square root");return n}function yt(t,e){var r=(t.ORDER-K)/M,n=t.mul(e,D),i=t.pow(n,r),o=t.mul(e,i),a=t.mul(t.mul(o,D),i),u=t.mul(o,t.sub(a,t.ONE));if(!t.eql(t.sqr(u),e))throw new Error("Cannot find square root");return u}function pt(t){return t%V===U?vt:t%M===K?yt:function(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");for(var e=t-_,r=0;e%D===C;)e/=D,r++;for(var n=D,i=bt(t);1===gt(i,n);)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(1===r)return vt;var o=i.pow(n,e),a=(e+_)/D;return function(t,n){if(t.is0(n))return n;if(1!==gt(t,n))throw new Error("Cannot find square root");for(var i=r,u=t.mul(t.ONE,o),f=t.pow(n,e),s=t.pow(n,a);!t.eql(f,t.ONE);){if(t.is0(f))return t.ZERO;for(var c=1,l=t.sqr(f);!t.eql(l,t.ONE);)if(c++,l=t.sqr(l),c===i)throw new Error("Cannot find square root");var d=_<<BigInt(i-c-1),h=t.pow(u,d);i=c,u=t.sqr(h),f=t.mul(f,u),s=t.mul(s,h)}return s}}(t)}function wt(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=new Array(e.length).fill(r?t.ZERO:void 0),i=e.reduce(function(e,r,i){return t.is0(r)?e:(n[i]=e,t.mul(e,r))},t.ONE),o=t.inv(i);return e.reduceRight(function(e,r,i){return t.is0(r)?e:(n[i]=t.mul(e,n[i]),t.mul(e,r))},o),n}function gt(t,e){var r=(t.ORDER-_)/D,n=t.pow(e,r),i=t.eql(n,t.ONE),o=t.eql(n,t.ZERO),a=t.eql(n,t.neg(t.ONE));if(!i&&!o&&!a)throw new Error("invalid Legendre symbol result");return i?1:o?0:-1}function mt(t,e){void 0!==e&&z(e);var r=void 0!==e?e:t.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function bt(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(t<=C)throw new Error("invalid field: expected ORDER > 0, got "+t);var i,o=mt(t,e),a=o.nBitLength,u=o.nByteLength;if(u>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");var f=Object.freeze({ORDER:t,isLE:r,BITS:a,BYTES:u,MASK:l(a),ZERO:C,ONE:_,create:function(e){return lt(e,t)},isValid:function(e){if("bigint"!=typeof e)throw new Error("invalid field element: expected bigint, got "+y(e));return C<=e&&e<t},is0:function(t){return t===C},isOdd:function(t){return(t&_)===_},neg:function(e){return lt(-e,t)},eql:function(t,e){return t===e},sqr:function(e){return lt(e*e,t)},add:function(e,r){return lt(e+r,t)},sub:function(e,r){return lt(e-r,t)},mul:function(e,r){return lt(e*r,t)},pow:function(t,e){return function(t,e,r){if(r<C)throw new Error("invalid exponent, negatives unsupported");if(r===C)return t.ONE;if(r===_)return e;for(var n=t.ONE,i=e;r>C;)r&_&&(n=t.mul(n,i)),i=t.sqr(i),r>>=_;return n}(f,t,e)},div:function(e,r){return lt(e*ht(r,t),t)},sqrN:function(t){return t*t},addN:function(t,e){return t+e},subN:function(t,e){return t-e},mulN:function(t,e){return t*e},inv:function(e){return ht(e,t)},sqrt:n.sqrt||function(e){return i||(i=pt(t)),i(f,e)},toBytes:function(t){return r?I(t,u):j(t,u)},fromBytes:function(t){if(t.length!==u)throw new Error("Field.fromBytes: expected "+u+" bytes, got "+t.length);return r?b(t):s(t)},invertBatch:function(t){return wt(f,t)},cmov:function(t,e,r){return r?e:t}});return Object.freeze(f)}function Et(t){if("bigint"!=typeof t)throw new Error("field order must be bigint");var e=t.toString(2).length;return Math.ceil(e/8)}function Bt(t){var e=Et(t);return e+Math.ceil(e/2)}function Ot(t,e){var r=e.negate();return t?r:e}function St(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function xt(t,e){St(t,e);var r=Math.ceil(e/t)+1,n=Math.pow(2,t-1),i=Math.pow(2,t);return{windows:r,windowSize:n,mask:l(t),maxNumber:i,shiftBy:BigInt(t)}}function kt(t,e,r){var n=r.windowSize,i=r.mask,o=r.maxNumber,a=r.shiftBy,u=Number(t&i),f=t>>a;u>n&&(u-=o,f+=G);var s=e*n;return{nextN:f,offset:s+Math.abs(u)-1,isZero:0===u,isNeg:u<0,isNegF:e%2!=0,offsetF:s}}function Rt(t){return J.get(t)||1}function It(t,e,r,n){!function(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach(function(t,r){if(!(t instanceof e))throw new Error("invalid point at index "+r)})}(r,t),function(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach(function(t,r){if(!e.isValid(t))throw new Error("invalid scalar at index "+r)})}(n,e);var i=r.length,o=n.length;if(i!==o)throw new Error("arrays of points and scalars must have equal length");var a=t.ZERO,f=u(BigInt(i)),s=1;f>12?s=f-3:f>4?s=f-2:f>0&&(s=2);for(var c=l(s),d=new Array(Number(c)+1).fill(a),h=a,v=Math.floor((e.BITS-1)/s)*s;v>=0;v-=s){d.fill(a);for(var y=0;y<o;y++){var p=n[y],w=Number(p>>BigInt(v)&c);d[w]=d[w].add(r[y])}for(var g=a,m=d.length-1,b=a;m>0;m--)b=b.add(d[m]),g=g.add(b);if(h=h.add(g),0!==v)for(var E=0;E<s;E++)h=h.double()}return h}function At(t){var e,r;return e=t.Fp,r=Y.reduce(function(t,e){return t[e]="function",t},{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"}),q(e,r),q(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze(d(d(d({},mt(t.n,t.nBitLength)),t),{},{p:t.Fp.ORDER}))}function Nt(t){void 0!==t.lowS&&g("lowS",t.lowS),void 0!==t.prehash&&g("prehash",t.prehash)}function qt(t,e){return P(j(t,e))}function Pt(t){var e=function(t){var e=At(t);q(e,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});var r=e.endo,n=e.Fp,i=e.a;if(r){if(!n.eql(i,n.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if("object"!==y(r)||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze(d({},e))}(t),r=e.Fp,n=bt(e.n,e.nBitLength),i=e.toBytes||function(t,e,n){var i=e.toAffine();return m(Uint8Array.from([4]),r.toBytes(i.x),r.toBytes(i.y))},o=e.fromBytes||function(t){var e=t.subarray(1);return{x:r.fromBytes(e.subarray(0,r.BYTES)),y:r.fromBytes(e.subarray(r.BYTES,2*r.BYTES))}};function a(t){var n=e.a,i=e.b,o=r.sqr(t),a=r.mul(o,t);return r.add(r.add(a,r.mul(t,n)),i)}function u(t,e){var n=r.sqr(e),i=a(t);return r.eql(n,i)}if(!u(e.Gx,e.Gy))throw new Error("bad curve params: generator point");var l=r.mul(r.pow(e.a,rt),nt),v=r.mul(r.sqr(e.b),BigInt(27));if(r.is0(r.add(l,v)))throw new Error("bad curve params: a or b");function w(t){var r,n=e.allowedPrivateKeyLengths,i=e.nByteLength,o=e.wrapPrivateKey,a=e.n;if(n&&"bigint"!=typeof t){if(H(t)&&(t=P(t)),"string"!=typeof t||!n.includes(t.length))throw new Error("invalid private key");t=t.padStart(2*i,"0")}try{r="bigint"==typeof t?t:s(h("private key",t,i))}catch(u){throw new Error("invalid private key, expected hex or "+i+" bytes, got "+y(t))}return o&&(r=lt(r,a)),p("private key",r,et,a),r}function b(t){if(!(t instanceof O))throw new Error("ProjectivePoint expected")}var E=N(function(t,e){var n=t.px,i=t.py,o=t.pz;if(r.eql(o,r.ONE))return{x:n,y:i};var a=t.is0();null==e&&(e=a?r.ONE:r.inv(o));var u=r.mul(n,e),f=r.mul(i,e),s=r.mul(o,e);if(a)return{x:r.ZERO,y:r.ZERO};if(!r.eql(s,r.ONE))throw new Error("invZ was invalid");return{x:u,y:f}}),B=N(function(t){if(t.is0()){if(e.allowInfinityPoint&&!r.is0(t.py))return;throw new Error("bad point: ZERO")}var n=t.toAffine(),i=n.x,o=n.y;if(!r.isValid(i)||!r.isValid(o))throw new Error("bad point: x or y not FE");if(!u(i,o))throw new Error("bad point: equation left != right");if(!t.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0}),O=function(){function t(e,n,i){if(f(this,t),null==e||!r.isValid(e))throw new Error("x required");if(null==n||!r.isValid(n)||r.is0(n))throw new Error("y required");if(null==i||!r.isValid(i))throw new Error("z required");this.px=e,this.py=n,this.pz=i,Object.freeze(this)}return c(t,[{key:"x",get:function(){return this.toAffine().x}},{key:"y",get:function(){return this.toAffine().y}},{key:"_setWindowSize",value:function(t){A.setWindowSize(this,t)}},{key:"assertValidity",value:function(){B(this)}},{key:"hasEvenY",value:function(){var t=this.toAffine().y;if(r.isOdd)return!r.isOdd(t);throw new Error("Field doesn't support isOdd")}},{key:"equals",value:function(t){b(t);var e=this.px,n=this.py,i=this.pz,o=t.px,a=t.py,u=t.pz,f=r.eql(r.mul(e,u),r.mul(o,i)),s=r.eql(r.mul(n,u),r.mul(a,i));return f&&s}},{key:"negate",value:function(){return new t(this.px,r.neg(this.py),this.pz)}},{key:"double",value:function(){var n=e.a,i=e.b,o=r.mul(i,rt),a=this.px,u=this.py,f=this.pz,s=r.ZERO,c=r.ZERO,l=r.ZERO,d=r.mul(a,a),h=r.mul(u,u),v=r.mul(f,f),y=r.mul(a,u);return y=r.add(y,y),l=r.mul(a,f),l=r.add(l,l),s=r.mul(n,l),c=r.mul(o,v),c=r.add(s,c),s=r.sub(h,c),c=r.add(h,c),c=r.mul(s,c),s=r.mul(y,s),l=r.mul(o,l),v=r.mul(n,v),y=r.sub(d,v),y=r.mul(n,y),y=r.add(y,l),l=r.add(d,d),d=r.add(l,d),d=r.add(d,v),d=r.mul(d,y),c=r.add(c,d),v=r.mul(u,f),v=r.add(v,v),d=r.mul(v,y),s=r.sub(s,d),l=r.mul(v,h),l=r.add(l,l),new t(s,c,l=r.add(l,l))}},{key:"add",value:function(n){b(n);var i=this.px,o=this.py,a=this.pz,u=n.px,f=n.py,s=n.pz,c=r.ZERO,l=r.ZERO,d=r.ZERO,h=e.a,v=r.mul(e.b,rt),y=r.mul(i,u),p=r.mul(o,f),w=r.mul(a,s),g=r.add(i,o),m=r.add(u,f);g=r.mul(g,m),m=r.add(y,p),g=r.sub(g,m),m=r.add(i,a);var E=r.add(u,s);return m=r.mul(m,E),E=r.add(y,w),m=r.sub(m,E),E=r.add(o,a),c=r.add(f,s),E=r.mul(E,c),c=r.add(p,w),E=r.sub(E,c),d=r.mul(h,m),c=r.mul(v,w),d=r.add(c,d),c=r.sub(p,d),d=r.add(p,d),l=r.mul(c,d),p=r.add(y,y),p=r.add(p,y),w=r.mul(h,w),m=r.mul(v,m),p=r.add(p,w),w=r.sub(y,w),w=r.mul(h,w),m=r.add(m,w),y=r.mul(p,m),l=r.add(l,y),y=r.mul(E,m),c=r.mul(g,c),c=r.sub(c,y),y=r.mul(g,p),d=r.mul(E,d),new t(c,l,d=r.add(d,y))}},{key:"subtract",value:function(t){return this.add(t.negate())}},{key:"is0",value:function(){return this.equals(t.ZERO)}},{key:"wNAF",value:function(e){return A.wNAFCached(this,e,t.normalizeZ)}},{key:"multiplyUnsafe",value:function(n){var i=e.endo,o=e.n;p("scalar",n,tt,o);var a=t.ZERO;if(n===tt)return a;if(this.is0()||n===et)return this;if(!i||A.hasPrecomputes(this))return A.wNAFCachedUnsafe(this,n,t.normalizeZ);for(var u=i.splitScalar(n),f=u.k1neg,s=u.k1,c=u.k2neg,l=u.k2,d=a,h=a,v=this;s>tt||l>tt;)s&et&&(d=d.add(v)),l&et&&(h=h.add(v)),v=v.double(),s>>=et,l>>=et;return f&&(d=d.negate()),c&&(h=h.negate()),h=new t(r.mul(h.px,i.beta),h.py,h.pz),d.add(h)}},{key:"multiply",value:function(n){var i,o,a=e.endo,u=e.n;if(p("scalar",n,et,u),a){var f=a.splitScalar(n),s=f.k1neg,c=f.k1,l=f.k2neg,d=f.k2,h=this.wNAF(c),v=h.p,y=h.f,w=this.wNAF(d),g=w.p,m=w.f;v=A.constTimeNegate(s,v),g=A.constTimeNegate(l,g),g=new t(r.mul(g.px,a.beta),g.py,g.pz),i=v.add(g),o=y.add(m)}else{var b=this.wNAF(n);i=b.p,o=b.f}return t.normalizeZ([i,o])[0]}},{key:"multiplyAndAddUnsafe",value:function(e,r,n){var i=t.BASE,o=function(t,e){return e!==tt&&e!==et&&t.equals(i)?t.multiply(e):t.multiplyUnsafe(e)},a=o(this,r).add(o(e,n));return a.is0()?void 0:a}},{key:"toAffine",value:function(t){return E(this,t)}},{key:"isTorsionFree",value:function(){var r=e.h,n=e.isTorsionFree;if(r===et)return!0;if(n)return n(t,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}},{key:"clearCofactor",value:function(){var r=e.h,n=e.clearCofactor;return r===et?this:n?n(t,this):this.multiplyUnsafe(e.h)}},{key:"toRawBytes",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return g("isCompressed",e),this.assertValidity(),i(t,this,e)}},{key:"toHex",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return g("isCompressed",t),P(this.toRawBytes(t))}}],[{key:"fromAffine",value:function(e){var n=e||{},i=n.x,o=n.y;if(!e||!r.isValid(i)||!r.isValid(o))throw new Error("invalid affine point");if(e instanceof t)throw new Error("projective point not allowed");var a=function(t){return r.eql(t,r.ZERO)};return a(i)&&a(o)?t.ZERO:new t(i,o,r.ONE)}},{key:"normalizeZ",value:function(e){var n=wt(r,e.map(function(t){return t.pz}));return e.map(function(t,e){return t.toAffine(n[e])}).map(t.fromAffine)}},{key:"fromHex",value:function(e){var r=t.fromAffine(o(h("pointHex",e)));return r.assertValidity(),r}},{key:"fromPrivateKey",value:function(e){return t.BASE.multiply(w(e))}},{key:"msm",value:function(e,r){return It(t,n,e,r)}}])}();O.BASE=new O(e.Gx,e.Gy,r.ONE),O.ZERO=new O(r.ZERO,r.ONE,r.ZERO);var S,k,R=e.endo,I=e.nBitLength,A=(S=O,k=R?Math.ceil(I/2):I,{constTimeNegate:Ot,hasPrecomputes:function(t){return 1!==Rt(t)},unsafeLadder:function(t,e){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:S.ZERO,n=t;e>W;)e&G&&(r=r.add(n)),n=n.double(),e>>=G;return r},precomputeWindow:function(t,e){for(var r=xt(e,k),n=r.windows,i=r.windowSize,o=[],a=t,u=a,f=0;f<n;f++){u=a,o.push(u);for(var s=1;s<i;s++)u=u.add(a),o.push(u);a=u.double()}return o},wNAF:function(t,e,r){for(var n=S.ZERO,i=S.BASE,o=xt(t,k),a=0;a<o.windows;a++){var u=kt(r,a,o),f=u.nextN,s=u.offset,c=u.isZero,l=u.isNeg,d=u.isNegF,h=u.offsetF;r=f,c?i=i.add(Ot(d,e[h])):n=n.add(Ot(l,e[s]))}return{p:n,f:i}},wNAFUnsafe:function(t,e,r){for(var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:S.ZERO,i=xt(t,k),o=0;o<i.windows&&r!==W;o++){var a=kt(r,o,i),u=a.nextN,f=a.offset,s=a.isZero,c=a.isNeg;if(r=u,!s){var l=e[f];n=n.add(c?l.negate():l)}}return n},getPrecomputes:function(t,e,r){var n=$.get(e);return n||(n=this.precomputeWindow(e,t),1!==t&&$.set(e,r(n))),n},wNAFCached:function(t,e,r){var n=Rt(t);return this.wNAF(n,this.getPrecomputes(n,t,r),e)},wNAFCachedUnsafe:function(t,e,r,n){var i=Rt(t);return 1===i?this.unsafeLadder(t,e,n):this.wNAFUnsafe(i,this.getPrecomputes(i,t,r),e,n)},setWindowSize:function(t,e){St(e,k),J.set(t,e),$.delete(t)}});return{CURVE:e,ProjectivePoint:O,normPrivateKeyToScalar:w,weierstrassEquation:a,isWithinCurveOrder:function(t){return x(t,et,e.n)}}}function jt(t){var e,r=(e=At(t),q(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze(d({lowS:!0},e))),n=r.Fp,i=r.n,a=r.nByteLength,u=r.nBitLength,v=n.BYTES+1,w=2*n.BYTES+1;function B(t){return lt(t,i)}function O(t){return ht(t,i)}var S=Pt(d(d({},r),{},{toBytes:function(t,e,r){var i=e.toAffine(),o=n.toBytes(i.x),a=m;return g("isCompressed",r),r?a(Uint8Array.from([e.hasEvenY()?2:3]),o):a(Uint8Array.from([4]),o,n.toBytes(i.y))},fromBytes:function(t){var e=t.length,r=t[0],i=t.subarray(1);if(e!==v||2!==r&&3!==r){if(e===w&&4===r)return{x:n.fromBytes(i.subarray(0,n.BYTES)),y:n.fromBytes(i.subarray(n.BYTES,2*n.BYTES))};throw new Error("invalid Point, expected length of "+v+", or uncompressed "+w+", got "+e)}var o=s(i);if(!x(o,et,n.ORDER))throw new Error("Point is not on curve");var a,u=A(o);try{a=n.sqrt(u)}catch(c){var f=c instanceof Error?": "+c.message:"";throw new Error("Point is not on curve"+f)}return!(1&~r)!==((a&et)===et)&&(a=n.neg(a)),{x:o,y:a}}})),k=S.ProjectivePoint,R=S.normPrivateKeyToScalar,A=S.weierstrassEquation,N=S.isWithinCurveOrder;function P(t){return t>i>>et}var z=function(t,e,r){return s(t.slice(e,r))},Z=function(){function t(e,r,n){f(this,t),p("r",e,et,i),p("s",r,et,i),this.r=e,this.s=r,null!=n&&(this.recovery=n),Object.freeze(this)}return c(t,[{key:"assertValidity",value:function(){}},{key:"addRecoveryBit",value:function(e){return new t(this.r,this.s,e)}},{key:"recoverPublicKey",value:function(t){var e=this.r,i=this.s,o=this.recovery,a=C(h("msgHash",t));if(null==o||![0,1,2,3].includes(o))throw new Error("recovery id invalid");var u=2===o||3===o?e+r.n:e;if(u>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");var f=1&o?"03":"02",s=k.fromHex(f+qt(u,n.BYTES)),c=O(u),l=B(-a*c),d=B(i*c),v=k.BASE.multiplyAndAddUnsafe(s,l,d);if(!v)throw new Error("point at infinify");return v.assertValidity(),v}},{key:"hasHighS",value:function(){return P(this.s)}},{key:"normalizeS",value:function(){return this.hasHighS()?new t(this.r,B(-this.s),this.recovery):this}},{key:"toDERRawBytes",value:function(){return o(this.toDERHex())}},{key:"toDERHex",value:function(){return X.hexFromSig(this)}},{key:"toCompactRawBytes",value:function(){return o(this.toCompactHex())}},{key:"toCompactHex",value:function(){var t=a;return qt(this.r,t)+qt(this.s,t)}}],[{key:"fromCompact",value:function(e){var r=a;return e=h("compactSignature",e,2*r),new t(z(e,0,r),z(e,r,2*r))}},{key:"fromDER",value:function(e){var r=X.toSig(h("DER",e));return new t(r.r,r.s)}}])}(),F={isValidPrivateKey:function(t){try{return R(t),!0}catch(e){return!1}},normPrivateKeyToScalar:R,randomPrivateKey:function(){var t=Bt(r.n);return function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=t.length,i=Et(e),o=Bt(e);if(n<16||n<o||n>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+n);var a=lt(r?b(t):s(t),e-_)+_;return r?I(a,i):j(a,i)}(r.randomBytes(t),r.n)},precompute:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k.BASE;return e._setWindowSize(t),e.multiply(BigInt(3)),e}};function T(t){if("bigint"==typeof t)return!1;if(t instanceof k)return!0;var e=h("key",t).length,i=n.BYTES,o=i+1,u=2*i+1;return r.allowedPrivateKeyLengths||a===o?void 0:e===o||e===u}var L=r.bits2int||function(t){if(t.length>8192)throw new Error("input is too large");var e=s(t),r=8*t.length-u;return r>0?e>>BigInt(r):e},C=r.bits2int_modN||function(t){return B(L(t))},D=l(u);function U(t){return p("num < 2^"+u,t,tt,D),j(t,a)}function V(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:K;if(["recovered","canonical"].some(function(t){return t in i}))throw new Error("sign() legacy options not supported");var o=r.hash,a=r.randomBytes,u=i.lowS,f=i.prehash,s=i.extraEntropy;null==u&&(u=!0),t=h("msgHash",t),Nt(i),f&&(t=h("prehashed msgHash",o(t)));var c=C(t),l=R(e),d=[U(l),U(c)];if(null!=s&&!1!==s){var v=!0===s?a(n.BYTES):s;d.push(h("extraEntropy",v))}var y=m.apply(void 0,d),p=c;return{seed:y,k2sig:function(t){var e=L(t);if(N(e)){var r=O(e),n=k.BASE.multiply(e).toAffine(),i=B(n.x);if(i!==tt){var o=B(r*B(p+i*l));if(o!==tt){var a=(n.x===i?0:2)|Number(n.y&et),f=o;return u&&P(o)&&(f=function(t){return P(t)?B(-t):t}(o),a^=1),new Z(i,f,a)}}}}}}var K={lowS:r.lowS,prehash:!1},M={lowS:r.lowS,prehash:!1};return k.BASE._setWindowSize(8),{CURVE:r,getPublicKey:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return k.fromPrivateKey(t).toRawBytes(e)},getSharedSecret:function(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!0===T(t))throw new Error("first arg must be private key");if(!1===T(e))throw new Error("second arg must be public key");return k.fromHex(e).multiply(R(t)).toRawBytes(r)},sign:function(t,e){var n=V(t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:K),i=n.seed,o=n.k2sig,a=r;return E(a.hash.outputLen,a.nByteLength,a.hmac)(i,o)},verify:function(t,e,n){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:M,a=t;e=h("msgHash",e),n=h("publicKey",n);var u=o.lowS,f=o.prehash,s=o.format;if(Nt(o),"strict"in o)throw new Error("options.strict was renamed to lowS");if(void 0!==s&&"compact"!==s&&"der"!==s)throw new Error("format must be compact or der");var c="string"==typeof a||H(a),l=!c&&!s&&"object"===y(a)&&null!==a&&"bigint"==typeof a.r&&"bigint"==typeof a.s;if(!c&&!l)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");var d,v=void 0;try{if(l&&(v=new Z(a.r,a.s)),c){try{"compact"!==s&&(v=Z.fromDER(a))}catch(R){if(!(R instanceof X.Err))throw R}v||"der"===s||(v=Z.fromCompact(a))}d=k.fromHex(n)}catch(I){return!1}if(!v)return!1;if(u&&v.hasHighS())return!1;f&&(e=r.hash(e));var p=v,w=p.r,g=p.s,m=C(e),b=O(g),E=B(m*b),S=B(w*b),x=null===(i=k.BASE.multiplyAndAddUnsafe(d,E,S))||void 0===i?void 0:i.toAffine();return!!x&&B(x.x)===w},ProjectivePoint:k,Signature:Z,utils:F}}function Ht(t,e){var r=function(e){return jt(d(d({},t),function(t){return{hash:t,hmac:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return L(t,e,S.apply(void 0,n))},randomBytes:Z}}(e)))};return d(d({},r(e)),{},{create:r})}function zt(t){var e=it,r=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),a=BigInt(23),u=BigInt(44),f=BigInt(88),s=t*t*t%e,c=s*s*t%e,l=dt(c,r,e)*c%e,d=dt(l,r,e)*c%e,h=dt(d,ft,e)*s%e,v=dt(h,i,e)*h%e,y=dt(v,o,e)*v%e,p=dt(y,u,e)*y%e,w=dt(p,f,e)*p%e,g=dt(w,u,e)*y%e,m=dt(g,r,e)*c%e,b=dt(m,a,e)*v%e,E=dt(b,n,e)*s%e,B=dt(E,ft,e);if(!ct.eql(ct.sqr(B),t))throw new Error("Cannot find square root");return B}return{setters:[function(t){o=t.$,u=t.G,s=t.J,l=t.K,h=t.Q,v=t.St,p=t.U,w=t.V,g=t.W,m=t.X,b=t.Y,E=t.Z,B=t._t,O=t.at,S=t.bt,x=t.et,k=t.gt,R=t.ht,I=t.it,A=t.mt,N=t.nt,q=t.ot,P=t.q,j=t.rt,H=t.tt,z=t.vt,Z=t.xt,F=t.yt}],execute:function(){T=function(t){function e(t,r){var i;f(this,e),(i=n(this,e)).finished=!1,i.destroyed=!1,B(t);var o=v(r);if(i.iHash=t.create(),"function"!=typeof i.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");i.blockLen=i.iHash.blockLen,i.outputLen=i.iHash.outputLen;var a=i.blockLen,u=new Uint8Array(a);u.set(o.length>a?t.create().update(o).digest():o);for(var s=0;s<u.length;s++)u[s]^=54;i.iHash.update(u),i.oHash=t.create();for(var c=0;c<u.length;c++)u[c]^=106;return i.oHash.update(u),F(u),i}return a(e,t),c(e,[{key:"update",value:function(t){return k(this),this.iHash.update(t),this}},{key:"digestInto",value:function(t){k(this),R(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}},{key:"digest",value:function(){var t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}},{key:"_cloneInto",value:function(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));var e=this.oHash,r=this.iHash,n=this.finished,i=this.destroyed,o=this.blockLen,a=this.outputLen;return t.finished=n,t.destroyed=i,t.blockLen=o,t.outputLen=a,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}},{key:"clone",value:function(){return this._cloneInto()}},{key:"destroy",value:function(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}])}(A),(L=function(t,e,r){return new T(t,e).update(r).digest()}).create=function(t,e){return new T(t,e)},C=BigInt(0),_=BigInt(1),D=BigInt(2),U=BigInt(3),V=BigInt(4),K=BigInt(5),M=BigInt(8),Y=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"],W=BigInt(0),G=BigInt(1),$=new WeakMap,J=new WeakMap,Q=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return f(this,e),n(this,e,[t])}return a(e,t),c(e)}(r(Error)),X={Err:Q,_tlv:{encode:function(t,e){var r=X.Err;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(1&e.length)throw new r("tlv.encode: unpadded data");var n=e.length/2,i=O(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");var o=n>127?O(i.length/2|128):"";return O(t)+o+i+e},decode:function(e,r){var n=X.Err,i=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(r.length<2||r[i++]!==e)throw new n("tlv.decode: wrong tlv");var o=r[i++],a=0;if(!!(128&o)){var u=127&o;if(!u)throw new n("tlv.decode(long): indefinite length not supported");if(u>4)throw new n("tlv.decode(long): byte length is too big");var f=r.subarray(i,i+u);if(f.length!==u)throw new n("tlv.decode: length bytes not complete");if(0===f[0])throw new n("tlv.decode(long): zero leftmost byte");var s,c=t(f);try{for(c.s();!(s=c.n()).done;){a=a<<8|s.value}}catch(d){c.e(d)}finally{c.f()}if(i+=u,a<128)throw new n("tlv.decode(long): not minimal encoding")}else a=o;var l=r.subarray(i,i+a);if(l.length!==a)throw new n("tlv.decode: wrong value length");return{v:l,l:r.subarray(i+a)}}},_int:{encode:function(t){var e=X.Err;if(t<tt)throw new e("integer: negative integers are not allowed");var r=O(t);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode:function(t){var e=X.Err;if(128&t[0])throw new e("invalid signature integer: negative");if(0===t[0]&&!(128&t[1]))throw new e("invalid signature integer: unnecessary leading zero");return s(t)}},toSig:function(t){var e=X,r=e.Err,n=e._int,i=e._tlv,o=h("signature",t),a=i.decode(48,o),u=a.v;if(a.l.length)throw new r("invalid signature: left bytes after parsing");var f=i.decode(2,u),s=f.v,c=f.l,l=i.decode(2,c),d=l.v;if(l.l.length)throw new r("invalid signature: left bytes after parsing");return{r:n.decode(s),s:n.decode(d)}},hexFromSig:function(t){var e=X,r=e._tlv,n=e._int,i=r.encode(2,n.encode(t.r))+r.encode(2,n.encode(t.s));return r.encode(48,i)}},tt=BigInt(0),et=BigInt(1),BigInt(2),rt=BigInt(3),nt=BigInt(4),it=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),ot=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),at=BigInt(0),ut=BigInt(1),ft=BigInt(2),st=function(t,e){return(t+e/ft)/e},ct=bt(it,void 0,void 0,{sqrt:zt}),e("secp256k1",Ht({a:at,b:BigInt(7),Fp:ct,n:ot,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:function(t){var e=ot,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-ut*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,a=BigInt("0x100000000000000000000000000000000"),u=st(o*t,e),f=st(-n*t,e),s=lt(t-u*r-f*i,e),c=lt(-u*n-f*o,e),l=s>a,d=c>a;if(l&&(s=e-s),d&&(c=e-c),s>a||c>a)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:l,k1:s,k2neg:d,k2:c}}}},w))}}})}();