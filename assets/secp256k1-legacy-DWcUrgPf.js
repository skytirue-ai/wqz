!function(){function t(t,r){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,r){if(t){if("string"==typeof t)return e(t,r);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(t,r):void 0}}(t))||r&&t&&"number"==typeof t.length){n&&(t=n);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,f=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return u=t.done,t},e:function(t){f=!0,a=t},f:function(){try{u||null==n.return||n.return()}finally{if(f)throw a}}}}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function r(t){var e="function"==typeof Map?new Map:void 0;return r=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return function(t,e,r){if(i())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var o=new(t.bind.apply(t,n));return r&&u(o,r.prototype),o}(t,arguments,o(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),u(r,t)},r(t)}function n(t,e,r){return e=o(e),function(t,e){if(e&&("object"==y(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,i()?Reflect.construct(e,r||[],o(t).constructor):e.apply(t,r))}function i(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(i=function(){return!!t})()}function o(t){return o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},o(t)}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,v(n.key),n)}}function c(t,e,r){return e&&s(t.prototype,e),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach(function(e){h(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function h(t,e,r){return(e=v(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function v(t){var e=function(t,e){if("object"!=y(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==y(e)?e:e+""}function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}System.register(["./vendor-legacy-EhRClZJx.js"],function(e,i){var o,u,s,l,h,v,p,w,g,m,b,E,B,O,S,x,k,R,I,A,N,q,P,j,H,z,F,T,L,Z,C,D,_,U,V,K,M,Y,W,G,J,$,Q,X,tt,et,rt,nt,it,ot,at,ut,ft,st,ct;function lt(t,e){var r=t%e;return r>=C?r:e+r}function dt(t,e,r){for(var n=t;e-- >C;)n*=n,n%=r;return n}function ht(t,e){if(t===C)throw new Error("invert: expected non-zero number");if(e<=C)throw new Error("invert: expected positive modulus, got "+e);for(var r=lt(t,e),n=e,i=C,o=D,a=D,u=C;r!==C;){var f=n/r,s=n%r,c=i-a*f,l=o-u*f;n=r,r=s,i=a,o=u,a=c,u=l}if(n!==D)throw new Error("invert: does not exist");return lt(i,e)}function vt(t,e){var r=(t.ORDER+D)/V,n=t.pow(e,r);if(!t.eql(t.sqr(n),e))throw new Error("Cannot find square root");return n}function yt(t,e){var r=(t.ORDER-K)/M,n=t.mul(e,_),i=t.pow(n,r),o=t.mul(e,i),a=t.mul(t.mul(o,_),i),u=t.mul(o,t.sub(a,t.ONE));if(!t.eql(t.sqr(u),e))throw new Error("Cannot find square root");return u}function pt(t){return t%V===U?vt:t%M===K?yt:function(t){if(t<BigInt(3))throw new Error("sqrt is not defined for small field");for(var e=t-D,r=0;e%_===C;)e/=_,r++;for(var n=_,i=bt(t);1===gt(i,n);)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(1===r)return vt;var o=i.pow(n,e),a=(e+D)/_;return function(t,n){if(t.is0(n))return n;if(1!==gt(t,n))throw new Error("Cannot find square root");for(var i=r,u=t.mul(t.ONE,o),f=t.pow(n,e),s=t.pow(n,a);!t.eql(f,t.ONE);){if(t.is0(f))return t.ZERO;for(var c=1,l=t.sqr(f);!t.eql(l,t.ONE);)if(c++,l=t.sqr(l),c===i)throw new Error("Cannot find square root");var d=D<<BigInt(i-c-1),h=t.pow(u,d);i=c,u=t.sqr(h),f=t.mul(f,u),s=t.mul(s,h)}return s}}(t)}function wt(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=new Array(e.length).fill(r?t.ZERO:void 0),i=e.reduce(function(e,r,i){return t.is0(r)?e:(n[i]=e,t.mul(e,r))},t.ONE),o=t.inv(i);return e.reduceRight(function(e,r,i){return t.is0(r)?e:(n[i]=t.mul(e,n[i]),t.mul(e,r))},o),n}function gt(t,e){var r=(t.ORDER-D)/_,n=t.pow(e,r),i=t.eql(n,t.ONE),o=t.eql(n,t.ZERO),a=t.eql(n,t.neg(t.ONE));if(!i&&!o&&!a)throw new Error("invalid Legendre symbol result");return i?1:o?0:-1}function mt(t,e){void 0!==e&&v(e);var r=void 0!==e?e:t.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function bt(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(t<=C)throw new Error("invalid field: expected ORDER > 0, got "+t);var i,o=mt(t,e),a=o.nBitLength,u=o.nByteLength;if(u>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");var f=Object.freeze({ORDER:t,isLE:r,BITS:a,BYTES:u,MASK:p(a),ZERO:C,ONE:D,create:function(e){return lt(e,t)},isValid:function(e){if("bigint"!=typeof e)throw new Error("invalid field element: expected bigint, got "+y(e));return C<=e&&e<t},is0:function(t){return t===C},isOdd:function(t){return(t&D)===D},neg:function(e){return lt(-e,t)},eql:function(t,e){return t===e},sqr:function(e){return lt(e*e,t)},add:function(e,r){return lt(e+r,t)},sub:function(e,r){return lt(e-r,t)},mul:function(e,r){return lt(e*r,t)},pow:function(t,e){return function(t,e,r){if(r<C)throw new Error("invalid exponent, negatives unsupported");if(r===C)return t.ONE;if(r===D)return e;for(var n=t.ONE,i=e;r>C;)r&D&&(n=t.mul(n,i)),i=t.sqr(i),r>>=D;return n}(f,t,e)},div:function(e,r){return lt(e*ht(r,t),t)},sqrN:function(t){return t*t},addN:function(t,e){return t+e},subN:function(t,e){return t-e},mulN:function(t,e){return t*e},inv:function(e){return ht(e,t)},sqrt:n.sqrt||function(e){return i||(i=pt(t)),i(f,e)},toBytes:function(t){return r?z(t,u):E(t,u)},fromBytes:function(t){if(t.length!==u)throw new Error("Field.fromBytes: expected "+u+" bytes, got "+t.length);return r?R(t):B(t)},invertBatch:function(t){return wt(f,t)},cmov:function(t,e,r){return r?e:t}});return Object.freeze(f)}function Et(t){if("bigint"!=typeof t)throw new Error("field order must be bigint");var e=t.toString(2).length;return Math.ceil(e/8)}function Bt(t){var e=Et(t);return e+Math.ceil(e/2)}function Ot(t,e){var r=e.negate();return t?r:e}function St(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function xt(t,e){St(t,e);var r=Math.ceil(e/t)+1,n=Math.pow(2,t-1),i=Math.pow(2,t);return{windows:r,windowSize:n,mask:p(t),maxNumber:i,shiftBy:BigInt(t)}}function kt(t,e,r){var n=r.windowSize,i=r.mask,o=r.maxNumber,a=r.shiftBy,u=Number(t&i),f=t>>a;u>n&&(u-=o,f+=G);var s=e*n;return{nextN:f,offset:s+Math.abs(u)-1,isZero:0===u,isNeg:u<0,isNegF:e%2!=0,offsetF:s}}function Rt(t){return $.get(t)||1}function It(t,e,r,n){!function(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach(function(t,r){if(!(t instanceof e))throw new Error("invalid point at index "+r)})}(r,t),function(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach(function(t,r){if(!e.isValid(t))throw new Error("invalid scalar at index "+r)})}(n,e);var i=r.length,o=n.length;if(i!==o)throw new Error("arrays of points and scalars must have equal length");var a=t.ZERO,u=k(BigInt(i)),f=1;u>12?f=u-3:u>4?f=u-2:u>0&&(f=2);for(var s=p(f),c=new Array(Number(s)+1).fill(a),l=a,d=Math.floor((e.BITS-1)/f)*f;d>=0;d-=f){c.fill(a);for(var h=0;h<o;h++){var v=n[h],y=Number(v>>BigInt(d)&s);c[y]=c[y].add(r[h])}for(var w=a,g=c.length-1,m=a;g>0;g--)m=m.add(c[g]),w=w.add(m);if(l=l.add(w),0!==d)for(var b=0;b<f;b++)l=l.double()}return l}function At(t){var e,r;return e=t.Fp,r=Y.reduce(function(t,e){return t[e]="function",t},{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"}),j(e,r),j(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze(d(d(d({},mt(t.n,t.nBitLength)),t),{},{p:t.Fp.ORDER}))}function Nt(t){void 0!==t.lowS&&S("lowS",t.lowS),void 0!==t.prehash&&S("prehash",t.prehash)}function qt(t,e){return m(E(t,e))}function Pt(t){var e=function(t){var e=At(t);j(e,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});var r=e.endo,n=e.Fp,i=e.a;if(r){if(!n.eql(i,n.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if("object"!==y(r)||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze(d({},e))}(t),r=e.Fp,n=bt(e.n,e.nBitLength),i=e.toBytes||function(t,e,n){var i=e.toAffine();return T(Uint8Array.from([4]),r.toBytes(i.x),r.toBytes(i.y))},o=e.fromBytes||function(t){var e=t.subarray(1);return{x:r.fromBytes(e.subarray(0,r.BYTES)),y:r.fromBytes(e.subarray(r.BYTES,2*r.BYTES))}};function a(t){var n=e.a,i=e.b,o=r.sqr(t),a=r.mul(o,t);return r.add(r.add(a,r.mul(t,n)),i)}function u(t,e){var n=r.sqr(e),i=a(t);return r.eql(n,i)}if(!u(e.Gx,e.Gy))throw new Error("bad curve params: generator point");var s=r.mul(r.pow(e.a,rt),nt),l=r.mul(r.sqr(e.b),BigInt(27));if(r.is0(r.add(s,l)))throw new Error("bad curve params: a or b");function h(t){var r,n=e.allowedPrivateKeyLengths,i=e.nByteLength,o=e.wrapPrivateKey,a=e.n;if(n&&"bigint"!=typeof t){if(P(t)&&(t=m(t)),"string"!=typeof t||!n.includes(t.length))throw new Error("invalid private key");t=t.padStart(2*i,"0")}try{r="bigint"==typeof t?t:B(q("private key",t,i))}catch(u){throw new Error("invalid private key, expected hex or "+i+" bytes, got "+y(t))}return o&&(r=lt(r,a)),O("private key",r,et,a),r}function v(t){if(!(t instanceof b))throw new Error("ProjectivePoint expected")}var p=w(function(t,e){var n=t.px,i=t.py,o=t.pz;if(r.eql(o,r.ONE))return{x:n,y:i};var a=t.is0();null==e&&(e=a?r.ONE:r.inv(o));var u=r.mul(n,e),f=r.mul(i,e),s=r.mul(o,e);if(a)return{x:r.ZERO,y:r.ZERO};if(!r.eql(s,r.ONE))throw new Error("invZ was invalid");return{x:u,y:f}}),g=w(function(t){if(t.is0()){if(e.allowInfinityPoint&&!r.is0(t.py))return;throw new Error("bad point: ZERO")}var n=t.toAffine(),i=n.x,o=n.y;if(!r.isValid(i)||!r.isValid(o))throw new Error("bad point: x or y not FE");if(!u(i,o))throw new Error("bad point: equation left != right");if(!t.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0}),b=function(){function t(e,n,i){if(f(this,t),null==e||!r.isValid(e))throw new Error("x required");if(null==n||!r.isValid(n)||r.is0(n))throw new Error("y required");if(null==i||!r.isValid(i))throw new Error("z required");this.px=e,this.py=n,this.pz=i,Object.freeze(this)}return c(t,[{key:"x",get:function(){return this.toAffine().x}},{key:"y",get:function(){return this.toAffine().y}},{key:"_setWindowSize",value:function(t){I.setWindowSize(this,t)}},{key:"assertValidity",value:function(){g(this)}},{key:"hasEvenY",value:function(){var t=this.toAffine().y;if(r.isOdd)return!r.isOdd(t);throw new Error("Field doesn't support isOdd")}},{key:"equals",value:function(t){v(t);var e=this.px,n=this.py,i=this.pz,o=t.px,a=t.py,u=t.pz,f=r.eql(r.mul(e,u),r.mul(o,i)),s=r.eql(r.mul(n,u),r.mul(a,i));return f&&s}},{key:"negate",value:function(){return new t(this.px,r.neg(this.py),this.pz)}},{key:"double",value:function(){var n=e.a,i=e.b,o=r.mul(i,rt),a=this.px,u=this.py,f=this.pz,s=r.ZERO,c=r.ZERO,l=r.ZERO,d=r.mul(a,a),h=r.mul(u,u),v=r.mul(f,f),y=r.mul(a,u);return y=r.add(y,y),l=r.mul(a,f),l=r.add(l,l),s=r.mul(n,l),c=r.mul(o,v),c=r.add(s,c),s=r.sub(h,c),c=r.add(h,c),c=r.mul(s,c),s=r.mul(y,s),l=r.mul(o,l),v=r.mul(n,v),y=r.sub(d,v),y=r.mul(n,y),y=r.add(y,l),l=r.add(d,d),d=r.add(l,d),d=r.add(d,v),d=r.mul(d,y),c=r.add(c,d),v=r.mul(u,f),v=r.add(v,v),d=r.mul(v,y),s=r.sub(s,d),l=r.mul(v,h),l=r.add(l,l),new t(s,c,l=r.add(l,l))}},{key:"add",value:function(n){v(n);var i=this.px,o=this.py,a=this.pz,u=n.px,f=n.py,s=n.pz,c=r.ZERO,l=r.ZERO,d=r.ZERO,h=e.a,y=r.mul(e.b,rt),p=r.mul(i,u),w=r.mul(o,f),g=r.mul(a,s),m=r.add(i,o),b=r.add(u,f);m=r.mul(m,b),b=r.add(p,w),m=r.sub(m,b),b=r.add(i,a);var E=r.add(u,s);return b=r.mul(b,E),E=r.add(p,g),b=r.sub(b,E),E=r.add(o,a),c=r.add(f,s),E=r.mul(E,c),c=r.add(w,g),E=r.sub(E,c),d=r.mul(h,b),c=r.mul(y,g),d=r.add(c,d),c=r.sub(w,d),d=r.add(w,d),l=r.mul(c,d),w=r.add(p,p),w=r.add(w,p),g=r.mul(h,g),b=r.mul(y,b),w=r.add(w,g),g=r.sub(p,g),g=r.mul(h,g),b=r.add(b,g),p=r.mul(w,b),l=r.add(l,p),p=r.mul(E,b),c=r.mul(m,c),c=r.sub(c,p),p=r.mul(m,w),d=r.mul(E,d),new t(c,l,d=r.add(d,p))}},{key:"subtract",value:function(t){return this.add(t.negate())}},{key:"is0",value:function(){return this.equals(t.ZERO)}},{key:"wNAF",value:function(e){return I.wNAFCached(this,e,t.normalizeZ)}},{key:"multiplyUnsafe",value:function(n){var i=e.endo,o=e.n;O("scalar",n,tt,o);var a=t.ZERO;if(n===tt)return a;if(this.is0()||n===et)return this;if(!i||I.hasPrecomputes(this))return I.wNAFCachedUnsafe(this,n,t.normalizeZ);for(var u=i.splitScalar(n),f=u.k1neg,s=u.k1,c=u.k2neg,l=u.k2,d=a,h=a,v=this;s>tt||l>tt;)s&et&&(d=d.add(v)),l&et&&(h=h.add(v)),v=v.double(),s>>=et,l>>=et;return f&&(d=d.negate()),c&&(h=h.negate()),h=new t(r.mul(h.px,i.beta),h.py,h.pz),d.add(h)}},{key:"multiply",value:function(n){var i,o,a=e.endo,u=e.n;if(O("scalar",n,et,u),a){var f=a.splitScalar(n),s=f.k1neg,c=f.k1,l=f.k2neg,d=f.k2,h=this.wNAF(c),v=h.p,y=h.f,p=this.wNAF(d),w=p.p,g=p.f;v=I.constTimeNegate(s,v),w=I.constTimeNegate(l,w),w=new t(r.mul(w.px,a.beta),w.py,w.pz),i=v.add(w),o=y.add(g)}else{var m=this.wNAF(n);i=m.p,o=m.f}return t.normalizeZ([i,o])[0]}},{key:"multiplyAndAddUnsafe",value:function(e,r,n){var i=t.BASE,o=function(t,e){return e!==tt&&e!==et&&t.equals(i)?t.multiply(e):t.multiplyUnsafe(e)},a=o(this,r).add(o(e,n));return a.is0()?void 0:a}},{key:"toAffine",value:function(t){return p(this,t)}},{key:"isTorsionFree",value:function(){var r=e.h,n=e.isTorsionFree;if(r===et)return!0;if(n)return n(t,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}},{key:"clearCofactor",value:function(){var r=e.h,n=e.clearCofactor;return r===et?this:n?n(t,this):this.multiplyUnsafe(e.h)}},{key:"toRawBytes",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return S("isCompressed",e),this.assertValidity(),i(t,this,e)}},{key:"toHex",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return S("isCompressed",t),m(this.toRawBytes(t))}}],[{key:"fromAffine",value:function(e){var n=e||{},i=n.x,o=n.y;if(!e||!r.isValid(i)||!r.isValid(o))throw new Error("invalid affine point");if(e instanceof t)throw new Error("projective point not allowed");var a=function(t){return r.eql(t,r.ZERO)};return a(i)&&a(o)?t.ZERO:new t(i,o,r.ONE)}},{key:"normalizeZ",value:function(e){var n=wt(r,e.map(function(t){return t.pz}));return e.map(function(t,e){return t.toAffine(n[e])}).map(t.fromAffine)}},{key:"fromHex",value:function(e){var r=t.fromAffine(o(q("pointHex",e)));return r.assertValidity(),r}},{key:"fromPrivateKey",value:function(e){return t.BASE.multiply(h(e))}},{key:"msm",value:function(e,r){return It(t,n,e,r)}}])}();b.BASE=new b(e.Gx,e.Gy,r.ONE),b.ZERO=new b(r.ZERO,r.ONE,r.ZERO);var E,x,k=e.endo,R=e.nBitLength,I=(E=b,x=k?Math.ceil(R/2):R,{constTimeNegate:Ot,hasPrecomputes:function(t){return 1!==Rt(t)},unsafeLadder:function(t,e){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E.ZERO,n=t;e>W;)e&G&&(r=r.add(n)),n=n.double(),e>>=G;return r},precomputeWindow:function(t,e){for(var r=xt(e,x),n=r.windows,i=r.windowSize,o=[],a=t,u=a,f=0;f<n;f++){u=a,o.push(u);for(var s=1;s<i;s++)u=u.add(a),o.push(u);a=u.double()}return o},wNAF:function(t,e,r){for(var n=E.ZERO,i=E.BASE,o=xt(t,x),a=0;a<o.windows;a++){var u=kt(r,a,o),f=u.nextN,s=u.offset,c=u.isZero,l=u.isNeg,d=u.isNegF,h=u.offsetF;r=f,c?i=i.add(Ot(d,e[h])):n=n.add(Ot(l,e[s]))}return{p:n,f:i}},wNAFUnsafe:function(t,e,r){for(var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:E.ZERO,i=xt(t,x),o=0;o<i.windows&&r!==W;o++){var a=kt(r,o,i),u=a.nextN,f=a.offset,s=a.isZero,c=a.isNeg;if(r=u,!s){var l=e[f];n=n.add(c?l.negate():l)}}return n},getPrecomputes:function(t,e,r){var n=J.get(e);return n||(n=this.precomputeWindow(e,t),1!==t&&J.set(e,r(n))),n},wNAFCached:function(t,e,r){var n=Rt(t);return this.wNAF(n,this.getPrecomputes(n,t,r),e)},wNAFCachedUnsafe:function(t,e,r,n){var i=Rt(t);return 1===i?this.unsafeLadder(t,e,n):this.wNAFUnsafe(i,this.getPrecomputes(i,t,r),e,n)},setWindowSize:function(t,e){St(e,x),$.set(t,e),J.delete(t)}});return{CURVE:e,ProjectivePoint:b,normPrivateKeyToScalar:h,weierstrassEquation:a,isWithinCurveOrder:function(t){return N(t,et,e.n)}}}function jt(t){var e,r=(e=At(t),j(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze(d({lowS:!0},e))),n=r.Fp,i=r.n,o=r.nByteLength,a=r.nBitLength,s=n.BYTES+1,l=2*n.BYTES+1;function h(t){return lt(t,i)}function v(t){return ht(t,i)}var w=Pt(d(d({},r),{},{toBytes:function(t,e,r){var i=e.toAffine(),o=n.toBytes(i.x),a=T;return S("isCompressed",r),r?a(Uint8Array.from([e.hasEvenY()?2:3]),o):a(Uint8Array.from([4]),o,n.toBytes(i.y))},fromBytes:function(t){var e=t.length,r=t[0],i=t.subarray(1);if(e!==s||2!==r&&3!==r){if(e===l&&4===r)return{x:n.fromBytes(i.subarray(0,n.BYTES)),y:n.fromBytes(i.subarray(n.BYTES,2*n.BYTES))};throw new Error("invalid Point, expected length of "+s+", or uncompressed "+l+", got "+e)}var o=B(i);if(!N(o,et,n.ORDER))throw new Error("Point is not on curve");var a,u=x(o);try{a=n.sqrt(u)}catch(c){var f=c instanceof Error?": "+c.message:"";throw new Error("Point is not on curve"+f)}return!(1&~r)!==((a&et)===et)&&(a=n.neg(a)),{x:o,y:a}}})),m=w.ProjectivePoint,b=w.normPrivateKeyToScalar,x=w.weierstrassEquation,k=w.isWithinCurveOrder;function I(t){return t>i>>et}var A=function(t,e,r){return B(t.slice(e,r))},H=function(){function t(e,r,n){f(this,t),O("r",e,et,i),O("s",r,et,i),this.r=e,this.s=r,null!=n&&(this.recovery=n),Object.freeze(this)}return c(t,[{key:"assertValidity",value:function(){}},{key:"addRecoveryBit",value:function(e){return new t(this.r,this.s,e)}},{key:"recoverPublicKey",value:function(t){var e=this.r,i=this.s,o=this.recovery,a=C(q("msgHash",t));if(null==o||![0,1,2,3].includes(o))throw new Error("recovery id invalid");var u=2===o||3===o?e+r.n:e;if(u>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");var f=1&o?"03":"02",s=m.fromHex(f+qt(u,n.BYTES)),c=v(u),l=h(-a*c),d=h(i*c),y=m.BASE.multiplyAndAddUnsafe(s,l,d);if(!y)throw new Error("point at infinify");return y.assertValidity(),y}},{key:"hasHighS",value:function(){return I(this.s)}},{key:"normalizeS",value:function(){return this.hasHighS()?new t(this.r,h(-this.s),this.recovery):this}},{key:"toDERRawBytes",value:function(){return g(this.toDERHex())}},{key:"toDERHex",value:function(){return X.hexFromSig(this)}},{key:"toCompactRawBytes",value:function(){return g(this.toCompactHex())}},{key:"toCompactHex",value:function(){var t=o;return qt(this.r,t)+qt(this.s,t)}}],[{key:"fromCompact",value:function(e){var r=o;return e=q("compactSignature",e,2*r),new t(A(e,0,r),A(e,r,2*r))}},{key:"fromDER",value:function(e){var r=X.toSig(q("DER",e));return new t(r.r,r.s)}}])}(),F={isValidPrivateKey:function(t){try{return b(t),!0}catch(e){return!1}},normPrivateKeyToScalar:b,randomPrivateKey:function(){var t=Bt(r.n);return function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=t.length,i=Et(e),o=Bt(e);if(n<16||n<o||n>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+n);var a=lt(r?R(t):B(t),e-D)+D;return r?z(a,i):E(a,i)}(r.randomBytes(t),r.n)},precompute:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.BASE;return e._setWindowSize(t),e.multiply(BigInt(3)),e}};function L(t){if("bigint"==typeof t)return!1;if(t instanceof m)return!0;var e=q("key",t).length,i=n.BYTES,a=i+1,u=2*i+1;return r.allowedPrivateKeyLengths||o===a?void 0:e===a||e===u}var Z=r.bits2int||function(t){if(t.length>8192)throw new Error("input is too large");var e=B(t),r=8*t.length-a;return r>0?e>>BigInt(r):e},C=r.bits2int_modN||function(t){return h(Z(t))},_=p(a);function U(t){return O("num < 2^"+a,t,tt,_),E(t,o)}function V(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:K;if(["recovered","canonical"].some(function(t){return t in i}))throw new Error("sign() legacy options not supported");var o=r.hash,a=r.randomBytes,u=i.lowS,f=i.prehash,s=i.extraEntropy;null==u&&(u=!0),t=q("msgHash",t),Nt(i),f&&(t=q("prehashed msgHash",o(t)));var c=C(t),l=b(e),d=[U(l),U(c)];if(null!=s&&!1!==s){var y=!0===s?a(n.BYTES):s;d.push(q("extraEntropy",y))}var p=T.apply(void 0,d),w=c;return{seed:p,k2sig:function(t){var e=Z(t);if(k(e)){var r=v(e),n=m.BASE.multiply(e).toAffine(),i=h(n.x);if(i!==tt){var o=h(r*h(w+i*l));if(o!==tt){var a=(n.x===i?0:2)|Number(n.y&et),f=o;return u&&I(o)&&(f=function(t){return I(t)?h(-t):t}(o),a^=1),new H(i,f,a)}}}}}}var K={lowS:r.lowS,prehash:!1},M={lowS:r.lowS,prehash:!1};return m.BASE._setWindowSize(8),{CURVE:r,getPublicKey:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return m.fromPrivateKey(t).toRawBytes(e)},getSharedSecret:function(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!0===L(t))throw new Error("first arg must be private key");if(!1===L(e))throw new Error("second arg must be public key");return m.fromHex(e).multiply(b(t)).toRawBytes(r)},sign:function(t,e){var n=V(t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:K),i=n.seed,o=n.k2sig,a=r;return u(a.hash.outputLen,a.nByteLength,a.hmac)(i,o)},verify:function(t,e,n){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:M,a=t;e=q("msgHash",e),n=q("publicKey",n);var u=o.lowS,f=o.prehash,s=o.format;if(Nt(o),"strict"in o)throw new Error("options.strict was renamed to lowS");if(void 0!==s&&"compact"!==s&&"der"!==s)throw new Error("format must be compact or der");var c="string"==typeof a||P(a),l=!c&&!s&&"object"===y(a)&&null!==a&&"bigint"==typeof a.r&&"bigint"==typeof a.s;if(!c&&!l)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");var d,p=void 0;try{if(l&&(p=new H(a.r,a.s)),c){try{"compact"!==s&&(p=H.fromDER(a))}catch(k){if(!(k instanceof X.Err))throw k}p||"der"===s||(p=H.fromCompact(a))}d=m.fromHex(n)}catch(R){return!1}if(!p)return!1;if(u&&p.hasHighS())return!1;f&&(e=r.hash(e));var w=p,g=w.r,b=w.s,E=C(e),B=v(b),O=h(E*B),S=h(g*B),x=null===(i=m.BASE.multiplyAndAddUnsafe(d,O,S))||void 0===i?void 0:i.toAffine();return!!x&&h(x.x)===g},ProjectivePoint:m,Signature:H,utils:F}}function Ht(t,e){var r=function(e){return jt(d(d({},t),function(t){return{hash:t,hmac:function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return Z(t,e,x.apply(void 0,n))},randomBytes:H}}(e)))};return d(d({},r(e)),{},{create:r})}function zt(t){var e=it,r=BigInt(3),n=BigInt(6),i=BigInt(11),o=BigInt(22),a=BigInt(23),u=BigInt(44),f=BigInt(88),s=t*t*t%e,c=s*s*t%e,l=dt(c,r,e)*c%e,d=dt(l,r,e)*c%e,h=dt(d,ft,e)*s%e,v=dt(h,i,e)*h%e,y=dt(v,o,e)*v%e,p=dt(y,u,e)*y%e,w=dt(p,f,e)*p%e,g=dt(w,u,e)*y%e,m=dt(g,r,e)*c%e,b=dt(m,a,e)*v%e,E=dt(b,n,e)*s%e,B=dt(E,ft,e);if(!ct.eql(ct.sqr(B),t))throw new Error("Cannot find square root");return B}return{setters:[function(t){o=t.At,u=t.B,s=t.Ct,l=t.D,h=t.Dt,v=t.Et,p=t.F,w=t.G,g=t.H,m=t.I,b=t.J,E=t.K,B=t.L,O=t.M,S=t.N,x=t.Ot,k=t.P,R=t.R,I=t.St,A=t.Tt,N=t.U,q=t.V,P=t.W,j=t.Y,H=t.kt,z=t.q,F=t.wt,T=t.z}],execute:function(){L=function(t){function e(t,r){var i;f(this,e),(i=n(this,e)).finished=!1,i.destroyed=!1,A(t);var a=o(r);if(i.iHash=t.create(),"function"!=typeof i.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");i.blockLen=i.iHash.blockLen,i.outputLen=i.iHash.outputLen;var u=i.blockLen,s=new Uint8Array(u);s.set(a.length>u?t.create().update(a).digest():a);for(var c=0;c<s.length;c++)s[c]^=54;i.iHash.update(s),i.oHash=t.create();for(var l=0;l<s.length;l++)s[l]^=106;return i.oHash.update(s),h(s),i}return a(e,t),c(e,[{key:"update",value:function(t){return F(this),this.iHash.update(t),this}},{key:"digestInto",value:function(t){F(this),s(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}},{key:"digest",value:function(){var t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}},{key:"_cloneInto",value:function(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));var e=this.oHash,r=this.iHash,n=this.finished,i=this.destroyed,o=this.blockLen,a=this.outputLen;return t.finished=n,t.destroyed=i,t.blockLen=o,t.outputLen=a,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}},{key:"clone",value:function(){return this._cloneInto()}},{key:"destroy",value:function(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}])}(I),(Z=function(t,e,r){return new L(t,e).update(r).digest()}).create=function(t,e){return new L(t,e)},C=BigInt(0),D=BigInt(1),_=BigInt(2),U=BigInt(3),V=BigInt(4),K=BigInt(5),M=BigInt(8),Y=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"],W=BigInt(0),G=BigInt(1),J=new WeakMap,$=new WeakMap,Q=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return f(this,e),n(this,e,[t])}return a(e,t),c(e)}(r(Error)),X={Err:Q,_tlv:{encode:function(t,e){var r=X.Err;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(1&e.length)throw new r("tlv.encode: unpadded data");var n=e.length/2,i=b(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");var o=n>127?b(i.length/2|128):"";return b(t)+o+i+e},decode:function(e,r){var n=X.Err,i=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(r.length<2||r[i++]!==e)throw new n("tlv.decode: wrong tlv");var o=r[i++],a=0;if(!!(128&o)){var u=127&o;if(!u)throw new n("tlv.decode(long): indefinite length not supported");if(u>4)throw new n("tlv.decode(long): byte length is too big");var f=r.subarray(i,i+u);if(f.length!==u)throw new n("tlv.decode: length bytes not complete");if(0===f[0])throw new n("tlv.decode(long): zero leftmost byte");var s,c=t(f);try{for(c.s();!(s=c.n()).done;){a=a<<8|s.value}}catch(d){c.e(d)}finally{c.f()}if(i+=u,a<128)throw new n("tlv.decode(long): not minimal encoding")}else a=o;var l=r.subarray(i,i+a);if(l.length!==a)throw new n("tlv.decode: wrong value length");return{v:l,l:r.subarray(i+a)}}},_int:{encode:function(t){var e=X.Err;if(t<tt)throw new e("integer: negative integers are not allowed");var r=b(t);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode:function(t){var e=X.Err;if(128&t[0])throw new e("invalid signature integer: negative");if(0===t[0]&&!(128&t[1]))throw new e("invalid signature integer: unnecessary leading zero");return B(t)}},toSig:function(t){var e=X,r=e.Err,n=e._int,i=e._tlv,o=q("signature",t),a=i.decode(48,o),u=a.v;if(a.l.length)throw new r("invalid signature: left bytes after parsing");var f=i.decode(2,u),s=f.v,c=f.l,l=i.decode(2,c),d=l.v;if(l.l.length)throw new r("invalid signature: left bytes after parsing");return{r:n.decode(s),s:n.decode(d)}},hexFromSig:function(t){var e=X,r=e._tlv,n=e._int,i=r.encode(2,n.encode(t.r))+r.encode(2,n.encode(t.s));return r.encode(48,i)}},tt=BigInt(0),et=BigInt(1),BigInt(2),rt=BigInt(3),nt=BigInt(4),it=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),ot=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),at=BigInt(0),ut=BigInt(1),ft=BigInt(2),st=function(t,e){return(t+e/ft)/e},ct=bt(it,void 0,void 0,{sqrt:zt}),e("secp256k1",Ht({a:at,b:BigInt(7),Fp:ct,n:ot,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:function(t){var e=ot,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-ut*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,a=BigInt("0x100000000000000000000000000000000"),u=st(o*t,e),f=st(-n*t,e),s=lt(t-u*r-f*i,e),c=lt(-u*n-f*o,e),l=s>a,d=c>a;if(l&&(s=e-s),d&&(c=e-c),s>a||c>a)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:l,k1:s,k2neg:d,k2:c}}}},l))}}})}();