!function(){function t(e){var n="function"==typeof Map?new Map:void 0;return t=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,e)}function e(){return function(t,e,n){if(c())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var a=new(t.bind.apply(t,r));return n&&y(a,n.prototype),a}(t,arguments,l(this).constructor)}return e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),y(e,t)},t(e)}function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,r,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.toStringTag||"@@toStringTag";function s(e,a,i,o){var s=a&&a.prototype instanceof c?a:c,l=Object.create(s.prototype);return n(l,"_invoke",function(e,n,a){var i,o,s,c=0,l=a||[],f=!1,y={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return i=e,o=0,s=t,y.n=n,u}};function p(e,n){for(o=e,s=n,r=0;!f&&c&&!a&&r<l.length;r++){var a,i=l[r],p=y.p,h=i[2];e>3?(a=h===n)&&(s=i[(o=i[4])?5:(o=3,3)],i[4]=i[5]=t):i[0]<=p&&((a=e<2&&p<i[1])?(o=0,y.v=n,y.n=i[1]):p<h&&(a=e<3||i[0]>n||n>h)&&(i[4]=e,i[5]=n,y.n=h,o=0))}if(a||e>1)return u;throw f=!0,n}return function(a,l,h){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&p(l,h),o=l,s=h;(r=o<2?t:s)||!f;){i||(o?o<3?(o>1&&(y.n=-1),p(o,s)):y.n=s:y.v=s);try{if(c=2,i){if(o||(a="next"),r=i[a]){if(!(r=r.call(i,s)))throw TypeError("iterator result is not an object");if(!r.done)return r;s=r.value,o<2&&(o=0)}else 1===o&&(r=i.return)&&r.call(i),o<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),o=1);i=t}else if((r=(f=y.n<0)?s:e.call(n,y))!==u)break}catch(r){i=t,o=1,s=r}finally{c=1}}return{value:r,done:f}}}(e,i,o),!0),l}var u={};function c(){}function l(){}function f(){}r=Object.getPrototypeOf;var y=[][i]?r(r([][i]())):(n(r={},i,function(){return this}),r),p=f.prototype=c.prototype=Object.create(y);function h(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,n(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return l.prototype=f,n(p,"constructor",f),n(f,"constructor",l),l.displayName="GeneratorFunction",n(f,o,"GeneratorFunction"),n(p),n(p,o,"Generator"),n(p,i,function(){return this}),n(p,"toString",function(){return"[object Generator]"}),(e=function(){return{w:s,m:h}})()}function n(t,e,r,a){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}n=function(t,e,r,a){function o(e,r){n(t,e,function(t){return this._invoke(e,r,t)})}e?i?i(t,e,{value:r,enumerable:!a,configurable:!a,writable:!a}):t[e]=r:(o("next",0),o("throw",1),o("return",2))},n(t,e,r,a)}function r(t,e,n,r,a,i,o){try{var s=t[i](o),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,a)}function a(t){return function(){var e=this,n=arguments;return new Promise(function(a,i){var o=t.apply(e,n);function s(t){r(o,a,i,s,u,"next",t)}function u(t){r(o,a,i,s,u,"throw",t)}s(void 0)})}}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,v(r.key),r)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e,n){return e=l(e),function(t,e){if(e&&("object"==g(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,c()?Reflect.construct(e,n||[],l(t).constructor):e.apply(t,n))}function c(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(c=function(){return!!t})()}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y(t,e)}function y(t,e){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},y(t,e)}function p(t){return function(t){if(Array.isArray(t))return S(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||w(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach(function(e){m(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function m(t,e,n){return(e=v(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v(t){var e=function(t,e){if("object"!=g(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==g(e)?e:e+""}function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function b(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,i,o,s=[],u=!0,c=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(t){c=!0,a=t}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return s}}(t,e)||w(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(t,e){if(t){if("string"==typeof t)return S(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(t,e):void 0}}function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function k(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return O(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,i=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function O(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}System.register(["./vendor-legacy-Bs1d-Rfb.js"],function(n,r){var i,c,l,y,h,v,w,S,O,T,P,_,j,I,B,M,x,E,A,R,C,q,H,N,D,G,V,L,F,W,z,U,K,$,J,Z,Q,X,Y,tt,et;function nt(t,e){return M(function(t){var e="string"==typeof t?h(t):"string"==typeof t.raw?t.raw:P(t.raw),n=h("".concat(x).concat(i(e)));return O([n,e])}(t),e)}function rt(t){var e=t.domain;return["string"==typeof(null==e?void 0:e.name)&&{name:"name",type:"string"},(null==e?void 0:e.version)&&{name:"version",type:"string"},("number"==typeof(null==e?void 0:e.chainId)||"bigint"==typeof(null==e?void 0:e.chainId))&&{name:"chainId",type:"uint256"},(null==e?void 0:e.verifyingContract)&&{name:"verifyingContract",type:"address"},(null==e?void 0:e.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function at(t){if("address"===t||"bool"===t||"string"===t||t.startsWith("bytes")||t.startsWith("uint")||t.startsWith("int"))throw new R({type:t})}function it(t){var e=t.domain,n=void 0===e?{}:e,r=t.message,a=t.primaryType,o=d({EIP712Domain:rt({domain:n})},t.types);!function(t){var e=t.domain,n=t.message,r=t.primaryType,a=t.types,o=function(t,e){var n,r=k(t);try{for(r.s();!(n=r.n()).done;){var s=n.value,u=s.name,f=s.type,p=e[u],h=f.match(T);if(h&&("number"==typeof p||"bigint"==typeof p)){var d=b(h,3),m=(d[0],d[1]),v=d[2];y(p,{signed:"int"===m,size:Number.parseInt(v,10)/8})}if("address"===f&&"string"==typeof p&&!S(p))throw new l({address:p});var g=f.match(j);if(g){var w=b(g,2),O=(w[0],w[1]);if(O&&i(p)!==Number.parseInt(O,10))throw new c({expectedSize:Number.parseInt(O,10),givenSize:i(p)})}var P=a[f];P&&(at(f),o(P,p))}}catch(_){r.e(_)}finally{r.f()}};if(a.EIP712Domain&&e){if("object"!==g(e))throw new E({domain:e});o(a.EIP712Domain,e)}if("EIP712Domain"!==r){if(!a[r])throw new A({primaryType:r,types:a});o(a[r],n)}}({domain:n,message:r,primaryType:a,types:o});var s=["0x1901"];return n&&s.push(function(t){var e=t.domain,n=t.types;return ot({data:e,primaryType:"EIP712Domain",types:n})}({domain:n,types:o})),"EIP712Domain"!==a&&s.push(ot({data:r,primaryType:a,types:o})),M(O(s))}function ot(t){var e=st({data:t.data,primaryType:t.primaryType,types:t.types});return M(e)}function st(t){var e,n=t.data,r=t.primaryType,a=t.types,i=[{type:"bytes32"}],o=[ut({primaryType:r,types:a})],s=k(a[r]);try{for(s.s();!(e=s.n()).done;){var u=e.value,c=b(lt({types:a,name:u.name,type:u.type,value:n[u.name]}),2),l=c[0],f=c[1];i.push(l),o.push(f)}}catch(y){s.e(y)}finally{s.f()}return B(i,o)}function ut(t){var e=t.primaryType,n=t.types,r=v(function(t){var e=t.primaryType,n=t.types,r="",a=ct({primaryType:e,types:n});a.delete(e);var i,o=[e].concat(p(Array.from(a).sort())),s=k(o);try{for(s.s();!(i=s.n()).done;){var u=i.value;r+="".concat(u,"(").concat(n[u].map(function(t){var e=t.name,n=t.type;return"".concat(n," ").concat(e)}).join(","),")")}}catch(c){s.e(c)}finally{s.f()}return r}({primaryType:e,types:n}));return M(r)}function ct(t){var e,n=t.primaryType,r=t.types,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set,i=null===(e=n.match(/^[0-9A-Z_a-z]*/))||void 0===e?void 0:e[0];if(a.has(i)||void 0===r[i])return a;a.add(i);var o,s=k(r[i]);try{for(s.s();!(o=s.n()).done;){ct({primaryType:o.value.type,types:r},a)}}catch(u){s.e(u)}finally{s.f()}return a}function lt(t){var e=t.types,n=t.name,r=t.type,a=t.value;if(void 0!==e[r])return[{type:"bytes32"},M(st({data:a,primaryType:r,types:e}))];if("bytes"===r)return a="0x".concat((a.length%2?"0":"")+a.slice(2)),[{type:"bytes32"},M(a)];if("string"===r)return[{type:"bytes32"},M(v(a))];if(r.lastIndexOf("]")===r.length-1){var i=r.slice(0,r.lastIndexOf("[")),o=a.map(function(t){return lt({name:n,type:i,types:e,value:t})});return[{type:"bytes32"},M(B(o.map(function(t){return b(t,1)[0]}),o.map(function(t){return b(t,2)[1]})))]}return[{type:r},a]}return n({Methods:void 0,RestrictedMethods:void 0}),{setters:[function(t){i=t.Gt,c=t.Ht,l=t.It,y=t.Mt,h=t.Nt,v=t.Pt,w=t.Wt,S=t.bt,O=t.gt,T=t.ht,P=t.jt,_=t.lt,j=t.mt,I=t.ot,B=t.pt,M=t.xt}],execute:function(){var r;x="Ethereum Signed Message:\n",E=function(t){function e(t){var n=t.domain;return s(this,e),u(this,e,['Invalid domain "'.concat(I(n),'".'),{metaMessages:["Must be a valid EIP-712 domain."]}])}return f(e,t),o(e)}(w),A=function(t){function e(t){var n=t.primaryType,r=t.types;return s(this,e),u(this,e,["Invalid primary type `".concat(n,"` must be one of `").concat(JSON.stringify(Object.keys(r)),"`."),{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]}])}return f(e,t),o(e)}(w),R=function(t){function e(t){var n=t.type;return s(this,e),u(this,e,['Struct type "'.concat(n,'" is invalid.'),{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"}])}return f(e,t),o(e)}(w),n("getSDKVersion",function(){return"9.1.0"}),C=function(t){return t.toString(16).padStart(2,"0")},q=function(t){var e=new Uint8Array((t||40)/2);return window.crypto.getRandomValues(e),Array.from(e,C).join("")},H=function(){return"undefined"!=typeof window?q(10):(new Date).getTime().toString(36)},n("MessageFormatter",N=o(function t(){s(this,t)})),N.makeRequest=function(t,e){return{id:H(),method:t,params:e,env:{sdkVersion:"9.1.0"}}},N.makeResponse=function(t,e,n){return{id:t,success:!0,version:n,data:e}},N.makeErrorResponse=function(t,e,n){return{id:t,success:!1,error:e,version:n}},(r=D||n("Methods",D={})).sendTransactions="sendTransactions",r.rpcCall="rpcCall",r.getChainInfo="getChainInfo",r.getSafeInfo="getSafeInfo",r.getTxBySafeTxHash="getTxBySafeTxHash",r.getSafeBalances="getSafeBalances",r.signMessage="signMessage",r.signTypedMessage="signTypedMessage",r.getEnvironmentInfo="getEnvironmentInfo",r.getOffChainSignature="getOffChainSignature",r.requestAddressBook="requestAddressBook",r.wallet_getPermissions="wallet_getPermissions",r.wallet_requestPermissions="wallet_requestPermissions",(G||n("RestrictedMethods",G={})).requestAddressBook="requestAddressBook",V=o(function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];s(this,t),this.allowedOrigins=null,this.callbacks=new Map,this.debugMode=!1,this.isServer="undefined"==typeof window,this.isValidMessage=function(t){var n=t.origin,r=t.data,a=t.source,i=!r,o=!e.isServer&&a===window.parent,s=void 0!==r.version&&parseInt(r.version.split(".")[0]),u="number"==typeof s&&s>=1,c=!0;return Array.isArray(e.allowedOrigins)&&(c=void 0!==e.allowedOrigins.find(function(t){return t.test(n)})),!i&&o&&u&&c},this.logIncomingMessage=function(t){console.info("Safe Apps SDK v1: A message was received from origin ".concat(t.origin,". "),t.data)},this.onParentMessage=function(t){e.isValidMessage(t)&&(e.debugMode&&e.logIncomingMessage(t),e.handleIncomingMessage(t.data))},this.handleIncomingMessage=function(t){var n=t.id,r=e.callbacks.get(n);r&&(r(t),e.callbacks.delete(n))},this.send=function(t,n){var r=N.makeRequest(t,n);if(e.isServer)throw new Error("Window doesn't exist");return window.parent.postMessage(r,"*"),new Promise(function(t,n){e.callbacks.set(r.id,function(e){e.success?t(e):n(new Error(e.error))})})},this.allowedOrigins=n,this.debugMode=r,this.isServer||window.addEventListener("message",this.onParentMessage)}),L=V,n("isObjectEIP712TypedData",F=function(t){return"object"===g(t)&&null!=t&&"domain"in t&&"types"in t&&"message"in t}),W=function(){return o(function t(e){s(this,t),this.communicator=e},[{key:"getBySafeTxHash",value:(i=a(e().m(function t(n){return e().w(function(t){for(;;)switch(t.n){case 0:if(n){t.n=1;break}throw new Error("Invalid safeTxHash");case 1:return t.n=2,this.communicator.send(D.getTxBySafeTxHash,{safeTxHash:n});case 2:return t.a(2,t.v.data)}},t,this)})),function(t){return i.apply(this,arguments)})},{key:"signMessage",value:(r=a(e().m(function t(n){var r;return e().w(function(t){for(;;)switch(t.n){case 0:return r={message:n},t.n=1,this.communicator.send(D.signMessage,r);case 1:return t.a(2,t.v.data)}},t,this)})),function(t){return r.apply(this,arguments)})},{key:"signTypedMessage",value:(n=a(e().m(function t(n){return e().w(function(t){for(;;)switch(t.n){case 0:if(F(n)){t.n=1;break}throw new Error("Invalid typed data");case 1:return t.n=2,this.communicator.send(D.signTypedMessage,{typedData:n});case 2:return t.a(2,t.v.data)}},t,this)})),function(t){return n.apply(this,arguments)})},{key:"send",value:(t=a(e().m(function t(n){var r,a,i;return e().w(function(t){for(;;)switch(t.n){case 0:if(r=n.txs,a=n.params,r&&r.length){t.n=1;break}throw new Error("No transactions were passed");case 1:return i={txs:r,params:a},t.n=2,this.communicator.send(D.sendTransactions,i);case 2:return t.a(2,t.v.data)}},t,this)})),function(e){return t.apply(this,arguments)})}]);var t,n,r,i}(),n("RPC_CALLS",z={eth_call:"eth_call",eth_gasPrice:"eth_gasPrice",eth_getLogs:"eth_getLogs",eth_getBalance:"eth_getBalance",eth_getCode:"eth_getCode",eth_getBlockByHash:"eth_getBlockByHash",eth_getBlockByNumber:"eth_getBlockByNumber",eth_getStorageAt:"eth_getStorageAt",eth_getTransactionByHash:"eth_getTransactionByHash",eth_getTransactionReceipt:"eth_getTransactionReceipt",eth_getTransactionCount:"eth_getTransactionCount",eth_estimateGas:"eth_estimateGas",safe_setSettings:"safe_setSettings"}),U={defaultBlockParam:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:"latest"},returnFullTxObjectParam:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]},blockNumberToHex:function(t){return Number.isInteger(t)?"0x".concat(t.toString(16)):t}},K=function(){return o(function t(e){var n=this;s(this,t),this.communicator=e,this.call=this.buildRequest({call:z.eth_call,formatters:[null,U.defaultBlockParam]}),this.getBalance=this.buildRequest({call:z.eth_getBalance,formatters:[null,U.defaultBlockParam]}),this.getCode=this.buildRequest({call:z.eth_getCode,formatters:[null,U.defaultBlockParam]}),this.getStorageAt=this.buildRequest({call:z.eth_getStorageAt,formatters:[null,U.blockNumberToHex,U.defaultBlockParam]}),this.getPastLogs=this.buildRequest({call:z.eth_getLogs}),this.getBlockByHash=this.buildRequest({call:z.eth_getBlockByHash,formatters:[null,U.returnFullTxObjectParam]}),this.getBlockByNumber=this.buildRequest({call:z.eth_getBlockByNumber,formatters:[U.blockNumberToHex,U.returnFullTxObjectParam]}),this.getTransactionByHash=this.buildRequest({call:z.eth_getTransactionByHash}),this.getTransactionReceipt=this.buildRequest({call:z.eth_getTransactionReceipt}),this.getTransactionCount=this.buildRequest({call:z.eth_getTransactionCount,formatters:[null,U.defaultBlockParam]}),this.getGasPrice=this.buildRequest({call:z.eth_gasPrice}),this.getEstimateGas=function(t){return n.buildRequest({call:z.eth_estimateGas})([t])},this.setSafeSettings=this.buildRequest({call:z.safe_setSettings})},[{key:"buildRequest",value:function(t){var n=this,r=t.call,i=t.formatters;return function(){var t=a(e().m(function t(a){var o;return e().w(function(t){for(;;)switch(t.n){case 0:return i&&Array.isArray(a)&&i.forEach(function(t,e){t&&(a[e]=t(a[e]))}),o={call:r,params:a||[]},t.n=1,n.communicator.send(D.rpcCall,o);case 1:return t.a(2,t.v.data)}},t)}));return function(e){return t.apply(this,arguments)}}()}}])}(),$=4001,J=function(t){function e(t,n,r){var a;return s(this,e),(a=u(this,e,[t])).code=n,a.data=r,Object.setPrototypeOf(a,e.prototype),a}return f(e,t),o(e)}(t(Error)),Z=function(){return o(function t(e){s(this,t),this.communicator=e},[{key:"getPermissions",value:(n=a(e().m(function t(){return e().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.communicator.send(D.wallet_getPermissions,void 0);case 1:return t.a(2,t.v.data)}},t,this)})),function(){return n.apply(this,arguments)})},{key:"requestPermissions",value:(t=a(e().m(function t(n){return e().w(function(t){for(;;)switch(t.p=t.n){case 0:if(this.isPermissionRequestValid(n)){t.n=1;break}throw new J("Permissions request is invalid",$);case 1:return t.p=1,t.n=2,this.communicator.send(D.wallet_requestPermissions,n);case 2:return t.a(2,t.v.data);case 3:throw t.p=3,t.v,new J("Permissions rejected",$);case 4:return t.a(2)}},t,this,[[1,3]])})),function(e){return t.apply(this,arguments)})},{key:"isPermissionRequestValid",value:function(t){return t.every(function(t){return"object"===g(t)&&Object.keys(t).every(function(t){return!!Object.values(G).includes(t)})})}}]);var t,n}(),Q=function(t,e){return e.some(function(e){return e.parentCapability===t})},X=function(){return function(t,n,r){var i=r.value;return r.value=a(e().m(function t(){var r,a;return e().w(function(t){for(;;)switch(t.n){case 0:return r=new Z(this.communicator),t.n=1,r.getPermissions();case 1:if(a=t.v,Q(n,a)){t.n=3;break}return t.n=2,r.requestPermissions([m({},n,{})]);case 2:a=t.v;case 3:if(Q(n,a)){t.n=4;break}throw new J("Permissions rejected",$);case 4:return t.a(2,i.apply(this))}},t,this)})),r}},Y=function(t,e,n,r){var a,i=arguments.length,o=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":g(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,n,o):a(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o},tt=function(){return o(function t(e){s(this,t),this.communicator=e},[{key:"getChainInfo",value:(p=a(e().m(function t(){return e().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.communicator.send(D.getChainInfo,void 0);case 1:return t.a(2,t.v.data)}},t,this)})),function(){return p.apply(this,arguments)})},{key:"getInfo",value:(y=a(e().m(function t(){return e().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.communicator.send(D.getSafeInfo,void 0);case 1:return t.a(2,t.v.data)}},t,this)})),function(){return y.apply(this,arguments)})},{key:"experimental_getBalances",value:(f=a(e().m(function t(){var n,r,a=arguments;return e().w(function(t){for(;;)switch(t.n){case 0:return n=(a.length>0&&void 0!==a[0]?a[0]:{}).currency,r=void 0===n?"usd":n,t.n=1,this.communicator.send(D.getSafeBalances,{currency:r});case 1:return t.a(2,t.v.data)}},t,this)})),function(){return f.apply(this,arguments)})},{key:"check1271Signature",value:(l=a(e().m(function t(n){var r,a,i,o,s,u=arguments;return e().w(function(t){for(;;)switch(t.p=t.n){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"0x",t.n=1,this.getInfo();case 1:return a=t.v,i=_({abi:[{constant:!1,inputs:[{name:"_dataHash",type:"bytes32"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[n,r]}),o={call:z.eth_call,params:[{to:a.safeAddress,data:i},"latest"]},t.p=2,t.n=3,this.communicator.send(D.rpcCall,o);case 3:return s=t.v.data.slice(0,10).toLowerCase(),t.a(2,"0x1626ba7e"===s);case 4:return t.p=4,t.v,t.a(2,!1)}},t,this,[[2,4]])})),function(t){return l.apply(this,arguments)})},{key:"check1271SignatureBytes",value:(c=a(e().m(function t(n){var r,a,i,o,s,u=arguments;return e().w(function(t){for(;;)switch(t.p=t.n){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"0x",t.n=1,this.getInfo();case 1:return a=t.v,i=_({abi:[{constant:!1,inputs:[{name:"_data",type:"bytes"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[n,r]}),o={call:z.eth_call,params:[{to:a.safeAddress,data:i},"latest"]},t.p=2,t.n=3,this.communicator.send(D.rpcCall,o);case 3:return s=t.v.data.slice(0,10).toLowerCase(),t.a(2,"0x20c13b0b"===s);case 4:return t.p=4,t.v,t.a(2,!1)}},t,this,[[2,4]])})),function(t){return c.apply(this,arguments)})},{key:"calculateMessageHash",value:function(t){return nt(t)}},{key:"calculateTypedMessageHash",value:function(t){var e="object"===g(t.domain.chainId)?t.domain.chainId.toNumber():Number(t.domain.chainId),n=t.primaryType;if(!n){var r=Object.values(t.types),a=Object.keys(t.types).filter(function(t){return r.every(function(e){return e.every(function(e){return e.type.replace("[","").replace("]","")!==t})})});if(0===a.length||a.length>1)throw new Error("Please specify primaryType");n=a[0]}return it({message:t.message,domain:d(d({},t.domain),{},{chainId:e,verifyingContract:t.domain.verifyingContract,salt:t.domain.salt}),types:t.types,primaryType:n})}},{key:"getOffChainSignature",value:(u=a(e().m(function t(n){return e().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.communicator.send(D.getOffChainSignature,n);case 1:return t.a(2,t.v.data)}},t,this)})),function(t){return u.apply(this,arguments)})},{key:"isMessageSigned",value:(i=a(e().m(function t(n){var r,i,o=this,s=arguments;return e().w(function(t){for(;;)switch(t.n){case 0:if(r=s.length>1&&void 0!==s[1]?s[1]:"0x","string"==typeof n&&(i=function(){var t=a(e().m(function t(){var a;return e().w(function(t){for(;;)switch(t.n){case 0:return a=o.calculateMessageHash(n),t.n=1,o.isMessageHashSigned(a,r);case 1:return t.a(2,t.v)}},t)}));return function(){return t.apply(this,arguments)}}()),F(n)&&(i=function(){var t=a(e().m(function t(){var a;return e().w(function(t){for(;;)switch(t.n){case 0:return a=o.calculateTypedMessageHash(n),t.n=1,o.isMessageHashSigned(a,r);case 1:return t.a(2,t.v)}},t)}));return function(){return t.apply(this,arguments)}}()),!i){t.n=2;break}return t.n=1,i();case 1:return t.a(2,t.v);case 2:throw new Error("Invalid message type");case 3:return t.a(2)}},t)})),function(t){return i.apply(this,arguments)})},{key:"isMessageHashSigned",value:(r=a(e().m(function t(n){var r,a,i,o,s,u=arguments;return e().w(function(t){for(;;)switch(t.n){case 0:r=u.length>1&&void 0!==u[1]?u[1]:"0x",a=[this.check1271Signature.bind(this),this.check1271SignatureBytes.bind(this)],i=0,o=a;case 1:if(!(i<o.length)){t.n=4;break}return s=o[i],t.n=2,s(n,r);case 2:if(!t.v){t.n=3;break}return t.a(2,!0);case 3:i++,t.n=1;break;case 4:return t.a(2,!1)}},t,this)})),function(t){return r.apply(this,arguments)})},{key:"getEnvironmentInfo",value:(n=a(e().m(function t(){return e().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.communicator.send(D.getEnvironmentInfo,void 0);case 1:return t.a(2,t.v.data)}},t,this)})),function(){return n.apply(this,arguments)})},{key:"requestAddressBook",value:(t=a(e().m(function t(){return e().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.communicator.send(D.requestAddressBook,void 0);case 1:return t.a(2,t.v.data)}},t,this)})),function(){return t.apply(this,arguments)})}]);var t,n,r,i,u,c,l,f,y,p}(),Y([X()],tt.prototype,"requestAddressBook",null),et=o(function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,t);var n=e.allowedDomains,r=void 0===n?null:n,a=e.debug,i=void 0!==a&&a;this.communicator=new L(r,i),this.eth=new K(this.communicator),this.txs=new W(this.communicator),this.safe=new tt(this.communicator),this.wallet=new Z(this.communicator)}),n("default",et)}}})}();