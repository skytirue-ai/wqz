import{A as h,B as k,G as g,K as O,L as H,M as P,N as z,P as _,T as K,W as C,_ as ee,a as ne,b as L,f as te,g as V,i as oe,k as U,q as c,s as G,v as q,w as y,x as f,y as e}from"./vue-vendor-CWx2MFcM.js";import{i as ae,n as R,r as J,t as ie}from"./useChainId-CAid8epJ.js";import{Gt as Q,n as se,s as le}from"./index-Czz9nKpB.js";import{t as re}from"./Logo-F4CliXeD.js";async function ce(i,l){var s;let o;if(typeof l.connector=="function"?o=i._internal.connectors.setup(l.connector):o=l.connector,o.uid===i.state.current)throw new le;try{i.setState(a=>({...a,status:"connecting"})),o.emitter.emit("message",{type:"connecting"});const{connector:u,...v}=l,d=await o.connect(v);return o.emitter.off("connect",i._internal.events.connect),o.emitter.on("change",i._internal.events.change),o.emitter.on("disconnect",i._internal.events.disconnect),await((s=i.storage)==null?void 0:s.setItem("recentConnectorId",o.id)),i.setState(a=>({...a,connections:new Map(a.connections).set(o.uid,{accounts:v.withCapabilities?d.accounts.map(t=>typeof t=="object"?t.address:t):d.accounts,chainId:d.chainId,connector:o}),current:o.uid,status:"connected"})),{accounts:v.withCapabilities?d.accounts.map(a=>typeof a=="object"?a:{address:a,capabilities:{}}):d.accounts,chainId:d.chainId}}catch(u){throw i.setState(v=>({...v,status:v.current?"connected":"disconnected"})),u}}var I=[];function ue(i){const l=i.connectors;return I.length===l.length&&I.every((o,s)=>o===l[s])?I:(I=l,l)}function de(i,l){const{onChange:o}=l;return i._internal.connectors.subscribe((s,u)=>{o(Object.values(s),u)})}function ge(i){return{mutationFn(l){return ce(i,l)},mutationKey:["connect"]}}function ve(i={}){const l=J(i),o=k(ue(l)),s=de(l,{onChange(u){o.value=u}});return H(()=>s()),o}function pe(i={}){const{mutation:l}=i,o=J(i),s=ge(o),{mutate:u,mutateAsync:v,...d}=ae({...l,...s}),a=o.subscribe(({status:t})=>t,(t,p)=>{p==="connected"&&t==="disconnected"&&d.reset()});return H(()=>a()),{...d,connect:u,connectAsync:v,connectors:ve({config:o}).value}}var N="/assets/images/en-CmD4OKsn.svg",Z="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cmask%20id='mask0_1627_82'%20style='mask-type:alpha'%20maskUnits='userSpaceOnUse'%20x='0'%20y='0'%20width='24'%20height='24'%3e%3ccircle%20cx='12'%20cy='12'%20r='12'%20fill='%23D9D9D9'/%3e%3c/mask%3e%3cg%20mask='url(%23mask0_1627_82)'%3e%3crect%20y='3'%20width='36'%20height='25.7143'%20rx='1.71429'%20fill='white'/%3e%3crect%20x='-1'%20y='-2'%20width='36'%20height='31'%20fill='%23F1361D'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M8.57132%2013.5772L5.54843%2015.7321L6.66378%2012.1912L3.68018%209.98222L7.39239%209.94879L8.57132%206.42859L9.75025%209.94879L13.4625%209.98222L10.4789%2012.1912L11.5942%2015.7321L8.57132%2013.5772Z'%20fill='%23FFDC42'/%3e%3cpath%20d='M17.3504%2012.204L17.6536%2013.4874L18.9678%2013.5956L17.841%2014.2805L18.1442%2015.5639L17.1445%2014.7038L16.0177%2015.3887L16.5267%2014.1723L15.5271%2013.3122L16.8413%2013.4205L17.3504%2012.204Z'%20fill='%23FFDC42'/%3e%3cpath%20d='M16.502%208.18678L17.3613%209.18701L18.5781%208.67883L17.8924%209.80518L18.7517%2010.8054L17.4686%2010.5013L16.7828%2011.6277L16.6756%2010.3134L15.3924%2010.0093L16.6093%209.50108L16.502%208.18678Z'%20fill='%23FFDC42'/%3e%3cpath%20d='M13.192%205.23288L14.3958%205.77107L15.2797%204.79245L15.1399%206.10369L16.3437%206.64188L15.0534%206.91408L14.9136%208.22532L14.256%207.08231L12.9657%207.35451L13.8496%206.37589L13.192%205.23288Z'%20fill='%23FFDC42'/%3e%3cpath%20d='M15.3207%2016.3952L15.0556%2017.686L16.2012%2018.337L14.8917%2018.4837L14.6265%2019.7745L14.0823%2018.5744L12.7728%2018.721L13.746%2017.8327L13.2019%2016.6326L14.3475%2017.2836L15.3207%2016.3952Z'%20fill='%23FFDC42'/%3e%3c/g%3e%3c/svg%3e",me={class:"navbat__ca"},he={class:"navbar"},fe={class:"navbar__content"},be={href:"/",class:"navbar__logo-link"},ye={class:"navbar__logo"},Ce={class:"navbar__links","aria-label":"Primary"},we={class:"navbar__ca"},ke={class:"connect_btn"},_e={key:1,class:"btn btn--secondary"},Le={class:"flag-display"},$e=["src"],Me=["src"],xe={key:2,class:"flag-emoji"},Ie={class:"language-selector mobile-lang",role:"button","aria-label":"切换语言"},ze={class:"flag-display"},Ae=["src"],Se=["src"],De={key:2,class:"flag-emoji"},Fe=K({__name:"Header",props:{isMiningPage:{type:Boolean},showMiningMenu:{type:Boolean},toggleMiningMenu:{type:Function}},emits:["clicklanguage","connect"],setup(i,{emit:l}){const{locale:o}=G(),s=l,{address:u,isConnected:v}=R(),d=async()=>{try{s("connect")}catch(r){console.log("Connect failed:",r)}},a=r=>r?"".concat(r.slice(0,6),"...").concat(r.slice(-6)):"",t=()=>{s("clicklanguage")},p=k(!1),w=()=>{p.value=!1};return(r,b)=>{const $=P("router-link");return h(),f("div",me,[e("header",he,[e("div",fe,[e("a",be,[e("div",ye,[y(re),b[1]||(b[1]=e("span",{class:"navbar__title is_pc"},"AICredit Chain（AIC）",-1))])]),e("nav",Ce,[y($,{to:"/",class:g(["toolbar-item",{active:r.$route.path==="/"}])},{default:_(()=>[e("div",{class:g(["icon",r.$route.path==="/"?"home-active":"home-icon"])},null,2),e("span",null,c(r.$t("tab_bar.home")),1)]),_:1},8,["class"]),e("div",{class:g(["toolbar-item",{active:i.isMiningPage||i.showMiningMenu}]),onClick:b[0]||(b[0]=(...x)=>i.toggleMiningMenu&&i.toggleMiningMenu(...x))},[e("div",{class:g(["icon",i.isMiningPage||i.showMiningMenu?"mining-icon-active":"mining-icon"])},null,2),e("span",null,c(r.$t("tab_bar.mining")),1)],2),y($,{to:"/promote",class:g(["toolbar-item",{active:r.$route.path==="/promote"}])},{default:_(()=>[e("div",{class:g(["icon",r.$route.path==="/promote"?"promote-icon-active":"promote-icon"])},null,2),e("span",null,c(r.$t("tab_bar.promotion")),1)]),_:1},8,["class"]),y($,{to:"/ranking",class:g(["toolbar-item",{active:r.$route.path==="/ranking"}])},{default:_(()=>[e("div",{class:g(["icon",r.$route.path==="/ranking"?"ranking-icon-active":"ranking-icon"])},null,2),e("span",null,c(r.$t("tab_bar.ranking")),1)]),_:1},8,["class"])])]),e("div",we,[e("div",ke,[C(v)?(h(),f("button",_e,c(a(C(u))),1)):(h(),f("button",{key:0,class:"btn btn--secondary",onClick:d},"Connect Wallet"))]),b[3]||(b[3]=e("div",{class:"line"},null,-1)),e("div",{class:"language-selector",role:"button","aria-label":"切换语言",onClick:t},[e("div",Le,[C(o)==="en"?(h(),f("img",{key:0,src:C(N),alt:"English",class:"flag-icon"},null,8,$e)):C(o)==="zh"?(h(),f("img",{key:1,src:C(Z),alt:"中文",class:"flag-icon"},null,8,Me)):(h(),f("span",xe,"🇹🇼"))]),b[2]||(b[2]=e("span",{class:"arrow-down"},"▼",-1))])])]),y(te,{name:"fade"},{default:_(()=>[p.value?(h(),f("div",{key:0,class:"mobile-menu",onClick:V(w,["self"])},[e("a",{href:"#home",onClick:w},c(r.$t("navigation.home")),1),e("a",{href:"#About",onClick:w},c(r.$t("navigation.about")),1),e("a",{href:"#UseCases",onClick:w},c(r.$t("navigation.useCases")),1),e("a",{href:"#Technology",onClick:w},c(r.$t("navigation.technology")),1),e("a",{href:"#Ecosystem",onClick:w},c(r.$t("navigation.ecosystem")),1),e("div",Ie,[e("div",ze,[C(o)==="en"?(h(),f("img",{key:0,src:C(N),alt:"English",class:"flag-icon"},null,8,Ae)):C(o)==="zh"?(h(),f("img",{key:1,src:C(Z),alt:"中文",class:"flag-icon"},null,8,Se)):(h(),f("span",De,"🇹🇼"))]),b[4]||(b[4]=e("span",{class:"arrow-down"},"▼",-1))])])):L("",!0)]),_:1})])}}}),Be=Q(Fe,[["__scopeId","data-v-61999111"]]),je={key:0,style:{position:"fixed",top:"0",left:"0",right:"0",bottom:"0","z-index":"9999",display:"flex","align-items":"center","justify-content":"center"}},Ee={style:{background:"#1d1e2a","border-radius":"12px",padding:"24px",margin:"16px",width:"100%","max-width":"384px",position:"relative","box-shadow":"0 10px 25px rgba(0, 0, 0, 0.3)"}},Oe={style:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"16px"}},Pe={style:{"font-size":"18px","font-weight":"600",margin:"0",color:"#f5f5f5"}},Te={style:{width:"20px",height:"20px"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},We={style:{display:"flex","flex-direction":"column",gap:"8px"}},Ue={style:{"text-align":"left",flex:"1"}},qe={style:{"font-weight":"500"}},Ne={style:{"font-size":"14px",color:"#d1d5db"}},Ze={key:0,style:{width:"20px",height:"20px",color:"#3b82f6"},fill:"currentColor",viewBox:"0 0 20 20"},He={style:{"text-align":"left",flex:"1"}},Ke={style:{"font-weight":"500"}},Ve={style:{"font-size":"14px",color:"#d1d5db"}},Ge={key:0,style:{width:"20px",height:"20px",color:"#3b82f6"},fill:"currentColor",viewBox:"0 0 20 20"},Re={style:{"text-align":"left",flex:"1"}},Je={style:{"font-weight":"500"}},Qe={style:{"font-size":"14px",color:"#d1d5db"}},Xe={key:0,style:{width:"20px",height:"20px",color:"#3b82f6"},fill:"currentColor",viewBox:"0 0 20 20"},Ye={__name:"LanguageModal",props:{isOpen:Boolean},emits:["close","languageChange"],setup(i,{emit:l}){const o=l,{locale:s}=G(),u=k(s.value);z(s,a=>{u.value=a},{immediate:!0});const v=a=>u.value===a?"background: #374151; border-color: #60a5fa;":"",d=a=>{u.value=a,s.value=a,se(a),o("languageChange",a),o("close")};return(a,t)=>i.isOpen?(h(),f("div",je,[e("div",{style:{position:"absolute",top:"0",left:"0",right:"0",bottom:"0",background:"rgba(0, 0, 0, 0.6)"},onClick:t[0]||(t[0]=p=>a.$emit("close"))}),e("div",Ee,[e("div",Oe,[e("h3",Pe,c(a.$t("languages.selectLanguage")),1),e("button",{style:{padding:"4px",background:"none",border:"none","border-radius":"4px",cursor:"pointer",transition:"background-color 0.2s",color:"#2f3042"},onClick:t[1]||(t[1]=p=>a.$emit("close")),onMouseover:t[2]||(t[2]=p=>p.target.style.backgroundColor="#4A4A4A"),onMouseout:t[3]||(t[3]=p=>p.target.style.backgroundColor="transparent")},[(h(),f("svg",Te,[...t[7]||(t[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)])]))],32)]),e("div",We,[e("button",{style:O([v("zh"),{width:"100%",display:"flex","align-items":"center",padding:"12px",border:"1px solid #4a4a4a","border-radius":"8px",cursor:"pointer",transition:"all 0.2s",background:"#2f3042",color:"#f5f5f5"}]),onClick:t[4]||(t[4]=p=>d("zh"))},[t[9]||(t[9]=e("span",{style:{"font-size":"24px","margin-right":"12px"}},"🇨🇳",-1)),e("div",Ue,[e("div",qe,c(a.$t("languages.zh")),1),e("div",Ne,c(a.$t("languages.zhDesc")),1)]),u.value==="zh"?(h(),f("svg",Ze,[...t[8]||(t[8]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"},null,-1)])])):L("",!0)],4),e("button",{style:O([v("en"),{width:"100%",display:"flex","align-items":"center",padding:"12px",border:"1px solid #4a4a4a","border-radius":"8px",cursor:"pointer",transition:"all 0.2s",background:"#2f3042",color:"#f5f5f5"}]),onClick:t[5]||(t[5]=p=>d("en"))},[t[11]||(t[11]=e("span",{style:{"font-size":"24px","margin-right":"12px"}},"🇺🇸",-1)),e("div",He,[e("div",Ke,c(a.$t("languages.en")),1),e("div",Ve,c(a.$t("languages.enDesc")),1)]),u.value==="en"?(h(),f("svg",Ge,[...t[10]||(t[10]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"},null,-1)])])):L("",!0)],4),e("button",{style:O([v("zh-tw"),{width:"100%",display:"flex","align-items":"center",padding:"12px",border:"1px solid #4a4a4a","border-radius":"8px",cursor:"pointer",transition:"all 0.2s",background:"#2f3042",color:"#f5f5f5"}]),onClick:t[6]||(t[6]=p=>d("zh-tw"))},[t[13]||(t[13]=e("span",{style:{"font-size":"24px","margin-right":"12px"}},"🇹🇼",-1)),e("div",Re,[e("div",Je,c(a.$t("languages.zh-tw")),1),e("div",Qe,c(a.$t("languages.zh-twDesc")),1)]),u.value==="zh-tw"?(h(),f("svg",Xe,[...t[12]||(t[12]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"},null,-1)])])):L("",!0)],4)])])])):L("",!0)}},en=Ye,nn={key:0,class:"toolbar mobile-only"},tn=K({__name:"Layout",setup(i){const l=ne(),o=oe(),s=k(!1),u=k(""),v=k(!1),d=k(!1),a=k(!1),t=q(()=>o.path.startsWith("/mining/")),p=q(()=>o.path==="/"),w=()=>{a.value=window.innerWidth<768};U(()=>{w(),window.addEventListener("resize",w)});const r=n=>{console.log("Language changed to:",n),$()},b=()=>v.value=!0,$=()=>v.value=!1,x=()=>s.value=!s.value,T=()=>s.value=!1,W=n=>{l.push("/mining/".concat(n)),T()},A={chainId:"0x431A",chainName:"AIC Chain",nativeCurrency:{name:"AIC",symbol:"AIC",decimals:18},rpcUrls:["https://rpc.aicchain.vip"],blockExplorerUrls:["https://scan.aicchain.vip"],iconUrls:["https://www.aicchain.vip/images/og-image.png"]},S=async()=>{if(!window.ethereum){console.warn("MetaMask 未安装");return}try{if(await window.ethereum.request({method:"eth_chainId"})===A.chainId)return;try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:A.chainId}]}),console.log("已切换到 AIC 网络")}catch(n){n.code===4902?(await window.ethereum.request({method:"wallet_addEthereumChain",params:[A]}),console.log("已添加 AIC 网络")):console.error("切换 AIC 网络失败:",n)}}catch(n){console.error("检查或添加网络失败:",n)}};ie();const{connectors:M,connect:D}=pe(),{isConnected:F}=R(),X=async()=>{if(!(F.value||!M.length))try{const n=M[0];await D({connector:n}),localStorage.setItem("lastConnectedConnector",n.id),await S()}catch(n){console.error("Connect wallet failed:",n)}},B=async()=>{if(!(F.value||d.value||!M.length)){d.value=!0;try{const n=localStorage.getItem("lastConnectedConnector");if(console.log("Last connected connector:",n),n){const m=M.find(j=>j.id===n);m?(console.log("Attempting auto connect wallet:",n),await D({connector:m}),console.log("Auto connect successful"),await S()):(console.warn("Previous wallet connection info not found"),localStorage.removeItem("lastConnectedConnector"))}else{const m=M[0];await D({connector:m}),localStorage.setItem("lastConnectedConnector",m.id),await S()}}catch(n){console.warn("Auto connect failed:",n),localStorage.removeItem("lastConnectedConnector")}finally{d.value=!1}}};return U(async()=>{setTimeout(()=>B(),3e3);try{const n=await fetch("/version.json");n.ok&&(u.value=(await n.json()).version||"dev")}catch(n){console.warn("Failed to get version info:",n),u.value="dev"}}),z(()=>o.path,()=>setTimeout(()=>B(),3e3)),z(F,n=>{n?console.log("Wallet connected"):(console.log("Wallet disconnected"),setTimeout(()=>B(),1e3))}),z(()=>o.query.invite,n=>{n&&typeof n=="string"?sessionStorage.setItem("invite",n):sessionStorage.removeItem("invite")},{immediate:!0}),(n,m)=>{const j=P("router-view"),E=P("router-link");return h(),f(ee,null,[e("div",{class:g(["layout min-w-screen min-h-screen",{"header-home":p.value,"header-other":!p.value}])},[e("header",{class:g(["header",{"header-home":p.value,"header-other":!p.value}])},[y(Be,{"show-mining-menu":s.value,"is-mining-page":t.value,"toggle-mining-menu":x,onClicklanguage:b,onConnect:X},null,8,["show-mining-menu","is-mining-page"])],2),e("main",{class:g(["main",{"has-toolbar":a.value}])},[y(j)],2),a.value?(h(),f("div",nn,[y(E,{to:"/",class:g(["toolbar-item",{active:n.$route.path==="/"}])},{default:_(()=>[e("div",{class:g(["icon",n.$route.path==="/"?"home-icon-active":"home-icon"])},null,2),e("span",null,c(n.$t("tab_bar.home")),1)]),_:1},8,["class"]),e("div",{class:g(["toolbar-item",{active:t.value||s.value}]),onClick:x},[e("div",{class:g(["icon",t.value||s.value?"mining-icon-active":"mining-icon"])},null,2),e("span",null,c(n.$t("tab_bar.mining")),1)],2),y(E,{to:"/promote",class:g(["toolbar-item",{active:n.$route.path==="/promote"}])},{default:_(()=>[e("div",{class:g(["icon",n.$route.path==="/promote"?"promote-icon-active":"promote-icon"])},null,2),e("span",null,c(n.$t("tab_bar.promotion")),1)]),_:1},8,["class"]),y(E,{to:"/ranking",class:g(["toolbar-item",{active:n.$route.path==="/ranking"}])},{default:_(()=>[e("div",{class:g(["icon",n.$route.path==="/ranking"||n.$route.path==="/ranking/personal"||n.$route.path==="/ranking/team"?"ranking-icon-active":"ranking-icon"])},null,2),e("span",null,c(n.$t("tab_bar.ranking")),1)]),_:1},8,["class"])])):L("",!0),s.value?(h(),f("div",{key:1,class:"mining-menu-overlay",onClick:T},[e("div",{class:"mining-menu",onClick:m[2]||(m[2]=V(()=>{},["stop"]))},[e("div",{class:"mining-menu-item",onClick:m[0]||(m[0]=Y=>W("th"))},[m[3]||(m[3]=e("div",{class:"menu-icon ht-icon"},null,-1)),e("span",null,c(n.$t("mining_tab.th_mining")),1)]),m[5]||(m[5]=e("div",{class:"divider"},null,-1)),e("div",{class:"mining-menu-item",onClick:m[1]||(m[1]=Y=>W("aic"))},[m[4]||(m[4]=e("div",{class:"menu-icon aic-icon"},null,-1)),e("span",null,c(n.$t("mining_tab.aic_pool")),1)])])])):L("",!0)],2),y(en,{"is-open":v.value,onClose:$,onLanguageChange:r},null,8,["is-open"])],64)}}}),rn=Q(tn,[["__scopeId","data-v-cf8aee67"]]);export{rn as default};
