import{A as f,B as w,G as g,K as O,L as H,M as W,N as A,P as k,T as U,W as F,_ as Y,a as Z,b as _,f as ee,g as V,i as ne,k as N,q as l,s as G,v as q,w as y,x as b,y as e}from"./vue-vendor-CWx2MFcM.js";import{i as te,n as K,r as R,t as oe}from"./useChainId-BmaQzN_b.js";import{Gt as J,n as ae,s as ie}from"./index-cgz1Cpee.js";import{t as se}from"./Logo-ypXexyAW.js";async function le(i,r){var s;let a;if(typeof r.connector=="function"?a=i._internal.connectors.setup(r.connector):a=r.connector,a.uid===i.state.current)throw new ie;try{i.setState(o=>({...o,status:"connecting"})),a.emitter.emit("message",{type:"connecting"});const{connector:u,...v}=r,d=await a.connect(v);return a.emitter.off("connect",i._internal.events.connect),a.emitter.on("change",i._internal.events.change),a.emitter.on("disconnect",i._internal.events.disconnect),await((s=i.storage)==null?void 0:s.setItem("recentConnectorId",a.id)),i.setState(o=>({...o,connections:new Map(o.connections).set(a.uid,{accounts:v.withCapabilities?d.accounts.map(t=>typeof t=="object"?t.address:t):d.accounts,chainId:d.chainId,connector:a}),current:a.uid,status:"connected"})),{accounts:v.withCapabilities?d.accounts.map(o=>typeof o=="object"?o:{address:o,capabilities:{}}):d.accounts,chainId:d.chainId}}catch(u){throw i.setState(v=>({...v,status:v.current?"connected":"disconnected"})),u}}var z=[];function re(i){const r=i.connectors;return z.length===r.length&&z.every((a,s)=>a===r[s])?z:(z=r,r)}function ce(i,r){const{onChange:a}=r;return i._internal.connectors.subscribe((s,u)=>{a(Object.values(s),u)})}function ue(i){return{mutationFn(r){return le(i,r)},mutationKey:["connect"]}}function de(i={}){const r=R(i),a=w(re(r)),s=ce(r,{onChange(u){a.value=u}});return H(()=>s()),a}function ge(i={}){const{mutation:r}=i,a=R(i),s=ue(a),{mutate:u,mutateAsync:v,...d}=te({...r,...s}),o=a.subscribe(({status:t})=>t,(t,m)=>{m==="connected"&&t==="disconnected"&&d.reset()});return H(()=>o()),{...d,connect:u,connectAsync:v,connectors:de({config:a}).value}}var ve={class:"navbat__ca"},pe={class:"navbar"},me={class:"navbar__content"},he={href:"/",class:"navbar__logo-link"},fe={class:"navbar__logo"},be={class:"navbar__links","aria-label":"Primary"},ye={class:"navbar__ca"},Ce={class:"connect_btn"},we={key:1,class:"btn btn--secondary"},ke={class:"flag-emoji"},_e={class:"language-selector mobile-lang",role:"button","aria-label":"切换语言"},$e={class:"flag-emoji"},Me=U({__name:"Header",props:{isMiningPage:{type:Boolean},showMiningMenu:{type:Boolean},toggleMiningMenu:{type:Function}},emits:["clicklanguage","connect"],setup(i,{emit:r}){const{locale:a}=G(),s=r,{address:u,isConnected:v}=K(),d=async()=>{try{s("connect")}catch(c){console.log("Connect failed:",c)}},o=c=>c?"".concat(c.slice(0,6),"...").concat(c.slice(-6)):"",t=q(()=>{switch(a.value){case"zh":return"🇨🇳";case"zh-tw":return"🇹🇼";case"en":return"🇺🇸";default:return"🇺🇸"}}),m=()=>{s("clicklanguage")},M=w(!1),C=()=>{M.value=!1};return(c,h)=>{const $=W("router-link");return f(),b("div",ve,[e("header",pe,[e("div",me,[e("a",he,[e("div",fe,[y(se),h[1]||(h[1]=e("span",{class:"navbar__title"},"AICredit Chain（AIC）",-1))])]),e("nav",be,[y($,{to:"/",class:g(["toolbar-item",{active:c.$route.path==="/"}])},{default:k(()=>[e("div",{class:g(["icon",c.$route.path==="/"?"home-active":"home-icon"])},null,2),e("span",null,l(c.$t("tab_bar.home")),1)]),_:1},8,["class"]),e("div",{class:g(["toolbar-item",{active:i.isMiningPage||i.showMiningMenu}]),onClick:h[0]||(h[0]=(...x)=>i.toggleMiningMenu&&i.toggleMiningMenu(...x))},[e("div",{class:g(["icon",i.isMiningPage||i.showMiningMenu?"mining-icon-active":"mining-icon"])},null,2),e("span",null,l(c.$t("tab_bar.mining")),1)],2),y($,{to:"/promote",class:g(["toolbar-item",{active:c.$route.path==="/promote"}])},{default:k(()=>[e("div",{class:g(["icon",c.$route.path==="/promote"?"promote-icon-active":"promote-icon"])},null,2),e("span",null,l(c.$t("tab_bar.promotion")),1)]),_:1},8,["class"]),y($,{to:"/ranking",class:g(["toolbar-item",{active:c.$route.path==="/ranking"}])},{default:k(()=>[e("div",{class:g(["icon",c.$route.path==="/ranking"?"ranking-icon-active":"ranking-icon"])},null,2),e("span",null,l(c.$t("tab_bar.ranking")),1)]),_:1},8,["class"])])]),e("div",ye,[e("div",Ce,[F(v)?(f(),b("button",we,l(o(F(u))),1)):(f(),b("button",{key:0,class:"btn btn--secondary",onClick:d},"Connect Wallet"))]),h[3]||(h[3]=e("div",{class:"line"},null,-1)),e("div",{class:"language-selector",role:"button","aria-label":"切换语言",onClick:m},[e("span",ke,l(t.value),1),h[2]||(h[2]=e("span",{class:"arrow-down"},"▼",-1))])])]),y(ee,{name:"fade"},{default:k(()=>[M.value?(f(),b("div",{key:0,class:"mobile-menu",onClick:V(C,["self"])},[e("a",{href:"#home",onClick:C},l(c.$t("navigation.home")),1),e("a",{href:"#About",onClick:C},l(c.$t("navigation.about")),1),e("a",{href:"#UseCases",onClick:C},l(c.$t("navigation.useCases")),1),e("a",{href:"#Technology",onClick:C},l(c.$t("navigation.technology")),1),e("a",{href:"#Ecosystem",onClick:C},l(c.$t("navigation.ecosystem")),1),e("div",_e,[e("span",$e,l(t.value),1),h[4]||(h[4]=e("span",{class:"arrow-down"},"▼",-1))])])):_("",!0)]),_:1})])}}}),Ie=J(Me,[["__scopeId","data-v-8362c4af"]]),xe={key:0,style:{position:"fixed",top:"0",left:"0",right:"0",bottom:"0","z-index":"9999",display:"flex","align-items":"center","justify-content":"center"}},ze={style:{background:"#1d1e2a","border-radius":"12px",padding:"24px",margin:"16px",width:"100%","max-width":"384px",position:"relative","box-shadow":"0 10px 25px rgba(0, 0, 0, 0.3)"}},Ae={style:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"16px"}},Le={style:{"font-size":"18px","font-weight":"600",margin:"0",color:"#f5f5f5"}},Se={style:{width:"20px",height:"20px"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Be={style:{display:"flex","flex-direction":"column",gap:"8px"}},je={style:{"text-align":"left",flex:"1"}},Pe={style:{"font-weight":"500"}},Ee={style:{"font-size":"14px",color:"#d1d5db"}},Te={key:0,style:{width:"20px",height:"20px",color:"#3b82f6"},fill:"currentColor",viewBox:"0 0 20 20"},Oe={style:{"text-align":"left",flex:"1"}},We={style:{"font-weight":"500"}},qe={style:{"font-size":"14px",color:"#d1d5db"}},De={key:0,style:{width:"20px",height:"20px",color:"#3b82f6"},fill:"currentColor",viewBox:"0 0 20 20"},Fe={style:{"text-align":"left",flex:"1"}},Ne={style:{"font-weight":"500"}},He={style:{"font-size":"14px",color:"#d1d5db"}},Ue={key:0,style:{width:"20px",height:"20px",color:"#3b82f6"},fill:"currentColor",viewBox:"0 0 20 20"},Ve={__name:"LanguageModal",props:{isOpen:Boolean},emits:["close","languageChange"],setup(i,{emit:r}){const a=r,{locale:s}=G(),u=w(s.value);A(s,o=>{u.value=o},{immediate:!0});const v=o=>u.value===o?"background: #374151; border-color: #60a5fa;":"",d=o=>{u.value=o,s.value=o,ae(o),a("languageChange",o),a("close")};return(o,t)=>i.isOpen?(f(),b("div",xe,[e("div",{style:{position:"absolute",top:"0",left:"0",right:"0",bottom:"0",background:"rgba(0, 0, 0, 0.6)"},onClick:t[0]||(t[0]=m=>o.$emit("close"))}),e("div",ze,[e("div",Ae,[e("h3",Le,l(o.$t("languages.selectLanguage")),1),e("button",{style:{padding:"4px",background:"none",border:"none","border-radius":"4px",cursor:"pointer",transition:"background-color 0.2s",color:"#2f3042"},onClick:t[1]||(t[1]=m=>o.$emit("close")),onMouseover:t[2]||(t[2]=m=>m.target.style.backgroundColor="#4A4A4A"),onMouseout:t[3]||(t[3]=m=>m.target.style.backgroundColor="transparent")},[(f(),b("svg",Se,[...t[7]||(t[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)])]))],32)]),e("div",Be,[e("button",{style:O([v("zh"),{width:"100%",display:"flex","align-items":"center",padding:"12px",border:"1px solid #4a4a4a","border-radius":"8px",cursor:"pointer",transition:"all 0.2s",background:"#2f3042",color:"#f5f5f5"}]),onClick:t[4]||(t[4]=m=>d("zh"))},[t[9]||(t[9]=e("span",{style:{"font-size":"24px","margin-right":"12px"}},"🇨🇳",-1)),e("div",je,[e("div",Pe,l(o.$t("languages.zh")),1),e("div",Ee,l(o.$t("languages.zhDesc")),1)]),u.value==="zh"?(f(),b("svg",Te,[...t[8]||(t[8]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"},null,-1)])])):_("",!0)],4),e("button",{style:O([v("en"),{width:"100%",display:"flex","align-items":"center",padding:"12px",border:"1px solid #4a4a4a","border-radius":"8px",cursor:"pointer",transition:"all 0.2s",background:"#2f3042",color:"#f5f5f5"}]),onClick:t[5]||(t[5]=m=>d("en"))},[t[11]||(t[11]=e("span",{style:{"font-size":"24px","margin-right":"12px"}},"🇺🇸",-1)),e("div",Oe,[e("div",We,l(o.$t("languages.en")),1),e("div",qe,l(o.$t("languages.enDesc")),1)]),u.value==="en"?(f(),b("svg",De,[...t[10]||(t[10]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"},null,-1)])])):_("",!0)],4),e("button",{style:O([v("zh-tw"),{width:"100%",display:"flex","align-items":"center",padding:"12px",border:"1px solid #4a4a4a","border-radius":"8px",cursor:"pointer",transition:"all 0.2s",background:"#2f3042",color:"#f5f5f5"}]),onClick:t[6]||(t[6]=m=>d("zh-tw"))},[t[13]||(t[13]=e("span",{style:{"font-size":"24px","margin-right":"12px"}},"🇹🇼",-1)),e("div",Fe,[e("div",Ne,l(o.$t("languages.zh-tw")),1),e("div",He,l(o.$t("languages.zh-twDesc")),1)]),u.value==="zh-tw"?(f(),b("svg",Ue,[...t[12]||(t[12]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"},null,-1)])])):_("",!0)],4)])])])):_("",!0)}},Ge=Ve,Ke={key:0,class:"toolbar mobile-only"},Re=U({__name:"Layout",setup(i){const r=Z(),a=ne(),s=w(!1),u=w(""),v=w(!1),d=w(!1),o=w(!1),t=q(()=>a.path.startsWith("/mining/")),m=q(()=>a.path==="/"),M=()=>{o.value=window.innerWidth<768};N(()=>{M(),window.addEventListener("resize",M)});const C=n=>{console.log("Language changed to:",n),h()},c=()=>v.value=!0,h=()=>v.value=!1,$=()=>s.value=!s.value,x=()=>s.value=!1,D=n=>{r.push("/mining/".concat(n)),x()},L={chainId:"0x431A",chainName:"AIC Chain",nativeCurrency:{name:"AIC",symbol:"AIC",decimals:18},rpcUrls:["https://rpc.aicchain.vip"],blockExplorerUrls:["https://scan.aicchain.vip"],iconUrls:["https://www.aicchain.vip/og-image.png"]},S=async()=>{if(!window.ethereum){console.warn("MetaMask 未安装");return}try{if(await window.ethereum.request({method:"eth_chainId"})===L.chainId)return;try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:L.chainId}]}),console.log("已切换到 AIC 网络")}catch(n){n.code===4902?(await window.ethereum.request({method:"wallet_addEthereumChain",params:[L]}),console.log("已添加 AIC 网络")):console.error("切换 AIC 网络失败:",n)}}catch(n){console.error("检查或添加网络失败:",n)}};oe();const{connectors:I,connect:B}=ge(),{isConnected:j}=K(),Q=async()=>{if(!(j.value||!I.length))try{const n=I[0];await B({connector:n}),localStorage.setItem("lastConnectedConnector",n.id),await S()}catch(n){console.error("Connect wallet failed:",n)}},P=async()=>{if(!(j.value||d.value||!I.length)){d.value=!0;try{const n=localStorage.getItem("lastConnectedConnector");if(console.log("Last connected connector:",n),n){const p=I.find(E=>E.id===n);p?(console.log("Attempting auto connect wallet:",n),await B({connector:p}),console.log("Auto connect successful"),await S()):(console.warn("Previous wallet connection info not found"),localStorage.removeItem("lastConnectedConnector"))}else{const p=I[0];await B({connector:p}),localStorage.setItem("lastConnectedConnector",p.id),await S()}}catch(n){console.warn("Auto connect failed:",n),localStorage.removeItem("lastConnectedConnector")}finally{d.value=!1}}};return N(async()=>{setTimeout(()=>P(),3e3);try{const n=await fetch("/version.json");n.ok&&(u.value=(await n.json()).version||"dev")}catch(n){console.warn("Failed to get version info:",n),u.value="dev"}}),A(()=>a.path,()=>setTimeout(()=>P(),3e3)),A(j,n=>{n?console.log("Wallet connected"):(console.log("Wallet disconnected"),setTimeout(()=>P(),1e3))}),A(()=>a.query.invite,n=>{n&&typeof n=="string"?sessionStorage.setItem("invite",n):sessionStorage.removeItem("invite")},{immediate:!0}),(n,p)=>{const E=W("router-view"),T=W("router-link");return f(),b(Y,null,[e("div",{class:g(["layout",{"header-home":m.value,"header-other":!m.value}])},[e("header",{class:g(["header",{"header-home":m.value,"header-other":!m.value}])},[y(Ie,{"show-mining-menu":s.value,"is-mining-page":t.value,"toggle-mining-menu":$,onClicklanguage:c,onConnect:Q},null,8,["show-mining-menu","is-mining-page"])],2),e("main",{class:g(["main",{"has-toolbar":o.value}])},[y(E)],2),o.value?(f(),b("div",Ke,[y(T,{to:"/",class:g(["toolbar-item",{active:n.$route.path==="/"}])},{default:k(()=>[e("div",{class:g(["icon",n.$route.path==="/"?"home-icon-active":"home-icon"])},null,2),e("span",null,l(n.$t("tab_bar.home")),1)]),_:1},8,["class"]),e("div",{class:g(["toolbar-item",{active:t.value||s.value}]),onClick:$},[e("div",{class:g(["icon",t.value||s.value?"mining-icon-active":"mining-icon"])},null,2),e("span",null,l(n.$t("tab_bar.mining")),1)],2),y(T,{to:"/promote",class:g(["toolbar-item",{active:n.$route.path==="/promote"}])},{default:k(()=>[e("div",{class:g(["icon",n.$route.path==="/promote"?"promote-icon-active":"promote-icon"])},null,2),e("span",null,l(n.$t("tab_bar.promotion")),1)]),_:1},8,["class"]),y(T,{to:"/ranking",class:g(["toolbar-item",{active:n.$route.path==="/ranking"}])},{default:k(()=>[e("div",{class:g(["icon",n.$route.path==="/ranking"||n.$route.path==="/ranking/personal"||n.$route.path==="/ranking/team"?"ranking-icon-active":"ranking-icon"])},null,2),e("span",null,l(n.$t("tab_bar.ranking")),1)]),_:1},8,["class"])])):_("",!0),s.value?(f(),b("div",{key:1,class:"mining-menu-overlay",onClick:x},[e("div",{class:"mining-menu",onClick:p[2]||(p[2]=V(()=>{},["stop"]))},[e("div",{class:"mining-menu-item",onClick:p[0]||(p[0]=X=>D("th"))},[p[3]||(p[3]=e("div",{class:"menu-icon ht-icon"},null,-1)),e("span",null,l(n.$t("mining_tab.th_mining")),1)]),p[5]||(p[5]=e("div",{class:"divider"},null,-1)),e("div",{class:"mining-menu-item",onClick:p[1]||(p[1]=X=>D("aic"))},[p[4]||(p[4]=e("div",{class:"menu-icon aic-icon"},null,-1)),e("span",null,l(n.$t("mining_tab.aic_pool")),1)])])])):_("",!0)],2),y(Ge,{"is-open":v.value,onClose:h,onLanguageChange:C},null,8,["is-open"])],64)}}}),Ze=J(Re,[["__scopeId","data-v-d5327c0b"]]);export{Ze as default};
