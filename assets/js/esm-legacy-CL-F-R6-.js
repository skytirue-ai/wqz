!function(){function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var r,n,a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",i=a.toStringTag||"@@toStringTag";function o(e,a,s,i){var o=a&&a.prototype instanceof u?a:u,l=Object.create(o.prototype);return t(l,"_invoke",function(e,t,a){var s,i,o,u=0,l=a||[],f=!1,d={p:0,n:0,v:r,a:y,f:y.bind(r,4),d:function(e,t){return s=e,i=0,o=r,d.n=t,c}};function y(e,t){for(i=e,o=t,n=0;!f&&u&&!a&&n<l.length;n++){var a,s=l[n],y=d.p,h=s[2];e>3?(a=h===t)&&(o=s[(i=s[4])?5:(i=3,3)],s[4]=s[5]=r):s[0]<=y&&((a=e<2&&y<s[1])?(i=0,d.v=t,d.n=s[1]):y<h&&(a=e<3||s[0]>t||t>h)&&(s[4]=e,s[5]=t,d.n=h,i=0))}if(a||e>1)return c;throw f=!0,t}return function(a,l,h){if(u>1)throw TypeError("Generator is already running");for(f&&1===l&&y(l,h),i=l,o=h;(n=i<2?r:o)||!f;){s||(i?i<3?(i>1&&(d.n=-1),y(i,o)):d.n=o:d.v=o);try{if(u=2,s){if(i||(a="next"),n=s[a]){if(!(n=n.call(s,o)))throw TypeError("iterator result is not an object");if(!n.done)return n;o=n.value,i<2&&(i=0)}else 1===i&&(n=s.return)&&n.call(s),i<2&&(o=TypeError("The iterator does not provide a '"+a+"' method"),i=1);s=r}else if((n=(f=d.n<0)?o:e.call(t,d))!==c)break}catch(n){s=r,i=1,o=n}finally{u=1}}return{value:n,done:f}}}(e,s,i),!0),l}var c={};function u(){}function l(){}function f(){}n=Object.getPrototypeOf;var d=[][s]?n(n([][s]())):(t(n={},s,function(){return this}),n),y=f.prototype=u.prototype=Object.create(d);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,t(e,i,"GeneratorFunction")),e.prototype=Object.create(y),e}return l.prototype=f,t(y,"constructor",f),t(f,"constructor",l),l.displayName="GeneratorFunction",t(f,i,"GeneratorFunction"),t(y),t(y,i,"Generator"),t(y,s,function(){return this}),t(y,"toString",function(){return"[object Generator]"}),(e=function(){return{w:o,m:h}})()}function t(e,r,n,a){var s=Object.defineProperty;try{s({},"",{})}catch(e){s=0}t=function(e,r,n,a){function i(r,n){t(e,r,function(e){return this._invoke(r,n,e)})}r?s?s(e,r,{value:n,enumerable:!a,configurable:!a,writable:!a}):e[r]=n:(i("next",0),i("throw",1),i("return",2))},t(e,r,n,a)}function r(e,t,r,n,a,s,i){try{var o=e[s](i),c=o.value}catch(e){return void r(e)}o.done?t(c):Promise.resolve(c).then(n,a)}function n(e){return function(){var t=this,n=arguments;return new Promise(function(a,s){var i=e.apply(t,n);function o(e){r(i,a,s,o,c,"next",e)}function c(e){r(i,a,s,o,c,"throw",e)}o(void 0)})}}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach(function(t){i(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function i(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,s,i,o=[],c=!0,u=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);c=!0);}catch(e){u=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return l(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){o=!0,s=e},f:function(){try{i||null==r.return||r.return()}finally{if(o)throw s}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}System.register(["./encodeFunctionData-legacy-C0uoFML8.js","./index-legacy-BqFiO6r-.js"],function(t,r){var a,i,c,l,f,d,y,h,m,p,g,v,b,w,S,T,P,_,O,k,j,I,B,x,M,A,E,C,q,R,H,N,D,$,V,G,L,F,z,U,W;function K(e,t){return m(function(e){var t="string"==typeof e?v(e):"string"==typeof e.raw?e.raw:w(e.raw),r=v(`${P}${h(t)}`);return l([r,t])}(e),t)}function J(e){var t=e.domain;return["string"==typeof(null==t?void 0:t.name)&&{name:"name",type:"string"},(null==t?void 0:t.version)&&{name:"version",type:"string"},("number"==typeof(null==t?void 0:t.chainId)||"bigint"==typeof(null==t?void 0:t.chainId))&&{name:"chainId",type:"uint256"},(null==t?void 0:t.verifyingContract)&&{name:"verifyingContract",type:"address"},(null==t?void 0:t.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function Z(e){if("address"===e||"bool"===e||"string"===e||e.startsWith("bytes")||e.startsWith("uint")||e.startsWith("int"))throw new k({type:e})}function Q(e){var t=e.domain,r=void 0===t?{}:t,n=e.message,i=e.primaryType,f=s({EIP712Domain:J({domain:r})},e.types);!function(e){var t=e.domain,r=e.message,n=e.primaryType,s=e.types,i=(e,t)=>{var r,n=u(e);try{for(n.s();!(r=n.n()).done;){var l=r.value,f=l.name,y=l.type,m=t[f],v=y.match(c);if(v&&("number"==typeof m||"bigint"==typeof m)){var b=o(v,3),w=(b[0],b[1]),T=b[2];S(m,{signed:"int"===w,size:Number.parseInt(T,10)/8})}if("address"===y&&"string"==typeof m&&!p(m))throw new g({address:m});var P=y.match(d);if(P){var _=o(P,2),O=(_[0],_[1]);if(O&&h(m)!==Number.parseInt(O,10))throw new a({expectedSize:Number.parseInt(O,10),givenSize:h(m)})}var k=s[y];k&&(Z(y),i(k,m))}}catch(j){n.e(j)}finally{n.f()}};if(s.EIP712Domain&&t){if("object"!=typeof t)throw new _({domain:t});i(s.EIP712Domain,t)}if("EIP712Domain"!==n){if(!s[n])throw new O({primaryType:n,types:s});i(s[n],r)}}({domain:r,message:n,primaryType:i,types:f});var y=["0x1901"];return r&&y.push(function(e){var t=e.domain,r=e.types;return X({data:t,primaryType:"EIP712Domain",types:r})}({domain:r,types:f})),"EIP712Domain"!==i&&y.push(X({data:n,primaryType:i,types:f})),m(l(y))}function X(e){var t=Y({data:e.data,primaryType:e.primaryType,types:e.types});return m(t)}function Y(e){var t,r=e.data,n=e.primaryType,a=e.types,s=[{type:"bytes32"}],c=[ee({primaryType:n,types:a})],l=u(a[n]);try{for(l.s();!(t=l.n()).done;){var f=t.value,d=o(re({types:a,name:f.name,type:f.type,value:r[f.name]}),2),y=d[0],h=d[1];s.push(y),c.push(h)}}catch(m){l.e(m)}finally{l.f()}return i(s,c)}function ee(e){var t=e.primaryType,r=e.types,n=b(function(e){var t=e.primaryType,r=e.types,n="",a=te({primaryType:t,types:r});a.delete(t);for(var s=[t,...Array.from(a).sort()],i=0,o=s;i<o.length;i++){var c=o[i];n+=`${c}(${r[c].map(e=>{var t=e.name;return`${e.type} ${t}`}).join(",")})`}return n}({primaryType:t,types:r}));return m(n)}function te(e){var t,r=e.primaryType,n=e.types,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set,s=null===(t=r.match(/^[0-9A-Z_a-z]*/))||void 0===t?void 0:t[0];if(a.has(s)||void 0===n[s])return a;a.add(s);var i,o=u(n[s]);try{for(o.s();!(i=o.n()).done;){te({primaryType:i.value.type,types:n},a)}}catch(c){o.e(c)}finally{o.f()}return a}function re(e){var t=e.types,r=e.name,n=e.type,a=e.value;if(void 0!==t[n])return[{type:"bytes32"},m(Y({data:a,primaryType:n,types:t}))];if("bytes"===n)return a="0x"+((a.length%2?"0":"")+a.slice(2)),[{type:"bytes32"},m(a)];if("string"===n)return[{type:"bytes32"},m(b(a))];if(n.lastIndexOf("]")===n.length-1){var s=n.slice(0,n.lastIndexOf("[")),c=a.map(e=>re({name:r,type:s,types:t,value:e}));return[{type:"bytes32"},m(i(c.map(e=>o(e,1)[0]),c.map(e=>o(e,2)[1])))]}return[{type:n},a]}return t({Methods:void 0,RestrictedMethods:void 0}),{setters:[function(e){a=e.E,i=e.c,c=e.d,l=e.f,f=e.t,d=e.u},function(e){y=e.L,h=e.St,m=e.U,p=e.V,g=e.bt,v=e.ct,b=e.lt,w=e.ot,S=e.st,T=e.xt}],execute:function(){var r;P="Ethereum Signed Message:\n",_=class extends T{constructor(e){var t=e.domain;super(`Invalid domain "${y(t)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}},O=class extends T{constructor(e){var t=e.primaryType,r=e.types;super(`Invalid primary type \`${t}\` must be one of \`${JSON.stringify(Object.keys(r))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}},k=class extends T{constructor(e){super(`Struct type "${e.type}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}},t("getSDKVersion",()=>"9.1.0"),j=e=>e.toString(16).padStart(2,"0"),I=e=>{var t=new Uint8Array((e||40)/2);return window.crypto.getRandomValues(t),Array.from(t,j).join("")},B=()=>"undefined"!=typeof window?I(10):(new Date).getTime().toString(36),t("MessageFormatter",x=class{}),x.makeRequest=(e,t)=>({id:B(),method:e,params:t,env:{sdkVersion:"9.1.0"}}),x.makeResponse=(e,t,r)=>({id:e,success:!0,version:r,data:t}),x.makeErrorResponse=(e,t,r)=>({id:e,success:!1,error:t,version:r}),(r=M||t("Methods",M={})).sendTransactions="sendTransactions",r.rpcCall="rpcCall",r.getChainInfo="getChainInfo",r.getSafeInfo="getSafeInfo",r.getTxBySafeTxHash="getTxBySafeTxHash",r.getSafeBalances="getSafeBalances",r.signMessage="signMessage",r.signTypedMessage="signTypedMessage",r.getEnvironmentInfo="getEnvironmentInfo",r.getOffChainSignature="getOffChainSignature",r.requestAddressBook="requestAddressBook",r.wallet_getPermissions="wallet_getPermissions",r.wallet_requestPermissions="wallet_requestPermissions",(A||t("RestrictedMethods",A={})).requestAddressBook="requestAddressBook",E=class{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.allowedOrigins=null,this.callbacks=new Map,this.debugMode=!1,this.isServer="undefined"==typeof window,this.isValidMessage=e=>{var t=e.origin,r=e.data,n=e.source,a=!r,s=!this.isServer&&n===window.parent,i=void 0!==r.version&&parseInt(r.version.split(".")[0]),o="number"==typeof i&&i>=1,c=!0;return Array.isArray(this.allowedOrigins)&&(c=void 0!==this.allowedOrigins.find(e=>e.test(t))),!a&&s&&o&&c},this.logIncomingMessage=e=>{console.info(`Safe Apps SDK v1: A message was received from origin ${e.origin}. `,e.data)},this.onParentMessage=e=>{this.isValidMessage(e)&&(this.debugMode&&this.logIncomingMessage(e),this.handleIncomingMessage(e.data))},this.handleIncomingMessage=e=>{var t=e.id,r=this.callbacks.get(t);r&&(r(e),this.callbacks.delete(t))},this.send=(e,t)=>{var r=x.makeRequest(e,t);if(this.isServer)throw new Error("Window doesn't exist");return window.parent.postMessage(r,"*"),new Promise((e,t)=>{this.callbacks.set(r.id,r=>{r.success?e(r):t(new Error(r.error))})})},this.allowedOrigins=e,this.debugMode=t,this.isServer||window.addEventListener("message",this.onParentMessage)}},C=E,t("isObjectEIP712TypedData",q=e=>"object"==typeof e&&null!=e&&"domain"in e&&"types"in e&&"message"in e),R=class{constructor(e){this.communicator=e}getBySafeTxHash(t){var r=this;return n(e().m(function n(){return e().w(function(e){for(;;)switch(e.n){case 0:if(t){e.n=1;break}throw new Error("Invalid safeTxHash");case 1:return e.n=2,r.communicator.send(M.getTxBySafeTxHash,{safeTxHash:t});case 2:return e.a(2,e.v.data)}},n)}))()}signMessage(t){var r=this;return n(e().m(function n(){var a;return e().w(function(e){for(;;)switch(e.n){case 0:return a={message:t},e.n=1,r.communicator.send(M.signMessage,a);case 1:return e.a(2,e.v.data)}},n)}))()}signTypedMessage(t){var r=this;return n(e().m(function n(){return e().w(function(e){for(;;)switch(e.n){case 0:if(q(t)){e.n=1;break}throw new Error("Invalid typed data");case 1:return e.n=2,r.communicator.send(M.signTypedMessage,{typedData:t});case 2:return e.a(2,e.v.data)}},n)}))()}send(t){var r=this;return n(e().m(function n(){var a,s,i;return e().w(function(e){for(;;)switch(e.n){case 0:if(a=t.txs,s=t.params,a&&a.length){e.n=1;break}throw new Error("No transactions were passed");case 1:return i={txs:a,params:s},e.n=2,r.communicator.send(M.sendTransactions,i);case 2:return e.a(2,e.v.data)}},n)}))()}},t("RPC_CALLS",H={eth_call:"eth_call",eth_gasPrice:"eth_gasPrice",eth_getLogs:"eth_getLogs",eth_getBalance:"eth_getBalance",eth_getCode:"eth_getCode",eth_getBlockByHash:"eth_getBlockByHash",eth_getBlockByNumber:"eth_getBlockByNumber",eth_getStorageAt:"eth_getStorageAt",eth_getTransactionByHash:"eth_getTransactionByHash",eth_getTransactionReceipt:"eth_getTransactionReceipt",eth_getTransactionCount:"eth_getTransactionCount",eth_estimateGas:"eth_estimateGas",safe_setSettings:"safe_setSettings"}),N={defaultBlockParam:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:"latest"},returnFullTxObjectParam:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]},blockNumberToHex:e=>Number.isInteger(e)?`0x${e.toString(16)}`:e},D=class{constructor(e){this.communicator=e,this.call=this.buildRequest({call:H.eth_call,formatters:[null,N.defaultBlockParam]}),this.getBalance=this.buildRequest({call:H.eth_getBalance,formatters:[null,N.defaultBlockParam]}),this.getCode=this.buildRequest({call:H.eth_getCode,formatters:[null,N.defaultBlockParam]}),this.getStorageAt=this.buildRequest({call:H.eth_getStorageAt,formatters:[null,N.blockNumberToHex,N.defaultBlockParam]}),this.getPastLogs=this.buildRequest({call:H.eth_getLogs}),this.getBlockByHash=this.buildRequest({call:H.eth_getBlockByHash,formatters:[null,N.returnFullTxObjectParam]}),this.getBlockByNumber=this.buildRequest({call:H.eth_getBlockByNumber,formatters:[N.blockNumberToHex,N.returnFullTxObjectParam]}),this.getTransactionByHash=this.buildRequest({call:H.eth_getTransactionByHash}),this.getTransactionReceipt=this.buildRequest({call:H.eth_getTransactionReceipt}),this.getTransactionCount=this.buildRequest({call:H.eth_getTransactionCount,formatters:[null,N.defaultBlockParam]}),this.getGasPrice=this.buildRequest({call:H.eth_gasPrice}),this.getEstimateGas=e=>this.buildRequest({call:H.eth_estimateGas})([e]),this.setSafeSettings=this.buildRequest({call:H.safe_setSettings})}buildRequest(t){var r=this,a=t.call,s=t.formatters;return function(){var t=n(e().m(function t(n){var i;return e().w(function(e){for(;;)switch(e.n){case 0:return s&&Array.isArray(n)&&s.forEach((e,t)=>{e&&(n[t]=e(n[t]))}),i={call:a,params:n||[]},e.n=1,r.communicator.send(M.rpcCall,i);case 1:return e.a(2,e.v.data)}},t)}));return function(e){return t.apply(this,arguments)}}()}},$=4001,V=class e extends Error{constructor(t,r,n){super(t),this.code=r,this.data=n,Object.setPrototypeOf(this,e.prototype)}},G=class{constructor(e){this.communicator=e}getPermissions(){var t=this;return n(e().m(function r(){return e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t.communicator.send(M.wallet_getPermissions,void 0);case 1:return e.a(2,e.v.data)}},r)}))()}requestPermissions(t){var r=this;return n(e().m(function n(){return e().w(function(e){for(;;)switch(e.p=e.n){case 0:if(r.isPermissionRequestValid(t)){e.n=1;break}throw new V("Permissions request is invalid",$);case 1:return e.p=1,e.n=2,r.communicator.send(M.wallet_requestPermissions,t);case 2:return e.a(2,e.v.data);case 3:throw e.p=3,e.v,new V("Permissions rejected",$);case 4:return e.a(2)}},n,null,[[1,3]])}))()}isPermissionRequestValid(e){return e.every(e=>"object"==typeof e&&Object.keys(e).every(e=>!!Object.values(A).includes(e)))}},L=(e,t)=>t.some(t=>t.parentCapability===e),F=()=>(t,r,a)=>{var s=a.value;return a.value=n(e().m(function t(){var n,a;return e().w(function(e){for(;;)switch(e.n){case 0:return n=new G(this.communicator),e.n=1,n.getPermissions();case 1:if(a=e.v,L(r,a)){e.n=3;break}return e.n=2,n.requestPermissions([{[r]:{}}]);case 2:a=e.v;case 3:if(L(r,a)){e.n=4;break}throw new V("Permissions rejected",$);case 4:return e.a(2,s.apply(this))}},t,this)})),a},z=function(e,t,r,n){var a,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(a=e[o])&&(i=(s<3?a(i):s>3?a(t,r,i):a(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i},U=class{constructor(e){this.communicator=e}getChainInfo(){var t=this;return n(e().m(function r(){return e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t.communicator.send(M.getChainInfo,void 0);case 1:return e.a(2,e.v.data)}},r)}))()}getInfo(){var t=this;return n(e().m(function r(){return e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t.communicator.send(M.getSafeInfo,void 0);case 1:return e.a(2,e.v.data)}},r)}))()}experimental_getBalances(){var t=arguments,r=this;return n(e().m(function n(){var a,s;return e().w(function(e){for(;;)switch(e.n){case 0:return a=(t.length>0&&void 0!==t[0]?t[0]:{}).currency,s=void 0===a?"usd":a,e.n=1,r.communicator.send(M.getSafeBalances,{currency:s});case 1:return e.a(2,e.v.data)}},n)}))()}check1271Signature(t){var r=arguments,a=this;return n(e().m(function n(){var s,i,o,c,u;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return s=r.length>1&&void 0!==r[1]?r[1]:"0x",e.n=1,a.getInfo();case 1:return i=e.v,o=f({abi:[{constant:!1,inputs:[{name:"_dataHash",type:"bytes32"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[t,s]}),c={call:H.eth_call,params:[{to:i.safeAddress,data:o},"latest"]},e.p=2,e.n=3,a.communicator.send(M.rpcCall,c);case 3:return u=e.v.data.slice(0,10).toLowerCase(),e.a(2,"0x1626ba7e"===u);case 4:return e.p=4,e.v,e.a(2,!1)}},n,null,[[2,4]])}))()}check1271SignatureBytes(t){var r=arguments,a=this;return n(e().m(function n(){var s,i,o,c,u;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return s=r.length>1&&void 0!==r[1]?r[1]:"0x",e.n=1,a.getInfo();case 1:return i=e.v,o=f({abi:[{constant:!1,inputs:[{name:"_data",type:"bytes"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[t,s]}),c={call:H.eth_call,params:[{to:i.safeAddress,data:o},"latest"]},e.p=2,e.n=3,a.communicator.send(M.rpcCall,c);case 3:return u=e.v.data.slice(0,10).toLowerCase(),e.a(2,"0x20c13b0b"===u);case 4:return e.p=4,e.v,e.a(2,!1)}},n,null,[[2,4]])}))()}calculateMessageHash(e){return K(e)}calculateTypedMessageHash(e){var t="object"==typeof e.domain.chainId?e.domain.chainId.toNumber():Number(e.domain.chainId),r=e.primaryType;if(!r){var n=Object.values(e.types),a=Object.keys(e.types).filter(e=>n.every(t=>t.every(t=>t.type.replace("[","").replace("]","")!==e)));if(0===a.length||a.length>1)throw new Error("Please specify primaryType");r=a[0]}return Q({message:e.message,domain:s(s({},e.domain),{},{chainId:t,verifyingContract:e.domain.verifyingContract,salt:e.domain.salt}),types:e.types,primaryType:r})}getOffChainSignature(t){var r=this;return n(e().m(function n(){return e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,r.communicator.send(M.getOffChainSignature,t);case 1:return e.a(2,e.v.data)}},n)}))()}isMessageSigned(t){var r=arguments,a=this;return n(e().m(function s(){var i,o;return e().w(function(s){for(;;)switch(s.n){case 0:if(i=r.length>1&&void 0!==r[1]?r[1]:"0x","string"==typeof t&&(o=function(){var r=n(e().m(function r(){var n;return e().w(function(e){for(;;)switch(e.n){case 0:return n=a.calculateMessageHash(t),e.n=1,a.isMessageHashSigned(n,i);case 1:return e.a(2,e.v)}},r)}));return function(){return r.apply(this,arguments)}}()),q(t)&&(o=function(){var r=n(e().m(function r(){var n;return e().w(function(e){for(;;)switch(e.n){case 0:return n=a.calculateTypedMessageHash(t),e.n=1,a.isMessageHashSigned(n,i);case 1:return e.a(2,e.v)}},r)}));return function(){return r.apply(this,arguments)}}()),!o){s.n=2;break}return s.n=1,o();case 1:return s.a(2,s.v);case 2:throw new Error("Invalid message type");case 3:return s.a(2)}},s)}))()}isMessageHashSigned(t){var r=arguments,a=this;return n(e().m(function n(){var s,i,o,c,u;return e().w(function(e){for(;;)switch(e.n){case 0:s=r.length>1&&void 0!==r[1]?r[1]:"0x",i=[a.check1271Signature.bind(a),a.check1271SignatureBytes.bind(a)],o=0,c=i;case 1:if(!(o<c.length)){e.n=4;break}return u=c[o],e.n=2,u(t,s);case 2:if(!e.v){e.n=3;break}return e.a(2,!0);case 3:o++,e.n=1;break;case 4:return e.a(2,!1)}},n)}))()}getEnvironmentInfo(){var t=this;return n(e().m(function r(){return e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t.communicator.send(M.getEnvironmentInfo,void 0);case 1:return e.a(2,e.v.data)}},r)}))()}requestAddressBook(){var t=this;return n(e().m(function r(){return e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t.communicator.send(M.requestAddressBook,void 0);case 1:return e.a(2,e.v.data)}},r)}))()}},z([F()],U.prototype,"requestAddressBook",null),W=class{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.allowedDomains,r=void 0===t?null:t,n=e.debug,a=void 0!==n&&n;this.communicator=new C(r,a),this.eth=new D(this.communicator),this.txs=new R(this.communicator),this.safe=new U(this.communicator),this.wallet=new G(this.communicator)}},t("default",W)}}})}();