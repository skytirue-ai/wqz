import{A as f,B as w,G as C,K as T,L as q,M as O,N as M,P as A,T as D,W,_ as R,a as J,b as _,f as Q,g as N,i as X,k as Y,q as s,s as P,v as U,w as y,x as b,y as e}from"./vue-vendor-CWx2MFcM.js";import{i as Z,n as F,r as H,t as ee}from"./useChainId-C__G-Omb.js";import{Gt as V,n as ne,s as te}from"./index-D2fX_Gsj.js";import{t as oe}from"./Logo-BMf5yPrA.js";async function ae(i,l){var r;let a;if(typeof l.connector=="function"?a=i._internal.connectors.setup(l.connector):a=l.connector,a.uid===i.state.current)throw new te;try{i.setState(o=>({...o,status:"connecting"})),a.emitter.emit("message",{type:"connecting"});const{connector:u,...g}=l,d=await a.connect(g);return a.emitter.off("connect",i._internal.events.connect),a.emitter.on("change",i._internal.events.change),a.emitter.on("disconnect",i._internal.events.disconnect),await((r=i.storage)==null?void 0:r.setItem("recentConnectorId",a.id)),i.setState(o=>({...o,connections:new Map(o.connections).set(a.uid,{accounts:g.withCapabilities?d.accounts.map(t=>typeof t=="object"?t.address:t):d.accounts,chainId:d.chainId,connector:a}),current:a.uid,status:"connected"})),{accounts:g.withCapabilities?d.accounts.map(o=>typeof o=="object"?o:{address:o,capabilities:{}}):d.accounts,chainId:d.chainId}}catch(u){throw i.setState(g=>({...g,status:g.current?"connected":"disconnected"})),u}}var I=[];function se(i){const l=i.connectors;return I.length===l.length&&I.every((a,r)=>a===l[r])?I:(I=l,l)}function ie(i,l){const{onChange:a}=l;return i._internal.connectors.subscribe((r,u)=>{a(Object.values(r),u)})}function le(i){return{mutationFn(l){return ae(i,l)},mutationKey:["connect"]}}function re(i={}){const l=H(i),a=w(se(l)),r=ie(l,{onChange(u){a.value=u}});return q(()=>r()),a}function ce(i={}){const{mutation:l}=i,a=H(i),r=le(a),{mutate:u,mutateAsync:g,...d}=Z({...l,...r}),o=a.subscribe(({status:t})=>t,(t,p)=>{p==="connected"&&t==="disconnected"&&d.reset()});return q(()=>o()),{...d,connect:u,connectAsync:g,connectors:re({config:a}).value}}var ue={class:"navbat__ca"},de={class:"navbar"},ge={class:"navbar__content"},ve={href:"/",class:"navbar__logo-link"},pe={class:"navbar__logo"},me={class:"navbar__links","aria-label":"Primary",style:{display:"none"}},he={class:"navbar__ca"},fe={class:"connect_btn"},be={class:"flag-emoji"},Ce={class:"language-selector mobile-lang",role:"button","aria-label":"切换语言"},ye={class:"flag-emoji"},we=D({__name:"Header",emits:["clicklanguage","connect"],setup(i,{emit:l}){const{locale:a}=P(),r=l,{address:u,isConnected:g}=F(),d=async()=>{try{r("connect")}catch(c){console.log("Connect failed:",c)}},o=c=>c?"".concat(c.slice(0,6),"...").concat(c.slice(-6)):"",t=U(()=>{switch(a.value){case"zh":return"🇨🇳";case"zh-tw":return"🇹🇼";case"en":return"🇺🇸";default:return"🇺🇸"}}),p=()=>{r("clicklanguage")},k=w(!1),m=()=>{k.value=!1};return(c,h)=>(f(),b("div",ue,[e("header",de,[e("div",ge,[e("a",ve,[e("div",pe,[y(oe),h[1]||(h[1]=e("span",{class:"navbar__title"},"AICredit Chain（AIC）",-1))])]),e("nav",me,[e("a",{href:"#home",onClick:m},s(c.$t("navigation.home")),1),e("a",{href:"#About",onClick:m},s(c.$t("navigation.about")),1),e("a",{href:"#UseCases",onClick:m},s(c.$t("navigation.useCases")),1),e("a",{href:"#Technology",onClick:m},s(c.$t("navigation.technology")),1),e("a",{href:"#Ecosystem",onClick:m},s(c.$t("navigation.ecosystem")),1)])]),e("div",he,[e("div",fe,[W(g)?(f(),b("button",{key:1,class:"btn btn--secondary",onClick:h[0]||(h[0]=(...$)=>c.disconnect&&c.disconnect(...$))},s(o(W(u))),1)):(f(),b("button",{key:0,class:"btn btn--secondary",onClick:d},"Connect Wallet"))]),h[3]||(h[3]=e("div",{class:"line"},null,-1)),e("div",{class:"language-selector",role:"button","aria-label":"切换语言",onClick:p},[e("span",be,s(t.value),1),h[2]||(h[2]=e("span",{class:"arrow-down"},"▼",-1))])])]),y(Q,{name:"fade"},{default:A(()=>[k.value?(f(),b("div",{key:0,class:"mobile-menu",onClick:N(m,["self"])},[e("a",{href:"#home",onClick:m},s(c.$t("navigation.home")),1),e("a",{href:"#About",onClick:m},s(c.$t("navigation.about")),1),e("a",{href:"#UseCases",onClick:m},s(c.$t("navigation.useCases")),1),e("a",{href:"#Technology",onClick:m},s(c.$t("navigation.technology")),1),e("a",{href:"#Ecosystem",onClick:m},s(c.$t("navigation.ecosystem")),1),e("div",Ce,[e("span",ye,s(t.value),1),h[4]||(h[4]=e("span",{class:"arrow-down"},"▼",-1))])])):_("",!0)]),_:1})]))}}),_e=V(we,[["__scopeId","data-v-41a419f6"]]),ke={key:0,style:{position:"fixed",top:"0",left:"0",right:"0",bottom:"0","z-index":"9999",display:"flex","align-items":"center","justify-content":"center"}},$e={style:{background:"#1d1e2a","border-radius":"12px",padding:"24px",margin:"16px",width:"100%","max-width":"384px",position:"relative","box-shadow":"0 10px 25px rgba(0, 0, 0, 0.3)"}},xe={style:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"16px"}},Ie={style:{"font-size":"18px","font-weight":"600",margin:"0",color:"#f5f5f5"}},Me={style:{width:"20px",height:"20px"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ae={style:{display:"flex","flex-direction":"column",gap:"8px"}},ze={style:{"text-align":"left",flex:"1"}},Le={style:{"font-weight":"500"}},Se={style:{"font-size":"14px",color:"#d1d5db"}},je={key:0,style:{width:"20px",height:"20px",color:"#3b82f6"},fill:"currentColor",viewBox:"0 0 20 20"},Be={style:{"text-align":"left",flex:"1"}},Ee={style:{"font-weight":"500"}},Te={style:{"font-size":"14px",color:"#d1d5db"}},Oe={key:0,style:{width:"20px",height:"20px",color:"#3b82f6"},fill:"currentColor",viewBox:"0 0 20 20"},We={style:{"text-align":"left",flex:"1"}},qe={style:{"font-weight":"500"}},De={style:{"font-size":"14px",color:"#d1d5db"}},Ne={key:0,style:{width:"20px",height:"20px",color:"#3b82f6"},fill:"currentColor",viewBox:"0 0 20 20"},Pe={__name:"LanguageModal",props:{isOpen:Boolean},emits:["close","languageChange"],setup(i,{emit:l}){const a=l,{locale:r}=P(),u=w(r.value);M(r,o=>{u.value=o},{immediate:!0});const g=o=>u.value===o?"background: #374151; border-color: #60a5fa;":"",d=o=>{u.value=o,r.value=o,ne(o),a("languageChange",o),a("close")};return(o,t)=>i.isOpen?(f(),b("div",ke,[e("div",{style:{position:"absolute",top:"0",left:"0",right:"0",bottom:"0",background:"rgba(0, 0, 0, 0.6)"},onClick:t[0]||(t[0]=p=>o.$emit("close"))}),e("div",$e,[e("div",xe,[e("h3",Ie,s(o.$t("languages.selectLanguage")),1),e("button",{style:{padding:"4px",background:"none",border:"none","border-radius":"4px",cursor:"pointer",transition:"background-color 0.2s",color:"#2f3042"},onClick:t[1]||(t[1]=p=>o.$emit("close")),onMouseover:t[2]||(t[2]=p=>p.target.style.backgroundColor="#4A4A4A"),onMouseout:t[3]||(t[3]=p=>p.target.style.backgroundColor="transparent")},[(f(),b("svg",Me,[...t[7]||(t[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)])]))],32)]),e("div",Ae,[e("button",{style:T([g("zh"),{width:"100%",display:"flex","align-items":"center",padding:"12px",border:"1px solid #4a4a4a","border-radius":"8px",cursor:"pointer",transition:"all 0.2s",background:"#2f3042",color:"#f5f5f5"}]),onClick:t[4]||(t[4]=p=>d("zh"))},[t[9]||(t[9]=e("span",{style:{"font-size":"24px","margin-right":"12px"}},"🇨🇳",-1)),e("div",ze,[e("div",Le,s(o.$t("languages.zh")),1),e("div",Se,s(o.$t("languages.zhDesc")),1)]),u.value==="zh"?(f(),b("svg",je,[...t[8]||(t[8]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"},null,-1)])])):_("",!0)],4),e("button",{style:T([g("en"),{width:"100%",display:"flex","align-items":"center",padding:"12px",border:"1px solid #4a4a4a","border-radius":"8px",cursor:"pointer",transition:"all 0.2s",background:"#2f3042",color:"#f5f5f5"}]),onClick:t[5]||(t[5]=p=>d("en"))},[t[11]||(t[11]=e("span",{style:{"font-size":"24px","margin-right":"12px"}},"🇺🇸",-1)),e("div",Be,[e("div",Ee,s(o.$t("languages.en")),1),e("div",Te,s(o.$t("languages.enDesc")),1)]),u.value==="en"?(f(),b("svg",Oe,[...t[10]||(t[10]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"},null,-1)])])):_("",!0)],4),e("button",{style:T([g("zh-tw"),{width:"100%",display:"flex","align-items":"center",padding:"12px",border:"1px solid #4a4a4a","border-radius":"8px",cursor:"pointer",transition:"all 0.2s",background:"#2f3042",color:"#f5f5f5"}]),onClick:t[6]||(t[6]=p=>d("zh-tw"))},[t[13]||(t[13]=e("span",{style:{"font-size":"24px","margin-right":"12px"}},"🇹🇼",-1)),e("div",We,[e("div",qe,s(o.$t("languages.zh-tw")),1),e("div",De,s(o.$t("languages.zh-twDesc")),1)]),u.value==="zh-tw"?(f(),b("svg",Ne,[...t[12]||(t[12]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"},null,-1)])])):_("",!0)],4)])])])):_("",!0)}},Ue=Pe,Fe={class:"layout"},He={class:"header"},Ve={class:"toolbar mobile-only"},Ge=D({__name:"Layout",setup(i){const l=J(),a=X(),r=w(!1),u=w(""),g=w(!1),d=w(!1),o=U(()=>a.path.startsWith("/mining/")),t=n=>{console.log("Language changed to:",n),k()},p=()=>g.value=!0,k=()=>g.value=!1,m=()=>r.value=!r.value,c=()=>r.value=!1,h=n=>{l.push("/mining/".concat(n)),c()},$={chainId:"0x431A",chainName:"AIC Chain",nativeCurrency:{name:"AIC",symbol:"AIC",decimals:18},rpcUrls:["https://rpc.aicchain.vip"],blockExplorerUrls:["https://scan.aicchain.vip"],iconUrls:["https://aicchain.vip/logo.png"]},z=async()=>{if(!window.ethereum){console.warn("MetaMask 未安装");return}try{if(await window.ethereum.request({method:"eth_chainId"})===$.chainId)return;try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:$.chainId}]}),console.log("已切换到 AIC 网络")}catch(n){n.code===4902?(await window.ethereum.request({method:"wallet_addEthereumChain",params:[$]}),console.log("已添加 AIC 网络")):console.error("切换 AIC 网络失败:",n)}}catch(n){console.error("检查或添加网络失败:",n)}};ee();const{connectors:x,connect:L}=ce(),{isConnected:S}=F(),G=async()=>{if(!(S.value||!x.length))try{const n=x[0];await L({connector:n}),localStorage.setItem("lastConnectedConnector",n.id),await z()}catch(n){console.error("Connect wallet failed:",n)}},j=async()=>{if(!(S.value||d.value||!x.length)){d.value=!0;try{const n=localStorage.getItem("lastConnectedConnector");if(console.log("Last connected connector:",n),n){const v=x.find(B=>B.id===n);v?(console.log("Attempting auto connect wallet:",n),await L({connector:v}),console.log("Auto connect successful"),await z()):(console.warn("Previous wallet connection info not found"),localStorage.removeItem("lastConnectedConnector"))}else{const v=x[0];await L({connector:v}),localStorage.setItem("lastConnectedConnector",v.id),await z()}}catch(n){console.warn("Auto connect failed:",n),localStorage.removeItem("lastConnectedConnector")}finally{d.value=!1}}};return Y(async()=>{setTimeout(()=>j(),3e3);try{const n=await fetch("/version.json");n.ok&&(u.value=(await n.json()).version||"dev")}catch(n){console.warn("Failed to get version info:",n),u.value="dev"}}),M(()=>a.path,()=>setTimeout(()=>j(),3e3)),M(S,n=>{n?console.log("Wallet connected"):(console.log("Wallet disconnected"),setTimeout(()=>j(),1e3))}),M(()=>a.query.invite,n=>{n&&typeof n=="string"?sessionStorage.setItem("invite",n):sessionStorage.removeItem("invite")},{immediate:!0}),(n,v)=>{const B=O("router-view"),E=O("router-link");return f(),b(R,null,[e("div",Fe,[e("header",He,[y(_e,{onClicklanguage:p,onConnect:G})]),e("main",{class:C(["main",{"has-toolbar":!0}])},[y(B)]),e("div",Ve,[y(E,{to:"/",class:C(["toolbar-item",{active:n.$route.path==="/"}])},{default:A(()=>[e("div",{class:C(["icon",n.$route.path==="/"?"home-icon-active":"home-icon"])},null,2),e("span",null,s(n.$t("tab_bar.home")),1)]),_:1},8,["class"]),e("div",{class:C(["toolbar-item",{active:o.value||r.value}]),onClick:m},[e("div",{class:C(["icon",o.value||r.value?"mining-icon-active":"mining-icon"])},null,2),e("span",null,s(n.$t("tab_bar.mining")),1)],2),y(E,{to:"/promote",class:C(["toolbar-item",{active:n.$route.path==="/promote"}])},{default:A(()=>[e("div",{class:C(["icon",n.$route.path==="/promote"?"promote-icon-active":"promote-icon"])},null,2),e("span",null,s(n.$t("tab_bar.promotion")),1)]),_:1},8,["class"]),y(E,{to:"/ranking",class:C(["toolbar-item",{active:n.$route.path==="/ranking"}])},{default:A(()=>[e("div",{class:C(["icon",n.$route.path==="/ranking"?"ranking-icon-active":"ranking-icon"])},null,2),e("span",null,s(n.$t("tab_bar.ranking")),1)]),_:1},8,["class"])]),r.value?(f(),b("div",{key:0,class:"mining-menu-overlay",onClick:c},[e("div",{class:"mining-menu",onClick:v[2]||(v[2]=N(()=>{},["stop"]))},[e("div",{class:"mining-menu-item",onClick:v[0]||(v[0]=K=>h("th"))},[v[3]||(v[3]=e("div",{class:"menu-icon ht-icon"},null,-1)),e("span",null,s(n.$t("mining_tab.th_mining")),1)]),v[5]||(v[5]=e("div",{class:"divider"},null,-1)),e("div",{class:"mining-menu-item",onClick:v[1]||(v[1]=K=>h("aic"))},[v[4]||(v[4]=e("div",{class:"menu-icon aic-icon"},null,-1)),e("span",null,s(n.$t("mining_tab.aic_pool")),1)])])])):_("",!0)]),y(Ue,{"is-open":g.value,onClose:k,onLanguageChange:t},null,8,["is-open"])],64)}}}),Xe=V(Ge,[["__scopeId","data-v-435353b9"]]);export{Xe as default};
