import{A as h,F as M,G as O,J as s,K as y,M as D,N as z,R as F,T as W,V as _,_ as K,a as U,b as k,f as J,g as E,i as Q,k as X,q as T,s as N,v as V,w as C,x as b,y as e}from"./vue-vendor-BlJhVHd7.js";import{i as Y,n as H,r as P,t as Z}from"./useChainId-ueCEH54K.js";import{Gt as R,n as ee,s as ne}from"./index--94b6r5k.js";import{t as te}from"./Logo-CXHBhoYc.js";async function oe(i,l){var r;let a;if(typeof l.connector=="function"?a=i._internal.connectors.setup(l.connector):a=l.connector,a.uid===i.state.current)throw new ne;try{i.setState(o=>({...o,status:"connecting"})),a.emitter.emit("message",{type:"connecting"});const{connector:u,...g}=l,d=await a.connect(g);return a.emitter.off("connect",i._internal.events.connect),a.emitter.on("change",i._internal.events.change),a.emitter.on("disconnect",i._internal.events.disconnect),await((r=i.storage)==null?void 0:r.setItem("recentConnectorId",a.id)),i.setState(o=>({...o,connections:new Map(o.connections).set(a.uid,{accounts:g.withCapabilities?d.accounts.map(n=>typeof n=="object"?n.address:n):d.accounts,chainId:d.chainId,connector:a}),current:a.uid,status:"connected"})),{accounts:g.withCapabilities?d.accounts.map(o=>typeof o=="object"?o:{address:o,capabilities:{}}):d.accounts,chainId:d.chainId}}catch(u){throw i.setState(g=>({...g,status:g.current?"connected":"disconnected"})),u}}var x=[];function ae(i){const l=i.connectors;return x.length===l.length&&x.every((a,r)=>a===l[r])?x:(x=l,l)}function se(i,l){const{onChange:a}=l;return i._internal.connectors.subscribe((r,u)=>{a(Object.values(r),u)})}function ie(i){return{mutationFn(l){return oe(i,l)},mutationKey:["connect"]}}function le(i={}){const l=P(i),a=_(ae(l)),r=se(l,{onChange(u){a.value=u}});return F(()=>r()),a}function re(i={}){const{mutation:l}=i,a=P(i),r=ie(a),{mutate:u,mutateAsync:g,...d}=Y({...l,...r}),o=a.subscribe(({status:n})=>n,(n,p)=>{p==="connected"&&n==="disconnected"&&d.reset()});return F(()=>o()),{...d,connect:u,connectAsync:g,connectors:le({config:a}).value}}var ce={class:"navbat__ca"},ue={class:"navbar"},de={class:"navbar__content"},ge={href:"/",class:"navbar__logo-link"},ve={class:"navbar__logo"},pe={class:"navbar__links","aria-label":"Primary",style:{display:"none"}},fe={class:"navbar__ca"},me={class:"connect_btn"},he={class:"flag-emoji"},be={class:"language-selector mobile-lang",role:"button","aria-label":"切换语言"},ye={class:"flag-emoji"},Ce=W({__name:"Header",emits:["clicklanguage","connect"],setup(i,{emit:l}){const{locale:a}=N(),r=l,{address:u,isConnected:g}=H(),d=async()=>{try{r("connect")}catch(c){console.log("Connect failed:",c)}},o=c=>c?"".concat(c.slice(0,6),"...").concat(c.slice(-6)):"",n=V(()=>{switch(a.value){case"zh":return"🇨🇳";case"zh-tw":return"🇹🇼";case"en":return"🇺🇸";default:return"🇺🇸"}}),p=()=>{r("clicklanguage")},w=_(!1),f=()=>{w.value=!1};return(c,m)=>(h(),b("div",ce,[e("header",ue,[e("div",de,[e("a",ge,[e("div",ve,[C(te),m[1]||(m[1]=e("span",{class:"navbar__title"},"AICredit Chain（AIC）",-1))])]),e("nav",pe,[e("a",{href:"#home",onClick:f},s(c.$t("navigation.home")),1),e("a",{href:"#About",onClick:f},s(c.$t("navigation.about")),1),e("a",{href:"#UseCases",onClick:f},s(c.$t("navigation.useCases")),1),e("a",{href:"#Technology",onClick:f},s(c.$t("navigation.technology")),1),e("a",{href:"#Ecosystem",onClick:f},s(c.$t("navigation.ecosystem")),1)])]),e("div",fe,[e("div",me,[O(g)?(h(),b("button",{key:1,class:"btn btn--secondary",onClick:m[0]||(m[0]=(...L)=>c.disconnect&&c.disconnect(...L))},s(o(O(u))),1)):(h(),b("button",{key:0,class:"btn btn--secondary",onClick:d},"Connect Wallet"))]),m[3]||(m[3]=e("div",{class:"line"},null,-1)),e("div",{class:"language-selector",role:"button","aria-label":"切换语言",onClick:p},[e("span",he,s(n.value),1),m[2]||(m[2]=e("span",{class:"arrow-down"},"▼",-1))])])]),C(J,{name:"fade"},{default:M(()=>[w.value?(h(),b("div",{key:0,class:"mobile-menu",onClick:E(f,["self"])},[e("a",{href:"#home",onClick:f},s(c.$t("navigation.home")),1),e("a",{href:"#About",onClick:f},s(c.$t("navigation.about")),1),e("a",{href:"#UseCases",onClick:f},s(c.$t("navigation.useCases")),1),e("a",{href:"#Technology",onClick:f},s(c.$t("navigation.technology")),1),e("a",{href:"#Ecosystem",onClick:f},s(c.$t("navigation.ecosystem")),1),e("div",be,[e("span",ye,s(n.value),1),m[4]||(m[4]=e("span",{class:"arrow-down"},"▼",-1))])])):k("",!0)]),_:1})]))}}),_e=R(Ce,[["__scopeId","data-v-41a419f6"]]),ke={key:0,style:{position:"fixed",top:"0",left:"0",right:"0",bottom:"0","z-index":"9999",display:"flex","align-items":"center","justify-content":"center"}},we={style:{background:"#1d1e2a","border-radius":"12px",padding:"24px",margin:"16px",width:"100%","max-width":"384px",position:"relative","box-shadow":"0 10px 25px rgba(0, 0, 0, 0.3)"}},$e={style:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"16px"}},xe={style:{"font-size":"18px","font-weight":"600",margin:"0",color:"#f5f5f5"}},Me={style:{width:"20px",height:"20px"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ze={style:{display:"flex","flex-direction":"column",gap:"8px"}},Le={style:{"text-align":"left",flex:"1"}},Ae={style:{"font-weight":"500"}},Ie={style:{"font-size":"14px",color:"#d1d5db"}},Se={key:0,style:{width:"20px",height:"20px",color:"#3b82f6"},fill:"currentColor",viewBox:"0 0 20 20"},je={style:{"text-align":"left",flex:"1"}},Be={style:{"font-weight":"500"}},Te={style:{"font-size":"14px",color:"#d1d5db"}},Oe={key:0,style:{width:"20px",height:"20px",color:"#3b82f6"},fill:"currentColor",viewBox:"0 0 20 20"},De={style:{"text-align":"left",flex:"1"}},Fe={style:{"font-weight":"500"}},We={style:{"font-size":"14px",color:"#d1d5db"}},Ee={key:0,style:{width:"20px",height:"20px",color:"#3b82f6"},fill:"currentColor",viewBox:"0 0 20 20"},Ne={__name:"LanguageModal",props:{isOpen:Boolean},emits:["close","languageChange"],setup(i,{emit:l}){const a=l,{locale:r}=N(),u=_(r.value);z(r,o=>{u.value=o},{immediate:!0});const g=o=>u.value===o?"background: #374151; border-color: #60a5fa;":"",d=o=>{u.value=o,r.value=o,ee(o),a("languageChange",o),a("close")};return(o,n)=>i.isOpen?(h(),b("div",ke,[e("div",{style:{position:"absolute",top:"0",left:"0",right:"0",bottom:"0",background:"rgba(0, 0, 0, 0.6)"},onClick:n[0]||(n[0]=p=>o.$emit("close"))}),e("div",we,[e("div",$e,[e("h3",xe,s(o.$t("languages.selectLanguage")),1),e("button",{style:{padding:"4px",background:"none",border:"none","border-radius":"4px",cursor:"pointer",transition:"background-color 0.2s",color:"#2f3042"},onClick:n[1]||(n[1]=p=>o.$emit("close")),onMouseover:n[2]||(n[2]=p=>p.target.style.backgroundColor="#4A4A4A"),onMouseout:n[3]||(n[3]=p=>p.target.style.backgroundColor="transparent")},[(h(),b("svg",Me,[...n[7]||(n[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)])]))],32)]),e("div",ze,[e("button",{style:T([g("zh"),{width:"100%",display:"flex","align-items":"center",padding:"12px",border:"1px solid #4a4a4a","border-radius":"8px",cursor:"pointer",transition:"all 0.2s",background:"#2f3042",color:"#f5f5f5"}]),onClick:n[4]||(n[4]=p=>d("zh"))},[n[9]||(n[9]=e("span",{style:{"font-size":"24px","margin-right":"12px"}},"🇨🇳",-1)),e("div",Le,[e("div",Ae,s(o.$t("languages.zh")),1),e("div",Ie,s(o.$t("languages.zhDesc")),1)]),u.value==="zh"?(h(),b("svg",Se,[...n[8]||(n[8]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"},null,-1)])])):k("",!0)],4),e("button",{style:T([g("en"),{width:"100%",display:"flex","align-items":"center",padding:"12px",border:"1px solid #4a4a4a","border-radius":"8px",cursor:"pointer",transition:"all 0.2s",background:"#2f3042",color:"#f5f5f5"}]),onClick:n[5]||(n[5]=p=>d("en"))},[n[11]||(n[11]=e("span",{style:{"font-size":"24px","margin-right":"12px"}},"🇺🇸",-1)),e("div",je,[e("div",Be,s(o.$t("languages.en")),1),e("div",Te,s(o.$t("languages.enDesc")),1)]),u.value==="en"?(h(),b("svg",Oe,[...n[10]||(n[10]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"},null,-1)])])):k("",!0)],4),e("button",{style:T([g("zh-tw"),{width:"100%",display:"flex","align-items":"center",padding:"12px",border:"1px solid #4a4a4a","border-radius":"8px",cursor:"pointer",transition:"all 0.2s",background:"#2f3042",color:"#f5f5f5"}]),onClick:n[6]||(n[6]=p=>d("zh-tw"))},[n[13]||(n[13]=e("span",{style:{"font-size":"24px","margin-right":"12px"}},"🇹🇼",-1)),e("div",De,[e("div",Fe,s(o.$t("languages.zh-tw")),1),e("div",We,s(o.$t("languages.zh-twDesc")),1)]),u.value==="zh-tw"?(h(),b("svg",Ee,[...n[12]||(n[12]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"},null,-1)])])):k("",!0)],4)])])])):k("",!0)}},Ve=Ne,He={class:"layout"},Pe={class:"header"},Re={class:"toolbar mobile-only"},qe=W({__name:"Layout",setup(i){const l=U(),a=Q(),r=_(!1),u=_(""),g=_(!1),d=_(!1),o=V(()=>a.path.startsWith("/mining/")),n=t=>{console.log("Language changed to:",t),w()},p=()=>{g.value=!0},w=()=>{g.value=!1},f=()=>{r.value=!r.value},c=()=>{r.value=!1},m=t=>{l.push("/mining/".concat(t)),c()},L=Z(),{connectors:$,connect:A}=re(),{isConnected:I}=H(),q=async()=>{if(!(I.value||!$.length))try{const t=$[0];await A({connector:t,chainId:L}),localStorage.setItem("lastConnectedConnector",t.id)}catch(t){console.error("Connect wallet failed:",t)}},S=async()=>{if(!(I.value||d.value||!$.length)){d.value=!0;try{const t=localStorage.getItem("lastConnectedConnector");if(console.log("Last connected connector:",t),t){const v=$.find(j=>j.id===t);v?(console.log("Attempting auto connect wallet:",t),await A({connector:v}),console.log("Auto connect successful")):(console.warn("Previous wallet connection info not found"),localStorage.removeItem("lastConnectedConnector"))}else{const v=$[0];await A({connector:v}),localStorage.setItem("lastConnectedConnector",v.id)}}catch(t){console.warn("Auto connect failed:",t),localStorage.removeItem("lastConnectedConnector")}finally{d.value=!1}}};return X(async()=>{setTimeout(()=>{S()},3e3);try{const t=await fetch("/version.json");t.ok&&(u.value=(await t.json()).version||"dev")}catch(t){console.warn("Failed to get version info:",t),u.value="dev"}}),z(()=>a.path,()=>{setTimeout(()=>{S()},3e3)}),z(I,t=>{t?console.log("Wallet connected"):(console.log("Wallet disconnected"),setTimeout(()=>{S()},1e3))}),z(()=>a.query.invite,t=>{t&&typeof t=="string"?sessionStorage.setItem("invite",t):sessionStorage.removeItem("invite")},{immediate:!0}),(t,v)=>{const j=D("router-view"),B=D("router-link");return h(),b(K,null,[e("div",He,[e("header",Pe,[C(_e,{onClicklanguage:p,onConnect:q})]),e("main",{class:y(["main",{"has-toolbar":!0}])},[C(j)]),e("div",Re,[C(B,{to:"/",class:y(["toolbar-item",{active:t.$route.path==="/"}])},{default:M(()=>[e("div",{class:y(["icon",t.$route.path==="/"?"home-icon-active":"home-icon"])},null,2),e("span",null,s(t.$t("tab_bar.home")),1)]),_:1},8,["class"]),e("div",{class:y(["toolbar-item",{active:o.value||r.value}]),onClick:f},[e("div",{class:y(["icon",o.value||r.value?"mining-icon-active":"mining-icon"])},null,2),e("span",null,s(t.$t("tab_bar.mining")),1)],2),C(B,{to:"/promote",class:y(["toolbar-item",{active:t.$route.path==="/promote"}])},{default:M(()=>[e("div",{class:y(["icon",t.$route.path==="/promote"?"promote-icon-active":"promote-icon"])},null,2),e("span",null,s(t.$t("tab_bar.promotion")),1)]),_:1},8,["class"]),C(B,{to:"/ranking",class:y(["toolbar-item",{active:t.$route.path==="/ranking"}])},{default:M(()=>[e("div",{class:y(["icon",t.$route.path==="/ranking"?"ranking-icon-active":"ranking-icon"])},null,2),e("span",null,s(t.$t("tab_bar.ranking")),1)]),_:1},8,["class"])]),r.value?(h(),b("div",{key:0,class:"mining-menu-overlay",onClick:c},[e("div",{class:"mining-menu",onClick:v[2]||(v[2]=E(()=>{},["stop"]))},[e("div",{class:"mining-menu-item",onClick:v[0]||(v[0]=G=>m("th"))},[v[3]||(v[3]=e("div",{class:"menu-icon ht-icon"},null,-1)),e("span",null,s(t.$t("mining_tab.th_mining")),1)]),v[5]||(v[5]=e("div",{class:"divider"},null,-1)),e("div",{class:"mining-menu-item",onClick:v[1]||(v[1]=G=>m("aic"))},[v[4]||(v[4]=e("div",{class:"menu-icon aic-icon"},null,-1)),e("span",null,s(t.$t("mining_tab.aic_pool")),1)])])])):k("",!0)]),C(Ve,{"is-open":g.value,onClose:w,onLanguageChange:n},null,8,["is-open"])],64)}}}),Qe=R(qe,[["__scopeId","data-v-022b1d89"]]);export{Qe as default};
