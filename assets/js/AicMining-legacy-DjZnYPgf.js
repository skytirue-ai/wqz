!function(){function e(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,a){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var t,r,i,o,s=[],c=!0,l=!1;try{if(i=(n=n.call(e)).next,0===a){if(Object(n)!==n)return;c=!1}else for(;!(c=(t=i.call(n)).done)&&(s.push(t.value),s.length!==a);c=!0);}catch(e){l=!0,r=e}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw r}}return s}}(e,n)||function(e,n){if(e){if("string"==typeof e)return a(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?a(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,a){(null==a||a>e.length)&&(a=e.length);for(var n=0,t=Array(a);n<a;n++)t[n]=e[n];return t}function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,a,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function s(n,r,i,o){var s=r&&r.prototype instanceof l?r:l,d=Object.create(s.prototype);return t(d,"_invoke",function(n,t,r){var i,o,s,l=0,d=r||[],u=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(a,n){return i=a,o=0,s=e,f.n=n,c}};function p(n,t){for(o=n,s=t,a=0;!u&&l&&!r&&a<d.length;a++){var r,i=d[a],p=f.p,v=i[2];n>3?(r=v===t)&&(s=i[(o=i[4])?5:(o=3,3)],i[4]=i[5]=e):i[0]<=p&&((r=n<2&&p<i[1])?(o=0,f.v=t,f.n=i[1]):p<v&&(r=n<3||i[0]>t||t>v)&&(i[4]=n,i[5]=t,f.n=v,o=0))}if(r||n>1)return c;throw u=!0,t}return function(r,d,v){if(l>1)throw TypeError("Generator is already running");for(u&&1===d&&p(d,v),o=d,s=v;(a=o<2?e:s)||!u;){i||(o?o<3?(o>1&&(f.n=-1),p(o,s)):f.n=s:f.v=s);try{if(l=2,i){if(o||(r="next"),a=i[r]){if(!(a=a.call(i,s)))throw TypeError("iterator result is not an object");if(!a.done)return a;s=a.value,o<2&&(o=0)}else 1===o&&(a=i.return)&&a.call(i),o<2&&(s=TypeError("The iterator does not provide a '"+r+"' method"),o=1);i=e}else if((a=(u=f.n<0)?s:n.call(t,f))!==c)break}catch(a){i=e,o=1,s=a}finally{l=1}}return{value:a,done:u}}}(n,i,o),!0),d}var c={};function l(){}function d(){}function u(){}a=Object.getPrototypeOf;var f=[][i]?a(a([][i]())):(t(a={},i,function(){return this}),a),p=u.prototype=l.prototype=Object.create(f);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,t(e,o,"GeneratorFunction")),e.prototype=Object.create(p),e}return d.prototype=u,t(p,"constructor",u),t(u,"constructor",d),d.displayName="GeneratorFunction",t(u,o,"GeneratorFunction"),t(p),t(p,o,"Generator"),t(p,i,function(){return this}),t(p,"toString",function(){return"[object Generator]"}),(n=function(){return{w:s,m:v}})()}function t(e,a,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}t=function(e,a,n,r){function o(a,n){t(e,a,function(e){return this._invoke(a,n,e)})}a?i?i(e,a,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[a]=n:(o("next",0),o("throw",1),o("return",2))},t(e,a,n,r)}function r(e,a,n,t,r,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?a(c):Promise.resolve(c).then(t,r)}function i(e){return function(){var a=this,n=arguments;return new Promise(function(t,i){var o=e.apply(a,n);function s(e){r(o,t,i,s,c,"next",e)}function c(e){r(o,t,i,s,c,"throw",e)}s(void 0)})}}System.register(["./vue-vendor-legacy-Bv_HnxI9.js","./AICStakeTH-legacy-DeXciiR9.js","./useChainId-legacy-BTCRXUuO.js","./call-legacy-BtldUVpM.js","./encodeFunctionData-legacy-KxjNBGX9.js","./utils-legacy-QV70pBc9.js","./sha2-legacy-DJ3tDpv6.js","./index-legacy-BnOx3c9e.js","./Spin-legacy-BopbvSUS.js"],function(a,t){var r,o,s,c,l,d,u,f,p,v,g,m,b,y,h,x,w,k,S,j,C,A,_,$,I,F,T,E,O,z,P,R,G,N,M,D,H,U,B,L,Y,q,W,Q,V,J,K,X,Z,ee,ae,ne,te,re,ie,oe,se,ce,le,de,ue,fe,pe,ve,ge,me,be,ye,he,xe,we,ke;return{setters:[function(e){r=e.A,o=e.B,s=e.F,c=e.N,l=e.P,d=e.W,u=e.b,f=e.f,p=e.g,v=e.h,g=e.k,m=e.m,b=e.q,y=e.s,h=e.u,x=e.v,w=e.w,k=e.x,S=e.y},function(e){j=e.a,C=e.i,A=e.l,_=e.o,$=e.r,I=e.s,F=e.t},function(e){T=e.n,E=e.t},function(e){O=e.E},function(e){},function(e){},function(e){},function(e){z=e.Gt,P=e.t},function(e){R=e.t}],execute:function(){(G=document.createElement("style")).textContent=".container[data-v-5ea624d6]{color:#fff;width:100%;padding:31px 15px}.title[data-v-5ea624d6]{margin-bottom:20px;font-size:24px;font-weight:700}.info-card[data-v-5ea624d6]{background:#111827;border-radius:12px;padding:14px}.divider[data-v-5ea624d6]{background:#374151;height:1px;margin:16px 0}.info-item[data-v-5ea624d6]{justify-content:space-between;padding:12px 0;display:flex}.label[data-v-5ea624d6]{color:#9ca3af;font-size:14px}.value[data-v-5ea624d6]{color:#fff;font-size:14px}.value.highlight[data-v-5ea624d6]{color:#10b981;font-weight:600}.action-item[data-v-5ea624d6]{gap:10px;margin-top:20px;display:flex}.primary-button[data-v-5ea624d6],.secondary-button[data-v-5ea624d6],.confirm-btn[data-v-5ea624d6]{cursor:pointer;border:none;border-radius:12px;padding:10px 20px;font-weight:600}.primary-button[data-v-5ea624d6]{color:#fff;background:linear-gradient(93deg,#b621fe 6.66%,#3f77f9 96.39%);border-radius:5px}.secondary-button[data-v-5ea624d6]{color:#fff;background:#111827;border:1px solid #424b59;border-radius:5px}.mining-menu-overlay[data-v-5ea624d6]{background:rgba(0,0,0,.55);justify-content:center;align-items:flex-end;display:flex;position:fixed;top:0;bottom:0;left:0;right:0}.menu-header[data-v-5ea624d6]{justify-content:space-between;align-items:center;margin-bottom:16px;font-size:18px;font-weight:600;display:flex}.close-btn[data-v-5ea624d6]{color:#9ca3af;cursor:pointer;background:0 0;border:none;font-size:20px}.input-section[data-v-5ea624d6]{flex-direction:column;margin-bottom:20px;display:flex}.input-section label[data-v-5ea624d6]{color:#9ca3af;margin-bottom:8px;font-size:14px}.stake-input[data-v-5ea624d6]{color:#fff;background:#111827;border:1px solid #374151;border-radius:12px;outline:none;padding:10px;font-size:16px}.stake-input[data-v-5ea624d6]:focus{border-color:#4a21ef}.error-text[data-v-5ea624d6]{color:#f87171;margin-top:6px;font-size:12px}.action-section[data-v-5ea624d6]{justify-content:center;gap:10px;display:flex}.confirm-btn[data-v-5ea624d6]{color:#fff;cursor:pointer;background:linear-gradient(93deg,#b621fe 6.66%,#3f77f9 96.39%);border:none;border-radius:12px;flex:1;padding:12px;font-size:16px;font-weight:600;transition:all .2s}.confirm-btn[data-v-5ea624d6]:disabled{opacity:.6;cursor:not-allowed}.confirm-btn[data-v-5ea624d6]:hover:not(:disabled){transform:scale(1.02)}@keyframes slideUp-5ea624d6{0%{transform:translateY(100%)}to{transform:translateY(0)}}.slide-up-enter-active[data-v-5ea624d6],.slide-up-leave-active[data-v-5ea624d6]{transition:all .3s}.slide-up-enter-from[data-v-5ea624d6],.slide-up-leave-to[data-v-5ea624d6]{opacity:0;transform:translateY(100%)}@media (min-width:780px){.container[data-v-5ea624d6]{padding:115px 14px}.mining-menu[data-v-5ea624d6]{margin-bottom:100px}}.mining-menu-overlay[data-v-5ea624d6]{z-index:999;background:rgba(0,0,0,.55);justify-content:center;align-items:flex-end;padding:10px;display:flex;position:fixed;top:0;bottom:0;left:0;right:0}.mining-menu[data-v-5ea624d6]{background:#1c2534;border:1px solid rgba(255,255,255,.05);border-radius:20px 20px 0 0;width:100%;max-width:480px;margin-bottom:53px;padding:20px;animation:.25s ease-out slideUp-5ea624d6;box-shadow:0 -4px 20px rgba(0,0,0,.3)}@media (min-width:780px){.mining-menu-overlay[data-v-5ea624d6]{align-items:center}.mining-menu[data-v-5ea624d6]{border-radius:12px;max-height:80vh;margin-bottom:0}}\n/*$vite$:1*/",document.head.appendChild(G),N={class:"container"},M={class:"title"},D={class:"info-card"},H={class:"info-item"},U={class:"label"},B={class:"info-item"},L={class:"label"},Y={class:"info-item"},q={class:"label"},W={class:"info-item"},Q={class:"label"},V={class:"info-item"},J={class:"label"},K={class:"info-item"},X={class:"label"},Z={class:"value highlight"},ee={class:"info-item"},ae={class:"label"},ne={class:"value"},te={class:"info-item"},re={class:"label"},ie={class:"value"},oe={class:"action-item"},se=["disabled"],ce={key:0},le={key:1,class:"spinner"},de=["disabled"],ue={key:0},fe={key:1,class:"spinner"},pe={class:"input-section"},ve={key:0,class:"error-text"},ge={class:"action-section"},me=["disabled"],be={key:0},ye={key:1,class:"spinner"},he=["disabled"],xe={key:0},we={key:1,class:"spinner"},ke={__name:"index",setup(a){var t=y().t,z=h(),G=T(),ke=G.address,Se=G.isConnected,je=E(),Ce=x(()=>e=>{switch(e){case"a":return t("mining.aic.FirepowerEngine");case"b":return t("mining.aic.QuantStorm");case"c":return t("mining.aic.BlueWhaleBarrage");default:return"Engine"}}),Ae=C(je.value,"USDT"),_e=C(je.value,"AICStakeTH");console.log("AIC_StakeTH_ADDRESS",_e),console.log("chainId",je.value);var $e=o(!1),Ie=o(""),Fe=o(!1),Te=e=>new $(e).div(Math.pow(10,18)).toFixed(4),Ee=e=>new $(e).times(Math.pow(10,18)).toFixed(0),Oe=x(()=>new $(Ie.value||0).gt(0)),ze=I({address:Ae,abi:O,functionName:"allowance",args:[ke,_e],chainId:je,enabled:!!ke&&Se}),Pe=ze.data,Re=ze.refetch,Ge=x(()=>{return e=Pe.value,new $(e||0).div(Math.pow(10,18));var e}),Ne=x(()=>Ge.value.gte(new $(Ie.value||0))),Me=x(()=>{var e=new $(Ie.value||0),a=Ge.value;return e.gt(a)?Ee(e):Ee(a)}),De=I({address:_e,abi:F,functionName:"getStakeInfo",args:[ke],chainId:je,enabled:!!ke&&Se,onSuccess(){console.debug("getStakeInfo Success...")}}),He=De.data,Ue=De.refetch,Be=I({address:_e,abi:F,functionName:"getRewardAmount",args:[ke],chainId:je,enabled:!!ke&&Se}),Le=Be.data,Ye=Be.refetch,qe=j(),We=qe.writeContractAsync,Qe=qe.data,Ve=function(){var e=i(n().m(function e(){var a,r;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:if(Se){e.n=1;break}return e.a(2,z.warning(t("message.notConnected")));case 1:return e.p=1,Fe.value=!0,e.n=2,We({address:Ae,abi:O,functionName:"approve",args:[_e,Me.value],chainId:je.value,enabled:!!ke&&Se});case 2:a=e.v,Re(),z.info("Approveing ...",a),e.n=4;break;case 3:e.p=3,r=e.v,z.error("Approve Failed : "+(r.shortMessage||r.message));case 4:return e.p=4,Fe.value=!1,e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(){return e.apply(this,arguments)}}(),Je=_({hash:Qe,onSuccess(){Re()}}),Ke=Je.isSuccess,Xe=Je.isError,Ze=Je.error,ea=Je.isLoading;c([Ke,Xe],a=>{var n=e(a,2),t=n[0],r=n[1];t?(console.log("Approve  Success"),Re()):r&&(ja(),console.error("Approve Failed ...",Ze),z.error("Approve Failed:"+Ze))});var aa=j(),na=aa.writeContractAsync,ta=aa.data,ra=aa.isPending,ia=function(){var e=i(n().m(function e(){var a,r,i;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:if(Se){e.n=1;break}return e.a(2,z.warning(t("message.notConnected")));case 1:if(Oe.value){e.n=2;break}return e.a(2,z.warning(t("message.invalidStakeAmount")));case 2:if(a=new $(Ie.value||0),!Ge.value.lt(a)){e.n=3;break}return z.warning(t("message.insufficientAllowance")),e.a(2);case 3:return e.p=3,Fe.value=!0,e.n=4,na({address:_e,abi:F,functionName:"stakeTH",args:[[ke.value],[Ee(Ie.value)]],chainId:je.value});case 4:r=e.v,console.log("result",r),z.info(t("message.stakingInProgress")),e.n=6;break;case 5:e.p=5,i=e.v,z.error(`${t("message.stakeFailed")}`+(i.shortMessage||i.message));case 6:return e.p=6,Fe.value=!1,e.f(6);case 7:return e.a(2)}},e,null,[[3,5,6,7]])}));return function(){return e.apply(this,arguments)}}(),oa=_({hash:ta,onSuccess(){$e.value=!1,Re()}}),sa=oa.data,ca=oa.isSuccess,la=oa.isError,da=oa.error,ua=oa.isLoading;c([ca,la],a=>{var n=e(a,2),r=n[0],i=n[1];if(r)Ue(),console.log("✅ Receipt:",sa);else if(i){var o;console.error("❌ Claim 失败, 回执:",sa),z.error(`${t("message.claimFailed")}`+((null==da?void 0:da.message)||(null==da||null===(o=da.data)||void 0===o?void 0:o.error)||"Claim failed..."))}});var fa=j(),pa=fa.writeContractAsync,va=fa.data,ga=fa.isPending,ma=function(){var e=i(n().m(function e(){var a,r,i,o;return n().w(function(e){for(;;)switch(e.p=e.n){case 0:if(Se){e.n=1;break}return z.warning(t("message.notConnected")),e.a(2);case 1:if(He&&0!=He.value[0]){e.n=2;break}return z.warning(t("message.noReward")),e.a(2);case 2:return e.p=2,Fe.value=!0,z.info(t("message.transactionSending")),e.n=3,pa({address:_e,abi:F,functionName:"withdrawReward",args:[],chainId:je.value});case 3:return a=e.v,console.log("Transaction Hash:",a),z.info(t("message.waitingConfirmation")),e.n=4,A(P,{hash:a,timeout:3e4});case 4:r=e.v,console.log("等待结果的响应这里Transaction Receipt:",r),e.n=6;break;case 5:e.p=5,o=e.v,console.error("Claiming Error:",o),i=ba(o,t),z.error(i);case 6:return e.p=6,Fe.value=!1,e.f(6);case 7:return e.a(2)}},e,null,[[2,5,6,7]])}));return function(){return e.apply(this,arguments)}}(),ba=(e,a)=>{var n=e.shortMessage||e.message||"";return n.includes("user rejected")?a("message.userRejected"):n.includes("insufficient funds")?a("message.insufficientGas"):n.includes("execution reverted")?a("message.contractReverted"):`${a("message.claimFailed")}: ${n}`},ya=_({hash:va,timeout:3e4,query:{retry:3,retryDelay:2e3}}),ha=ya.data,xa=ya.isLoading,wa=ya.isSuccess,ka=ya.isError;c([wa,ka],a=>{var n=e(a,2),r=n[0],i=n[1];if(r)z.success(t("message.claimSuccess")),console.log("✅ Receipt:",ha),console.log("refetchStakeAll"),Promise.all([Ue(),Ye()]);else if(i){var o;console.error("❌ Claim 失败, 回执:",ha),z.error(`${t("message.claimFailed")}`+((null==i?void 0:i.message)||(null==i||null===(o=i.data)||void 0===o?void 0:o.error)||"Claim failed..."))}});var Sa=function(){var e=i(n().m(function e(){return n().w(function(e){for(;;)switch(e.n){case 0:return $e.value=!0,Ie.value="",e.n=1,Re();case 1:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),ja=()=>{$e.value=!1};return g(()=>{Ue(),Ye(),Re()}),(e,a)=>{var n=R;return r(),k("div",N,[S("h2",M,b(e.$t("mining.aic.title")),1),S("div",D,[S("div",H,[S("span",U,b(Ce.value(e.a)),1),a[2]||(a[2]=S("span",{class:"value highlight"},"-",-1))]),S("div",B,[S("span",L,b(e.$t("mining.aic.pool_balance")),1),a[3]||(a[3]=S("span",{class:"value"},"-",-1))]),S("div",Y,[S("span",q,b(e.$t("mining.aic.total_staked")),1),a[4]||(a[4]=S("span",{class:"value"},"-",-1))]),S("div",W,[S("span",Q,b(e.$t("mining.aic.start_time")),1),a[5]||(a[5]=S("span",{class:"value"},"-",-1))]),S("div",V,[S("span",J,b(e.$t("mining.aic.end_time")),1),a[6]||(a[6]=S("span",{class:"value"},"-",-1))]),a[7]||(a[7]=S("div",{class:"divider"},null,-1)),S("div",K,[S("span",X,b(e.$t("mining.aic.my_stake")),1),S("span",Z,b(d(He)?Te(d(He)[0]):"-")+" AIC",1)]),S("div",ee,[S("span",ae,b(e.$t("mining.aic.pending_rewards")),1),S("span",ne,b(d(Le)?Te(d(Le)):0)+" AIC",1)]),S("div",te,[S("span",re,b(e.$t("mining.aic.claimed_rewards")),1),S("span",ie,b(d(He)?Te(d(He)[2]):"-")+" AIC",1)]),S("div",oe,[S("button",{class:"gradient-padding gradient-button primary-button",disabled:d(ra),onClick:Sa},[d(ra)||d(ua)?(r(),k("div",le,[w(n)])):(r(),k("span",ce,b(e.$t("common.stake")),1))],8,se),S("button",{class:"gradient-padding gradient-button secondary-button",disabled:d(ga),onClick:ma},[d(ga)||d(xa)?(r(),k("div",fe,[w(n)])):(r(),k("span",ue,b(e.$t("common.claim")),1))],8,de)])]),w(f,{name:"slide-up"},{default:l(()=>[s(S("div",{class:"mining-menu-overlay",onClick:ja},[S("div",{class:"mining-menu",onClick:a[1]||(a[1]=p(()=>{},["stop"]))},[S("div",pe,[S("label",null,b(e.$t("mining.aic.input_stake_amount")),1),s(S("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>Ie.value=e),type:"number",min:"0",placeholder:"0.00",class:"stake-input"},null,512),[[m,Ie.value]]),Oe.value?u("",!0):(r(),k("div",ve,b(e.$t("mining.aic.enter_valid_amount")),1))]),S("div",ge,[Ne.value?(r(),k("button",{key:1,class:"confirm-btn",disabled:Fe.value,onClick:ia},[Fe.value?(r(),k("div",we,[w(n)])):(r(),k("span",xe,b(e.$t("mining.aic.confirm_stake")),1))],8,he)):(r(),k("button",{key:0,class:"confirm-btn",disabled:d(ea),onClick:Ve},[d(ea)?(r(),k("div",ye,[w(n)])):(r(),k("span",be,b(e.$t("mining.aic.authorize")),1))],8,me))])])],512),[[v,$e.value]])]),_:1})])}}},a("default",z(ke,[["__scopeId","data-v-5ea624d6"]]))}}})}();