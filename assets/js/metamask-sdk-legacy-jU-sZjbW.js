!function(){var e=["baseUrl","Request","fetch","querySerializer","bodySerializer","headers","requestInitExt"],t=["baseUrl","fetch","Request","headers","params","parseAs","querySerializer","bodySerializer","body"],n=["message","explanation"];function r(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function i(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function s(e){i(a,r,o,s,c,"next",e)}function c(e){i(a,r,o,s,c,"throw",e)}s(void 0)})}}function a(e){return y(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||m(e)||v()}function s(e){var t=Object(e),n=[];for(var r in t)n.unshift(r);return function e(){for(;n.length;)if((r=n.pop())in t)return e.value=r,e.done=!1,e;return e.done=!0,e}}function c(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw new TypeError(typeof e+" is not iterable")}function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach(function(t){f(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function f(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){return y(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],c=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return s}}(e,t)||m(e,t)||v()}function v(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(e,t){if(e){if("string"==typeof e)return g(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function y(e){if(Array.isArray(e))return e}function b(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var c=r&&r.prototype instanceof s?r:s,l=Object.create(c.prototype);return w(l,"_invoke",function(n,r,i){var o,s,c,l=0,u=i||[],d=!1,h={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return o=t,s=0,c=e,h.n=n,a}};function f(n,r){for(s=n,c=r,t=0;!d&&l&&!i&&t<u.length;t++){var i,o=u[t],f=h.p,p=o[2];n>3?(i=p===r)&&(c=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=f&&((i=n<2&&f<o[1])?(s=0,h.v=r,h.n=o[1]):f<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,h.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,u,p){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,p),s=u,c=p;(t=s<2?e:c)||!d;){o||(s?s<3?(s>1&&(h.n=-1),f(s,c)):h.n=c:h.v=c);try{if(l=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(c=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=h.n<0)?c:n.call(r,h))!==a)break}catch(t){o=e,s=1,c=t}finally{l=1}}return{value:t,done:d}}}(n,i,o),!0),l}var a={};function s(){}function c(){}function l(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(w(t={},r,function(){return this}),t),d=l.prototype=s.prototype=Object.create(u);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,w(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=l,w(d,"constructor",l),w(l,"constructor",c),c.displayName="GeneratorFunction",w(l,i,"GeneratorFunction"),w(d),w(d,i,"Generator"),w(d,r,function(){return this}),w(d,"toString",function(){return"[object Generator]"}),(b=function(){return{w:o,m:h}})()}function w(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}w=function(e,t,n,r){function o(t,n){w(e,t,function(e){return this._invoke(t,n,e)})}t?i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},w(e,t,n,r)}System.register(["./rolldown-runtime-legacy-GyV-UiEO.js","./index-legacy-LClIeWul.js"],function(i,u){var d,v,m,g,y,w,E,_,S,k,C,A,x,T,M,O,R,P,I,L,N,D,B,$,j,K,U,H,F,z,q,V,W,G,Y,Z,J,X,Q,ee,te,ne,re,ie,oe,ae,se,ce,le,ue,de,he,fe,pe,ve,me,ge,ye,be,we,Ee,_e,Se,ke,Ce,Ae,xe,Te,Me,Oe,Re,Pe,Ie,Le,Ne,De,Be,$e,je,Ke,Ue,He,Fe,ze,qe,Ve,We,Ge,Ye,Ze,Je,Xe,Qe,et,tt,nt,rt,it,ot,at,st,ct,lt,ut,dt,ht,ft,pt,vt,mt,gt,yt,bt,wt,Et,_t,St,kt,Ct,At,xt,Tt,Mt,Ot,Rt,Pt,It,Lt,Nt,Dt,Bt,$t,jt,Kt,Ut,Ht,Ft,zt,qt,Vt,Wt,Gt,Yt,Zt,Jt,Xt,Qt,en,tn,nn,rn,on,an,sn,cn,ln,un,dn,hn,fn,pn,vn,mn,gn,yn,bn,wn,En,_n,Sn,kn,Cn,An,xn,Tn,Mn,On,Rn,Pn,In,Ln,Nn,Dn,Bn,$n,jn,Kn,Un,Hn,Fn,zn,qn,Vn,Wn,Gn,Yn,Zn,Jn,Xn,Qn,er,tr,nr,rr,ir,or,ar,sr,cr,lr,ur,dr,hr,fr,pr,vr,mr,gr,yr,br,wr,Er,_r,Sr,kr,Cr,Ar,xr,Tr,Mr,Or,Rr,Pr,Ir,Lr,Nr,Dr,Br,$r,jr,Kr,Ur,Hr,Fr,zr,qr,Vr,Wr,Gr,Yr,Zr,Jr,Xr,Qr,ei,ti,ni,ri,ii,oi,ai,si,ci,li,ui,di,hi,fi,pi,vi,mi,gi,yi,bi,wi,Ei,_i,Si,ki,Ci,Ai,xi,Ti,Mi,Oi,Ri,Pi,Ii,Li,Ni,Di,Bi,$i,ji,Ki,Ui,Hi,Fi,zi,qi,Vi,Wi,Gi,Yi,Zi,Ji,Xi,Qi,eo,to,no,ro,io,oo,ao,so,co,lo,uo,ho,fo,po,vo,mo,go,yo,bo,wo,Eo,_o,So,ko,Co,Ao,xo,To,Mo,Oo,Ro,Po,Io,Lo,No,Do,Bo,$o,jo,Ko,Uo,Ho,Fo,zo,qo,Vo,Wo,Go,Yo,Zo,Jo,Xo,Qo,ea,ta,na,ra,ia,oa,aa,sa,ca,la,ua,da,ha,fa,pa,va,ma,ga,ya,ba,wa,Ea,_a,Sa,ka,Ca,Aa,xa,Ta,Ma,Oa,Ra,Pa,Ia,La,Na,Da,Ba,$a,ja,Ka,Ua,Ha,Fa,za,qa,Va,Wa,Ga,Ya,Za,Ja,Xa,Qa,es,ts,ns,rs,is,os,as,ss,cs,ls,us,ds,hs,fs,ps,vs,ms,gs,ys,bs,ws,Es,_s,Ss,ks,Cs,As,xs,Ts,Ms,Os,Rs,Ps,Is,Ls,Ns,Ds,Bs,$s,js,Ks,Us,Hs,Fs,zs,qs,Vs,Ws,Gs,Ys,Zs,Js,Xs,Qs,ec,tc,nc,rc,ic,oc,ac,sc,cc,lc,uc,dc,hc,fc,pc,vc,mc,gc,yc,bc,wc,Ec,_c,Sc,kc,Cc,Ac,xc,Tc,Mc,Oc,Rc,Pc,Ic,Lc,Nc,Dc,Bc,$c,jc,Kc,Uc,Hc,Fc,zc,qc,Vc,Wc,Gc,Yc,Zc,Jc,Xc,Qc,el,tl,nl,rl,il,ol,al,sl,cl,ll,ul,dl,hl,fl,pl,vl,ml,gl,yl,bl,wl,El,_l,Sl,kl,Cl,Al,xl,Tl,Ml,Ol,Rl,Pl,Il,Ll,Nl,Dl,Bl,$l,jl,Kl,Ul,Hl,Fl,zl,ql,Vl,Wl,Gl,Yl,Zl,Jl,Xl,Ql,eu,tu,nu,ru,iu,ou,au,su,cu,lu,uu,du,hu,fu,pu,vu,mu,gu,yu,bu,wu,Eu,_u,Su,ku,Cu,Au,xu,Tu,Mu,Ou,Ru,Pu,Iu,Lu,Nu,Du,Bu,$u,ju,Ku,Uu,Hu,Fu,zu,qu,Vu,Wu,Gu,Yu,Zu,Ju,Xu,Qu,ed,td,nd,rd,id,od,ad,sd,cd,ld,ud,dd,hd,fd=b().m(bp);function pd(){if(!x&&!(x="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return x(T)}function vd(e){return"string"==typeof e&&M.test(e)}function md(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(R[e[t+0]]+R[e[t+1]]+R[e[t+2]]+R[e[t+3]]+"-"+R[e[t+4]]+R[e[t+5]]+"-"+R[e[t+6]]+R[e[t+7]]+"-"+R[e[t+8]]+R[e[t+9]]+"-"+R[e[t+10]]+R[e[t+11]]+R[e[t+12]]+R[e[t+13]]+R[e[t+14]]+R[e[t+15]]).toLowerCase();if(!O(n))throw TypeError("Stringified UUID is invalid");return n}function gd(e,t,n){var r=(e=e||{}).random||(e.rng||pd)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return I(r)}function yd(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}function bd(){return new TransformStream({transform(e,t){!function(e,t){H&&e.data instanceof Blob?e.data.arrayBuffer().then(yd).then(t):F&&(e.data instanceof ArrayBuffer||z(e.data))?t(yd(e.data)):q(e,!1,e=>{W||(W=new TextEncoder),t(W.encode(e))})}(e,n=>{var r,i=n.length;if(i<126)r=new Uint8Array(1),new DataView(r.buffer).setUint8(0,i);else if(i<65536){r=new Uint8Array(3);var o=new DataView(r.buffer);o.setUint8(0,126),o.setUint16(1,i)}else{r=new Uint8Array(9);var a=new DataView(r.buffer);a.setUint8(0,127),a.setBigUint64(1,BigInt(i))}e.data&&"string"!=typeof e.data&&(r[0]|=128),t.enqueue(r),t.enqueue(n)})}})}function wd(e){return e.reduce((e,t)=>e+t.length,0)}function Ed(e,t){if(e[0].length===t)return e.shift();for(var n=new Uint8Array(t),r=0,i=0;i<t;i++)n[i]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function _d(e){if(e)return function(e){for(var t in _d.prototype)e[t]=_d.prototype[t];return e}(e)}function Sd(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t),{})}function kd(e,t){t.useNativeTimers?(e.setTimeoutFn=ae.bind(oe),e.clearTimeoutFn=se.bind(oe)):(e.setTimeoutFn=oe.setTimeout.bind(oe),e.clearTimeoutFn=oe.clearTimeout.bind(oe))}function Cd(e){return"string"==typeof e?function(e){for(var t=0,n=0,r=0,i=e.length;r<i;r++)(t=e.charCodeAt(r))<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}(e):Math.ceil((e.byteLength||e.size)*ce)}function Ad(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function xd(){}function Td(){for(var e in ve.requests)ve.requests.hasOwnProperty(e)&&ve.requests[e].abort()}function Md(e){var t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||fe))return new XMLHttpRequest}catch(n){}if(!t)try{return new(oe[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(n){}}function Od(e){if(e.length>8e3)throw"URI too long";var t=e,n=e.indexOf("["),r=e.indexOf("]");-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));for(var i,o,a=_e.exec(e||""),s={},c=14;c--;)s[Se[c]]=a[c]||"";return-1!=n&&-1!=r&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=function(e,t){var n=t.replace(/\/{2,9}/g,"/").split("/");"/"!=t.slice(0,1)&&0!==t.length||n.splice(0,1);"/"==t.slice(-1)&&n.splice(n.length-1,1);return n}(0,s.path),s.queryKey=(i=s.query,o={},i.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,t,n){t&&(o[t]=n)}),o),s}function Rd(e){return Me&&(e instanceof ArrayBuffer||Oe(e))||Pe&&e instanceof Blob||Ie&&e instanceof File}function Pd(e,t){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){for(var n=0,r=e.length;n<r;n++)if(Pd(e[n]))return!0;return!1}if(Rd(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return Pd(e.toJSON(),!0);for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&Pd(e[i]))return!0;return!1}function Id(e){var t=[],n=e.data,r=e;return r.data=Ld(n,t),r.attachments=t.length,{packet:r,buffers:t}}function Ld(e,t){if(!e)return e;if(Rd(e)){var n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){for(var r=new Array(e.length),i=0;i<e.length;i++)r[i]=Ld(e[i],t);return r}if("object"==typeof e&&!(e instanceof Date)){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(o[a]=Ld(e[a],t));return o}return e}function Nd(e,t){return e.data=Dd(e.data,t),delete e.attachments,e}function Dd(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"==typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(var n=0;n<e.length;n++)e[n]=Dd(e[n],t);else if("object"==typeof e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=Dd(e[r],t));return e}function Bd(e){return"[object Object]"===Object.prototype.toString.call(e)}function $d(e,t,n){return e.on(t,n),function(){e.off(t,n)}}function jd(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}function Kd(e,t){"object"==typeof e&&(t=e,e=void 0);var n,r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=e;n=n||"undefined"!=typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==n?n.protocol+"//"+e:"https://"+e),r=Od(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var i=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+t,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}(e,(t=t||{}).path||"/socket.io"),i=r.source,o=r.id,a=r.path,s=Fe[o]&&a in Fe[o].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||s?n=new He(i,t):(Fe[o]||(Fe[o]=new He(i,t)),n=Fe[o]),r.query&&!t.query&&(t.query=r.queryKey),n.socket(r.path,t)}function Ud(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function s(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})}function Hd(){Ge=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0;t<64;++t)qe[t]=e[t],Ve[e.charCodeAt(t)]=t;Ve["-".charCodeAt(0)]=62,Ve["_".charCodeAt(0)]=63}function Fd(e,t,n){for(var r,i,o=[],a=t;a<n;a+=3)r=(e[a]<<16)+(e[a+1]<<8)+e[a+2],o.push(qe[(i=r)>>18&63]+qe[i>>12&63]+qe[i>>6&63]+qe[63&i]);return o.join("")}function zd(e){var t;Ge||Hd();for(var n=e.length,r=n%3,i="",o=[],a=16383,s=0,c=n-r;s<c;s+=a)o.push(Fd(e,s,s+a>c?c:s+a));return 1===r?(t=e[n-1],i+=qe[t>>2],i+=qe[t<<4&63],i+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],i+=qe[t>>10],i+=qe[t>>4&63],i+=qe[t<<2&63],i+="="),o.push(i),o.join("")}function qd(e,t,n,r,i){var o,a,s=8*i-r-1,c=(1<<s)-1,l=c>>1,u=-7,d=n?i-1:0,h=n?-1:1,f=e[t+d];for(d+=h,o=f&(1<<-u)-1,f>>=-u,u+=s;u>0;o=256*o+e[t+d],d+=h,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=r;u>0;a=256*a+e[t+d],d+=h,u-=8);if(0===o)o=1-l;else{if(o===c)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),o-=l}return(f?-1:1)*a*Math.pow(2,o-r)}function Vd(e,t,n,r,i,o){var a,s,c,l=8*o-i-1,u=(1<<l)-1,d=u>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+d>=1?h/c:h*Math.pow(2,1-d))*c>=2&&(a++,c/=2),a+d>=u?(s=0,a=u):a+d>=1?(s=(t*c-1)*Math.pow(2,i),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[n+f]=255&s,f+=p,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;e[n+f]=255&a,f+=p,a/=256,l-=8);e[n+f-p]|=128*v}function Wd(){return Yd.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Gd(e,t){if(Wd()<t)throw new RangeError("Invalid typed array length");return Yd.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=Yd.prototype:(null===e&&(e=new Yd(t)),e.length=t),e}function Yd(e,t,n){if(!(Yd.TYPED_ARRAY_SUPPORT||this instanceof Yd))return new Yd(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return Xd(this,e)}return Zd(this,e,t,n)}function Zd(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),Yd.TYPED_ARRAY_SUPPORT?(e=t).__proto__=Yd.prototype:e=Qd(e,t),e}(e,t,n,r):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!Yd.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|nh(t,n),i=(e=Gd(e,r)).write(t,n);return i!==r&&(e=e.slice(0,i)),e}(e,t,n):function(e,t){if(th(t)){var n=0|eh(t.length);return 0===(e=Gd(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?Gd(e,0):Qd(e,t);if("Buffer"===t.type&&Ze(t.data))return Qd(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function Jd(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function Xd(e,t){if(Jd(t),e=Gd(e,t<0?0:0|eh(t)),!Yd.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function Qd(e,t){var n=t.length<0?0:0|eh(t.length);e=Gd(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function eh(e){if(e>=Wd())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Wd().toString(16)+" bytes");return 0|e}function th(e){return!(null==e||!e._isBuffer)}function nh(e,t){if(th(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return xh(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Th(e).length;default:if(r)return xh(e).length;t=(""+t).toLowerCase(),r=!0}}function rh(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return gh(this,t,n);case"utf8":case"utf-8":return ph(this,t,n);case"ascii":return vh(this,t,n);case"latin1":case"binary":return mh(this,t,n);case"base64":return fh(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return yh(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function ih(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function oh(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=Yd.from(t,r)),th(t))return 0===t.length?-1:ah(e,t,n,r,i);if("number"==typeof t)return t&=255,Yd.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):ah(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function ah(e,t,n,r,i){var o,a=1,s=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,n/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var u=-1;for(o=n;o<s;o++)if(l(e,o)===l(t,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===c)return u*a}else-1!==u&&(o-=o-u),u=-1}else for(n+c>s&&(n=s-c),o=n;o>=0;o--){for(var d=!0,h=0;h<c;h++)if(l(e,o+h)!==l(t,h)){d=!1;break}if(d)return o}return-1}function sh(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function ch(e,t,n,r){return Mh(xh(t,e.length-n),e,n,r)}function lh(e,t,n,r){return Mh(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function uh(e,t,n,r){return lh(e,t,n,r)}function dh(e,t,n,r){return Mh(Th(t),e,n,r)}function hh(e,t,n,r){return Mh(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function fh(e,t,n){return 0===t&&n===e.length?zd(e):zd(e.slice(t,n))}function ph(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,c,l=e[i],u=null,d=l>239?4:l>223?3:l>191?2:1;if(i+d<=n)switch(d){case 1:l<128&&(u=l);break;case 2:128==(192&(o=e[i+1]))&&(c=(31&l)<<6|63&o)>127&&(u=c);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(c=(15&l)<<12|(63&o)<<6|63&a)>2047&&(c<55296||c>57343)&&(u=c);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(c=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(u=c)}null===u?(u=65533,d=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),i+=d}return function(e){var t=e.length;if(t<=Xe)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=Xe));return n}(r)}function vh(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function mh(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function gh(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=Ah(e[o]);return i}function yh(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function bh(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function wh(e,t,n,r,i,o){if(!th(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function Eh(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function _h(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function Sh(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function kh(e,t,n,r,i){return i||Sh(e,0,n,4),Vd(e,t,n,r,23,4),n+4}function Ch(e,t,n,r,i){return i||Sh(e,0,n,8),Vd(e,t,n,r,52,8),n+8}function Ah(e){return e<16?"0"+e.toString(16):e.toString(16)}function xh(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function Th(e){return function(e){var t,n,r,i,o,a;Ge||Hd();var s=e.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o="="===e[s-2]?2:"="===e[s-1]?1:0,a=new We(3*s/4-o),r=o>0?s-4:s;var c=0;for(t=0,n=0;t<r;t+=4,n+=3)i=Ve[e.charCodeAt(t)]<<18|Ve[e.charCodeAt(t+1)]<<12|Ve[e.charCodeAt(t+2)]<<6|Ve[e.charCodeAt(t+3)],a[c++]=i>>16&255,a[c++]=i>>8&255,a[c++]=255&i;return 2===o?(i=Ve[e.charCodeAt(t)]<<2|Ve[e.charCodeAt(t+1)]>>4,a[c++]=255&i):1===o&&(i=Ve[e.charCodeAt(t)]<<10|Ve[e.charCodeAt(t+1)]<<4|Ve[e.charCodeAt(t+2)]>>2,a[c++]=i>>8&255,a[c++]=255&i),a}(function(e){if((e=(t=e,t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(Qe,"")).length<2)return"";for(var t;e.length%4!=0;)e+="=";return e}(e))}function Mh(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function Oh(e){return null!=e&&(!!e._isBuffer||Rh(e)||"function"==typeof(t=e).readFloatLE&&"function"==typeof t.slice&&Rh(t.slice(0,0)));var t}function Rh(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function Ph(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Ih(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})}),n}function Lh(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function Nh(e){if("boolean"!=typeof e)throw new Error(`boolean expected, not ${e}`)}function Dh(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function Bh(e){if(!Dh(e))throw new Error("Uint8Array expected");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(n.length>0&&!n.includes(e.length))throw new Error(`Uint8Array expected of length ${n}, not of length=${e.length}`)}function $h(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("hash must be wrapped by utils.wrapConstructor");Lh(e.outputLen),Lh(e.blockLen)}function jh(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Kh(e,t){Bh(e);var n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}function Uh(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function Hh(e){if("boolean"!=typeof e)throw new Error(`boolean expected, not ${e}`)}function Fh(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function zh(e){if(!Fh(e))throw new Error("Uint8Array expected");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(n.length>0&&!n.includes(e.length))throw new Error(`Uint8Array expected of length ${n}, not of length=${e.length}`)}function qh(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");Uh(e.outputLen),Uh(e.blockLen)}function Vh(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Wh(e,t){zh(e);var n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}function Gh(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?{h:Number(e&_t),l:Number(e>>St&_t)}:{h:0|Number(e>>St&_t),l:0|Number(e&_t)}}function Yh(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new Uint32Array(e.length),r=new Uint32Array(e.length),i=0;i<e.length;i++){var o,a=Gh(e[i],t);o=[a.h,a.l],n[i]=o[0],r[i]=o[1]}return[n,r]}function Zh(e,t,n,r){var i=(t>>>0)+(r>>>0);return{h:e+n+(i/Math.pow(2,32)|0)|0,l:0|i}}function Jh(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function Xh(e){if(!Jh(e))throw new Error("Uint8Array expected")}function Qh(e){Xh(e);for(var t="",n=0;n<e.length;n++)t+=cn[e[n]];return t}function ef(e){var t=e.toString(16);return 1&t.length?`0${t}`:t}function tf(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}function nf(e){return e>=ln._0&&e<=ln._9?e-ln._0:e>=ln._A&&e<=ln._F?e-(ln._A-10):e>=ln._a&&e<=ln._f?e-(ln._a-10):void 0}function rf(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);var t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);for(var r=new Uint8Array(n),i=0,o=0;i<n;i++,o+=2){var a=nf(e.charCodeAt(o)),s=nf(e.charCodeAt(o+1));if(void 0===a||void 0===s){var c=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+o)}r[i]=16*a+s}return r}function of(e,t){return rf(e.toString(16).padStart(2*t,"0"))}function af(){for(var e=0,t=0;t<arguments.length;t++){var n=t<0||arguments.length<=t?void 0:arguments[t];Xh(n),e+=n.length}for(var r=new Uint8Array(e),i=0,o=0;i<arguments.length;i++){var a=i<0||arguments.length<=i?void 0:arguments[i];r.set(a,o),o+=a.length}return r}function sf(e,t,n){return un(e)&&un(t)&&un(n)&&t<=e&&e<n}function cf(e,t){var n=e%t;return n>=vn?n:t+n}function lf(e,t,n){if(n<=vn||t<vn)throw new Error("Expected power/modulo > 0");if(n===mn)return vn;for(var r=mn;t>vn;)t&mn&&(r=r*e%n),e=e*e%n,t>>=mn;return r}function uf(e,t){if(e===vn||t<=vn)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);for(var n=cf(e,t),r=t,i=vn,o=mn;n!==vn;){var a=r%n,s=i-o*(r/n);r=n,n=a,i=o,o=s}if(r!==mn)throw new Error("invert: does not exist");return cf(i,t)}function df(e){var t,n,r,i=(e-mn)/gn;for(t=e-mn,n=0;t%gn===vn;t/=gn,n++);for(r=gn;r<e&&lf(r,i,e)!==e-mn;r++);if(1===n){var o=(e+mn)/bn;return function(e,t){var n=e.pow(t,o);if(!e.eql(e.sqr(n),t))throw new Error("Cannot find square root");return n}}var a=(t+mn)/gn;return function(e,o){if(e.pow(o,i)===e.neg(e.ONE))throw new Error("Cannot find square root");for(var s=n,c=e.pow(e.mul(e.ONE,r),t),l=e.pow(o,a),u=e.pow(o,t);!e.eql(u,e.ONE);){if(e.eql(u,e.ZERO))return e.ZERO;for(var d=1,h=e.sqr(u);d<s&&!e.eql(h,e.ONE);d++)h=e.sqr(h);var f=e.pow(c,mn<<BigInt(s-d-1));c=e.sqr(f),l=e.mul(l,f),u=e.mul(u,c),s=d}return l}}function hf(e){if(e%bn===yn){var t=(e+mn)/bn;return function(e,n){var r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}if(e%En===wn){var n=(e-wn)/En;return function(e,t){var r=e.mul(t,gn),i=e.pow(r,n),o=e.mul(t,i),a=e.mul(e.mul(o,gn),i),s=e.mul(o,e.sub(a,e.ONE));if(!e.eql(e.sqr(s),t))throw new Error("Cannot find square root");return s}}return df(e)}function ff(e,t,n){if(n<vn)throw new Error("Expected power > 0");if(n===vn)return e.ONE;if(n===mn)return t;for(var r=e.ONE,i=t;n>vn;)n&mn&&(r=e.mul(r,i)),i=e.sqr(i),n>>=mn;return r}function pf(e,t){var n=new Array(t.length),r=t.reduce((t,r,i)=>e.is0(r)?t:(n[i]=t,e.mul(t,r)),e.ONE),i=e.inv(r);return t.reduceRight((t,r,i)=>e.is0(r)?t:(n[i]=e.mul(t,n[i]),e.mul(t,r)),i),n}function vf(e){var t=(e-mn)/gn;return(e,n)=>e.pow(n,t)}function mf(e,t){var n=void 0!==t?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function gf(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");var t=e.toString(2).length;return Math.ceil(t/8)}function yf(e){var t=gf(e);return t+Math.ceil(t/2)}function bf(e,t){if(Ef(e),Ef(t),e<0||e>=1<<8*t)throw new Error(`bad I2OSP call: value=${e} length=${t}`);for(var n=Array.from({length:t}).fill(0),r=t-1;r>=0;r--)n[r]=255&e,e>>>=8;return new Uint8Array(n)}function wf(e,t){for(var n=new Uint8Array(e.length),r=0;r<e.length;r++)n[r]=e[r]^t[r];return n}function Ef(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function _f(e,t,n,r){(0,Kn.abytes)(e),(0,Kn.abytes)(t),Ef(n),t.length>255&&(t=r((0,Kn.concatBytes)((0,Kn.utf8ToBytes)("H2C-OVERSIZE-DST-"),t)));var i=r.outputLen,o=r.blockLen,a=Math.ceil(n/i);if(n>65535||a>255)throw new Error("expand_message_xmd: invalid lenInBytes");var s=(0,Kn.concatBytes)(t,bf(t.length,1)),c=bf(0,o),l=bf(n,2),u=new Array(a),d=r((0,Kn.concatBytes)(c,e,l,bf(0,1),s));u[0]=r((0,Kn.concatBytes)(d,bf(1,1),s));for(var h=1;h<=a;h++){var f=[wf(d,u[h-1]),bf(h+1,1),s];u[h]=r((0,Kn.concatBytes)(...f))}return(0,Kn.concatBytes)(...u).slice(0,n)}function Sf(e,t,n,r,i){if((0,Kn.abytes)(e),(0,Kn.abytes)(t),Ef(n),t.length>255){var o=Math.ceil(2*r/8);t=i.create({dkLen:o}).update((0,Kn.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(t).digest()}if(n>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:n}).update(e).update(bf(n,2)).update(t).update(bf(t.length,1)).digest()}function kf(e,t,n){(0,Kn.validateObject)(n,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});var r=n.p,i=n.k,o=n.m,a=n.hash,s=n.expand,c=n.DST;(0,Kn.abytes)(e),Ef(t);var l,u="string"==typeof c?(0,Kn.utf8ToBytes)(c):c,d=r.toString(2).length,h=Math.ceil((d+i)/8),f=t*o*h;if("xmd"===s)l=_f(e,u,f,a);else if("xof"===s)l=Sf(e,u,f,i,a);else{if("_internal_pass"!==s)throw new Error('expand must be "xmd" or "xof"');l=e}for(var p=new Array(t),v=0;v<t;v++){for(var m=new Array(o),g=0;g<o;g++){var y=h*(g+v*o),b=l.subarray(y,y+h);m[g]=(0,jn.mod)(Un(b),r)}p[v]=m}return p}function Cf(e){return{hash:e,hmac:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(0,or.hmac)(e,t,(0,ar.concatBytes)(...r))},randomBytes:ar.randomBytes}}function Af(e,t,n){return(0,dr.hash)(e),void 0===n&&(n=new Uint8Array(e.outputLen)),(0,fr.hmac)(e,(0,hr.toBytes)(n),(0,hr.toBytes)(t))}function xf(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32;if((0,dr.hash)(e),(0,dr.number)(r),r>255*e.outputLen)throw new Error("Length should be <= 255*HashLen");var i=Math.ceil(r/e.outputLen);void 0===n&&(n=vr);for(var o=new Uint8Array(i*e.outputLen),a=fr.hmac.create(e,t),s=a._cloneInto(),c=new Uint8Array(a.outputLen),l=0;l<i;l++)pr[0]=l+1,s.update(0===l?vr:c).update(n).update(pr).digestInto(c),o.set(c,e.outputLen*l),a._cloneInto(s);return a.destroy(),s.destroy(),c.fill(0),pr.fill(0),o.slice(0,r)}function Tf(e){e.reverse();for(var t=1&e[15],n=0,r=0;r<e.length;r++){var i=e[r];e[r]=i>>>1|n,n=(1&i)<<7}return e[0]^=225&-t,e}function Mf(e){var t=(t,n)=>e(n,t.length).update((0,Er.toBytes)(t)).digest(),n=e(new Uint8Array(16),0);return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=(t,n)=>e(t,n),t}function Of(e){return e<<1^Ir&-(e>>7)}function Rf(e,t){for(var n=0;t>0;t>>=1)n^=e&-(1&t),e=Of(e);return n}function Pf(e,t){if(256!==e.length)throw new Error("Wrong sbox length");for(var n=new Uint32Array(256).map((n,r)=>t(e[r])),r=n.map(Br),i=r.map(Br),o=i.map(Br),a=new Uint32Array(65536),s=new Uint32Array(65536),c=new Uint16Array(65536),l=0;l<256;l++)for(var u=0;u<256;u++){var d=256*l+u;a[d]=n[l]^r[u],s[d]=i[l]^o[u],c[d]=e[l]<<8|e[u]}return{sbox:e,sbox2:c,T0:n,T1:r,T2:i,T3:o,T01:a,T23:s}}function If(e){(0,Tr.bytes)(e);var t=e.length;if(![16,24,32].includes(t))throw new Error(`aes: wrong key size: should be 16, 24 or 32, got: ${t}`);var n=jr.sbox2,r=[];(0,Or.isAligned32)(e)||r.push(e=(0,Or.copyBytes)(e));var i=(0,Or.u32)(e),o=i.length,a=e=>Df(n,e,e,e,e),s=new Uint32Array(t+28);s.set(i);for(var c=o;c<s.length;c++){var l=s[c-1];c%o==0?l=a(Dr(l))^Ur[c/o-1]:o>6&&c%o==4&&(l=a(l)),s[c]=s[c-o]^l}return(0,Or.clean)(...r),s}function Lf(e){for(var t=If(e),n=t.slice(),r=t.length,i=jr.sbox2,o=Kr,a=o.T0,s=o.T1,c=o.T2,l=o.T3,u=0;u<r;u+=4)for(var d=0;d<4;d++)n[u+d]=t[r-u-4+d];(0,Or.clean)(t);for(var h=4;h<r-4;h++){var f=n[h],p=Df(i,f,f,f,f);n[h]=a[255&p]^s[p>>>8&255]^c[p>>>16&255]^l[p>>>24]}return n}function Nf(e,t,n,r,i,o){return e[n<<8&65280|r>>>8&255]^t[i>>>8&65280|o>>>24&255]}function Df(e,t,n,r,i){return e[255&t|65280&n]|e[r>>>16&255|i>>>16&65280]<<16}function Bf(e,t,n,r,i){var o=jr,a=o.sbox2,s=o.T01,c=o.T23,l=0;t^=e[l++],n^=e[l++],r^=e[l++],i^=e[l++];for(var u=e.length/4-2,d=0;d<u;d++){var h=e[l++]^Nf(s,c,t,n,r,i),f=e[l++]^Nf(s,c,n,r,i,t),p=e[l++]^Nf(s,c,r,i,t,n),v=e[l++]^Nf(s,c,i,t,n,r);t=h,n=f,r=p,i=v}return{s0:e[l++]^Df(a,t,n,r,i),s1:e[l++]^Df(a,n,r,i,t),s2:e[l++]^Df(a,r,i,t,n),s3:e[l++]^Df(a,i,t,n,r)}}function $f(e,t,n,r,i){var o=Kr,a=o.sbox2,s=o.T01,c=o.T23,l=0;t^=e[l++],n^=e[l++],r^=e[l++],i^=e[l++];for(var u=e.length/4-2,d=0;d<u;d++){var h=e[l++]^Nf(s,c,t,i,r,n),f=e[l++]^Nf(s,c,n,t,i,r),p=e[l++]^Nf(s,c,r,n,t,i),v=e[l++]^Nf(s,c,i,r,n,t);t=h,n=f,r=p,i=v}return{s0:e[l++]^Df(a,t,i,r,n),s1:e[l++]^Df(a,n,t,i,r),s2:e[l++]^Df(a,r,n,t,i),s3:e[l++]^Df(a,i,r,n,t)}}function jf(e,t){if(void 0===t)return new Uint8Array(e);if((0,Tr.bytes)(t),t.length<e)throw new Error(`aes: wrong destination length, expected at least ${e}, got: ${t.length}`);if(!(0,Or.isAligned32)(t))throw new Error("unaligned dst");return t}function Kf(e,t,n,r){(0,Tr.bytes)(t,Rr),(0,Tr.bytes)(n);var i=n.length;r=jf(i,r);for(var o=t,a=(0,Or.u32)(o),s=Bf(e,a[0],a[1],a[2],a[3]),c=s.s0,l=s.s1,u=s.s2,d=s.s3,h=(0,Or.u32)(n),f=(0,Or.u32)(r),p=0;p+4<=h.length;p+=4){f[p+0]=h[p+0]^c,f[p+1]=h[p+1]^l,f[p+2]=h[p+2]^u,f[p+3]=h[p+3]^d;for(var v=1,m=o.length-1;m>=0;m--)v=v+(255&o[m])|0,o[m]=255&v,v>>>=8;var g=Bf(e,a[0],a[1],a[2],a[3]);c=g.s0,l=g.s1,u=g.s2,d=g.s3}var y=Rr*Math.floor(h.length/4);if(y<i){for(var b=new Uint32Array([c,l,u,d]),w=(0,Or.u8)(b),E=y,_=0;E<i;E++,_++)r[E]=n[E]^w[_];(0,Or.clean)(b)}return r}function Uf(e,t,n,r,i){(0,Tr.bytes)(n,Rr),(0,Tr.bytes)(r),i=jf(r.length,i);for(var o=n,a=(0,Or.u32)(o),s=(0,Or.createView)(o),c=(0,Or.u32)(r),l=(0,Or.u32)(i),u=t?0:12,d=r.length,h=s.getUint32(u,t),f=Bf(e,a[0],a[1],a[2],a[3]),p=f.s0,v=f.s1,m=f.s2,g=f.s3,y=0;y+4<=c.length;y+=4){var b;l[y+0]=c[y+0]^p,l[y+1]=c[y+1]^v,l[y+2]=c[y+2]^m,l[y+3]=c[y+3]^g,h=h+1>>>0,s.setUint32(u,h,t),p=(b=Bf(e,a[0],a[1],a[2],a[3])).s0,v=b.s1,m=b.s2,g=b.s3}var w=Rr*Math.floor(c.length/4);if(w<d){for(var E=new Uint32Array([p,v,m,g]),_=(0,Or.u8)(E),S=w,k=0;S<d;S++,k++)i[S]=r[S]^_[k];(0,Or.clean)(E)}return i}function Hf(e){if((0,Tr.bytes)(e),e.length%Rr!=0)throw new Error("aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size 16")}function Ff(e,t,n){(0,Tr.bytes)(e);var r=e.length,i=r%Rr;if(!t&&0!==i)throw new Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");(0,Or.isAligned32)(e)||(e=(0,Or.copyBytes)(e));var o=(0,Or.u32)(e);if(t){var a=Rr-i;a||(a=Rr),r+=a}var s=jf(r,n);return{b:o,o:(0,Or.u32)(s),out:s}}function zf(e,t){if(!t)return e;var n=e.length;if(!n)throw new Error("aes/pcks5: empty ciphertext not allowed");var r=e[n-1];if(r<=0||r>16)throw new Error("aes/pcks5: wrong padding");for(var i=e.subarray(0,-r),o=0;o<r;o++)if(e[n-o-1]!==r)throw new Error("aes/pcks5: wrong padding");return i}function qf(e){var t=new Uint8Array(16),n=(0,Or.u32)(t);t.set(e);for(var r=Rr-e.length,i=Rr-r;i<Rr;i++)t[i]=r;return n}function Vf(e,t,n,r,i){var o=null==i?0:i.length,a=e.create(n,r.length+o);i&&a.update(i),a.update(r);var s=new Uint8Array(16),c=(0,Or.createView)(s);i&&(0,Or.setBigUint64)(c,0,BigInt(8*o),t),(0,Or.setBigUint64)(c,8,BigInt(8*r.length),t),a.update(s);var l=a.digest();return(0,Or.clean)(s),l}function Wf(e){return null!=e&&"object"==typeof e&&(e instanceof Uint32Array||"Uint32Array"===e.constructor.name)}function Gf(e,t){if((0,Tr.bytes)(t,16),!Wf(e))throw new Error("_encryptBlock accepts result of expandKeyLE");var n=(0,Or.u32)(t),r=Bf(e,n[0],n[1],n[2],n[3]),i=r.s0,o=r.s1,a=r.s2,s=r.s3;return n[0]=i,n[1]=o,n[2]=a,n[3]=s,t}function Yf(e,t){if((0,Tr.bytes)(t,16),!Wf(e))throw new Error("_decryptBlock accepts result of expandKeyLE");var n=(0,Or.u32)(t),r=$f(e,n[0],n[1],n[2],n[3]),i=r.s0,o=r.s1,a=r.s2,s=r.s3;return n[0]=i,n[1]=o,n[2]=a,n[3]=s,t}function Zf(e){return e.byteOffset%4==0}function Jf(e){var t=(t,n)=>e(n).update((0,li.toBytes)(t)).digest(),n=e(new Uint8Array(32));return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t}function Xf(e){return Bi.includes(e)}function Qf(e){var t=e.context;Ai.RemoteCommunication(`[RemoteCommunication: clean()] context=${t}`),e.channelConfig=void 0,e.ready=!1,e.originatorConnectStarted=!1}function ep(e,t){return Ud(this,void 0,void 0,b().m(function n(){var r,i,o;return b().w(function(n){for(;;)if(0===n.n)return i=null===(r=e.state.keyExchange)||void 0===r?void 0:r.encryptMessage(JSON.stringify(t)),o={id:e.state.channelId,context:e.state.context,clientType:e.state.isOriginator?"dapp":"wallet",message:i,plaintext:e.state.hasPlaintext?JSON.stringify(t):void 0},n.a(2,(Ai.SocketService(`[SocketService: encryptAndSendMessage()] context=${e.state.context}`,o),t.type===Hi.TERMINATE&&(e.state.manualDisconnect=!0),new Promise((t,n)=>{var r;null===(r=e.state.socket)||void 0===r||r.emit(ji.MESSAGE,o,(e,r)=>{var i;e&&(Ai.SocketService(`[SocketService: encryptAndSendMessage()] error=${e}`),n(e)),Ai.SocketService("[encryptAndSendMessage] response",r),t(null!==(i=null==r?void 0:r.success)&&void 0!==i&&i)})})))},n)}))}function tp(e,t){Ai.SocketService(`[SocketService: setupChannelListener()] context=${e.state.context} setting socket listeners for channel ${t}...`);var n=e.state.socket,r=e.state.keyExchange;n&&e.state.isOriginator&&(e.state.debug&&(null!=n&&n.io.on("error",t=>{Ai.SocketService(`[SocketService: setupChannelListener()] context=${e.state.context} socket event=error`,t)}),null!=n&&n.io.on("reconnect",t=>{Ai.SocketService(`[SocketService: setupChannelListener()] context=${e.state.context} socket event=reconnect`,t),Yi(e).catch(e=>{})}),null!=n&&n.io.on("reconnect_error",t=>{Ai.SocketService(`[SocketService: setupChannelListener()] context=${e.state.context} socket event=reconnect_error`,t)}),null!=n&&n.io.on("reconnect_failed",()=>{Ai.SocketService(`[SocketService: setupChannelListener()] context=${e.state.context} socket event=reconnect_failed`)})),null!=n&&n.on("disconnect",t=>{return Ai.SocketService(`[SocketService: setupChannelListener()] on 'disconnect' -- MetaMaskSDK socket disconnected '${t}' begin recovery...`),(n=e,e=>{Ai.SocketService(`[SocketService: handleDisconnect()] on 'disconnect' manualDisconnect=${n.state.manualDisconnect}`,e),n.state.manualDisconnect||(n.emit(ji.SOCKET_DISCONNECTED),Yi(n).catch(e=>{}))})(t);var n})),Xi.forEach(r=>{var i=r.event,o=r.handler;null==n||n.on(`${i}-${t}`,o(e,t))}),Qi.forEach(t=>{var n=t.event,i=t.handler;null==r||r.on(n,i(e))}),e.state.setupChannelListeners=!0}function np(e){return()=>Ud(this,void 0,void 0,b().m(function t(){var n,r,i,o,a,s;return b().w(function(t){for(;;)switch(t.n){case 0:if(!(o=e.state).authorized){t.n=1;break}return t.a(2);case 1:return t.n=2,(()=>Ud(this,void 0,void 0,b().m(function e(){return b().w(function(e){for(;;)switch(e.n){case 0:if(o.walletInfo){e.n=2;break}return e.n=1,Wi(500);case 1:e.n=0;break;case 2:return e.a(2)}},e)})))();case 2:if(a="7.3".localeCompare((null===(n=o.walletInfo)||void 0===n?void 0:n.version)||""),Ai.RemoteCommunication(`[RemoteCommunication: handleAuthorizedEvent()] HACK 'authorized' version=${null===(r=o.walletInfo)||void 0===r?void 0:r.version} compareValue=${a}`),1===a){t.n=3;break}return t.a(2);case 3:s=o.platformType===no.MobileWeb||o.platformType===no.ReactNative||o.platformType===no.MetaMaskMobileWebview,Ai.RemoteCommunication(`[RemoteCommunication: handleAuthorizedEvent()] HACK 'authorized' platform=${o.platformType} secure=${s} channel=${o.channelId} walletVersion=${null===(i=o.walletInfo)||void 0===i?void 0:i.version}`),s&&(o.authorized=!0,e.emit(ji.AUTHORIZED));case 4:return t.a(2)}},t,this)}))}function rp(e){return t=>{var n=e.state;Ai.RemoteCommunication(`[RemoteCommunication: handleChannelCreatedEvent()] context=${n.context} on 'channel_created' channelId=${t}`),e.emit(ji.CHANNEL_CREATED,t)}}function ip(e,t){return()=>{var n,r,i,o,a=e.state;Ai.RemoteCommunication(`[RemoteCommunication: handleClientsConnectedEvent()] on 'clients_connected' channel=${a.channelId} keysExchanged=${null===(r=null===(n=a.communicationLayer)||void 0===n?void 0:n.getKeyInfo())||void 0===r?void 0:r.keysExchanged}`),a.analytics&&Oi(Object.assign(Object.assign({id:null!==(i=a.channelId)&&void 0!==i?i:"",event:a.reconnection?Fi.RECONNECT:a.isOriginator?Fi.REQUEST:Fi.REQUEST_MOBILE},a.originatorInfo),{commLayer:t,sdkVersion:a.sdkVersion,walletVersion:null===(o=a.walletInfo)||void 0===o?void 0:o.version,commLayerVersion:Pi.version}),a.communicationServerUrl).catch(e=>{}),a.isOriginator&&!a.reconnection&&D.analytics.track("sdk_connection_established",{transport_type:"websocket"}),a.clientsConnected=!0,a.originatorInfoSent=!1,e.emit(ji.CLIENTS_CONNECTED)}}function op(e){return t=>{var n=e.state;Ai.RemoteCommunication(`[RemoteCommunication: handleClientsDisconnectedEvent()] context=${n.context} on 'clients_disconnected' channelId=${t}`),n.relayPersistence||(n.clientsConnected=!1,n.ready=!1,n.authorized=!1),e.emit(ji.CLIENTS_DISCONNECTED,n.channelId),e.setConnectionStatus($i.DISCONNECTED)}}function ap(e){return t=>{var n,r=e.state;if(Ai.RemoteCommunication(`[RemoteCommunication: handleClientsWaitingEvent()] context=${r.context} on 'clients_waiting' numberUsers=${t} ready=${r.ready} autoStarted=${r.originatorConnectStarted}`),e.setConnectionStatus($i.WAITING),e.emit(ji.CLIENTS_WAITING,t),r.originatorConnectStarted){Ai.RemoteCommunication(`[RemoteCommunication: handleClientsWaitingEvent()] on 'clients_waiting' watch autoStarted=${r.originatorConnectStarted} timeout`,r.autoConnectOptions);var i=(null===(n=r.autoConnectOptions)||void 0===n?void 0:n.timeout)||3e3,o=setTimeout(()=>{Ai.RemoteCommunication(`[RemoteCommunication: handleClientsWaitingEvent()] setTimeout(${i}) terminate channelConfig`,r.autoConnectOptions),r.originatorConnectStarted=!1,r.ready||e.setConnectionStatus($i.TIMEOUT),clearTimeout(o)},i)}}}function sp(e,t){return n=>{var r,i,o,a,s,c,l,u,d=e.state;if(Ai.RemoteCommunication(`[RemoteCommunication: handleKeysExchangedEvent()] context=${d.context} on commLayer.'keys_exchanged' channel=${d.channelId}`,n),null===(i=null===(r=d.communicationLayer)||void 0===r?void 0:r.getKeyInfo())||void 0===i?void 0:i.keysExchanged){var h=Object.assign(Object.assign({},d.channelConfig),{channelId:null!==(o=d.channelId)&&void 0!==o?o:"",validUntil:(null===(a=d.channelConfig)||void 0===a?void 0:a.validUntil)||Ni,localKey:d.communicationLayer.getKeyInfo().ecies.private,otherKey:d.communicationLayer.getKeyInfo().ecies.otherPubKey});null===(s=d.storageManager)||void 0===s||s.persistChannelConfig(h).catch(e=>{}),e.setConnectionStatus($i.LINKED)}(function(e,t){var n,r,i,o,a,s,c,l,u=e.state;Ai.RemoteCommunication(`[RemoteCommunication: setLastActiveDate()] channel=${u.channelId}`,t);var d=Object.assign(Object.assign({},u.channelConfig),{channelId:null!==(n=u.channelId)&&void 0!==n?n:"",validUntil:null!==(i=null===(r=u.channelConfig)||void 0===r?void 0:r.validUntil)&&void 0!==i?i:0,relayPersistence:u.relayPersistence,localKey:null===(a=null===(o=u.communicationLayer)||void 0===o?void 0:o.state.keyExchange)||void 0===a?void 0:a.getKeyInfo().ecies.private,otherKey:null===(c=null===(s=u.communicationLayer)||void 0===s?void 0:s.state.keyExchange)||void 0===c?void 0:c.getKeyInfo().ecies.otherPubKey,lastActive:t.getTime()});null===(l=u.storageManager)||void 0===l||l.persistChannelConfig(d)})(e,new Date),d.analytics&&d.channelId&&Oi(Object.assign(Object.assign({id:d.channelId,event:n.isOriginator?Fi.CONNECTED:Fi.CONNECTED_MOBILE},d.originatorInfo),{sdkVersion:d.sdkVersion,commLayer:t,commLayerVersion:Pi.version,walletVersion:null===(c=d.walletInfo)||void 0===c?void 0:c.version}),d.communicationServerUrl).catch(e=>{}),d.isOriginator=n.isOriginator,n.isOriginator||(null===(l=d.communicationLayer)||void 0===l||l.sendMessage({type:Hi.READY}),d.ready=!0,d.paused=!1),n.isOriginator&&!d.originatorInfoSent&&(null===(u=d.communicationLayer)||void 0===u||u.sendMessage({type:Hi.ORIGINATOR_INFO,originatorInfo:d.originatorInfo,originator:d.originatorInfo}),d.originatorInfoSent=!0)}}function cp(e){return t=>{var n=t;t.message&&(n=n.message),function(e,t){var n,r,i=t.state;if(Ai.RemoteCommunication(`[RemoteCommunication: onCommunicationLayerMessage()] context=${i.context} on 'message' typeof=${typeof e}`,e),t.state.ready=!0,i.isOriginator||e.type!==Hi.ORIGINATOR_INFO)if(i.isOriginator&&e.type===Hi.WALLET_INFO)n=e,(r=t.state).walletInfo=n.walletInfo,r.paused=!1;else{if(i.isOriginator&&e.type===Hi.WALLET_INIT)(function(e,t){return Ud(this,void 0,void 0,b().m(function n(){var r,i,o,a,s,c,l,u,d,h;return b().w(function(n){for(;;)switch(n.p=n.n){case 0:if(!e.state.isOriginator){n.n=6;break}if(!("object"==typeof(a=t.data||{})&&"accounts"in a&&"chainId"in a&&"walletKey"in a)){n.n=6;break}if(n.p=1,s=e.state.channelConfig,Ai.RemoteCommunication("WALLET_INIT: channelConfig",JSON.stringify(s,null,2)),!s){n.n=4;break}return c=a.accounts,l=a.chainId,u=a.walletKey,h=!1,"deeplinkProtocol"in a&&(h=Boolean(a.deeplinkProtocol),e.state.deeplinkProtocolAvailable=h),"walletVersion"in a&&(d=a.walletVersion),n.n=2,null===(r=e.state.storageManager)||void 0===r?void 0:r.persistChannelConfig(Object.assign(Object.assign({},s),{otherKey:u,walletVersion:d,deeplinkProtocolAvailable:h,relayPersistence:!0}));case 2:return n.n=3,null===(i=e.state.storageManager)||void 0===i?void 0:i.persistAccounts(c);case 3:return n.n=4,null===(o=e.state.storageManager)||void 0===o?void 0:o.persistChainId(l);case 4:e.emit(ji.WALLET_INIT,{accounts:a.accounts,chainId:a.chainId}),n.n=6;break;case 5:n.p=5,n.v;case 6:return n.a(2)}},n,null,[[1,5]])}))})(t,e).catch(e=>{Ai.RemoteCommunication(`[RemoteCommunication: onCommunicationLayerMessage()] error=${e}`)});else if(e.type===Hi.TERMINATE)(function(e){return Ud(this,void 0,void 0,b().m(function t(){var n;return b().w(function(t){for(;;)switch(t.n){case 0:if(n=e.state,!n.isOriginator){t.n=2;break}return t.n=1,fp({options:{terminate:!0,sendMessage:!1},instance:e});case 1:e.emit(ji.TERMINATE);case 2:return t.a(2)}},t)}))})(t).catch(e=>{Ai.RemoteCommunication(`[RemoteCommunication: onCommunicationLayerMessage()] error=${e}`)});else if(e.type===Hi.PAUSE)!function(e){e.state.paused=!0,e.setConnectionStatus($i.PAUSED)}(t);else if(e.type===Hi.READY&&i.isOriginator)!function(e){var t=e.state;e.setConnectionStatus($i.LINKED);var n=t.paused;t.paused=!1,e.emit(ji.CLIENTS_READY,{isOriginator:t.isOriginator,walletInfo:t.walletInfo}),n&&(t.authorized=!0,e.emit(ji.AUTHORIZED))}(t);else{if(e.type===Hi.OTP&&i.isOriginator)return void function(e,t){var n,r=e.state;e.emit(ji.OTP,t.otpAnswer),1==="6.6".localeCompare((null===(n=r.walletInfo)||void 0===n?void 0:n.version)||"")&&e.emit(ji.SDK_RPC_CALL,{method:Di.ETH_REQUESTACCOUNTS,params:[]})}(t,e);e.type===Hi.AUTHORIZED&&i.isOriginator&&function(e){e.state.authorized=!0,e.emit(ji.AUTHORIZED)}(t)}t.emit(ji.MESSAGE,e)}else!function(e,t){var n,r=e.state;null===(n=r.communicationLayer)||void 0===n||n.sendMessage({type:Hi.WALLET_INFO,walletInfo:r.walletInfo}),r.originatorInfo=t.originatorInfo||t.originator,e.emit(ji.CLIENTS_READY,{isOriginator:r.isOriginator,originatorInfo:r.originatorInfo}),r.paused=!1}(t,e)}(n,e)}}function lp(e){return()=>{var t=e.state;Ai.RemoteCommunication("[RemoteCommunication: handleSocketReconnectEvent()] on 'socket_reconnect' -- reset key exchange status / set ready to false"),t.ready=!1,t.authorized=!1,Qf(t),e.emitServiceStatusEvent({context:"socket_reconnect"})}}function up(e){return()=>{var t=e.state;Ai.RemoteCommunication("[RemoteCommunication: handleSocketDisconnectedEvent()] on 'socket_Disconnected' set ready to false"),t.ready=!1}}function dp(e){return()=>Ud(this,void 0,void 0,b().m(function t(){var n,r,i,o,a,s,c,l;return b().w(function(t){for(;;)switch(t.p=t.n){case 0:return l=e.state,Ai.RemoteCommunication(`[RemoteCommunication: handleFullPersistenceEvent()] context=${l.context}`),e.state.ready=!0,e.state.clientsConnected=!0,e.state.authorized=!0,e.state.relayPersistence=!0,null===(n=e.state.communicationLayer)||void 0===n||n.getKeyExchange().setKeysExchanged(!0),e.emit(ji.KEYS_EXCHANGED,{keysExchanged:!0,isOriginator:!0}),e.emit(ji.AUTHORIZED),e.emit(ji.CLIENTS_READY),e.emit(ji.CHANNEL_PERSISTENCE),t.p=1,l.channelConfig=Object.assign(Object.assign({},l.channelConfig),{localKey:null===(r=l.communicationLayer)||void 0===r?void 0:r.getKeyExchange().getKeyInfo().ecies.private,otherKey:null===(i=l.communicationLayer)||void 0===i?void 0:i.getKeyExchange().getOtherPublicKey(),channelId:null!==(o=l.channelId)&&void 0!==o?o:"",validUntil:null!==(s=null===(a=l.channelConfig)||void 0===a?void 0:a.validUntil)&&void 0!==s?s:Ni,relayPersistence:!0}),t.n=2,null===(c=l.storageManager)||void 0===c?void 0:c.persistChannelConfig(l.channelConfig);case 2:t.n=4;break;case 3:t.p=3,t.v;case 4:return t.a(2)}},t,null,[[1,3]])}))}function hp(e){var t,n,r,i,o,a,s,c,l,u,d,h=e.communicationLayerPreference,f=e.otherPublicKey,v=e.reconnect,m=e.ecies,g=e.communicationServerUrl,y=void 0===g?Ii:g,b=e.instance,w=b.state;if(Ai.RemoteCommunication("[initCommunicationLayer()] ",JSON.stringify(w,null,2)),h!==to.SOCKET)throw new Error("Invalid communication protocol");w.communicationLayer=new eo({communicationLayerPreference:h,otherPublicKey:f,reconnect:v,transports:w.transports,communicationServerUrl:y,context:w.context,ecies:m,logging:w.logging,remote:b});var E="undefined"!=typeof document&&document.URL||"",_="undefined"!=typeof document&&document.title||"";!(null===(t=w.dappMetadata)||void 0===t)&&t.url&&(E=w.dappMetadata.url),null!==(n=w.dappMetadata)&&void 0!==n&&n.name&&(_=w.dappMetadata.name);var S=null!==(a=null!==(i=null===(r=w.dappMetadata)||void 0===r?void 0:r.name)&&void 0!==i?i:null===(o=w.dappMetadata)||void 0===o?void 0:o.url)&&void 0!==a?a:"N/A",k="undefined"!=typeof window&&void 0!==window.location&&null!==(s=window.location.hostname)&&void 0!==s?s:S;w.originatorInfo={url:E,title:_,source:null===(c=w.dappMetadata)||void 0===c?void 0:c.source,dappId:k,anonId:w.anonId,icon:(null===(l=w.dappMetadata)||void 0===l?void 0:l.iconUrl)||(null===(u=w.dappMetadata)||void 0===u?void 0:u.base64Icon),platform:w.platformType,apiVersion:Pi.version,connector:null===(d=w.dappMetadata)||void 0===d?void 0:d.connector};for(var C={[ji.AUTHORIZED]:np(b),[ji.MESSAGE]:cp(b),[ji.CHANNEL_PERSISTENCE]:dp(b),[ji.CLIENTS_CONNECTED]:ip(b,h),[ji.KEYS_EXCHANGED]:sp(b,h),[ji.SOCKET_DISCONNECTED]:up(b),[ji.SOCKET_RECONNECT]:lp(b),[ji.CLIENTS_DISCONNECTED]:op(b),[ji.KEY_INFO]:()=>{},[ji.CHANNEL_CREATED]:rp(b),[ji.CLIENTS_WAITING]:ap(b),[ji.RPC_UPDATE]:e=>{b.emit(ji.RPC_UPDATE,e)}},A=0,x=Object.entries(C);A<x.length;A++){var T=p(x[A],2),M=T[0],O=T[1];try{w.communicationLayer.on(M,O)}catch(R){}}}function fp(e){return Ud(this,arguments,void 0,function(e){var t=e.options,n=e.instance;return b().m(function e(){var r;return b().w(function(e){for(;;)if(0===e.n)return r=n.state,e.a(2,(Ai.RemoteCommunication(`[RemoteCommunication: disconnect()] channel=${r.channelId}`,t),new Promise((e,i)=>{var o,a,s,c,l,u;(null==t?void 0:t.terminate)?(n.state.ready&&Oi({id:null!==(o=n.state.channelId)&&void 0!==o?o:"",event:Fi.TERMINATED},n.state.communicationServerUrl).catch(e=>{}),r.ready=!1,r.paused=!1,null===(a=r.storageManager)||void 0===a||a.terminate(null!==(s=r.channelId)&&void 0!==s?s:""),n.state.terminated=!0,t.sendMessage?!(null===(c=r.communicationLayer)||void 0===c)&&c.getKeyInfo().keysExchanged&&n.state.communicationLayer&&ep(n.state.communicationLayer,{type:Hi.TERMINATE}).then(()=>{e(!0)}).catch(e=>{i(e)}):e(!0),r.authorized=!1,r.relayPersistence=!1,r.channelId=L(),t.channelId=r.channelId,r.channelConfig=void 0,r.originatorConnectStarted=!1,null===(l=r.communicationLayer)||void 0===l||l.disconnect(t),n.setConnectionStatus($i.TERMINATED)):(null===(u=r.communicationLayer)||void 0===u||u.disconnect(t),n.setConnectionStatus($i.DISCONNECTED),e(!0))})))},e)})()})}function pp(e){var t={ethDecryptDeprecation:!1,ethGetEncryptionPublicKeyDeprecation:!1,walletWatchAssetNFTExperimental:!1};return(n,r,i)=>{var o;t.ethDecryptDeprecation||"eth_decrypt"!==n.method?t.ethGetEncryptionPublicKeyDeprecation||"eth_getEncryptionPublicKey"!==n.method?!t.walletWatchAssetNFTExperimental&&"wallet_watchAsset"===n.method&&[oo,ao].includes((null===(o=n.params)||void 0===o?void 0:o.type)||"")&&(e.warn(so.warnings.rpc.walletWatchAssetNFTExperimental),t.walletWatchAssetNFTExperimental=!0):(e.warn(so.warnings.rpc.ethGetEncryptionPublicKeyDeprecation),t.ethGetEncryptionPublicKeyDeprecation=!0):(e.warn(so.warnings.rpc.ethDecryptDeprecation),t.ethDecryptDeprecation=!0),i()}}function vp(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)}function mp(e){return"object"==typeof e&&null!=e}function gp(e){return"symbol"==typeof e?e.toString():"string"==typeof e?JSON.stringify(e):`${e}`}function yp(e,t,n,r){if(!0!==e){!1===e?e={}:"string"==typeof e&&(e={message:e});var i=t.path,o=t.branch,a=n.type,s=e,c=s.refinement,l=s.message,u=void 0===l?`Expected a value of type \`${a}\`${c?` with refinement \`${c}\``:""}, but received: \`${gp(r)}\``:l;return h(h({value:r,type:a,refinement:c,key:i[i.length-1],path:i,branch:o},e),{},{message:u})}}function bp(e,t,n,r){var i,o,a,s,c;return b().w(function(u){for(;;)switch(u.p=u.n){case 0:(function(e){return mp(e)&&"function"==typeof e[Symbol.iterator]})(e)||(e=[e]),i=l(e),u.p=1,i.s();case 2:if((o=i.n()).done){u.n=4;break}if(a=o.value,s=yp(a,t,n,r),!s){u.n=3;break}return u.n=3,s;case 3:u.n=2;break;case 4:u.n=6;break;case 5:u.p=5,c=u.v,i.e(c);case 6:return u.p=6,i.f(),u.f(6);case 7:return u.a(2)}},fd,null,[[1,5,6,7]])}function wp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return b().m(function r(){var i,o,a,s,c,u,d,h,f,v,m,g,y,w,E,_,S,k,C,A,x,T,M,O,R,P,I,L,N,D,B;return b().w(function(r){for(;;)switch(r.p=r.n){case 0:if(i=n.path,o=void 0===i?[]:i,a=n.branch,s=void 0===a?[e]:a,c=n.coerce,u=void 0!==c&&c,d=n.mask,h=void 0!==d&&d,f={path:o,branch:s},u&&(e=t.coercer(e,f),h&&"type"!==t.type&&mp(t.schema)&&mp(e)&&!Array.isArray(e)))for(v in e)void 0===t.schema[v]&&delete e[v];m="valid",g=l(t.validator(e,f)),r.p=1,g.s();case 2:if((y=g.n()).done){r.n=4;break}return(w=y.value).explanation=n.message,m="not_valid",r.n=3,[w,void 0];case 3:r.n=2;break;case 4:r.n=6;break;case 5:r.p=5,L=r.v,g.e(L);case 6:return r.p=6,g.f(),r.f(6);case 7:E=l(t.entries(e,f)),r.p=8,E.s();case 9:if((_=E.n()).done){r.n=19;break}S=p(_.value,3),k=S[0],C=S[1],A=S[2],x=wp(C,A,{path:void 0===k?o:[...o,k],branch:void 0===k?s:[...s,C],coerce:u,mask:h,message:n.message}),T=l(x),r.p=10,T.s();case 11:if((M=T.n()).done){r.n=15;break}if(!(O=M.value)[0]){r.n=13;break}return m=null!=O[0].refinement?"not_refined":"not_valid",r.n=12,[O[0],void 0];case 12:r.n=14;break;case 13:u&&(C=O[1],void 0===k?e=C:e instanceof Map?e.set(k,C):e instanceof Set?e.add(C):mp(e)&&(void 0!==C||k in e)&&(e[k]=C));case 14:r.n=11;break;case 15:r.n=17;break;case 16:r.p=16,N=r.v,T.e(N);case 17:return r.p=17,T.f(),r.f(17);case 18:r.n=9;break;case 19:r.n=21;break;case 20:r.p=20,D=r.v,E.e(D);case 21:return r.p=21,E.f(),r.f(21);case 22:if("not_valid"===m){r.n=29;break}R=l(t.refiner(e,f)),r.p=23,R.s();case 24:if((P=R.n()).done){r.n=26;break}return(I=P.value).explanation=n.message,m="not_refined",r.n=25,[I,void 0];case 25:r.n=24;break;case 26:r.n=28;break;case 27:r.p=27,B=r.v,R.e(B);case 28:return r.p=28,R.f(),r.f(28);case 29:if(!("valid"===m)){r.n=30;break}return r.n=30,[void 0,e];case 30:return r.a(2)}},r,null,[[23,27,28,29],[10,16,17,18],[8,20,21,22],[1,5,6,7]])})()}function Ep(e,t,n){var r=kp(e,t,{message:n});if(r[0])throw r[0]}function _p(e,t,n){var r=kp(e,t,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function Sp(e,t){return!kp(e,t)[0]}function kp(e,t){var n,r,i,o=wp(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),a=(n=o.next(),r=n.done,i=n.value,r?void 0:i);return a[0]?[new bo(a[0],b().m(function e(){var t,n,r,i;return b().w(function(e){for(;;)switch(e.p=e.n){case 0:t=l(o),e.p=1,t.s();case 2:if((n=t.n()).done){e.n=4;break}if(r=n.value,!r[0]){e.n=3;break}return e.n=3,r[0];case 3:e.n=2;break;case 4:e.n=6;break;case 5:e.p=5,i=e.v,t.e(i);case 6:return e.p=6,t.f(),e.f(6);case 7:return e.a(2)}},e,null,[[1,5,6,7]])})),void 0]:[void 0,a[1]]}function Cp(e,t){return new wo({type:e,schema:null,validator:t})}function Ap(e){var t;return new wo({type:"lazy",schema:null,entries:(n,r)=>b().m(function i(){return b().w(function(i){for(;;)switch(i.n){case 0:return null!=t||(t=e()),i.d(c(t.entries(n,r)),1);case 1:return i.a(2)}},i)})(),validator:(n,r)=>(null!=t||(t=e()),t.validator(n,r)),coercer:(n,r)=>(null!=t||(t=e()),t.coercer(n,r)),refiner:(n,r)=>(null!=t||(t=e()),t.refiner(n,r))})}function xp(e){return new wo({type:"array",schema:e,entries:t=>b().m(function n(){var r,i,o,a,s,c;return b().w(function(n){for(;;)switch(n.p=n.n){case 0:if(!e||!Array.isArray(t)){n.n=7;break}r=l(t.entries()),n.p=1,r.s();case 2:if((i=r.n()).done){n.n=4;break}return o=p(i.value,2),a=o[0],s=o[1],n.n=3,[a,s,e];case 3:n.n=2;break;case 4:n.n=6;break;case 5:n.p=5,c=n.v,r.e(c);case 6:return n.p=6,r.f(),n.f(6);case 7:return n.a(2)}},n,null,[[1,5,6,7]])})(),coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${gp(e)}`})}function Tp(e){var t=gp(e),n=typeof e;return new wo({type:"literal",schema:"string"===n||"number"===n||"boolean"===n?e:null,validator:n=>n===e||`Expected the literal \`${t}\`, but received: ${gp(n)}`})}function Mp(){return Cp("number",e=>"number"==typeof e&&!isNaN(e)||`Expected a number, but received: ${gp(e)}`)}function Op(e){var t=e?Object.keys(e):[],n=Cp("never",()=>!1);return new wo({type:"object",schema:e||null,entries:r=>b().m(function i(){var o,a,s,c,u,d,h,f,p;return b().w(function(i){for(;;)switch(i.p=i.n){case 0:if(!e||!mp(r)){i.n=14;break}o=new Set(Object.keys(r)),a=l(t),i.p=1,a.s();case 2:if((s=a.n()).done){i.n=4;break}return c=s.value,o.delete(c),i.n=3,[c,r[c],e[c]];case 3:i.n=2;break;case 4:i.n=6;break;case 5:i.p=5,f=i.v,a.e(f);case 6:return i.p=6,a.f(),i.f(6);case 7:u=l(o),i.p=8,u.s();case 9:if((d=u.n()).done){i.n=11;break}return h=d.value,i.n=10,[h,r[h],n];case 10:i.n=9;break;case 11:i.n=13;break;case 12:i.p=12,p=i.v,u.e(p);case 13:return i.p=13,u.f(),i.f(13);case 14:return i.a(2)}},i,null,[[8,12,13,14],[1,5,6,7]])})(),validator:e=>mp(e)||`Expected an object, but received: ${gp(e)}`,coercer:e=>mp(e)?h({},e):e})}function Rp(e){return new wo(h(h({},e),{},{validator:(t,n)=>void 0===t||e.validator(t,n),refiner:(t,n)=>void 0===t||e.refiner(t,n)}))}function Pp(e,t){return new wo({type:"record",schema:null,entries:n=>b().m(function r(){var i,o,a,c;return b().w(function(r){for(;;)switch(r.n){case 0:if(!mp(n)){r.n=4;break}a=s(n);case 1:if((c=a()).done){r.n=4;break}return i=c.value,o=n[i],r.n=2,[i,i,e];case 2:return r.n=3,[i,o,t];case 3:r.n=1;break;case 4:return r.a(2)}},r)})(),validator:e=>mp(e)||`Expected an object, but received: ${gp(e)}`})}function Ip(){return Cp("string",e=>"string"==typeof e||`Expected a string, but received: ${gp(e)}`)}function Lp(e){var t=e.map(e=>e.type).join(" | ");return new wo({type:"union",schema:null,coercer(t){var n,r=l(e);try{for(r.s();!(n=r.n()).done;){var i=p(n.value.validate(t,{coerce:!0}),2),o=i[0],a=i[1];if(!o)return a}}catch(s){r.e(s)}finally{r.f()}return t},validator(n,r){var i,o=[],s=l(e);try{for(s.s();!(i=s.n()).done;){var c=a(wp(n,i.value,r)).slice(0);if(!p(c,1)[0][0])return[];var u,d=l(c);try{for(d.s();!(u=d.n()).done;){var h=p(u.value,1)[0];h&&o.push(h)}}catch(f){d.e(f)}finally{d.f()}}}catch(f){s.e(f)}finally{s.f()}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${gp(n)}`,...o]}})}function Np(){throw new Error("setTimeout has not been defined")}function Dp(){throw new Error("clearTimeout has not been defined")}function Bp(e){if(_o===setTimeout)return setTimeout(e,0);if((_o===Np||!_o)&&setTimeout)return _o=setTimeout,setTimeout(e,0);try{return _o(e,0)}catch(t){try{return _o.call(null,e,0)}catch(n){return _o.call(this,e,0)}}}function $p(){Ao&&ko&&(Ao=!1,ko.length?Co=ko.concat(Co):xo=-1,Co.length&&jp())}function jp(){if(!Ao){var e=Bp($p);Ao=!0;for(var t=Co.length;t;){for(ko=Co,Co=[];++xo<t;)ko&&ko[xo].run();xo=-1,t=Co.length}ko=null,Ao=!1,function(e){if(So===clearTimeout)return clearTimeout(e);if((So===Dp||!So)&&clearTimeout)return So=clearTimeout,clearTimeout(e);try{return So(e)}catch(t){try{return So.call(null,e)}catch(n){return So.call(this,e)}}}(e)}}function Kp(e,t){this.fun=e,this.array=t}function Up(){}function Hp(e){var t=e.path,n=e.branch,r=t[t.length-1];return yo(n[n.length-2],r)}function Fp(e){return new wo(h(h({},e),{},{type:`optional ${e.type}`,validator:(t,n)=>!Hp(n)||e.validator(t,n),refiner:(t,n)=>!Hp(n)||e.refiner(t,n)}))}function zp(e){try{return _p(e,zo),!0}catch(t){return!1}}function qp(e){return Sp(e,Yo)}function Vp(e){return Sp(e,Wo)}function Wp(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xo;if(t=e,Number.isInteger(t)){var r=e.toString();if(yo(go,r))return go[r].message;if(function(e){return e>=-32099&&e<=-32e3}(e))return ea}return n}function Gp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.fallbackError,r=void 0===n?Qo:n,i=t.shouldIncludeStack,o=void 0===i||i;if(!Vp(r))throw new Error("Must provide fallback error with integer number code and string message.");var a=function(e,t){if(e&&"object"==typeof e&&"serialize"in e&&"function"==typeof e.serialize)return e.serialize();if(Vp(e))return e;var n=Yp(e);return h(h({},t),{},{data:{cause:n}})}(e,r);return o||delete a.stack,a}function Yp(e){return Array.isArray(e)?e.map(e=>zp(e)?e:vp(e)?Zp(e):null):vp(e)?Zp(e):zp(e)?e:null}function Zp(e){return Object.getOwnPropertyNames(e).reduce((t,n)=>{var r=e[n];return zp(r)&&(t[n]=r),t},{})}function Jp(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function Xp(e,t,n,r){var i;void 0===r&&(r=Jp()),ev(e,"",0,[],void 0,0,r);try{i=0===oa.length?JSON.stringify(e,t,n):JSON.stringify(e,iv(t),n)}catch(a){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==ia.length;){var o=ia.pop();4===o.length?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return i}function Qp(e,t,n,r){var i=Object.getOwnPropertyDescriptor(r,n);void 0!==i.get?i.configurable?(Object.defineProperty(r,n,{value:e}),ia.push([r,n,t,i])):oa.push([t,n,e]):(r[n]=e,ia.push([r,n,t]))}function ev(e,t,n,r,i,o,a){var s;if(o+=1,"object"==typeof e&&null!==e){for(s=0;s<r.length;s++)if(r[s]===e)return void Qp(ra,e,t,i);if(void 0!==a.depthLimit&&o>a.depthLimit)return void Qp(na,e,t,i);if(void 0!==a.edgesLimit&&n+1>a.edgesLimit)return void Qp(na,e,t,i);if(r.push(e),Array.isArray(e))for(s=0;s<e.length;s++)ev(e[s],s,s,r,e,o,a);else{var c=Object.keys(e);for(s=0;s<c.length;s++){var l=c[s];ev(e[l],l,s,r,e,o,a)}}r.pop()}}function tv(e,t){return e<t?-1:e>t?1:0}function nv(e,t,n,r){void 0===r&&(r=Jp());var i,o=rv(e,"",0,[],void 0,0,r)||e;try{i=0===oa.length?JSON.stringify(o,t,n):JSON.stringify(o,iv(t),n)}catch(s){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==ia.length;){var a=ia.pop();4===a.length?Object.defineProperty(a[0],a[1],a[3]):a[0][a[1]]=a[2]}}return i}function rv(e,t,n,r,i,o,a){var s;if(o+=1,"object"==typeof e&&null!==e){for(s=0;s<r.length;s++)if(r[s]===e)return void Qp(ra,e,t,i);try{if("function"==typeof e.toJSON)return}catch(d){return}if(void 0!==a.depthLimit&&o>a.depthLimit)return void Qp(na,e,t,i);if(void 0!==a.edgesLimit&&n+1>a.edgesLimit)return void Qp(na,e,t,i);if(r.push(e),Array.isArray(e))for(s=0;s<e.length;s++)rv(e[s],s,s,r,e,o,a);else{var c={},l=Object.keys(e).sort(tv);for(s=0;s<l.length;s++){var u=l[s];rv(e[u],u,s,r,e,o,a),c[u]=e[u]}if(void 0===i)return c;ia.push([i,t,e]),i[t]=c}r.pop()}}function iv(e){return e=void 0!==e?e:function(e,t){return t},function(t,n){if(oa.length>0)for(var r=0;r<oa.length;r++){var i=oa[r];if(i[1]===t&&i[0]===n){n=i[2],oa.splice(r,1);break}}return e.call(this,t,n)}}function ov(e,t){if("[Circular]"!==t)return t}function av(){}function sv(){sv.init.call(this)}function cv(e){return void 0===e._maxListeners?sv.defaultMaxListeners:e._maxListeners}function lv(e,t,n,r){var i,o,a;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((o=e._events)?(o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]):(o=e._events=new av,e._eventsCount=0),a){if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(i=cv(e))&&i>0&&a.length>i){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=a.length,console.warn}}else a=o[t]=n,++e._eventsCount;return e}function uv(e,t,n){var r=!1;function i(){e.removeListener(t,i),r||(r=!0,n.apply(e,arguments))}return i.listener=n,i}function dv(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function hv(e,t){for(var n=new Array(t);t--;)n[t]=e[t];return n}function fv(e,t,n){try{Reflect.apply(e,t,n)}catch(r){setTimeout(()=>{throw r})}}function pv(e){return JSON.stringify(e,null,2)}function vv(e){return(t,n,r)=>{"string"==typeof t.method&&t.method||(n.error=ca({message:"The request 'method' must be a non-empty string.",data:t})),r(t=>{var r=n.error;return r?(e.error(`MetaMask - RPC Error: ${r.message}`,r),t()):t()})}}function mv(e,t){return gv.apply(this,arguments)}function gv(){return(gv=o(b().m(function e(t,n){var r,i;return b().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,o(b().m(function e(){var t,n;return b().w(function(e){for(;;)switch(e.n){case 0:return t=yv(window),e.n=1,bv(window);case 1:return n=e.v,e.a(2,{name:t,icon:n})}},e)}))();case 1:r=e.v,t.handle({jsonrpc:"2.0",id:1,method:"metamask_sendDomainMetadata",params:r},ja),e.n=3;break;case 2:e.p=2,i=e.v,n.error({message:so.errors.sendSiteMetadata(),originalError:i});case 3:return e.a(2)}},e,null,[[0,2]])}))).apply(this,arguments)}function yv(e){var t=e.document,n=t.querySelector('head > meta[property="og:site_name"]');if(n)return n.content;var r=t.querySelector('head > meta[name="title"]');return r?r.content:t.title&&t.title.length>0?t.title:window.location.hostname}function bv(e){return wv.apply(this,arguments)}function wv(){return(wv=o(b().m(function e(t){var n,r,i,o,a,s;return b().w(function(e){for(;;)switch(e.n){case 0:n=t.document,r=n.querySelectorAll('head > link[rel~="icon"]'),i=0,o=Array.from(r);case 1:if(!(i<o.length)){e.n=5;break}if(a=o[i],!(s=a)){e.n=3;break}return e.n=2,Ev(a.href);case 2:s=e.v;case 3:if(!s){e.n=4;break}return e.a(2,a.href);case 4:i++,e.n=1;break;case 5:return e.a(2,null)}},e)}))).apply(this,arguments)}function Ev(e){return _v.apply(this,arguments)}function _v(){return(_v=o(b().m(function e(t){return b().w(function(e){for(;;)if(0===e.n)return e.a(2,new Promise((e,n)=>{try{var r=document.createElement("img");r.onload=()=>e(!0),r.onerror=()=>e(!1),r.src=t}catch(i){n(i)}}))},e)}))).apply(this,arguments)}function Sv(e,t,n){try{Reflect.apply(e,t,n)}catch(r){setTimeout(()=>{throw r})}}function kv(e){if(!$v(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(xv(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,i=r.length,o=String(e).replace(ts,function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}}),a=r[n];n<i;a=r[++n])Nv(a)||!Hv(a)?o+=" "+a:o+=" "+xv(a);return o}function Cv(e,t){if(Kv(ze.process))return function(){return Cv(e,t).apply(this,arguments)};if(!0===$o.noDeprecation)return e;var n=!1;return function(){if(!n){if($o.throwDeprecation)throw new Error(t);$o.traceDeprecation,n=!0}return e.apply(this,arguments)}}function Av(e){return Kv(ns)&&(ns=$o.env.NODE_DEBUG||""),e=e.toUpperCase(),rs[e]||(new RegExp("\\b"+e+"\\b","i").test(ns)?rs[e]=function(){kv.apply(null,arguments)}:rs[e]=function(){}),rs[e]}function xv(e,t){var n={seen:[],stylize:Mv};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),Lv(t)?n.showHidden=t:t&&Zv(n,t),Kv(n.showHidden)&&(n.showHidden=!1),Kv(n.depth)&&(n.depth=2),Kv(n.colors)&&(n.colors=!1),Kv(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=Tv),Ov(n,e,n.depth)}function Tv(e,t){var n=xv.styles[t];return n?"["+xv.colors[n][0]+"m"+e+"["+xv.colors[n][1]+"m":e}function Mv(e,t){return e}function Ov(e,t,n){if(e.customInspect&&t&&qv(t.inspect)&&t.inspect!==xv&&(!t.constructor||t.constructor.prototype!==t)){var r=t.inspect(n,e);return $v(r)||(r=Ov(e,r,n)),r}var i=function(e,t){if(Kv(t))return e.stylize("undefined","undefined");if($v(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return Bv(t)?e.stylize(""+t,"number"):Lv(t)?e.stylize(""+t,"boolean"):Nv(t)?e.stylize("null","null"):void 0}(e,t);if(i)return i;var o,a=Object.keys(t),s=(o={},a.forEach(function(e,t){o[e]=!0}),o);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),zv(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return Rv(t);if(0===a.length){if(qv(t)){var c=t.name?": "+t.name:"";return e.stylize("[Function"+c+"]","special")}if(Uv(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(Fv(t))return e.stylize(Date.prototype.toString.call(t),"date");if(zv(t))return Rv(t)}var l,u="",d=!1,h=["{","}"];return Iv(t)&&(d=!0,h=["[","]"]),qv(t)&&(u=" [Function"+(t.name?": "+t.name:"")+"]"),Uv(t)&&(u=" "+RegExp.prototype.toString.call(t)),Fv(t)&&(u=" "+Date.prototype.toUTCString.call(t)),zv(t)&&(u=" "+Rv(t)),0!==a.length||d&&0!=t.length?n<0?Uv(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),l=d?function(e,t,n,r,i){for(var o=[],a=0,s=t.length;a<s;++a)Jv(t,String(a))?o.push(Pv(e,t,n,r,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(Pv(e,t,n,r,i,!0))}),o}(e,t,n,s,a):a.map(function(r){return Pv(e,t,n,s,r,d)}),e.seen.pop(),function(e,t,n){return e.reduce(function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}(l,u,h)):h[0]+u+h[1]}function Rv(e){return"["+Error.prototype.toString.call(e)+"]"}function Pv(e,t,n,r,i,o){var a,s,c;if((c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),Jv(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(c.value)<0?(s=Nv(n)?Ov(e,c.value,null):Ov(e,c.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),Kv(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function Iv(e){return Array.isArray(e)}function Lv(e){return"boolean"==typeof e}function Nv(e){return null===e}function Dv(e){return null==e}function Bv(e){return"number"==typeof e}function $v(e){return"string"==typeof e}function jv(e){return"symbol"==typeof e}function Kv(e){return void 0===e}function Uv(e){return Hv(e)&&"[object RegExp]"===Gv(e)}function Hv(e){return"object"==typeof e&&null!==e}function Fv(e){return Hv(e)&&"[object Date]"===Gv(e)}function zv(e){return Hv(e)&&("[object Error]"===Gv(e)||e instanceof Error)}function qv(e){return"function"==typeof e}function Vv(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function Wv(e){return Yd.isBuffer(e)}function Gv(e){return Object.prototype.toString.call(e)}function Yv(){}function Zv(e,t){if(!t||!Hv(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}function Jv(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Xv(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(is&&e[is]){var t;if("function"!=typeof(t=e[is]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,is,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise(function(e,r){t=e,n=r}),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push(function(e,r){e?n(e):t(r)});try{e.apply(this,i)}catch(a){n(a)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),is&&Object.defineProperty(t,is,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,es(e))}function Qv(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}function em(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function t(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var r=t.pop();if("function"!=typeof r)throw new TypeError("The last argument must be of type Function");var i=this,o=function(){return r.apply(i,arguments)};e.apply(this,t).then(function(e){$o.nextTick(o.bind(null,null,e))},function(e){$o.nextTick(Qv.bind(null,e,o))})}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,es(e)),t}function tm(){if(as)return os;function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function t(t){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?e(Object(i),!0).forEach(function(e){n(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function n(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}as=1;var i=Qa.Buffer,o=cs.inspect,a=o&&o.custom||"inspect";return os=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.head=null,this.tail=null,this.length=0}return function(e,t){t&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return i.alloc(0);for(var t,n,r,o=i.allocUnsafe(e>>>0),a=this.head,s=0;a;)t=a.data,n=o,r=s,i.prototype.copy.call(t,n,r),s+=a.data.length,a=a.next;return o}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?r+=i:r+=i.slice(0,e),0===(e-=o)){o===i.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=i.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var o=n.data,a=e>o.length?o.length:e;if(o.copy(t,t.length-e,0,a),0===(e-=a)){a===o.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(a));break}++r}return this.length-=r,t}},{key:a,value:function(e,n){return o(this,t(t({},n),{},{depth:0,customInspect:!1}))}}]),e}()}function nm(e,t){im(e,t),rm(e)}function rm(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function im(e,t){e.emit("error",t)}function om(e,t,n){n||(n=Error);var r=function(e){var n,r;function i(n,r,i){return e.call(this,(o=n,a=r,s=i,"string"==typeof t?t:t(o,a,s)))||this;var o,a,s}return r=e,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r,i}(n);r.prototype.name=n.name,r.prototype.code=e,ds[e]=r}function am(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map(function(e){return String(e)}),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}function sm(e){try{if(!tt.localStorage)return!1}catch(n){return!1}var t=tt.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}function cm(){if(ps)return fs;function e(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t){var n=e.entry;for(e.entry=null;n;){var r=n.callback;t.pendingcb--,r(undefined),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}var t;ps=1,fs=E,E.WritableState=w;var n,r={deprecate:ws},i=Xa,o=Qa.Buffer,a=(void 0!==tt?tt:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},s=ls,c=gs.getHighWaterMark,l=us.codes,u=l.ERR_INVALID_ARG_TYPE,d=l.ERR_METHOD_NOT_IMPLEMENTED,h=l.ERR_MULTIPLE_CALLBACK,f=l.ERR_STREAM_CANNOT_PIPE,p=l.ERR_STREAM_DESTROYED,v=l.ERR_STREAM_NULL_VALUES,m=l.ERR_STREAM_WRITE_AFTER_END,g=l.ERR_UNKNOWN_ENCODING,y=s.errorOrDestroy;function b(){}function w(n,r,i){t=t||lm(),n=n||{},"boolean"!=typeof i&&(i=r instanceof t),this.objectMode=!!n.objectMode,i&&(this.objectMode=this.objectMode||!!n.writableObjectMode),this.highWaterMark=c(this,n,"writableHighWaterMark",i),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===n.decodeStrings),this.defaultEncoding=n.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n,r=e._writableState,i=r.sync,o=r.writecb;if("function"!=typeof o)throw new h;if((n=r).writing=!1,n.writecb=null,n.length-=n.writelen,n.writelen=0,t)!function(e,t,n,r,i){--t.pendingcb,n?($o.nextTick(i,r),$o.nextTick(x,e,t),e._writableState.errorEmitted=!0,y(e,r)):(i(r),e._writableState.errorEmitted=!0,y(e,r),x(e,t))}(e,r,i,t,o);else{var a=C(r)||e.destroyed;a||r.corked||r.bufferProcessing||!r.bufferedRequest||k(e,r),i?$o.nextTick(S,e,r,a,o):S(e,r,a,o)}}(r,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==n.emitClose,this.autoDestroy=!!n.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}function E(e){var r=this instanceof(t=t||lm());if(!r&&!n.call(E,this))return new E(e);this._writableState=new w(e,this,r),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),i.call(this)}function _(e,t,n,r,i,o,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new p("write")):n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function S(e,t,n,r){var i,o;n||(i=e,0===(o=t).length&&o.needDrain&&(o.needDrain=!1,i.emit("drain"))),t.pendingcb--,r(),x(e,t)}function k(t,n){n.bufferProcessing=!0;var r=n.bufferedRequest;if(t._writev&&r&&r.next){var i=n.bufferedRequestCount,o=new Array(i),a=n.corkedRequestsFree;a.entry=r;for(var s=0,c=!0;r;)o[s]=r,r.isBuf||(c=!1),r=r.next,s+=1;o.allBuffers=c,_(t,n,!0,n.length,o,"",a.finish),n.pendingcb++,n.lastBufferedRequest=null,a.next?(n.corkedRequestsFree=a.next,a.next=null):n.corkedRequestsFree=new e(n),n.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,u=r.encoding,d=r.callback;if(_(t,n,!1,n.objectMode?1:l.length,l,u,d),r=r.next,n.bufferedRequestCount--,n.writing)break}null===r&&(n.lastBufferedRequest=null)}n.bufferedRequest=r,n.bufferProcessing=!1}function C(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function A(e,t){e._final(function(n){t.pendingcb--,n&&y(e,n),t.prefinished=!0,e.emit("prefinish"),x(e,t)})}function x(e,t){var n,r,i=C(t);if(i&&(n=e,(r=t).prefinished||r.finalCalled||("function"!=typeof n._final||r.destroyed?(r.prefinished=!0,n.emit("prefinish")):(r.pendingcb++,r.finalCalled=!0,$o.nextTick(A,n,r))),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var o=e._readableState;(!o||o.autoDestroy&&o.endEmitted)&&e.destroy()}return i}return bs(E,i),w.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(w.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(n=Function.prototype[Symbol.hasInstance],Object.defineProperty(E,Symbol.hasInstance,{value:function(e){return!!n.call(this,e)||this===E&&e&&e._writableState instanceof w}})):n=function(e){return e instanceof this},E.prototype.pipe=function(){y(this,new f)},E.prototype.write=function(e,t,n){var r,i,s=this._writableState,c=!1,l=!s.objectMode&&(r=e,o.isBuffer(r)||r instanceof a);return l&&!o.isBuffer(e)&&(i=e,e=o.from(i)),"function"==typeof t&&(n=t,t=null),l?t="buffer":t||(t=s.defaultEncoding),"function"!=typeof n&&(n=b),s.ending?function(e,t){var n=new m;y(e,n),$o.nextTick(t,n)}(this,n):(l||function(e,t,n,r){var i;return null===n?i=new v:"string"==typeof n||t.objectMode||(i=new u("chunk",["string","Buffer"],n)),!i||(y(e,i),$o.nextTick(r,i),!1)}(this,s,e,n))&&(s.pendingcb++,c=function(e,t,n,r,i,a){if(!n){var s=(l=r,u=i,(c=t).objectMode||!1===c.decodeStrings||"string"!=typeof l||(l=o.from(l,u)),l);r!==s&&(n=!0,i="buffer",r=s)}var c,l,u,d=t.objectMode?1:r.length;t.length+=d;var h=t.length<t.highWaterMark;if(h||(t.needDrain=!0),t.writing||t.corked){var f=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:a,next:null},f?f.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else _(e,t,!1,d,r,i,a);return h}(this,s,l,e,t,n)),c},E.prototype.cork=function(){this._writableState.corked++},E.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||k(this,e))},E.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new g(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(E.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),E.prototype._write=function(e,t,n){n(new d("_write()"))},E.prototype._writev=null,E.prototype.end=function(e,t,n){var r,i,o,a=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),a.corked&&(a.corked=1,this.uncork()),a.ending||(r=this,o=n,(i=a).ending=!0,x(r,i),o&&(i.finished?$o.nextTick(o):r.once("finish",o)),i.ended=!0,r.writable=!1),this},Object.defineProperty(E.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),E.prototype.destroy=s.destroy,E.prototype._undestroy=s.undestroy,E.prototype._destroy=function(e,t){t(e)},fs}function lm(){if(ms)return vs;ms=1;var e=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};vs=a;var t=mm(),n=cm();bs(a,t);for(var r=e(n.prototype),i=0;i<r.length;i++){var o=r[i];a.prototype[o]||(a.prototype[o]=n.prototype[o])}function a(e){if(!(this instanceof a))return new a(e);t.call(this,e),n.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",s)))}function s(){this._writableState.ended||$o.nextTick(c,this)}function c(e){e.end()}return Object.defineProperty(a.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(a.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(a.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(a.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),vs}function um(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),function(e){if(e&&!Es(e))throw new Error("Unknown encoding: "+e)}(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=hm;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=fm;break;default:return void(this.write=dm)}this.charBuffer=new Yd(6),this.charReceived=0,this.charLength=0}function dm(e){return e.toString(this.encoding)}function hm(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function fm(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}function pm(){}function vm(){if(Cs)return ks;var e;function t(e,t,n){return(t="symbol"==typeof(r=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t))?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e;var r}Cs=1;var n=Os,r=Symbol("lastResolve"),i=Symbol("lastReject"),o=Symbol("error"),a=Symbol("ended"),s=Symbol("lastPromise"),c=Symbol("handlePromise"),l=Symbol("stream");function u(e,t){return{value:e,done:t}}function d(e){var t=e[r];if(null!==t){var n=e[l].read();null!==n&&(e[s]=null,e[r]=null,e[i]=null,t(u(n,!1)))}}function h(e){$o.nextTick(d,e)}var f=Object.getPrototypeOf(function(){}),p=Object.setPrototypeOf((t(e={get stream(){return this[l]},next:function(){var e=this,t=this[o];if(null!==t)return Promise.reject(t);if(this[a])return Promise.resolve(u(void 0,!0));if(this[l].destroyed)return new Promise(function(t,n){$o.nextTick(function(){e[o]?n(e[o]):t(u(void 0,!0))})});var n,r,i,d=this[s];if(d)n=new Promise((r=d,i=this,function(e,t){r.then(function(){i[a]?e(u(void 0,!0)):i[c](e,t)},t)}));else{var h=this[l].read();if(null!==h)return Promise.resolve(u(h,!1));n=new Promise(this[c])}return this[s]=n,n}},Symbol.asyncIterator,function(){return this}),t(e,"return",function(){var e=this;return new Promise(function(t,n){e[l].destroy(null,function(e){e?n(e):t(u(void 0,!0))})})}),e),f);return ks=function(e){var d,f=Object.create(p,(t(d={},l,{value:e,writable:!0}),t(d,r,{value:null,writable:!0}),t(d,i,{value:null,writable:!0}),t(d,o,{value:null,writable:!0}),t(d,a,{value:e._readableState.endEmitted,writable:!0}),t(d,c,{value:function(e,t){var n=f[l].read();n?(f[s]=null,f[r]=null,f[i]=null,e(u(n,!1))):(f[r]=e,f[i]=t)},writable:!0}),d));return f[s]=null,n(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=f[i];return null!==t&&(f[s]=null,f[r]=null,f[i]=null,t(e)),void(f[o]=e)}var n=f[r];null!==n&&(f[s]=null,f[r]=null,f[i]=null,n(u(void 0,!0))),f[a]=!0}),e.on("readable",h.bind(null,f)),f}}function mm(){if(Ms)return Ts;var e;Ms=1,Ts=E,E.ReadableState=w,ua.EventEmitter;var t,n=function(e,t){return e.listeners(t).length},r=Xa,i=Qa.Buffer,o=(void 0!==tt?tt:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},a=cs;t=a&&a.debuglog?a.debuglog("stream"):function(){};var s,c,l,u=tm(),d=ls,h=gs.getHighWaterMark,f=us.codes,p=f.ERR_INVALID_ARG_TYPE,v=f.ERR_STREAM_PUSH_AFTER_EOF,m=f.ERR_METHOD_NOT_IMPLEMENTED,g=f.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;bs(E,r);var y=d.errorOrDestroy,b=["error","close","destroy","pause","resume"];function w(t,n,r){e=e||lm(),t=t||{},"boolean"!=typeof r&&(r=n instanceof e),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=h(this,t,"readableHighWaterMark",r),this.buffer=new u,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(s||(s=_s.StringDecoder),this.decoder=new s(t.encoding),this.encoding=t.encoding)}function E(t){if(e=e||lm(),!(this instanceof E))return new E(t);var n=this instanceof e;this._readableState=new w(t,this,n),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),r.call(this)}function _(e,n,r,a,s){t("readableAddChunk",n);var c,l,u,d,h,f=e._readableState;if(null===n)f.reading=!1,function(e,n){if(t("onEofChunk"),!n.ended){if(n.decoder){var r=n.decoder.end();r&&r.length&&(n.buffer.push(r),n.length+=n.objectMode?1:r.length)}n.ended=!0,n.sync?A(e):(n.needReadable=!1,n.emittedReadable||(n.emittedReadable=!0,x(e)))}}(e,f);else if(s||(l=f,h=u=n,i.isBuffer(h)||h instanceof o||"string"==typeof u||void 0===u||l.objectMode||(d=new p("chunk",["string","Buffer","Uint8Array"],u)),c=d),c)y(e,c);else if(f.objectMode||n&&n.length>0)if("string"==typeof n||f.objectMode||Object.getPrototypeOf(n)===i.prototype||(n=function(e){return i.from(e)}(n)),a)f.endEmitted?y(e,new g):S(e,f,n,!0);else if(f.ended)y(e,new v);else{if(f.destroyed)return!1;f.reading=!1,f.decoder&&!r?(n=f.decoder.write(n),f.objectMode||0!==n.length?S(e,f,n,!1):T(e,f)):S(e,f,n,!1)}else a||(f.reading=!1,T(e,f));return!f.ended&&(f.length<f.highWaterMark||0===f.length)}function S(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&A(e)),T(e,t)}Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),E.prototype.destroy=d.destroy,E.prototype._undestroy=d.undestroy,E.prototype._destroy=function(e,t){t(e)},E.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=i.from(e,t),t=""),n=!0),_(this,e,t,!1,n)},E.prototype.unshift=function(e){return _(this,e,null,!0,!1)},E.prototype.isPaused=function(){return!1===this._readableState.flowing},E.prototype.setEncoding=function(e){s||(s=_s.StringDecoder);var t=new s(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,r="";null!==n;)r+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==r&&this._readableState.buffer.push(r),this._readableState.length=r.length,this};var k=1073741824;function C(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=((n=e)>=k?n=k:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0));var n}function A(e){var n=e._readableState;t("emitReadable",n.needReadable,n.emittedReadable),n.needReadable=!1,n.emittedReadable||(t("emitReadable",n.flowing),n.emittedReadable=!0,$o.nextTick(x,e))}function x(e){var n=e._readableState;t("emitReadable_",n.destroyed,n.length,n.ended),n.destroyed||!n.length&&!n.ended||(e.emit("readable"),n.emittedReadable=!1),n.needReadable=!n.flowing&&!n.ended&&n.length<=n.highWaterMark,I(e)}function T(e,t){t.readingMore||(t.readingMore=!0,$o.nextTick(M,e,t))}function M(e,n){for(;!n.reading&&!n.ended&&(n.length<n.highWaterMark||n.flowing&&0===n.length);){var r=n.length;if(t("maybeReadMore read 0"),e.read(0),r===n.length)break}n.readingMore=!1}function O(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function R(e){t("readable nexttick read 0"),e.read(0)}function P(e,n){t("resume",n.reading),n.reading||e.read(0),n.resumeScheduled=!1,e.emit("resume"),I(e),n.flowing&&!n.reading&&e.read(0)}function I(e){var n=e._readableState;for(t("flow",n.flowing);n.flowing&&null!==e.read(););}function L(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function N(e){var n=e._readableState;t("endReadable",n.endEmitted),n.endEmitted||(n.ended=!0,$o.nextTick(D,n,e))}function D(e,n){if(t("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,n.readable=!1,n.emit("end"),e.autoDestroy)){var r=n._writableState;(!r||r.autoDestroy&&r.finished)&&n.destroy()}}function B(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}return E.prototype.read=function(e){t("read",e),e=parseInt(e,10);var n=this._readableState,r=e;if(0!==e&&(n.emittedReadable=!1),0===e&&n.needReadable&&((0!==n.highWaterMark?n.length>=n.highWaterMark:n.length>0)||n.ended))return t("read: emitReadable",n.length,n.ended),0===n.length&&n.ended?N(this):A(this),null;if(0===(e=C(e,n))&&n.ended)return 0===n.length&&N(this),null;var i,o=n.needReadable;return t("need readable",o),(0===n.length||n.length-e<n.highWaterMark)&&t("length less than watermark",o=!0),n.ended||n.reading?t("reading or ended",o=!1):o&&(t("do read"),n.reading=!0,n.sync=!0,0===n.length&&(n.needReadable=!0),this._read(n.highWaterMark),n.sync=!1,n.reading||(e=C(r,n))),null===(i=e>0?L(e,n):null)?(n.needReadable=n.length<=n.highWaterMark,e=0):(n.length-=e,n.awaitDrain=0),0===n.length&&(n.ended||(n.needReadable=!0),r!==e&&n.ended&&N(this)),null!==i&&this.emit("data",i),i},E.prototype._read=function(e){y(this,new m("_read()"))},E.prototype.pipe=function(e,r){var i=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,t("pipe count=%d opts=%j",o.pipesCount,r);var a=r&&!1===r.end||e===$o.stdout||e===$o.stderr?v:s;function s(){t("onend"),e.end()}o.endEmitted?$o.nextTick(a):i.once("end",a),e.on("unpipe",function n(r,a){t("onunpipe"),r===i&&a&&!1===a.hasUnpiped&&(a.hasUnpiped=!0,t("cleanup"),e.removeListener("close",f),e.removeListener("finish",p),e.removeListener("drain",l),e.removeListener("error",h),e.removeListener("unpipe",n),i.removeListener("end",s),i.removeListener("end",v),i.removeListener("data",d),u=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||l())});var c,l=(c=i,function(){var e=c._readableState;t("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&n(c,"data")&&(e.flowing=!0,I(c))});e.on("drain",l);var u=!1;function d(n){t("ondata");var r=e.write(n);t("dest.write",r),!1===r&&((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==B(o.pipes,e))&&!u&&(t("false write response, pause",o.awaitDrain),o.awaitDrain++),i.pause())}function h(r){t("onerror",r),v(),e.removeListener("error",h),0===n(e,"error")&&y(e,r)}function f(){e.removeListener("finish",p),v()}function p(){t("onfinish"),e.removeListener("close",f),v()}function v(){t("unpipe"),i.unpipe(e)}return i.on("data",d),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",h),e.once("close",f),e.once("finish",p),e.emit("pipe",i),o.flowing||(t("pipe resume"),i.resume()),e},E.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=B(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},E.prototype.on=function(e,n){var i=r.prototype.on.call(this,e,n),o=this._readableState;return"data"===e?(o.readableListening=this.listenerCount("readable")>0,!1!==o.flowing&&this.resume()):"readable"===e&&(o.endEmitted||o.readableListening||(o.readableListening=o.needReadable=!0,o.flowing=!1,o.emittedReadable=!1,t("on readable",o.length,o.reading),o.length?A(this):o.reading||$o.nextTick(R,this))),i},E.prototype.addListener=E.prototype.on,E.prototype.removeListener=function(e,t){var n=r.prototype.removeListener.call(this,e,t);return"readable"===e&&$o.nextTick(O,this),n},E.prototype.removeAllListeners=function(e){var t=r.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||$o.nextTick(O,this),t},E.prototype.resume=function(){var e,n,r=this._readableState;return r.flowing||(t("resume"),r.flowing=!r.readableListening,e=this,(n=r).resumeScheduled||(n.resumeScheduled=!0,$o.nextTick(P,e,n))),r.paused=!1,this},E.prototype.pause=function(){return t("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(t("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},E.prototype.wrap=function(e){var n=this,r=this._readableState,i=!1;for(var o in e.on("end",function(){if(t("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&n.push(e)}n.push(null)}),e.on("data",function(o){t("wrapped data"),r.decoder&&(o=r.decoder.write(o)),r.objectMode&&null==o||(r.objectMode||o&&o.length)&&(n.push(o)||(i=!0,e.pause()))}),e)void 0===this[o]&&"function"==typeof e[o]&&(this[o]=function(t){return function(){return e[t].apply(e,arguments)}}(o));for(var a=0;a<b.length;a++)e.on(b[a],this.emit.bind(this,b[a]));return this._read=function(n){t("wrapped _read",n),i&&(i=!1,e.resume())},this},"function"==typeof Symbol&&(E.prototype[Symbol.asyncIterator]=function(){return void 0===c&&(c=vm()),c(this)}),Object.defineProperty(E.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(E.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(E.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),E._fromList=L,Object.defineProperty(E.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(E.from=function(e,t){return void 0===l&&(l=xs?As:(xs=1,As=function(){throw new Error("Readable.from is not available in the browser")})),l(E,e,t)}),Ts}function gm(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new Ls);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function ym(e){if(!(this instanceof ym))return new ym(e);Bs.call(this,e),this._transformState={afterTransform:gm.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",bm)}function bm(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?wm(this,null,null):this._flush(function(t,n){wm(e,t,n)})}function wm(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Ds;if(e._transformState.transforming)throw new Ns;return e.push(null)}function Em(e){if(!(this instanceof Em))return new Em(e);Ks.call(this,e)}function _m(e){if(e)throw e}function Sm(e){e()}function km(e,t){return e.pipe(t)}function Cm(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function Am(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)};return t.onceError=(e.name||"Function wrapped with `once`")+" shouldn't be called more than once",t.called=!1,t}function xm(e,t){if("[Circular]"!==t)return t}function Tm(e,t){var n=p(Om(t),2),r=n[0],i=n[1];return new wc.EthereumRpcError(e,r||Ec.getMessageFromCode(e),i)}function Mm(e,t){var n=p(Om(t),2),r=n[0],i=n[1];return new wc.EthereumProviderError(e,r||Ec.getMessageFromCode(e),i)}function Om(e){if(e){if("string"==typeof e)return[e];if("object"==typeof e&&!Array.isArray(e)){var t=e.message,n=e.data;if(t&&"string"!=typeof t)throw new Error("Must specify string message.");return[t||void 0,n]}}return[]}function Rm(e){var t=e.instance,n=e.msg;return Ud(this,void 0,void 0,b().m(function e(){var r;return b().w(function(e){for(;;)switch(e.n){case 0:if(t._initialized){e.n=1;break}return dc("[MetaMaskSDK: connectAndSign()] provider not ready -- wait for init()"),e.n=1,t.init();case 1:if(dc(`[MetaMaskSDK: connectAndSign()] activeProvider=${t.activeProvider}`),t.activeProvider){e.n=2;break}throw new Error("SDK state invalid -- undefined provider");case 2:return r=/^0x([0-9A-Fa-f]{2})*$/.test(n)?n:function(e){var t;if(void 0!==Yd)t=Yd.from(e,"utf8").toString("hex");else if("undefined"!=typeof TextEncoder){var n=(new TextEncoder).encode(e);t=Array.from(n).map(e=>e.toString(16).padStart(2,"0")).join("")}else{if("object"!=typeof ze||!("Buffer"in ze))throw new Error("Unable to convert string to hex: No available method.");t=ze.Buffer.from(e,"utf8").toString("hex")}return`0x${t}`}(n),e.a(2,t.activeProvider.request({method:Bc.METAMASK_CONNECTWITH,params:[{method:Bc.PERSONAL_SIGN,params:[r]}]}))}},e)}))}function Pm(e){var t,n;return Ud(this,void 0,void 0,b().m(function r(){var i;return b().w(function(r){for(;;)switch(r.p=r.n){case 0:return dc("[MetaMaskSDK: connectWithExtensionProvider()] ",e),e.sdkProvider=e.activeProvider,e.activeProvider=window.extension,window.ethereum=window.extension,r.p=1,r.n=2,null===(t=window.extension)||void 0===t?void 0:t.request({method:"eth_requestAccounts"});case 2:i=r.v,dc(`[MetaMaskSDK: connectWithExtensionProvider()] accounts=${i}`),r.n=4;break;case 3:return r.p=3,r.v,r.a(2);case 4:localStorage.setItem(Hc,"extension"),e.extensionActive=!0,e.emit(Cc.ProviderUpdate,Wc.EXTENSION),e.options.enableAnalytics&&(null===(n=e.analytics)||void 0===n||n.send({event:Fi.SDK_USE_EXTENSION}));case 5:return r.a(2)}},r,null,[[1,3]])}))}function Im(e){var t;if(void 0!==Yd)t=Yd.from(e,"utf8").toString("base64");else if("function"==typeof btoa)t=btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(e,t)=>String.fromCharCode(parseInt(t,16))));else{if("object"!=typeof ze||!("Buffer"in ze))throw new Error("Unable to base64 encode: No available method.");t=ze.Buffer.from(e,"utf8").toString("base64")}return t}function Lm(e,t,n,r){var i,o,a,s,c,l,u,d,h,f,p,v,m,g,y,w,E,_,S,k;return Ud(this,void 0,void 0,b().m(function n(){var C,A,x,T,M,O,R,P,I,L,N,D,B,$,j,K,U,H,F,z;return b().w(function(n){for(;;)switch(n.p=n.n){case 0:if(C=null===(i=e.state.remote)||void 0===i?void 0:i.isReady(),A=null===(o=e.state.remote)||void 0===o?void 0:o.isConnected(),x=null===(a=e.state.remote)||void 0===a?void 0:a.isPaused(),T=Ac.getProvider(),M=null===(s=e.state.remote)||void 0===s?void 0:s.getChannelId(),O=null===(c=e.state.remote)||void 0===c?void 0:c.isAuthorized(),R=e.state.deeplinkProtocol,P=(e=>{var t,n,r,i,o;Yd.isBuffer(e)?(o=e.toJSON())._isBuffer=!0:o=e;var a=null===(t=null==o?void 0:o.data)||void 0===t?void 0:t.method,s=!1;return"object"==typeof(null===(n=null==o?void 0:o.data)||void 0===n?void 0:n.params)&&!0===(null===(i=null===(r=null==o?void 0:o.data)||void 0===r?void 0:r.params)||void 0===i?void 0:i.__triggeredInstaller)&&(s=!0,o.data.params=o.data.params.wrappedParams),{method:a,data:o,triggeredInstaller:s}})(t),I=P.method,L=P.data,N=P.triggeredInstaller,dc(`[RCPMS: write()] method='${I}' isRemoteReady=${C} channelId=${M} isSocketConnected=${A} isRemotePaused=${x} providerConnected=${T.isConnected()}`,t),M){n.n=1;break}return n.a(2,(I!==Bc.METAMASK_GETPROVIDERSTATE&&dc(`[RCPMS: write()] ${I} --\x3e channelId is undefined`),r(new Error("disconnected"))));case 1:if(dc(`[RCPMS: write()] remote.isPaused()=${null===(l=e.state.remote)||void 0===l?void 0:l.isPaused()} authorized=${O} ready=${C} socketConnected=${A}`,t),D=null===(u=e.state.platformManager)||void 0===u?void 0:u.isSecure(),B=null!==(h=null===(d=e.state.platformManager)||void 0===d?void 0:d.isMobileWeb())&&void 0!==h&&h,$=null!==(p=null===(f=e.state.remote)||void 0===f?void 0:f.hasDeeplinkProtocol())&&void 0!==p&&p&&B&&O,n.p=2,N){n.n=4;break}if(!((j=JSON.stringify(null==L?void 0:L.data)).length>Vc)){n.n=3;break}return n.a(2,r(new Error(`Message size ${j.length} exceeds maximum allowed size of 1000000 bytes`)));case 3:null===(v=e.state.remote)||void 0===v||v.sendMessage(null==L?void 0:L.data).then(()=>{dc(`[RCPMS: _write()] ${I} sent successfully`)}).catch(e=>{dc("[RCPMS: _write()] error sending message",e)});case 4:if(D){n.n=5;break}return n.a(2,(dc(`[RCPMS: _write()] unsecure platform for method ${I} -- return callback`),r()));case 5:if(!N){n.n=6;break}return n.a(2,(dc("[RCPMS: _write()] prevent deeplink -- installation completed separately."),r()));case 6:if(K=null!==(y=null===(g=null===(m=e.state.remote)||void 0===m?void 0:m.getKeyInfo())||void 0===g?void 0:g.ecies.public)&&void 0!==y?y:"",U=encodeURI(`channelId=${M}&pubkey=${K}&comm=socket&t=d&v=2`),!$){n.n=8;break}if(H=JSON.stringify(null==L?void 0:L.data),F=null===(w=e.state.remote)||void 0===w?void 0:w.encrypt(H)){n.n=7;break}return n.a(2,(dc("[RCPMS: _write()] error encrypting message"),r(new Error("RemoteCommunicationPostMessageStream - disconnected"))));case 7:U+=`&scheme=${R}&rpc=${Im(F)}`;case 8:if(null===(E=e.state.platformManager)||void 0===E?void 0:E.isMetaMaskInstalled()){n.n=9;break}return n.a(2,(dc("[RCPMS: _write()] prevent deeplink until installation is completed."),r()));case 9:$c[I]?(dc(`[RCPMS: _write()] redirect link for '${I}' socketConnected=${A} connect?${U}`),null===(_=e.state.platformManager)||void 0===_||_.openDeeplink(`${Ic}?${U}`,`${Lc}?${U}`,"_self")):(null===(S=e.state.remote)||void 0===S?void 0:S.isPaused())?(dc(`[RCPMS: _write()] MM is PAUSED! deeplink with connect! targetMethod=${I}`),null===(k=e.state.platformManager)||void 0===k||k.openDeeplink(`${Ic}?redirect=true&${U}`,`${Lc}?redirect=true&${U}`,"_self")):dc(`[RCPMS: _write()] method ${I} doesn't need redirect.`),n.n=11;break;case 10:return n.p=10,z=n.v,n.a(2,(dc("[RCPMS: _write()] error sending message",z),r(new Error("RemoteCommunicationPostMessageStream - disconnected"))));case 11:return n.a(2,r())}},n,null,[[2,10]])}))}function Nm(e){var t,n,r,i;return Ud(this,void 0,void 0,b().m(function o(){var a,s;return b().w(function(o){for(;;)switch(o.n){case 0:return a=e.options,s={communicationLayerPreference:null!==(t=a.communicationLayerPreference)&&void 0!==t?t:to.SOCKET,platformManager:e.platformManager,sdk:e,checkInstallationOnAllCalls:a.checkInstallationOnAllCalls,injectProvider:null===(n=a.injectProvider)||void 0===n||n,shouldShimWeb3:null===(r=a.shouldShimWeb3)||void 0===r||r,extensionOnly:null===(i=a.extensionOnly)||void 0===i||i,installer:e.installer,remoteConnection:e.remoteConnection,debug:e.debug},o.n=1,Xc(s);case 1:e.activeProvider=o.v,function(e){var t,n,r,i;null===(n=null===(t=e.remoteConnection)||void 0===t?void 0:t.getConnector())||void 0===n||n.on(Cc.ConnectionStatus,t=>{e.emit(Cc.ConnectionStatus,t)}),null===(i=null===(r=e.remoteConnection)||void 0===r?void 0:r.getConnector())||void 0===i||i.on(Cc.ServiceStatus,t=>{e.emit(Cc.ServiceStatus,t)})}(e);case 2:return o.a(2)}},o)}))}function Dm(e){var t,n,r,i=e.dappMetadata,o=function(e){var t,n=Im(e.url+e.name);if(!localStorage)return"";var r=null!==(t=localStorage.getItem(n))&&void 0!==t?t:"";if(!r){r=L();try{localStorage.setItem(n,r)}catch(i){return""}}return r}({url:null!==(t=null==i?void 0:i.url)&&void 0!==t?t:"no_url",name:null!==(n=null==i?void 0:i.name)&&void 0!==n?n:"no_name"}),a=null===(r=e.platformManager)||void 0===r?void 0:r.getPlatformType(),s=a===no.DesktopWeb,c=a===no.MetaMaskMobileWebview,l="N/A";return s?l="extension":c&&(l="mobile"),{id:o,from:l}}function Bm(e){var t=e.mustBeMetaMask,n=e.sdkInstance;return Ud(this,void 0,void 0,b().m(function e(){var r;return b().w(function(e){for(;;)switch(e.p=e.n){case 0:if("undefined"!=typeof window){e.n=1;break}throw new Error("window not available");case 1:return e.p=1,e.n=2,new Promise((e,t)=>{var n=setTimeout(()=>{t(new Error("eip6963RequestProvider timed out"))},500);window.addEventListener(il.Announce,t=>{var r=t.detail,i=void 0===r?{}:r,o=i.info,a=i.provider,s=null!=o?o:{},c=s.name,l=s.rdns,u=s.uuid;Dc.test(u)&&c.startsWith(Nc.NAME)&&Nc.RDNS.includes(l)&&(clearTimeout(n),e(a))}),window.dispatchEvent(new Event(il.Request))});case 2:return r=e.v,e.a(2,rl({provider:r,sdkInstance:n}));case 3:if(e.p=3,e.v,t||!window.ethereum){e.n=4;break}return e.a(2,rl({provider:window.ethereum,sdkInstance:n}));case 4:throw new Error("Provider not found");case 5:return e.a(2)}},e,null,[[1,3]])}))}function $m(e,t){var n=t.wait,r=void 0!==n&&n;return Ud(this,void 0,void 0,b().m(function t(){return b().w(function(t){for(;;)switch(t.n){case 0:if(dc(`[MetamaskInstaller: startInstaller()] wait=${r}`),!r){t.n=1;break}return t.n=1,Jc(1e3);case 1:return t.n=2,e.checkInstallation();case 2:return t.a(2,t.v)}},t)}))}function jm(e,t){var n,r,i,o;e.connector||(dc("[RemoteConnection: initializeConnector()] initialize connector"),e.connector=new io({anonId:t.anonId,platformType:t.platformManager.getPlatformType(),communicationLayerPreference:t.communicationLayerPreference,transports:t.transports,dappMetadata:Object.assign(Object.assign({},t.dappMetadata),{source:t._source}),analytics:t.enableAnalytics,communicationServerUrl:t.communicationServerUrl,sdkVersion:Rc.version,context:"dapp",ecies:t.ecies,storage:t.storage,logging:t.logging}),t.timer&&(dc("[RemoteConnection: initializeConnector()] reset background timer",t.timer),null===(r=null===(n=t.timer)||void 0===n?void 0:n.stopBackgroundTimer)||void 0===r||r.call(n),null===(o=null===(i=t.timer)||void 0===i?void 0:i.runBackgroundTimer)||void 0===o||o.call(i,()=>!1,1e4)))}function Km(e){e.listeners.forEach(t=>{var n,r=t.event,i=t.handler;null===(n=e.connector)||void 0===n||n.off(r,i)}),e.listeners=[]}function Um(e,t,n){return Ud(this,void 0,void 0,b().m(function r(){var i;return b().w(function(r){for(;;)if(0===r.n)return i=setTimeout(()=>{D.analytics.track("sdk_connection_failed",{transport_type:"websocket"})},6e4),r.a(2,new Promise((r,o)=>{if(e.connector){dc("[RemoteConnection: connectWithModalInstaller()]",{state:e,options:t,linkParams:n});var a,s,c,l,u,d,h,f=`${e.useDeeplink?Lc:Ic}?${n}`;s=t,c=f,(a=e).installModal=null===(u=(l=s.modals).install)||void 0===u?void 0:u.call(l,{link:c,preferDesktop:a.preferDesktop,installer:s.getMetaMaskInstaller(),terminate:()=>{dc("[RemoteConnection: showInstallModal() => terminate()] terminate connection"),s.sdk.terminate().catch(e=>{})},debug:a.developerMode,connectWithExtension:()=>{var e;return null===(e=s.connectWithExtensionProvider)||void 0===e||e.call(s),!1},onAnalyticsEvent:e=>{var t,n,r,i=e.event,o=e.params,c=Object.assign(Object.assign({},o),{sdkVersion:s.sdk.getVersion(),dappId:null===(t=s.dappMetadata)||void 0===t?void 0:t.name,source:s._source,url:null===(n=s.dappMetadata)||void 0===n?void 0:n.url});null===(r=a.analytics)||void 0===r||r.send({event:i,params:c})}}),null===(h=null===(d=a.installModal)||void 0===d?void 0:d.mount)||void 0===h||h.call(d,c),t.sdk.once(ji.PROVIDER_UPDATE,e=>Ud(this,void 0,void 0,b().m(function t(){return b().w(function(t){for(;;)switch(t.n){case 0:if(dc("[RemoteConnection: connectWithModalInstaller()] once provider_update -- resolving startConnection promise"),e!==Wc.TERMINATE){t.n=1;break}return clearTimeout(i),o({code:4001,message:"User rejected the request."}),t.a(2);case 1:o(e);case 2:return t.a(2)}},t)}))),e.connector.once(ji.AUTHORIZED,()=>{clearTimeout(i),r()}),e.connector.once(ji.REJECTED,()=>{clearTimeout(i),o(ji.REJECTED)}),e.connector.once(ji.CLIENTS_READY,()=>Ud(this,void 0,void 0,b().m(function e(){return b().w(function(e){for(;;)switch(e.n){case 0:dc("[RemoteConnection: connectWithModalInstaller()] once clients_ready -- resolving startConnection promise"),clearTimeout(i),r();case 1:return e.a(2)}},e)})))}else o(new Error("No connector available"))}))},r,this)}))}function Hm(e,t){function n(t,n){var r;null===(r=e.connector)||void 0===r||r.on(t,n),e.listeners.push({event:t,handler:n})}e.connector&&(Km(e),n(ji.WALLET_INIT,e=>{var t=e.accounts,n=e.chainId;return Ud(this,void 0,void 0,b().m(function e(){var r,i;return b().w(function(e){for(;;)switch(e.n){case 0:dc(`[RemoteConnection: setupListeners() => EventType.WALLET_INIT] 'wallet_init' accounts=${t} chainId=${n}`),(r=Ac.getProvider())._setConnected(),i={accounts:t,chainId:n,isUnlocked:!1},r._initializeState(i),r.emit("chainChanged",n),r.emit("accountsChanged",t);case 1:return e.a(2)}},e)}))}),n(ji.AUTHORIZED,()=>Ud(this,void 0,void 0,b().m(function t(){var n,r,i,o,a;return b().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,dc("[RemoteConnection: setupListeners() => EventType.AUTHORIZED] 'authorized' closing modals",e.pendingModal,e.installModal),(a=Ac.getProvider())._setConnected(),null===(r=null===(n=e.pendingModal)||void 0===n?void 0:n.unmount)||void 0===r||r.call(n),null===(o=null===(i=e.installModal)||void 0===i?void 0:i.unmount)||void 0===o||o.call(i,!1),e.otpAnswer=void 0,e.authorized=!0,dc("[RemoteConnection: setupListeners() => EventType.AUTHORIZED] 'authorized' provider.state",a.getState()),t.n=1,a.forceInitializeState();case 1:t.n=3;break;case 2:t.p=2,t.v;case 3:return t.a(2)}},t,null,[[0,2]])}))),n(ji.TERMINATE,()=>{var t,n,r,i,o;null===(n=null===(t=e.pendingModal)||void 0===t?void 0:t.unmount)||void 0===n||n.call(t),null===(i=null===(r=e.installModal)||void 0===r?void 0:r.unmount)||void 0===i||i.call(r,!0),e.pendingModal=void 0,e.installModal=void 0,e.otpAnswer=void 0,null===(o=e.connector)||void 0===o||o.disconnect({terminate:!0}),e.authorized=!1,Ac.getProvider().handleDisconnect({terminate:!0}),Km(e),dc("[RemoteConnection: setupListeners()] All listeners cleaned up")}))}function Fm(e,t){var n,r,i,o,a,s,c,l,u,d,h,f,p,v,m,g,y,w,E,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},S=_.initialCheck,k=_.connectWith;return Ud(this,void 0,void 0,b().m(function _(){var C,A,x,T,M,O,R,P,I,L,N,B,$,j,K,U,H,F,z,q,V,W,G;return b().w(function(_){for(;;)switch(_.p=_.n){case 0:if(_.p=0,jm(e,t),e.connector){_.n=1;break}throw new Error("no connector defined");case 1:return Hm(e),C=Ac.getProvider(),e.authorized=!1,C.emit("connecting"),_.n=2,null===(n=e.connector)||void 0===n?void 0:n.originatorSessionConnect();case 2:if(A=_.v,dc(`[RemoteConnection: startConnection()] after originatorSessionConnect initialCheck=${S}`,A),x=null!==(r=null==A?void 0:A.channelId)&&void 0!==r?r:"",T=null!==(o=null===(i=e.connector.getKeyInfo())||void 0===i?void 0:i.ecies.public)&&void 0!==o?o:"",M=null!==(s=null===(a=e.connector.getKeyInfo())||void 0===a?void 0:a.ecies.private)&&void 0!==s?s:"",!S||A){_.n=3;break}return _.a(2,Promise.resolve());case 3:if(A||S){_.n=5;break}return _.n=4,e.connector.generateChannelIdConnect();case 4:O=_.v,x=null!==(c=O.channelId)&&void 0!==c?c:"",T=null!==(l=O.pubKey)&&void 0!==l?l:"",M=null!==(u=O.privKey)&&void 0!==u?u:"",R=Date.now(),null===(d=e.connector.state.storageManager)||void 0===d||d.persistChannelConfig({channelId:x,localKey:M,lastActive:R,validUntil:R+Ni});case 5:if(!S||!(null==A?void 0:A.channelId)){_.n=7;break}if(!(null===(h=e.connector)||void 0===h)&&h.isConnected()){_.n=6;break}return dc(`[RemoteConnection: startConnection()] reconnecting to channel initialCheck=${S}`,A),_.n=6,null===(f=e.connector)||void 0===f?void 0:f.connectToChannel({channelId:x});case 6:return _.a(2,Promise.resolve());case 7:if(!(A&&!(null===(p=e.connector)||void 0===p?void 0:p.isConnected()))){_.n=8;break}return dc("[RemoteConnection: startConnection()] reconnecting to channel",A),_.n=8,null===(v=e.connector)||void 0===v?void 0:v.connectToChannel({channelId:x});case 8:if(P=(null===(m=e.platformManager)||void 0===m?void 0:m.isSecure())?"":"&t=q",I=Rc.version,L=t.dappMetadata||{},N=L.iconUrl,B=L.name,$=L.url,j=L.scheme,K=null===(g=e.platformManager)||void 0===g?void 0:g.getPlatformType(),U="N/A","undefined"!=typeof window&&window.location&&window.location.hostname?U=window.location.hostname:void 0!==B?U=B:void 0!==$&&(U=$),H={url:null!=$?$:"",title:null!=B?B:"",icon:N,scheme:null!=j?j:"",apiVersion:I,dappId:U||$||"N/A",anonId:t.anonId,platform:null!=K?K:"",source:null!==(y=t._source)&&void 0!==y?y:""},F=Im(JSON.stringify(H)),z=`channelId=${x}&v=2&comm=${null!==(w=e.communicationLayerPreference)&&void 0!==w?w:""}&pubkey=${T}${P}&originatorInfo=${F}`,k&&(z+=`&rpc=${Im(JSON.stringify(k))}`,(q=e.connector.getRPCMethodTracker())&&(q[`${k.id}`]=Object.assign(Object.assign({},k),{id:`${k.id}`,timestamp:Date.now()}))),V=encodeURI(z),W=`${e.useDeeplink?Lc:Ic}?${z}`,e.qrcodeLink=W,e.developerMode&&dc(`[RemoteConnection: startConnection()] qrcodeLink=${V}`),C.emit("display_uri",W),D.analytics.track("sdk_connection_initiated",{transport_type:"websocket"}),!(null===(E=e.platformManager)||void 0===E?void 0:E.isSecure())){_.n=10;break}return G=setTimeout(()=>{D.analytics.track("sdk_connection_failed",{transport_type:"websocket"})},6e4),_.n=9,function(e,t){var n,r;return Ud(this,void 0,void 0,b().m(function i(){var o,a;return b().w(function(i){for(;;)switch(i.n){case 0:o=`${Ic}?${t}`,a=`${Lc}?${t}`,null===(r=null===(n=e.platformManager)||void 0===n?void 0:n.openDeeplink)||void 0===r||r.call(n,o,a,"_self");case 1:return i.a(2)}},i)}))}(e,V);case 9:return _.a(2,new Promise((t,n)=>{var r,i,o;if(null===(r=e.connector)||void 0===r?void 0:r.isAuthorized())return clearTimeout(G),void t();null===(i=e.connector)||void 0===i||i.once(ji.AUTHORIZED,()=>{clearTimeout(G),t()}),null===(o=e.connector)||void 0===o||o.once(ji.REJECTED,()=>{clearTimeout(G),n(ji.REJECTED)})}));case 10:return _.a(2,Um(e,t,V));case 11:throw _.p=11,_.v;case 12:return _.a(2)}},_,null,[[0,11]])}))}function zm(e){var t,n,r,i,o,a,s,c,l,u,d;return Ud(this,void 0,void 0,b().m(function h(){var f,p,v,m,g,y,w,E,_;return b().w(function(h){for(;;)switch(h.p=h.n){case 0:return(f=e.options).logging=null!==(t=f.logging)&&void 0!==t?t:{},f.communicationLayerPreference=null!==(n=f.communicationLayerPreference)&&void 0!==n?n:to.SOCKET,void 0!==f.enableDebug&&B.default.enable("MM_SDK"),f.enableAnalytics=null===(r=f.enableAnalytics)||void 0===r||r,f.injectProvider=null===(i=f.injectProvider)||void 0===i||i,f.shouldShimWeb3=null===(o=f.shouldShimWeb3)||void 0===o||o,f.extensionOnly=null===(a=f.extensionOnly)||void 0===a||a,f.useDeeplink=null===(s=f.useDeeplink)||void 0===s||s,f.storage=null!==(c=f.storage)&&void 0!==c?c:{enabled:!0},f.headless&&((0,B.default)("[MetaMaskSDK: performSDKInitialization()] headless mode enabled"),v={install:()=>({mount:p,unmount:p})},m={installer:p=()=>{}},f.modals=v,f.ui=m),g=!0===(null===(l=f.logging)||void 0===l?void 0:l.developerMode),e.debug=(null===(u=f.logging)||void 0===u?void 0:u.sdk)||g,dc("[MetaMaskSDK: performSDKInitialization()] options",e.options),y=Object.assign({},f.logging),g&&(y.sdk=!0,y.eciesLayer=!0,y.keyExchangeLayer=!0,y.remoteLayer=!0,y.serviceLayer=!0,y.plaintext=!0),h.n=1,function(e){var t;return Ud(this,void 0,void 0,b().m(function n(){var r;return b().w(function(n){for(;;)switch(n.n){case 0:r=e.options,e.platformManager=new xc({useDeepLink:null!==(t=r.useDeeplink)&&void 0!==t&&t,preferredOpenLink:r.openDeeplink,debug:e.debug});case 1:return n.a(2)}},n)}))}(e);case 1:return h.n=2,function(e){var t,n,r,i,o;return Ud(this,void 0,void 0,b().m(function a(){var s,c;return b().w(function(a){for(;;)switch(a.n){case 0:s=e.options,c=null===(t=e.platformManager)||void 0===t?void 0:t.getPlatformType(),e.analytics=new Qc({serverUrl:null!==(n=s.communicationServerUrl)&&void 0!==n?n:Ii,enabled:s.enableAnalytics,originatorInfo:{url:null!==(r=s.dappMetadata.url)&&void 0!==r?r:"",title:null!==(i=s.dappMetadata.name)&&void 0!==i?i:"",dappId:e.getDappId(),platform:null!=c?c:"",source:null!==(o=s._source)&&void 0!==o?o:"",anonId:""}});case 1:return a.a(2)}},a)}))}(e);case 2:return h.n=3,function(e){var t,n,r;return Ud(this,void 0,void 0,b().m(function i(){var o,a,s,c,l;return b().w(function(i){for(;;)switch(i.n){case 0:if(e.options.enableAnalytics){i.n=1;break}return i.a(2);case 1:if((null===(t=e.platformManager)||void 0===t?void 0:t.isBrowser())||(null===(n=e.platformManager)||void 0===n?void 0:n.isReactNative())){i.n=2;break}return i.a(2);case 2:return o=e.getVersion(),a=e.getDappId(),i.n=3,e.getAnonId();case 3:s=i.v,c=null===(r=e.platformManager)||void 0===r?void 0:r.getPlatformType(),l=e.options._source,D.analytics.setGlobalProperty("sdk_version",o),D.analytics.setGlobalProperty("dapp_id",a),D.analytics.setGlobalProperty("anon_id",s),D.analytics.setGlobalProperty("platform",c),D.analytics.setGlobalProperty("integration_type",l),D.analytics.enable(),D.analytics.track("sdk_initialized",{});case 4:return i.a(2)}},i)}))}(e);case 3:return h.n=4,function(e){var t;return Ud(this,void 0,void 0,b().m(function n(){var r;return b().w(function(n){for(;;)switch(n.n){case 0:if(r=e.options,!0!==(null===(t=r.storage)||void 0===t?void 0:t.enabled)||r.storage.storageManager){n.n=2;break}return n.n=1,Tc(r.storage);case 1:r.storage.storageManager=n.v;case 2:return n.a(2)}},n)}))}(e);case 4:return h.n=5,function(e){return Ud(this,void 0,void 0,b().m(function t(){var n,r,i,o;return b().w(function(t){for(;;)switch(t.n){case 0:n=e.options,r=/^(http|https):\/\/[^\s]*$/,n.dappMetadata&&(n.dappMetadata.iconUrl&&!r.test(n.dappMetadata.iconUrl)&&(n.dappMetadata.iconUrl=void 0),n.dappMetadata.base64Icon&&n.dappMetadata.base64Icon.length>tl&&(n.dappMetadata.base64Icon=void 0),n.dappMetadata.url&&r.test(n.dappMetadata.url),!(i=el())||n.dappMetadata.iconUrl||n.dappMetadata.base64Icon||(o=`${window.location.protocol}//${window.location.host}${i}`,n.dappMetadata.iconUrl=o)),e.dappMetadata=n.dappMetadata;case 1:return t.a(2)}},t)}))}(e);case 5:return h.n=6,ol(e);case 6:return h.n=7,al(e);case 7:return h.n=8,function(e){var t,n,r,i;return Ud(this,void 0,void 0,b().m(function o(){var a,s,c,l;return b().w(function(o){for(;;)switch(o.p=o.n){case 0:if(a=e.options,c=!1,l=!1,"undefined"==typeof window||!window.ethereum||(null===(t=e.platformManager)||void 0===t?void 0:t.isMetaMaskMobileWebView())){o.n=5;break}return c="extension"===localStorage.getItem(Hc),o.p=1,o.n=2,Bm({mustBeMetaMask:!0,sdkInstance:e});case 2:s=o.v,window.extension=s,s.on(qc.CHAIN_CHANGED,t=>{dc(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE chainChanged chainId=${t}`),Boolean(e.sdkProvider)&&e.getMobileProvider().emit(qc.CHAIN_CHANGED,t)}),s.on(qc.ACCOUNTS_CHANGED,t=>Ud(this,void 0,void 0,b().m(function n(){var r,i,o,a,s,c;return b().w(function(n){for(;;)switch(n.p=n.n){case 0:if(dc(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE accountsChanged accounts=${t}`),i=Boolean(e.sdkProvider),o=Boolean(e.extensionActive),i&&e.getMobileProvider().emit(qc.ACCOUNTS_CHANGED,t),!(a=o&&0===(null==t?void 0:t.length))){n.n=2;break}return n.n=1,null===(r=e.getProvider())||void 0===r?void 0:r.request({method:Bc.WALLET_GETPERMISSIONS,params:[]});case 1:s=n.v.length,a=0===s;case 2:if(!a){n.n=6;break}return n.p=3,n.n=4,e.terminate();case 4:n.n=6;break;case 5:n.p=5,c=n.v,dc("[MetaMaskSDK: setupExtensionPreferences()] error terminating on permissions revoked",c);case 6:return n.a(2)}},n,null,[[3,5]])}))),s.on(qc.DISCONNECT,t=>{dc(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE disconnect error=${t}`),Boolean(e.sdkProvider)&&e.getMobileProvider().emit(qc.DISCONNECT,t)}),s.on(qc.CONNECT,t=>{dc(`[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE connect args=${t}`),Boolean(e.sdkProvider)&&e.getMobileProvider().emit(qc.CONNECT,t)}),s.on(qc.CONNECTED,t=>{dc("[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE connected",t),Boolean(e.sdkProvider)&&e.getMobileProvider().emit(qc.CONNECTED,t)}),o.n=4;break;case 3:o.p=3,o.v,window.extension=void 0;case 4:o.n=6;break;case 5:null!==(n=e.platformManager)&&void 0!==n&&n.isMetaMaskMobileWebView()&&(null===(r=e.analytics)||void 0===r||r.send({event:Fi.SDK_USE_INAPP_BROWSER}),e.activeProvider=rl({provider:window.ethereum,sdkInstance:e}),e._initialized=!0,l=!0);case 6:return o.a(2,(s&&a.extensionOnly&&(dc("[MetaMaskSDK: setupExtensionPreferences()] EXTENSION ONLY --- prevent sdk initialization"),null===(i=e.analytics)||void 0===i||i.send({event:Fi.SDK_USE_EXTENSION}),e.activeProvider=s,e.extensionActive=!0,e.extension=s,e._initialized=!0,l=!0),{preferExtension:c,shouldReturn:l,metamaskBrowserExtension:s}))}},o,this,[[1,3]])}))}(e);case 8:if(w=h.v,E=w.metamaskBrowserExtension,_=w.preferExtension,!w.shouldReturn){h.n=9;break}dc("[MetaMaskSDK: performSDKInitialization()] shouldReturn=true --- prevent sdk initialization"),h.n=16;break;case 9:return h.n=10,function(e,t){var n,r,i,o,a;return Ud(this,void 0,void 0,b().m(function s(){var c,l,u,d,h,f,p,v,m,g,y,w,E,_,S,k,C,A,x,T,M;return b().w(function(s){for(;;)switch(s.n){case 0:return c=e.options,l=Object.assign({},c.logging),u=wl,s.n=1,e.getAnonId();case 1:return d=s.v,h=null!==(n=c.preferDesktop)&&void 0!==n&&n,f=null!==(r=c.communicationLayerPreference)&&void 0!==r?r:to.SOCKET,p=e.analytics,v=c.dappMetadata,m=c._source,g=null===(i=c.enableAnalytics)||void 0===i||i,y=c.timer,w=e,E=e.platformManager,_=c.transports,S=c.communicationServerUrl,k=null!==(o=c.storage)&&void 0!==o?o:{enabled:!0},C=()=>{if(!e.installer)throw new Error("Invalid SDK status -- installer not initialized");return e.installer},A=l,x=void 0===t?void 0:()=>Pm(e),T=Object.assign(Object.assign({},c.modals),{onPendingModalDisconnect:e.terminate.bind(e)}),M={anonId:d,preferDesktop:h,communicationLayerPreference:f,analytics:p,dappMetadata:v,_source:m,enableAnalytics:g,timer:y,sdk:w,platformManager:E,transports:_,communicationServerUrl:S,storage:k,getMetaMaskInstaller:C,logging:A,connectWithExtensionProvider:x,modals:T},e.remoteConnection=new u(M),s.n=2,e.remoteConnection.initRemoteCommunication({sdkInstance:e});case 2:e.installer=new ml({remote:e.remoteConnection,preferDesktop:null!==(a=c.preferDesktop)&&void 0!==a&&a,platformManager:e.platformManager,debug:e.debug});case 3:return s.a(2)}},s)}))}(e,E);case 10:return h.n=11,Nm(e);case 11:return h.n=12,function(e,t){var n,r;return Ud(this,void 0,void 0,b().m(function i(){var o;return b().w(function(i){for(;;)switch(i.n){case 0:o=e.options,t?(dc("[MetaMaskSDK: handleAutoAndExtensionConnections()] preferExtension is detected -- connect with it."),null===(n=e.analytics)||void 0===n||n.send({event:Fi.SDK_EXTENSION_UTILIZED}),Pm(e).catch(e=>{localStorage.removeItem(Hc)})):o.checkInstallationImmediately&&((null===(r=e.platformManager)||void 0===r?void 0:r.isDesktopWeb())&&(dc("[MetaMaskSDK: handleAutoAndExtensionConnections()] checkInstallationImmediately"),e.connect().catch(e=>{dc(`[MetaMaskSDK: handleAutoAndExtensionConnections()] checkInstallationImmediately --- IGNORED --- error on autoconnect _err=${e}`)}))),e._initialized=!0;case 1:return i.a(2)}},i)}))}(e,_);case 12:return h.p=12,h.n=13,null===(d=e.remoteConnection)||void 0===d?void 0:d.startConnection({initialCheck:!0});case 13:h.n=15;break;case 14:h.p=14,h.v;case 15:e.emit(Cc.ProviderUpdate,Wc.INITIALIZED);case 16:return h.a(2)}},h,null,[[12,14]])}))}function qm(e){var t,n,r;return null!=(r=null==(n=null==(t=e.head)?void 0:t.querySelector('meta[name="csp-nonce"]'))?void 0:n.getAttribute("content"))?r:void 0}function Vm(e,t){if(e.isOk){var n=t(e.value);return n instanceof Promise?n.then(e=>ql(e)):ql(n)}if(e.isErr){var r=e.value;return Vl(r)}throw"should never get here"}function Wm(e){return e.includes("ref")?[...e.filter(e=>"ref"!==e),"ref"]:e}function Gm(e){var t=e.version;return Zl("div",{style:{textAlign:"center",color:"#BBC0C5",fontSize:"12"}},"SDK Version ",t?`v${t}`:"unknown")}function Ym(e,t){return e.toString(2).padStart(t,"0")}function Zm(e,t){var n=e%t;return n>=0?n:t+n}function Jm(e,t){return new Array(e).fill(t)}function Xm(){for(var e=0,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];e=Math.max(e,a.length)}for(var s=[],c=0;c<e;c++){var u,d=l(n);try{for(d.s();!(u=d.n()).done;){var h=u.value;c>=h.length||s.push(h[c])}}catch(f){d.e(f)}finally{d.f()}}return new Uint8Array(s)}function Qm(e,t,n){if(n<0||n+t.length>e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[n+r])return!1;return!0}function eg(e){return{has:t=>e.includes(t),decode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("alphabet.decode input should be array of strings");return t.map(t=>{if("string"!=typeof t)throw new Error(`alphabet.decode: not string element=${t}`);var n=e.indexOf(t);if(-1===n)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return n})},encode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("alphabet.encode input should be an array of numbers");return t.map(t=>{if(function(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}(t),t<0||t>=e.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]})}}}function tg(e,t,n,r){var i="",o=n.length;if("numeric"===r){for(var a=td.alphabet.numeric.decode(n.split("")),s=a.length,c=0;c<s-2;c+=3)i+=Ym(100*a[c]+10*a[c+1]+a[c+2],10);s%3==1?i+=Ym(a[s-1],4):s%3==2&&(i+=Ym(10*a[s-2]+a[s-1],7))}else if("alphanumeric"===r){for(var l=td.alphabet.alphanumerc.decode(n.split("")),u=l.length,d=0;d<u-1;d+=2)i+=Ym(45*l[d]+l[d+1],11);u%2==1&&(i+=Ym(l[u-1],6))}else{if("byte"!==r)throw new Error("encode: unsupported type");var h=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(n);o=h.length,i=Array.from(h).map(e=>Ym(e,8)).join("")}var f=td.capacity(e,t).capacity,v=Ym(o,td.lengthBits(e,r)),m=td.modeBits[r]+v+i;if(m.length>f)throw new Error("Capacity overflow");(m+="0".repeat(Math.min(4,Math.max(0,f-m.length)))).length%8&&(m+="0".repeat(8-m.length%8));for(var g=0;m.length!==f;g++)m+="1110110000010001"[g%16];var y=Uint8Array.from(m.match(/(.{8})/g).map(e=>Number(`0b${e}`)));return function(e,t){var n,r=td.capacity(e,t),i=r.words,o=r.shortBlocks,a=r.numBlocks,s=r.blockLen,c=r.total,l=(n=i,{encode(e){var t=rd.divisorPoly(n),r=Array.from(e);return r.push(...t.slice(0,-1).fill(0)),Uint8Array.from(rd.remainderPoly(r,t))},decode(e){for(var t=e.slice(),r=rd.polynomial(Array.from(e)),i=Jm(n,0),o=!1,a=0;a<n;a++){var s=rd.evalPoly(r,rd.exp(a));i[i.length-1-a]=s,0!==s&&(o=!0)}if(!o)return t;i=rd.polynomial(i);for(var c=rd.monomial(n,1),l=p(rd.euclidian(c,i,n),2),u=l[0],d=l[1],h=Jm(rd.degree(u),0),f=0,v=1;v<256&&f<h.length;v++)0===rd.evalPoly(u,v)&&(h[f++]=rd.inv(v));if(f!==h.length)throw new Error("RS.decode: wrong errors number");for(var m=0;m<h.length;m++){var g=t.length-1-rd.log(h[m]);if(g<0)throw new Error("RS.decode: wrong error location");for(var y=rd.inv(h[m]),b=1,w=0;w<h.length;w++)m!==w&&(b=rd.mul(b,rd.add(1,rd.mul(h[w],y))));t[g]=rd.add(t[g],rd.mul(rd.evalPoly(d,y),rd.inv(b)))}return t}});return{encode(e){for(var t=[],n=[],r=0;r<a;r++){var i=s+(r<o?0:1);t.push(e.subarray(0,i)),n.push(l.encode(e.subarray(0,i))),e=e.subarray(i)}var c=Xm(...t),u=Xm(...n),d=new Uint8Array(c.length+u.length);return d.set(c),d.set(u,c.length),d},decode(e){if(e.length!==c)throw new Error(`interleave.decode: len(data)=${e.length}, total=${c}`);for(var t=[],n=0;n<a;n++){var r=n<o;t.push(new Uint8Array(i+s+(r?0:1)))}for(var u=0,d=0;d<s;d++)for(var h=0;h<a;h++)t[h][d]=e[u++];for(var f=o;f<a;f++)t[f][s]=e[u++];for(var p=s;p<s+i;p++)for(var v=0;v<a;v++){var m=v<o;t[v][p+(m?0:1)]=e[u++]}for(var g=[],y=0,b=t;y<b.length;y++){var w=b[y];g.push(...Array.from(l.decode(w)).slice(0,-i))}return Uint8Array.from(g)}}}(e,t).encode(y)}function ng(e,t,n,r){var i=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=td.size.encode(e),o=new Yu(i+2),a=new Yu(3).rect(0,3,!0).border(1,!1).border(1,!0).border(1,!1);o=(o=o.embed(0,a).embed({x:-a.width,y:0},a).embed({x:0,y:-a.height},a)).rectSlice(1,i);var s,c=new Yu(1).rect(0,1,!0).border(1,!1).border(1,!0),u=td.alignmentPatterns(e),d=l(u);try{for(d.s();!(s=d.n()).done;){var h,f=s.value,p=l(u);try{for(p.s();!(h=p.n()).done;){var v=h.value;void 0===o.data[f][v]&&o.embed({x:v-2,y:f-2},c)}}catch(M){p.e(M)}finally{p.f()}}}catch(M){d.e(M)}finally{d.f()}o=o.hLine({x:0,y:6},1/0,(e,t)=>{var n=e.x;return void 0===t?n%2==0:t}).vLine({x:6,y:0},1/0,(e,t)=>{var n=e.y;return void 0===t?n%2==0:t});for(var m=td.formatBits(t,n),g=e=>!r&&1==(m>>e&1),y=0;y<6;y++)o.data[y][8]=g(y);for(var b=6;b<8;b++)o.data[b+1][8]=g(b);for(var w=8;w<15;w++)o.data[i-15+w][8]=g(w);for(var E=0;E<8;E++)o.data[8][i-E-1]=g(E);for(var _=8;_<9;_++)o.data[8][15-_-1+1]=g(_);for(var S=9;S<15;S++)o.data[8][15-S-1]=g(S);if(o.data[i-8][8]=!r,e>=7)for(var k=td.versionBits(e),C=0;C<18;C+=1){var A=!r&&1==(k>>C&1),x=Math.floor(C/3),T=C%3+i-8-3;o.data[x][T]=A,o.data[T][x]=A}return o}(e,t,r,arguments.length>4&&void 0!==arguments[4]&&arguments[4]),o=0,a=8*n.length;if(function(e,t,n){for(var r=e.height,i=nd[t],o=-1,a=r-1,s=r-1;s>0;s-=2){for(6==s&&(s=5);;a+=o){for(var c=0;c<2;c+=1){var l=s-c;void 0===e.data[a][l]&&n(l,a,i(l,a))}if(a+o<0||a+o>=r)break}o=-o}}(i,r,(e,t,r)=>{var s=!1;o<a&&(s=!!(n[o>>>3]>>(7-o&7)&1),o++),i.data[t][e]=s!==r}),o!==a)throw new Error("QR: bytes left after draw");return i}function rg(e){var t=e.inverse(),n=e=>{for(var t,n=0,r=0,i=1;r<e.length;r++)t===e[r]&&(i++,r!==e.length-1)||(i>=5&&(n+=i-5+3),t=e[r],i=1);return n},r=0;e.data.forEach(e=>r+=n(e)),t.data.forEach(e=>r+=n(e));for(var i=0,o=e.data,a=e.width-1,s=e.height-1,c=0;c<a;c++)for(var u=0;u<s;u++){var d=c+1,h=u+1;o[c][u]===o[d][u]&&o[d][u]===o[c][h]&&o[d][u]===o[d][h]&&(i+=3)}var f,p=e=>{for(var t=[!0,!1,!0,!0,!0,!1,!0],n=[!1,!1,!1,!1],r=[...t,...n],i=[...n,...t],o=0,a=0;a<e.length;a++)Qm(e,r,a)&&(o+=40),Qm(e,i,a)&&(o+=40);return o},v=0,m=l(e.data);try{for(m.s();!(f=m.n()).done;){v+=p(f.value)}}catch(_){m.e(_)}finally{m.f()}var g,y=l(t.data);try{for(y.s();!(g=y.n()).done;){v+=p(g.value)}}catch(_){y.e(_)}finally{y.f()}var b=0;e.rectRead(0,1/0,(e,t)=>b+=t?1:0);var w=b/(e.height*e.width)*100,E=10*Math.floor(Math.abs(w-50)/5);return r+i+v+E}function ig(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"raw",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=void 0!==n.ecc?n.ecc:"medium";!function(e){if(!Zu.includes(e))throw new Error(`Invalid error correction mode=${e}. Expected: ${Zu}`)}(r);var i=void 0!==n.encoding?n.encoding:function(e){var t,n="numeric",r=l(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(!td.alphabet.numeric.has(i)&&(n="alphanumeric",!td.alphabet.alphanumerc.has(i)))return"byte"}}catch(o){r.e(o)}finally{r.f()}return n}(e);(function(e){if(!Ju.includes(e))throw new Error(`Encoding: invalid mode=${e}. Expected: ${Ju}`);if("kanji"===e||"eci"===e)throw new Error(`Encoding: ${e} is not supported (yet?).`)})(i),void 0!==n.mask&&function(e){if(![0,1,2,3,4,5,6,7].includes(e)||!nd[e])throw new Error(`Invalid mask=${e}. Expected number [0..7]`)}(n.mask);var o,a=n.version,s=new Error("Unknown error");if(void 0!==a)(function(e){if(!Number.isSafeInteger(e)||e<1||e>40)throw new Error(`Invalid version=${e}. Expected number [1..40]`)})(a),o=tg(a,r,e,i);else for(var c=1;c<=40;c++)try{o=tg(c,r,e,i),a=c;break}catch(h){s=h}if(!a||!o)throw s;var u=function(e,t,n,r){if(void 0===r){for(var i=(s=1/0,{add(e,t){e>=s||(a=t,s=e)},get:()=>a,score:()=>s}),o=0;o<nd.length;o++)i.add(rg(ng(e,t,n,o,!0)),o);r=i.get()}var a,s;if(void 0===r)throw new Error("Cannot find mask");return ng(e,t,n,r)}(a,r,o,n.mask);u.assertDrawn();var d=void 0===n.border?2:n.border;if(!Number.isSafeInteger(d))throw new Error("Wrong border type="+typeof d);if(u=u.border(d,!1),void 0!==n.scale&&(u=u.scale(n.scale)),"raw"===t)return u.data;if("ascii"===t)return u.toASCII();if("svg"===t)return u.toSVG();if("gif"===t)return u.toGIF();if("term"===t)return u.toTerm();throw new Error(`Unknown output: ${t}`)}return i({ConnectionStatus:void 0,EventType:void 0,MessageType:void 0,CommunicationLayerPreference:void 0,PlatformType:void 0,PROVIDER_UPDATE_TYPE:void 0}),{setters:[function(e){d=e.i,v=e.o,m=e.r,g=e.t},function(e){y=e.r}],execute:function(){var a,s,x,W,ko,ns,os;for(w=g({"node_modules/.pnpm/cross-fetch@4.1.0/node_modules/cross-fetch/dist/browser-ponyfill.js":(e,t)=>{var n,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||"undefined"!=typeof global&&global,i=function(){function e(){this.fetch=!1,this.DOMException=r.DOMException}return e.prototype=r,new e}();n=i,function(e){var t=void 0!==n&&n||"undefined"!=typeof self&&self||"undefined"!=typeof global&&global||{},r="URLSearchParams"in t,i="Symbol"in t&&"iterator"in Symbol,o="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(ko){return!1}}(),a="FormData"in t,s="ArrayBuffer"in t;if(s)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(e){return e&&c.indexOf(Object.prototype.toString.call(e))>-1};function u(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function d(e){return"string"!=typeof e&&(e=String(e)),e}function h(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return i&&(t[Symbol.iterator]=function(){return t}),t}function f(e){this.map={},e instanceof f?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){if(2!=e.length)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function p(e){if(!e._noBody)return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function v(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function m(e){var t=new FileReader,n=v(t);return t.readAsArrayBuffer(e),n}function g(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:o&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:a&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():s&&o&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=g(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s&&(ArrayBuffer.prototype.isPrototypeOf(e)||l(e))?this._bodyArrayBuffer=g(e):this._bodyText=e=Object.prototype.toString.call(e):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o&&(this.blob=function(){var e=p(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=p(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}if(o)return this.blob().then(m);throw new Error("could not read as ArrayBuffer")},this.text=function(){var e,t,n,r,i,o=p(this);if(o)return o;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=v(t),r=/charset=([A-Za-z0-9_-]+)/.exec(e.type),i=r?r[1]:"utf-8",t.readAsText(e,i),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a&&(this.formData=function(){return this.text().then(E)}),this.json=function(){return this.text().then(JSON.parse)},this}f.prototype.append=function(e,t){e=u(e),t=d(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},f.prototype.delete=function(e){delete this.map[u(e)]},f.prototype.get=function(e){return e=u(e),this.has(e)?this.map[e]:null},f.prototype.has=function(e){return this.map.hasOwnProperty(u(e))},f.prototype.set=function(e,t){this.map[u(e)]=d(t)},f.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},f.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),h(e)},f.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),h(e)},f.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),h(e)},i&&(f.prototype[Symbol.iterator]=f.prototype.entries);var b=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function w(e,n){if(!(this instanceof w))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,i,o=(n=n||{}).body;if(e instanceof w){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,n.headers||(this.headers=new f(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=n.credentials||this.credentials||"same-origin",!n.headers&&this.headers||(this.headers=new f(n.headers)),this.method=(r=n.method||this.method||"GET",i=r.toUpperCase(),b.indexOf(i)>-1?i:r),this.mode=n.mode||this.mode||null,this.signal=n.signal||this.signal||function(){if("AbortController"in t)return(new AbortController).signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(o),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==n.cache&&"no-cache"!==n.cache)){var a=/([?&])_=[^&]*/;a.test(this.url)?this.url=this.url.replace(a,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function E(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function _(e,t){if(!(this instanceof _))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new f(t.headers),this.url=t.url||"",this._initBody(e)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},y.call(w.prototype),y.call(_.prototype),_.prototype.clone=function(){return new _(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},_.error=function(){var e=new _(null,{status:200,statusText:""});return e.ok=!1,e.status=0,e.type="error",e};var S=[301,302,303,307,308];_.redirect=function(e,t){if(-1===S.indexOf(t))throw new RangeError("Invalid status code");return new _(null,{status:t,headers:{location:e}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(C){e.DOMException=function(e,t){this.message=e,this.name=t,this.stack=Error(e).stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function k(n,r){return new Promise(function(i,a){var c=new w(n,r);if(c.signal&&c.signal.aborted)return a(new e.DOMException("Aborted","AbortError"));var l=new XMLHttpRequest;function h(){l.abort()}if(l.onload=function(){var e,t,n={statusText:l.statusText,headers:(e=l.getAllResponseHeaders()||"",t=new f,e.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e}).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();try{t.append(r,i)}catch(o){}}}),t)};0===c.url.indexOf("file://")&&(l.status<200||l.status>599)?n.status=200:n.status=l.status,n.url="responseURL"in l?l.responseURL:n.headers.get("X-Request-URL");var r="response"in l?l.response:l.responseText;setTimeout(function(){i(new _(r,n))},0)},l.onerror=function(){setTimeout(function(){a(new TypeError("Network request failed"))},0)},l.ontimeout=function(){setTimeout(function(){a(new TypeError("Network request timed out"))},0)},l.onabort=function(){setTimeout(function(){a(new e.DOMException("Aborted","AbortError"))},0)},l.open(c.method,function(e){try{return""===e&&t.location.href?t.location.href:e}catch(ko){return e}}(c.url),!0),"include"===c.credentials?l.withCredentials=!0:"omit"===c.credentials&&(l.withCredentials=!1),"responseType"in l&&(o?l.responseType="blob":s&&(l.responseType="arraybuffer")),r&&"object"==typeof r.headers&&!(r.headers instanceof f||t.Headers&&r.headers instanceof t.Headers)){var p=[];Object.getOwnPropertyNames(r.headers).forEach(function(e){p.push(u(e)),l.setRequestHeader(e,d(r.headers[e]))}),c.headers.forEach(function(e,t){-1===p.indexOf(t)&&l.setRequestHeader(t,e)})}else c.headers.forEach(function(e,t){l.setRequestHeader(t,e)});c.signal&&(c.signal.addEventListener("abort",h),l.onreadystatechange=function(){4===l.readyState&&c.signal.removeEventListener("abort",h)}),l.send(void 0===c._bodyInit?null:c._bodyInit)})}k.polyfill=!0,t.fetch||(t.fetch=k,t.Headers=f,t.Request=w,t.Response=_),e.Headers=f,e.Request=w,e.Response=_,e.fetch=k}({}),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var o=r.fetch?r:i;(e=o.fetch).default=o.fetch,e.fetch=o.fetch,e.Headers=o.Headers,e.Request=o.Request,e.Response=o.Response,t.exports=e}}),E=g({"node_modules/.pnpm/ms@2.1.2/node_modules/ms/index.js":(e,t)=>{var n=1e3,r=60*n,i=60*r,o=24*i,a=7*o,s=365.25*o;function c(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}t.exports=function(e,t){t=t||{};var l,u,d=typeof e;if("string"===d&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var c=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*s;case"weeks":case"week":case"w":return c*a;case"days":case"day":case"d":return c*o;case"hours":case"hour":case"hrs":case"hr":case"h":return c*i;case"minutes":case"minute":case"mins":case"min":case"m":return c*r;case"seconds":case"second":case"secs":case"sec":case"s":return c*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(e);if("number"===d&&isFinite(e))return t.long?(l=e,(u=Math.abs(l))>=o?c(l,u,o,"day"):u>=i?c(l,u,i,"hour"):u>=r?c(l,u,r,"minute"):u>=n?c(l,u,n,"second"):l+" ms"):function(e){var t=Math.abs(e);return t>=o?Math.round(e/o)+"d":t>=i?Math.round(e/i)+"h":t>=r?Math.round(e/r)+"m":t>=n?Math.round(e/n)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}}}),_=g({"node_modules/.pnpm/debug@4.3.4/node_modules/debug/src/common.js":(e,t)=>{t.exports=function(e){function t(e){var r,i,o,a=null;function s(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if(s.enabled){var o=s,a=Number(new Date);o.diff=a-(r||a),o.prev=r,o.curr=a,r=a,n[0]=t.coerce(n[0]),"string"!=typeof n[0]&&n.unshift("%O");var c=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,(e,r)=>{if("%%"===e)return"%";c++;var i=t.formatters[r];if("function"==typeof i){var a=n[c];e=i.call(o,a),n.splice(c,1),c--}return e}),t.formatArgs.call(o,n),(o.log||t.log).apply(o,n)}}return s.namespace=e,s.useColors=t.useColors(),s.color=t.selectColor(e),s.extend=n,s.destroy=t.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==a?a:(i!==t.namespaces&&(i=t.namespaces,o=t.enabled(e)),o),set:e=>{a=e}}),"function"==typeof t.init&&t.init(s),s}function n(e,n){var r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){var e=[...t.names.map(r),...t.skips.map(r).map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){var n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=E(),t.destroy=function(){},Object.keys(e).forEach(n=>{t[n]=e[n]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){for(var n=0,r=0;r<e.length;r++)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}}}),S=g({"node_modules/.pnpm/debug@4.3.4/node_modules/debug/src/browser.js":(e,t)=>{var n;e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(r++,"%c"===e&&(i=r))}),e.splice(i,0,n)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(n){}},e.load=function(){var t;try{t=e.storage.getItem("debug")}catch(n){}!t&&"undefined"!=typeof process&&"env"in process&&(t={}.DEBUG);return t},e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage=function(){try{return localStorage}catch(e){}}(),e.destroy=(n=!1,()=>{n||(n=!0)}),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=_()(e),t.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}}),k=g({"node_modules/.pnpm/openapi-fetch@0.13.8/node_modules/openapi-fetch/dist/cjs/index.cjs":(n,i)=>{var a,s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,d=Object.prototype.hasOwnProperty,v={};((e,t)=>{for(var n in t)s(e,n,{get:t[n],enumerable:!0})})(v,{createFinalURL:()=>R,createPathBasedClient:()=>k,createQuerySerializer:()=>T,default:()=>w,defaultBodySerializer:()=>O,defaultPathSerializer:()=>M,mergeHeaders:()=>P,randomID:()=>y,removeTrailingSlash:()=>I,serializeArrayParam:()=>x,serializeObjectParam:()=>A,serializePrimitiveParam:()=>C,wrapAsPathBasedClient:()=>S}),i.exports=(a=v,((e,t,n,r)=>{if(t&&"object"==typeof t||"function"==typeof t){var i,o=l(u(t));try{var a=function(){var o=i.value;d.call(e,o)||o===n||s(e,o,{get:()=>t[o],enumerable:!(r=c(t,o))||r.enumerable})};for(o.s();!(i=o.n()).done;)a()}catch(h){o.e(h)}finally{o.f()}}return e})(s({},"__esModule",{value:!0}),a));var m=/\{[^{}]+\}/g,g=()=>{var e;return"object"==typeof process&&Number.parseInt(null===(e=process)||void 0===e||null===(e=e.versions)||void 0===e||null===(e=e.node)||void 0===e?void 0:e.substring(0,2))>=18&&process.versions.undici};function y(){return Math.random().toString(36).slice(2,11)}function w(n){var i=h({},n),a=i.baseUrl,s=void 0===a?"":a,c=i.Request,u=void 0===c?globalThis.Request:c,d=i.fetch,f=void 0===d?globalThis.fetch:d,p=i.querySerializer,v=i.bodySerializer,m=i.headers,w=i.requestInitExt,E=void 0===w?void 0:w,_=r(i,e);E=g()?E:void 0,s=I(s);var S=[];function k(e,t){return C.apply(this,arguments)}function C(){return C=o(b().m(function e(n,i){var o,a,c,d,g,w,k,C,A,x,M,L,N,D,B,$,j,K,U,H,F,z,q,V,W,G,Y,Z,J,X,Q,ee,te,ne,re,ie,oe,ae,se,ce,le,ue;return b().w(function(e){for(;;)switch(e.p=e.n){case 0:for(G in c=(a=i||{}).baseUrl,d=a.fetch,g=void 0===d?f:d,w=a.Request,k=a.headers,C=a.params,A=void 0===C?{}:C,x=a.parseAs,M=void 0===x?"json":x,L=a.querySerializer,N=a.bodySerializer,D=void 0===N?null!=v?v:O:N,B=a.body,$=r(a,t),j=s,c&&(j=null!==(o=I(c))&&void 0!==o?o:s),K="function"==typeof p?p:T(p),L&&(K="function"==typeof L?L:T(h(h({},"object"==typeof p?p:{}),L))),U=void 0===B?void 0:D(B,P(m,k,A.header)),H=P(void 0===U||U instanceof FormData?{}:{"Content-Type":"application/json"},m,k,A.header),F=h(h(h({redirect:"follow"},_),$),{},{body:U,headers:H}),V=new u(R(n,{baseUrl:j,params:A,querySerializer:K}),F),$)G in V||(V[G]=$[G]);if(!S.length){e.n=10;break}z=y(),q=Object.freeze({baseUrl:j,fetch:g,parseAs:M,querySerializer:K,bodySerializer:D}),Y=l(S),e.p=1,Y.s();case 2:if((Z=Y.n()).done){e.n=7;break}if(!(J=Z.value)||"object"!=typeof J||"function"!=typeof J.onRequest){e.n=6;break}return e.n=3,J.onRequest({request:V,schemaPath:n,params:A,options:q,id:z});case 3:if(!(X=e.v)){e.n=6;break}if(!(X instanceof u)){e.n=4;break}V=X,e.n=6;break;case 4:if(!(X instanceof Response)){e.n=5;break}return W=X,e.a(3,7);case 5:throw new Error("onRequest: must return new Request() or Response() when modifying the request");case 6:e.n=2;break;case 7:e.n=9;break;case 8:e.p=8,se=e.v,Y.e(se);case 9:return e.p=9,Y.f(),e.f(9);case 10:if(W){e.n=25;break}return e.p=11,e.n=12,g(V,E);case 12:W=e.v,e.n=20;break;case 13:if(e.p=13,ce=e.v,Q=ce,!S.length){e.n=19;break}ee=S.length-1;case 14:if(!(ee>=0)){e.n=19;break}if(!(te=S[ee])||"object"!=typeof te||"function"!=typeof te.onError){e.n=18;break}return e.n=15,te.onError({request:V,error:Q,schemaPath:n,params:A,options:q,id:z});case 15:if(!(ne=e.v)){e.n=18;break}if(!(ne instanceof Response)){e.n=16;break}return Q=void 0,W=ne,e.a(3,19);case 16:if(!(ne instanceof Error)){e.n=17;break}return Q=ne,e.a(3,18);case 17:throw new Error("onError: must return new Response() or instance of Error");case 18:ee--,e.n=14;break;case 19:if(!Q){e.n=20;break}throw Q;case 20:if(!S.length){e.n=25;break}re=S.length-1;case 21:if(!(re>=0)){e.n=25;break}if(!(ie=S[re])||"object"!=typeof ie||"function"!=typeof ie.onResponse){e.n=24;break}return e.n=22,ie.onResponse({request:V,response:W,schemaPath:n,params:A,options:q,id:z});case 22:if(!(oe=e.v)){e.n=24;break}if(oe instanceof Response){e.n=23;break}throw new Error("onResponse: must return new Response() when modifying the response");case 23:W=oe;case 24:re--,e.n=21;break;case 25:if(204!==W.status&&"HEAD"!==V.method&&"0"!==W.headers.get("Content-Length")){e.n=26;break}return e.a(2,W.ok?{data:void 0,response:W}:{error:void 0,response:W});case 26:if(!W.ok){e.n=29;break}if("stream"!==M){e.n=27;break}return e.a(2,{data:W.body,response:W});case 27:return e.n=28,W[M]();case 28:return le=e.v,ue=W,e.a(2,{data:le,response:ue});case 29:return e.n=30,W.text();case 30:ae=e.v;try{ae=JSON.parse(ae)}catch(b){}return e.a(2,{error:ae,response:W})}},e,null,[[11,13],[1,8,9,10]])})),C.apply(this,arguments)}return{request:(e,t,n)=>k(t,h(h({},n),{},{method:e.toUpperCase()})),GET:(e,t)=>k(e,h(h({},t),{},{method:"GET"})),PUT:(e,t)=>k(e,h(h({},t),{},{method:"PUT"})),POST:(e,t)=>k(e,h(h({},t),{},{method:"POST"})),DELETE:(e,t)=>k(e,h(h({},t),{},{method:"DELETE"})),OPTIONS:(e,t)=>k(e,h(h({},t),{},{method:"OPTIONS"})),HEAD:(e,t)=>k(e,h(h({},t),{},{method:"HEAD"})),PATCH:(e,t)=>k(e,h(h({},t),{},{method:"PATCH"})),TRACE:(e,t)=>k(e,h(h({},t),{},{method:"TRACE"})),use(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o){if("object"!=typeof o||!("onRequest"in o||"onResponse"in o||"onError"in o))throw new Error("Middleware must be an object with one of `onRequest()`, `onResponse() or `onError()`");S.push(o)}}},eject(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o=i[r],a=S.indexOf(o);-1!==a&&S.splice(a,1)}}}}var E=class{constructor(e,t){f(this,"GET",e=>this.client.GET(this.url,e)),f(this,"PUT",e=>this.client.PUT(this.url,e)),f(this,"POST",e=>this.client.POST(this.url,e)),f(this,"DELETE",e=>this.client.DELETE(this.url,e)),f(this,"OPTIONS",e=>this.client.OPTIONS(this.url,e)),f(this,"HEAD",e=>this.client.HEAD(this.url,e)),f(this,"PATCH",e=>this.client.PATCH(this.url,e)),f(this,"TRACE",e=>this.client.TRACE(this.url,e)),this.client=e,this.url=t}},_=class{constructor(){this.client=null}get(e,t){var n=new E(e,t);return this.client[t]=n,n}};function S(e){var t=new _,n=new Proxy(e,t);function r(){}r.prototype=n;var i=new r;return t.client=i,i}function k(e){return S(w(e))}function C(e,t,n){if(null==t)return"";if("object"==typeof t)throw new Error("Deeply-nested arrays/objects arent supported. Provide your own `querySerializer()` to handle these.");return`${e}=${!0===(null==n?void 0:n.allowReserved)?t:encodeURIComponent(t)}`}function A(e,t,n){if(!t||"object"!=typeof t)return"";var r=[],i={simple:",",label:".",matrix:";"}[n.style]||"&";if("deepObject"!==n.style&&!1===n.explode){for(var o in t)r.push(o,!0===n.allowReserved?t[o]:encodeURIComponent(t[o]));var a=r.join(",");switch(n.style){case"form":return`${e}=${a}`;case"label":return`.${a}`;case"matrix":return`;${e}=${a}`;default:return a}}for(var s in t){var c="deepObject"===n.style?`${e}[${s}]`:s;r.push(C(c,t[s],n))}var l=r.join(i);return"label"===n.style||"matrix"===n.style?`${i}${l}`:l}function x(e,t,n){if(!Array.isArray(t))return"";if(!1===n.explode){var r={form:",",spaceDelimited:"%20",pipeDelimited:"|"}[n.style]||",",i=(!0===n.allowReserved?t:t.map(e=>encodeURIComponent(e))).join(r);switch(n.style){case"simple":return i;case"label":return`.${i}`;case"matrix":return`;${e}=${i}`;default:return`${e}=${i}`}}var o,a={simple:",",label:".",matrix:";"}[n.style]||"&",s=[],c=l(t);try{for(c.s();!(o=c.n()).done;){var u=o.value;"simple"===n.style||"label"===n.style?s.push(!0===n.allowReserved?u:encodeURIComponent(u)):s.push(C(e,u,n))}}catch(d){c.e(d)}finally{c.f()}return"label"===n.style||"matrix"===n.style?`${a}${s.join(a)}`:s.join(a)}function T(e){return function(t){var n=[];if(t&&"object"==typeof t)for(var r in t){var i=t[r];if(null!=i)if(Array.isArray(i)){if(0===i.length)continue;n.push(x(r,i,h(h({style:"form",explode:!0},null==e?void 0:e.array),{},{allowReserved:(null==e?void 0:e.allowReserved)||!1})))}else"object"!=typeof i?n.push(C(r,i,e)):n.push(A(r,i,h(h({style:"deepObject",explode:!0},null==e?void 0:e.object),{},{allowReserved:(null==e?void 0:e.allowReserved)||!1})))}return n.join("&")}}function M(e,t){var n,r,i=e,o=l(null!==(n=e.match(m))&&void 0!==n?n:[]);try{for(o.s();!(r=o.n()).done;){var a=r.value,s=a.substring(1,a.length-1),c=!1,u="simple";if(s.endsWith("*")&&(c=!0,s=s.substring(0,s.length-1)),s.startsWith(".")?(u="label",s=s.substring(1)):s.startsWith(";")&&(u="matrix",s=s.substring(1)),t&&void 0!==t[s]&&null!==t[s]){var d=t[s];i=Array.isArray(d)?i.replace(a,x(s,d,{style:u,explode:c})):"object"!=typeof d?"matrix"!==u?i.replace(a,"label"===u?`.${encodeURIComponent(d)}`:encodeURIComponent(d)):i.replace(a,`;${C(s,d)}`):i.replace(a,A(s,d,{style:u,explode:c}))}}}catch(h){o.e(h)}finally{o.f()}return i}function O(e,t){if(e instanceof FormData)return e;var n,r;if(t&&"application/x-www-form-urlencoded"===(t.get instanceof Function?null!==(n=t.get("Content-Type"))&&void 0!==n?n:t.get("content-type"):null!==(r=t["Content-Type"])&&void 0!==r?r:t["content-type"]))return new URLSearchParams(e).toString();return JSON.stringify(e)}function R(e,t){var n,r,i=`${t.baseUrl}${e}`;null!==(n=t.params)&&void 0!==n&&n.path&&(i=M(i,t.params.path));var o=t.querySerializer(null!==(r=t.params.query)&&void 0!==r?r:{});return o.startsWith("?")&&(o=o.substring(1)),o&&(i+=`?${o}`),i}function P(){for(var e=new Headers,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];if(a&&"object"==typeof a){var s,c=l(a instanceof Headers?a.entries():Object.entries(a));try{for(c.s();!(s=c.n()).done;){var u=p(s.value,2),d=u[0],h=u[1];if(null===h)e.delete(d);else if(Array.isArray(h)){var f,v=l(h);try{for(v.s();!(f=v.n()).done;){var m=f.value;e.append(d,m)}}catch(g){v.e(g)}finally{v.f()}}else void 0!==h&&e.set(d,h)}}catch(g){c.e(g)}finally{c.f()}}}return e}function I(e){return e.endsWith("/")?e.substring(0,e.length-1):e}}}),C=g({"node_modules/.pnpm/@metamask+sdk-analytics@0.0.5/node_modules/@metamask/sdk-analytics/dist/index.js":(e,t)=>{var n,r=Object.create,i=Object.defineProperty,a=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty,d=(e,t,n,r)=>{if(t&&"object"==typeof t||"function"==typeof t){var o,c=l(s(t));try{var d=function(){var s=o.value;u.call(e,s)||s===n||i(e,s,{get:()=>t[s],enumerable:!(r=a(t,s))||r.enumerable})};for(c.s();!(o=c.n()).done;)d()}catch(h){c.e(h)}finally{c.f()}}return e},f={};((e,t)=>{for(var n in t)i(e,n,{get:t[n],enumerable:!0})})(f,{analytics:()=>w}),t.exports=(n=f,d(i({},"__esModule",{value:!0}),n));var p,v,m=((e,t,n)=>(n=null!=e?r(c(e)):{},d(!t&&e&&e.__esModule?n:i(n,"default",{value:e,enumerable:!0}),e)))(k()),g=class{constructor(e){this.batch=[],this.maxTimeoutMs=3e4,this.timeoutId=null,this.isSending=!1,this.batchSize=e.batchSize,this.baseTimeoutMs=e.baseTimeoutMs,this.currentTimeoutMs=e.baseTimeoutMs,this.sendFn=e.sendFn}enqueue(e){this.batch.push(e),this.schedule()}schedule(){this.batch.length>0&&!this.timeoutId&&(this.timeoutId=setTimeout(()=>{this.timeoutId=null,this.flush()},this.currentTimeoutMs))}flush(){var e=this;return o(b().m(function t(){var n;return b().w(function(t){for(;;)switch(t.p=t.n){case 0:if(!e.isSending&&0!==e.batch.length){t.n=1;break}return t.a(2);case 1:return e.isSending=!0,n=[...e.batch.slice(0,e.batchSize)],e.batch=e.batch.slice(e.batchSize),t.p=2,t.n=3,e.sendFn(n);case 3:e.currentTimeoutMs=e.baseTimeoutMs,t.n=5;break;case 4:t.p=4,t.v,e.batch=[...n,...e.batch],e.currentTimeoutMs=Math.min(2*e.currentTimeoutMs,e.maxTimeoutMs);case 5:return t.p=5,e.isSending=!1,e.schedule(),t.f(5);case 6:return t.a(2)}},t,null,[[2,4,5,6]])}))()}},y=class{constructor(e){this.enabled=!1,this.properties={};var t=(0,m.default)({baseUrl:e}),n=function(){var e=o(b().m(function e(n){var r;return b().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t.POST("/v1/events",{body:n});case 1:if(200===(r=e.v).response.status){e.n=2;break}throw new Error(r.error);case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}();this.sender=new g({batchSize:100,baseTimeoutMs:200,sendFn:n})}enable(){this.enabled=!0}setGlobalProperty(e,t){this.properties[e]=t}track(e,t){if(this.enabled){var n=h(h({name:e},this.properties),t);this.sender.enqueue(n)}}};"undefined"!=typeof process&&(p=null!=(v={}.METAMASK_ANALYTICS_ENDPOINT)?v:{}.NEXT_PUBLIC_METAMASK_ANALYTICS_ENDPOINT);var w=new y(null!=p?p:"https://mm-sdk-analytics.api.cx.metamask.io/")}}),A=g({"node_modules/.pnpm/eventemitter2@6.4.9/node_modules/eventemitter2/lib/eventemitter2.js":(e,t)=>{!function(n){var r=Object.hasOwnProperty,i=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},o="object"==typeof process&&"function"==typeof process.nextTick,a="function"==typeof Symbol,s="object"==typeof Reflect,c="function"==typeof setImmediate?setImmediate:setTimeout,l=a?s&&"function"==typeof Reflect.ownKeys?Reflect.ownKeys:function(e){var t=Object.getOwnPropertyNames(e);return t.push.apply(t,Object.getOwnPropertySymbols(e)),t}:Object.keys;function u(){this._events={},this._conf&&d.call(this,this._conf)}function d(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),e.maxListeners!==n&&(this._maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),e.ignoreErrors&&(this.ignoreErrors=e.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function h(e,t){var n="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(n+=" Event name: "+t+"."),"undefined"!=typeof process&&process.emitWarning){var r=new Error(n);r.name="MaxListenersExceededWarning",r.emitter=this,r.count=e,process.emitWarning(r)}else console.trace}var f=function(e,t,n){var r=arguments.length;switch(r){case 0:return[];case 1:return[e];case 2:return[e,t];case 3:return[e,t,n];default:for(var i=new Array(r);r--;)i[r]=arguments[r];return i}};function p(e,t){for(var r={},i=e.length,o=t?t.length:0,a=0;a<i;a++)r[e[a]]=a<o?t[a]:n;return r}function v(e,t,n){var r,i;if(this._emitter=e,this._target=t,this._listeners={},this._listenersCount=0,(n.on||n.off)&&(r=n.on,i=n.off),t.addEventListener?(r=t.addEventListener,i=t.removeEventListener):t.addListener?(r=t.addListener,i=t.removeListener):t.on&&(r=t.on,i=t.off),!r&&!i)throw Error("target does not implement any known event API");if("function"!=typeof r)throw TypeError("on method must be a function");if("function"!=typeof i)throw TypeError("off method must be a function");this._on=r,this._off=i;var o=e._observers;o?o.push(this):e._observers=[this]}function m(e,t,i,o){var a=Object.assign({},t);if(!e)return a;if("object"!=typeof e)throw TypeError("options must be an object");var s,c,l,u=Object.keys(e),d=u.length;function h(e){throw Error('Invalid "'+s+'" option value'+(e?". Reason: "+e:""))}for(var f=0;f<d;f++){if(s=u[f],!o&&!r.call(t,s))throw Error('Unknown "'+s+'" option');(c=e[s])!==n&&(l=i[s],a[s]=l?l(c,h):c)}return a}function g(e,t){return"function"==typeof e&&e.hasOwnProperty("prototype")||t("value must be a constructor"),e}function y(e){var t="value must be type of "+e.join("|"),n=e.length,r=e[0],i=e[1];return 1===n?function(e,n){if(typeof e===r)return e;n(t)}:2===n?function(e,n){var o=typeof e;if(o===r||o===i)return e;n(t)}:function(r,i){for(var o=typeof r,a=n;a-- >0;)if(o===e[a])return r;i(t)}}Object.assign(v.prototype,{subscribe:function(e,t,n){var r=this,i=this._target,o=this._emitter,a=this._listeners,s=function(){var r=f.apply(null,arguments),a={data:r,name:t,original:e};n?!1!==n.call(i,a)&&o.emit.apply(o,[a.name].concat(r)):o.emit.apply(o,[t].concat(r))};if(a[e])throw Error("Event '"+e+"' is already listening");this._listenersCount++,o._newListener&&o._removeListener&&!r._onNewListener?(this._onNewListener=function(n){n===t&&null===a[e]&&(a[e]=s,r._on.call(i,e,s))},o.on("newListener",this._onNewListener),this._onRemoveListener=function(n){n===t&&!o.hasListeners(n)&&a[e]&&(a[e]=null,r._off.call(i,e,s))},a[e]=null,o.on("removeListener",this._onRemoveListener)):(a[e]=s,r._on.call(i,e,s))},unsubscribe:function(e){var t,n,r,i=this,o=this._listeners,a=this._emitter,s=this._off,c=this._target;if(e&&"string"!=typeof e)throw TypeError("event must be a string");function u(){i._onNewListener&&(a.off("newListener",i._onNewListener),a.off("removeListener",i._onRemoveListener),i._onNewListener=null,i._onRemoveListener=null);var e=_.call(a,i);a._observers.splice(e,1)}if(e){if(!(t=o[e]))return;s.call(c,e,t),delete o[e],--this._listenersCount||u()}else{for(r=(n=l(o)).length;r-- >0;)e=n[r],s.call(c,e,o[e]);this._listeners={},this._listenersCount=0,u()}}});var b=y(["function"]),w=y(["object","function"]);function E(e,t,n){var r,i,o,a=0,s=new e(function(c,l,u){function d(){i&&(i=null),a&&(clearTimeout(a),a=0)}n=m(n,{timeout:0,overload:!1},{timeout:function(e,t){return("number"!=typeof(e*=1)||e<0||!Number.isFinite(e))&&t("timeout must be a positive number"),e}}),r=!n.overload&&"function"==typeof e.prototype.cancel&&"function"==typeof u;var h=function(e){d(),c(e)},f=function(e){d(),l(e)};r?t(h,f,u):(i=[function(e){f(e||Error("canceled"))}],t(h,f,function(e){if(o)throw Error("Unable to subscribe on cancel event asynchronously");if("function"!=typeof e)throw TypeError("onCancel callback must be a function");i.push(e)}),o=!0),n.timeout>0&&(a=setTimeout(function(){var e=Error("timeout");e.code="ETIMEDOUT",a=0,s.cancel(e),l(e)},n.timeout))});return r||(s.cancel=function(e){if(i){for(var t=i.length,n=1;n<t;n++)i[n](e);i[0](e),i=null}}),s}function _(e){var t=this._observers;if(!t)return-1;for(var n=t.length,r=0;r<n;r++)if(t[r]._target===e)return r;return-1}function S(e,t,n,r,i){if(!n)return null;if(0===r){var o=typeof t;if("string"===o){var a,s,c=0,u=0,d=this.delimiter,h=d.length;if(-1!==(s=t.indexOf(d))){a=new Array(5);do{a[c++]=t.slice(u,s),u=s+h}while(-1!==(s=t.indexOf(d,u)));a[c++]=t.slice(u),t=a,i=c}else t=[t],i=1}else"object"===o?i=t.length:(t=[t],i=1)}var f,p,v,m,g,y,b,w=null,E=t[r],_=t[r+1];if(r===i)n._listeners&&("function"==typeof n._listeners?(e&&e.push(n._listeners),w=[n]):(e&&e.push.apply(e,n._listeners),w=[n]));else{if("*"===E){for(s=(y=l(n)).length;s-- >0;)"_listeners"!==(f=y[s])&&(b=S(e,t,n[f],r+1,i))&&(w?w.push.apply(w,b):w=b);return w}if("**"===E){for((g=r+1===i||r+2===i&&"*"===_)&&n._listeners&&(w=S(e,t,n,i,i)),s=(y=l(n)).length;s-- >0;)"_listeners"!==(f=y[s])&&("*"===f||"**"===f?(n[f]._listeners&&!g&&(b=S(e,t,n[f],i,i))&&(w?w.push.apply(w,b):w=b),b=S(e,t,n[f],r,i)):b=S(e,t,n[f],f===_?r+2:r,i),b&&(w?w.push.apply(w,b):w=b));return w}n[E]&&(w=S(e,t,n[E],r+1,i))}if((p=n["*"])&&S(e,t,p,r+1,i),v=n["**"])if(r<i)for(v._listeners&&S(e,t,v,i,i),s=(y=l(v)).length;s-- >0;)"_listeners"!==(f=y[s])&&(f===_?S(e,t,v[f],r+2,i):f===E?S(e,t,v[f],r+1,i):((m={})[f]=v[f],S(e,t,{"**":m},r+1,i)));else v._listeners?S(e,t,v,i,i):v["*"]&&v["*"]._listeners&&S(e,t,v["*"],i,i);return w}function k(e,t,n){var r,i,o=0,a=0,s=this.delimiter,c=s.length;if("string"==typeof e)if(-1!==(r=e.indexOf(s))){i=new Array(5);do{i[o++]=e.slice(a,r),a=r+c}while(-1!==(r=e.indexOf(s,a)));i[o++]=e.slice(a)}else i=[e],o=1;else i=e,o=e.length;if(o>1)for(r=0;r+1<o;r++)if("**"===i[r]&&"**"===i[r+1])return;var l,u=this.listenerTree;for(r=0;r<o;r++)if(u=u[l=i[r]]||(u[l]={}),r===o-1)return u._listeners?("function"==typeof u._listeners&&(u._listeners=[u._listeners]),n?u._listeners.unshift(t):u._listeners.push(t),!u._listeners.warned&&this._maxListeners>0&&u._listeners.length>this._maxListeners&&(u._listeners.warned=!0,h.call(this,u._listeners.length,l))):u._listeners=t,!0;return!0}function C(e,t,n,r){for(var i,o,a,s,c=l(e),u=c.length,d=e._listeners;u-- >0;)i=e[o=c[u]],a="_listeners"===o?n:n?n.concat(o):[o],s=r||"symbol"==typeof o,d&&t.push(s?a:a.join(this.delimiter)),"object"==typeof i&&C.call(this,i,t,a,s);return t}function A(e){for(var t,n,r,i=l(e),o=i.length;o-- >0;)(t=e[n=i[o]])&&(r=!0,"_listeners"===n||A(t)||delete e[n]);return r}function x(e,t,n){this.emitter=e,this.event=t,this.listener=n}function T(e,t,r){if(!0===r)a=!0;else if(!1===r)i=!0;else{if(!r||"object"!=typeof r)throw TypeError("options should be an object or true");var i=r.async,a=r.promisify,s=r.nextTick,l=r.objectify}if(i||s||a){var u=t,d=t._origin||t;if(s&&!o)throw Error("process.nextTick is not supported");a===n&&(a="AsyncFunction"===t.constructor.name),t=function(){var e=arguments,t=this,n=this.event;return a?s?Promise.resolve():new Promise(function(e){c(e)}).then(function(){return t.event=n,u.apply(t,e)}):(s?process.nextTick:c)(function(){t.event=n,u.apply(t,e)})},t._async=!0,t._origin=d}return[t,l?new x(this,e,t):this]}function M(e){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,d.call(this,e)}x.prototype.off=function(){return this.emitter.off(this.event,this.listener),this},M.EventEmitter2=M,M.prototype.listenTo=function(e,t,r){if("object"!=typeof e)throw TypeError("target musts be an object");var o=this;function a(t){if("object"!=typeof t)throw TypeError("events must be an object");var n,i=r.reducers,a=_.call(o,e);n=-1===a?new v(o,e,r):o._observers[a];for(var s,c=l(t),u=c.length,d="function"==typeof i,h=0;h<u;h++)s=c[h],n.subscribe(s,t[s]||s,d?i:i&&i[s])}return r=m(r,{on:n,off:n,reducers:n},{on:b,off:b,reducers:w}),i(t)?a(p(t)):a("string"==typeof t?p(t.split(/\s+/)):t),this},M.prototype.stopListeningTo=function(e,t){var n=this._observers;if(!n)return!1;var r,i=n.length,o=!1;if(e&&"object"!=typeof e)throw TypeError("target should be an object");for(;i-- >0;)r=n[i],e&&r._target!==e||(r.unsubscribe(t),o=!0);return o},M.prototype.delimiter=".",M.prototype.setMaxListeners=function(e){e!==n&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},M.prototype.getMaxListeners=function(){return this._maxListeners},M.prototype.event="",M.prototype.once=function(e,t,n){return this._once(e,t,!1,n)},M.prototype.prependOnceListener=function(e,t,n){return this._once(e,t,!0,n)},M.prototype._once=function(e,t,n,r){return this._many(e,1,t,n,r)},M.prototype.many=function(e,t,n,r){return this._many(e,t,n,!1,r)},M.prototype.prependMany=function(e,t,n,r){return this._many(e,t,n,!0,r)},M.prototype._many=function(e,t,n,r,i){var o=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");function a(){return 0===--t&&o.off(e,a),n.apply(this,arguments)}return a._origin=n,this._on(e,a,r,i)},M.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||u.call(this);var e,t,n,r,i,o,s=arguments[0],c=this.wildcard;if("newListener"===s&&!this._newListener&&!this._events.newListener)return!1;if(c&&(e=s,"newListener"!==s&&"removeListener"!==s&&"object"==typeof s)){if(n=s.length,a)for(r=0;r<n;r++)if("symbol"==typeof s[r]){o=!0;break}o||(s=s.join(this.delimiter))}var l,d=arguments.length;if(this._all&&this._all.length)for(r=0,n=(l=this._all.slice()).length;r<n;r++)switch(this.event=s,d){case 1:l[r].call(this,s);break;case 2:l[r].call(this,s,arguments[1]);break;case 3:l[r].call(this,s,arguments[1],arguments[2]);break;default:l[r].apply(this,arguments)}if(c)l=[],S.call(this,l,e,this.listenerTree,0,n);else{if("function"==typeof(l=this._events[s])){switch(this.event=s,d){case 1:l.call(this);break;case 2:l.call(this,arguments[1]);break;case 3:l.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(d-1),i=1;i<d;i++)t[i-1]=arguments[i];l.apply(this,t)}return!0}l&&(l=l.slice())}if(l&&l.length){if(d>3)for(t=new Array(d-1),i=1;i<d;i++)t[i-1]=arguments[i];for(r=0,n=l.length;r<n;r++)switch(this.event=s,d){case 1:l[r].call(this);break;case 2:l[r].call(this,arguments[1]);break;case 3:l[r].call(this,arguments[1],arguments[2]);break;default:l[r].apply(this,t)}return!0}if(!this.ignoreErrors&&!this._all&&"error"===s)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},M.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||u.call(this);var e,t,n,r,i,o,s=arguments[0],c=this.wildcard;if("newListener"===s&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(c&&(e=s,"newListener"!==s&&"removeListener"!==s&&"object"==typeof s)){if(r=s.length,a)for(i=0;i<r;i++)if("symbol"==typeof s[i]){t=!0;break}t||(s=s.join(this.delimiter))}var l,d=[],h=arguments.length;if(this._all)for(i=0,r=this._all.length;i<r;i++)switch(this.event=s,h){case 1:d.push(this._all[i].call(this,s));break;case 2:d.push(this._all[i].call(this,s,arguments[1]));break;case 3:d.push(this._all[i].call(this,s,arguments[1],arguments[2]));break;default:d.push(this._all[i].apply(this,arguments))}if(c?(l=[],S.call(this,l,e,this.listenerTree,0)):l=this._events[s],"function"==typeof l)switch(this.event=s,h){case 1:d.push(l.call(this));break;case 2:d.push(l.call(this,arguments[1]));break;case 3:d.push(l.call(this,arguments[1],arguments[2]));break;default:for(n=new Array(h-1),o=1;o<h;o++)n[o-1]=arguments[o];d.push(l.apply(this,n))}else if(l&&l.length){if(l=l.slice(),h>3)for(n=new Array(h-1),o=1;o<h;o++)n[o-1]=arguments[o];for(i=0,r=l.length;i<r;i++)switch(this.event=s,h){case 1:d.push(l[i].call(this));break;case 2:d.push(l[i].call(this,arguments[1]));break;case 3:d.push(l[i].call(this,arguments[1],arguments[2]));break;default:d.push(l[i].apply(this,n))}}else if(!this.ignoreErrors&&!this._all&&"error"===s)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(d)},M.prototype.on=function(e,t,n){return this._on(e,t,!1,n)},M.prototype.prependListener=function(e,t,n){return this._on(e,t,!0,n)},M.prototype.onAny=function(e){return this._onAny(e,!1)},M.prototype.prependAny=function(e){return this._onAny(e,!0)},M.prototype.addListener=M.prototype.on,M.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},M.prototype._on=function(e,t,r,i){if("function"==typeof e)return this._onAny(e,t),this;if("function"!=typeof t)throw new Error("on only accepts instances of Function");this._events||u.call(this);var o,a=this;return i!==n&&(t=(o=T.call(this,e,t,i))[0],a=o[1]),this._newListener&&this.emit("newListener",e,t),this.wildcard?(k.call(this,e,t,r),a):(this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),r?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,h.call(this,this._events[e].length,e))):this._events[e]=t,a)},M.prototype.off=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var n,r=[];if(this.wildcard){var o="string"==typeof e?e.split(this.delimiter):e.slice();if(!(r=S.call(this,null,o,this.listenerTree,0)))return this}else{if(!this._events[e])return this;n=this._events[e],r.push({_listeners:n})}for(var a=0;a<r.length;a++){var s=r[a];if(n=s._listeners,i(n)){for(var c=-1,l=0,u=n.length;l<u;l++)if(n[l]===t||n[l].listener&&n[l].listener===t||n[l]._origin&&n[l]._origin===t){c=l;break}if(c<0)continue;return this.wildcard?s._listeners.splice(c,1):this._events[e].splice(c,1),0===n.length&&(this.wildcard?delete s._listeners:delete this._events[e]),this._removeListener&&this.emit("removeListener",e,t),this}(n===t||n.listener&&n.listener===t||n._origin&&n._origin===t)&&(this.wildcard?delete s._listeners:delete this._events[e],this._removeListener&&this.emit("removeListener",e,t))}return this.listenerTree&&A(this.listenerTree),this},M.prototype.offAny=function(e){var t,n=0,r=0;if(e&&this._all&&this._all.length>0){for(n=0,r=(t=this._all).length;n<r;n++)if(e===t[n])return t.splice(n,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(t=this._all,this._removeListener)for(n=0,r=t.length;n<r;n++)this.emit("removeListenerAny",t[n]);this._all=[]}return this},M.prototype.removeListener=M.prototype.off,M.prototype.removeAllListeners=function(e){if(e===n)return!this._events||u.call(this),this;if(this.wildcard){var t,r=S.call(this,null,e,this.listenerTree,0);if(!r)return this;for(t=0;t<r.length;t++)r[t]._listeners=null;this.listenerTree&&A(this.listenerTree)}else this._events&&(this._events[e]=null);return this},M.prototype.listeners=function(e){var t,r,i,o,a,s=this._events;if(e===n){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!s)return[];for(o=(t=l(s)).length,i=[];o-- >0;)"function"==typeof(r=s[t[o]])?i.push(r):i.push.apply(i,r);return i}if(this.wildcard){if(!(a=this.listenerTree))return[];var c=[],u="string"==typeof e?e.split(this.delimiter):e.slice();return S.call(this,c,u,a,0),c}return s&&(r=s[e])?"function"==typeof r?[r]:r:[]},M.prototype.eventNames=function(e){var t=this._events;return this.wildcard?C.call(this,this.listenerTree,[],null,e):t?l(t):[]},M.prototype.listenerCount=function(e){return this.listeners(e).length},M.prototype.hasListeners=function(e){if(this.wildcard){var t=[],r="string"==typeof e?e.split(this.delimiter):e.slice();return S.call(this,t,r,this.listenerTree,0),t.length>0}var i=this._events,o=this._all;return!!(o&&o.length||i&&(e===n?l(i).length:i[e]))},M.prototype.listenersAny=function(){return this._all?this._all:[]},M.prototype.waitFor=function(e,t){var r=this,i=typeof t;return"number"===i?t={timeout:t}:"function"===i&&(t={filter:t}),E((t=m(t,{timeout:0,filter:n,handleError:!1,Promise:Promise,overload:!1},{filter:b,Promise:g})).Promise,function(n,i,o){function a(){var o=t.filter;if(!o||o.apply(r,arguments))if(r.off(e,a),t.handleError){var s=arguments[0];s?i(s):n(f.apply(null,arguments).slice(1))}else n(f.apply(null,arguments))}o(function(){r.off(e,a)}),r._on(e,a,!1)},{timeout:t.timeout,overload:t.overload})};var O=M.prototype;if(Object.defineProperties(M,{defaultMaxListeners:{get:function(){return O._maxListeners},set:function(e){if("number"!=typeof e||e<0||Number.isNaN(e))throw TypeError("n must be a non-negative number");O._maxListeners=e},enumerable:!0},once:{value:function(e,t,n){return E((n=m(n,{Promise:Promise,timeout:0,overload:!1},{Promise:g})).Promise,function(n,r,i){var o;if("function"==typeof e.addEventListener)return o=function(){n(f.apply(null,arguments))},i(function(){e.removeEventListener(t,o)}),void e.addEventListener(t,o,{once:!0});var a,s=function(){a&&e.removeListener("error",a),n(f.apply(null,arguments))};"error"!==t&&(a=function(n){e.removeListener(t,s),r(n)},e.once("error",a)),i(function(){a&&e.removeListener("error",a),e.removeListener(t,s)}),e.once(t,s)},{timeout:n.timeout,overload:n.overload})},writable:!0,configurable:!0}}),Object.defineProperties(O,{_maxListeners:{value:10,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),"function"==typeof define&&define.amd)define(function(){return M});else if("object"==typeof e)t.exports=M;else{new Function("","return this")().EventEmitter2=M}}()}}),T=new Uint8Array(16),M=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,O=vd,R=[],P=0;P<256;++P)R.push((P+256).toString(16).substr(1));I=md,L=gd,N=v(A()),D=v(C()),B=v(S()),$=v(w()),(j=Object.create(null)).open="0",j.close="1",j.ping="2",j.pong="3",j.message="4",j.upgrade="5",j.noop="6",K=Object.create(null),Object.keys(j).forEach(e=>{K[j[e]]=e}),U={type:"error",data:"parser error"},H="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),F="function"==typeof ArrayBuffer,z=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,q=(e,t,n)=>{var r=e.type,i=e.data;return H&&i instanceof Blob?t?n(i):V(i,n):F&&(i instanceof ArrayBuffer||z(i))?t?n(i):V(new Blob([i]),n):n(j[r]+(i||""))},V=(e,t)=>{var n=new FileReader;return n.onload=function(){var e=n.result.split(",")[1];t("b"+(e||""))},n.readAsDataURL(e)},G="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(var as=0;as<64;as++)G["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(as)]=as;Y=e=>{var t,n,r,i,o,a=.75*e.length,s=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var l=new ArrayBuffer(a),u=new Uint8Array(l);for(t=0;t<s;t+=4)n=G[e.charCodeAt(t)],r=G[e.charCodeAt(t+1)],i=G[e.charCodeAt(t+2)],o=G[e.charCodeAt(t+3)],u[c++]=n<<2|r>>4,u[c++]=(15&r)<<4|i>>2,u[c++]=(3&i)<<6|63&o;return l},Z="function"==typeof ArrayBuffer,J=(e,t)=>{if("string"!=typeof e)return{type:"message",data:Q(e,t)};var n=e.charAt(0);return"b"===n?{type:"message",data:X(e.substring(1),t)}:K[n]?e.length>1?{type:K[n],data:e.substring(1)}:{type:K[n]}:U},X=(e,t)=>{if(Z){var n=Y(e);return Q(n,t)}return{base64:!0,data:e}},Q=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,ee=String.fromCharCode(30),te=(e,t)=>{var n=e.length,r=new Array(n),i=0;e.forEach((e,o)=>{q(e,!1,e=>{r[o]=e,++i===n&&t(r.join(ee))})})},ne=(e,t)=>{for(var n=e.split(ee),r=[],i=0;i<n.length;i++){var o=J(n[i],t);if(r.push(o),"error"===o.type)break}return r},_d.prototype.on=_d.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},_d.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},_d.prototype.off=_d.prototype.removeListener=_d.prototype.removeAllListeners=_d.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},_d.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t)}return this},_d.prototype.emitReserved=_d.prototype.emit,_d.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},_d.prototype.hasListeners=function(e){return!!this.listeners(e).length},ie="function"==typeof Promise&&"function"==typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),oe="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")(),ae=oe.setTimeout,se=oe.clearTimeout,ce=1.33,le=class extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}},ue=class extends _d{constructor(e){super(),this.writable=!1,kd(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new le(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){var t=J(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){var e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){var t=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}(e);return t.length?"?"+t:""}},de=class extends ue{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";var t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){var n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||t()})),this.writable||(n++,this.once("drain",function(){--n||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){ne(e,this.socket.binaryType).forEach(e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)}),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){var e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,te(e,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){var e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=Ad()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}},he=!1;try{he="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(fs){}if(fe=he,pe=class extends de{constructor(e){if(super(e),"undefined"!=typeof location){var t="https:"===location.protocol,n=location.port;n||(n=t?"443":"80"),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){var n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",(e,t)=>{this.onError("xhr post error",e,t)})}doPoll(){var e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(e,t)=>{this.onError("xhr poll error",e,t)}),this.pollXhr=e}},ve=class e extends _d{constructor(e,t,n){super(),this.createRequest=e,kd(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=void 0!==n.data?n.data:null,this._create()}_create(){var t,n=Sd(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;var r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders)for(var i in r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0),this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this._opts.extraHeaders[i])}catch(ko){}if("POST"===this._method)try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(ko){}try{r.setRequestHeader("Accept","*/*")}catch(ko){}null===(t=this._opts.cookieJar)||void 0===t||t.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var e;3===r.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(r.getResponseHeader("set-cookie"))),4===r.readyState&&(200===r.status||1223===r.status?this._onLoad():this.setTimeoutFn(()=>{this._onError("number"==typeof r.status?r.status:0)},0))},r.send(this._data)}catch(ko){return void this.setTimeoutFn(()=>{this._onError(ko)},0)}"undefined"!=typeof document&&(this._index=e.requestsCount++,e.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(t){if(void 0!==this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=xd,t)try{this._xhr.abort()}catch(ko){}"undefined"!=typeof document&&delete e.requests[this._index],this._xhr=null}}_onLoad(){var e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}},ve.requestsCount=0,ve.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",Td);else if("function"==typeof addEventListener){addEventListener("onpagehide"in oe?"pagehide":"unload",Td,!1)}x=Md({xdomain:!1}),me=x&&null!==x.responseType,ge=class extends pe{constructor(e){super(e);var t=e&&e.forceBase64;this.supportsBinary=me&&!t}request(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(e,{xd:this.xd},this.opts),new ve(Md,this.uri(),e)}},ye="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),be=class extends ue{get name(){return"websocket"}doOpen(){var e=this.uri(),t=this.opts.protocols,n=ye?{}:Sd(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(fs){return this.emitReserved("error",fs)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){var t=this;this.writable=!1;for(var n=function(){var n=e[r],i=r===e.length-1;q(n,t.supportsBinary,e=>{try{t.doWrite(n,e)}catch(ko){}i&&ie(()=>{t.writable=!0,t.emitReserved("drain")},t.setTimeoutFn)})},r=0;r<e.length;r++)n()}doClose(){void 0!==this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){var e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=Ad()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}},we=oe.WebSocket||oe.MozWebSocket,Ee={websocket:class extends be{createSocket(e,t,n){return ye?new we(e,t,n):t?new we(e,t):new we(e)}doWrite(e,t){this.ws.send(t)}},webtransport:class extends ue{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(fs){return this.emitReserved("error",fs)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{var t=function(e,t){re||(re=new TextDecoder);var n=[],r=0,i=-1,o=!1;return new TransformStream({transform(a,s){for(n.push(a);;){if(0===r){if(wd(n)<1)break;var c=Ed(n,1);o=!(128&~c[0]),i=127&c[0],r=i<126?3:126===i?1:2}else if(1===r){if(wd(n)<2)break;var l=Ed(n,2);i=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),r=3}else if(2===r){if(wd(n)<8)break;var u=Ed(n,8),d=new DataView(u.buffer,u.byteOffset,u.length),h=d.getUint32(0);if(h>Math.pow(2,21)-1){s.enqueue(U);break}i=h*Math.pow(2,32)+d.getUint32(4),r=3}else{if(wd(n)<i)break;var f=Ed(n,i);s.enqueue(J(o?f:re.decode(f),t)),r=0}if(0===i||i>e){s.enqueue(U);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),r=bd();r.readable.pipeTo(e.writable),this._writer=r.writable.getWriter();var i=()=>{n.read().then(e=>{var t=e.done,n=e.value;t||(this.onPacket(n),i())}).catch(e=>{})};i();var o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){var t=this;this.writable=!1;for(var n=function(){var n=e[r],i=r===e.length-1;t._writer.write(n).then(()=>{i&&ie(()=>{t.writable=!0,t.emitReserved("drain")},t.setTimeoutFn)})},r=0;r<e.length;r++)n()}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}},polling:ge},_e=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Se=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],ke="function"==typeof addEventListener&&"function"==typeof removeEventListener,Ce=[],ke&&addEventListener("offline",()=>{Ce.forEach(e=>e())},!1),Ae=class e extends _d{constructor(e,t){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"==typeof e&&(t=e,e=null),e){var n=Od(e);t.hostname=n.host,t.secure="https"===n.protocol||"wss"===n.protocol,t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=Od(t.host).host);kd(this,t),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(e=>{var t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function(e){for(var t={},n=e.split("&"),r=0,i=n.length;r<i;r++){var o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}(this.opts.query)),ke&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Ce.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){var t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);var n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(0!==this.transports.length){var t=this.opts.rememberUpgrade&&e.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";var n=this.createTransport(t);n.open(),this.setTransport(n)}else this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){this.readyState="open",e.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":var t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);var e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){var e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;for(var e=1,t=0;t<this.writeBuffer.length;t++){var n=this.writeBuffer[t].data;if(n&&(e+=Cd(n)),t>0&&e>this._maxPayload)return this.writeBuffer.slice(0,t);e+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;var e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,ie(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var i={type:e,data:t,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}}close(){var e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}_onError(t){if(e.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),ke&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){var n=Ce.indexOf(this._offlineEventListener);-1!==n&&Ce.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}},Ae.protocol=4,xe=class extends Ae{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(var e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){var t=this.createTransport(e),n=!1;Ae.priorWebsocketSuccess=!1;var r=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",e=>{if(!n)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;Ae.priorWebsocketSuccess="websocket"===t.name,this.transport.pause(()=>{n||"closed"!==this.readyState&&(l(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{var r=new Error("probe error");r.transport=t.name,this.emitReserved("upgradeError",r)}}))};function i(){n||(n=!0,l(),t.close(),t=null)}var o=e=>{var n=new Error("probe error: "+e);n.transport=t.name,i(),this.emitReserved("upgradeError",n)};function a(){o("transport closed")}function s(){o("socket closed")}function c(e){t&&e.name!==t.name&&i()}var l=()=>{t.removeListener("open",r),t.removeListener("error",o),t.removeListener("close",a),this.off("close",s),this.off("upgrading",c)};t.once("open",r),t.once("error",o),t.once("close",a),this.once("close",s),this.once("upgrading",c),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn(()=>{n||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){for(var t=[],n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}},Te=class extends xe{constructor(e){var t="object"==typeof e?e:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(!t.transports||t.transports&&"string"==typeof t.transports[0])&&(t.transports=(t.transports||["polling","websocket","webtransport"]).map(e=>Ee[e]).filter(e=>!!e)),super(e,t)}},Me="function"==typeof ArrayBuffer,Oe=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,Re=Object.prototype.toString,Pe="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Re.call(Blob),Ie="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===Re.call(File),Le=m({Decoder:()=>$e,Encoder:()=>Be,PacketType:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(()=>De),protocol:()=>5}),Ne=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],(W=De||(De={}))[W.CONNECT=0]="CONNECT",W[W.DISCONNECT=1]="DISCONNECT",W[W.EVENT=2]="EVENT",W[W.ACK=3]="ACK",W[W.CONNECT_ERROR=4]="CONNECT_ERROR",W[W.BINARY_EVENT=5]="BINARY_EVENT",W[W.BINARY_ACK=6]="BINARY_ACK",Be=class{constructor(e){this.replacer=e}encode(e){return e.type!==De.EVENT&&e.type!==De.ACK||!Pd(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===De.EVENT?De.BINARY_EVENT:De.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){var t=""+e.type;return e.type!==De.BINARY_EVENT&&e.type!==De.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){var t=Id(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}},$e=class e extends _d{constructor(e){super(),this.reviver=e}add(e){var t;if("string"==typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");var n=(t=this.decodeString(e)).type===De.BINARY_EVENT;n||t.type===De.BINARY_ACK?(t.type=n?De.EVENT:De.ACK,this.reconstructor=new je(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!Rd(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(t){var n=0,r={type:Number(t.charAt(0))};if(void 0===De[r.type])throw new Error("unknown packet type "+r.type);if(r.type===De.BINARY_EVENT||r.type===De.BINARY_ACK){for(var i=n+1;"-"!==t.charAt(++n)&&n!=t.length;);var o=t.substring(i,n);if(o!=Number(o)||"-"!==t.charAt(n))throw new Error("Illegal attachments");r.attachments=Number(o)}if("/"===t.charAt(n+1)){for(var a=n+1;++n&&","!==t.charAt(n)&&n!==t.length;);r.nsp=t.substring(a,n)}else r.nsp="/";var s=t.charAt(n+1);if(""!==s&&Number(s)==s){for(var c=n+1;++n;){var l=t.charAt(n);if(null==l||Number(l)!=l){--n;break}if(n===t.length)break}r.id=Number(t.substring(c,n+1))}if(t.charAt(++n)){var u=this.tryParse(t.substr(n));if(!e.isPayloadValid(r.type,u))throw new Error("invalid payload");r.data=u}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(ko){return!1}}static isPayloadValid(e,t){switch(e){case De.CONNECT:return Bd(t);case De.DISCONNECT:return void 0===t;case De.CONNECT_ERROR:return"string"==typeof t||Bd(t);case De.EVENT:case De.BINARY_EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===Ne.indexOf(t[0]));case De.ACK:case De.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}},je=class{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=Nd(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}},Ke=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),Ue=class extends _d{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(!this.subs){var e=this.io;this.subs=[$d(e,"open",this.onopen.bind(this)),$d(e,"packet",this.onpacket.bind(this)),$d(e,"error",this.onerror.bind(this)),$d(e,"close",this.onclose.bind(this))]}}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift("message"),this.emit.apply(this,t),this}emit(e){var t,n,r;if(Ke.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];if(o.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(o),this;var s={type:De.EVENT,data:o,options:{}};if(s.options.compress=!1!==this.flags.compress,"function"==typeof o[o.length-1]){var c=this.ids++,l=o.pop();this._registerAckCallback(c,l),s.id=c}var u=null===(n=null===(t=this.io.engine)||void 0===t?void 0:t.transport)||void 0===n?void 0:n.writable,d=this.connected&&!(null===(r=this.io.engine)||void 0===r?void 0:r._hasPingExpired());return this.flags.volatile&&!u||(d?(this.notifyOutgoingListeners(s),this.packet(s)):this.sendBuffer.push(s)),this.flags={},this}_registerAckCallback(e,t){var n,r=this,i=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0!==i){var o=this.io.setTimeoutFn(()=>{delete this.acks[e];for(var n=0;n<this.sendBuffer.length;n++)this.sendBuffer[n].id===e&&this.sendBuffer.splice(n,1);t.call(this,new Error("operation has timed out"))},i),a=function(){r.io.clearTimeoutFn(o);for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t.apply(r,n)};a.withError=!0,this.acks[e]=a}else this.acks[e]=t}emitWithAck(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new Promise((t,r)=>{var i=(e,n)=>e?r(e):t(n);i.withError=!0,n.push(i),this.emit(e,...n)})}_addToQueue(e){var t,n=this;"function"==typeof e[e.length-1]&&(t=e.pop());var r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push(function(e){if(r===n._queue[0]){if(null!==e)r.tryCount>n._opts.retries&&(n._queue.shift(),t&&t(e));else{n._queue.shift();for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];t&&t(null,...o)}return r.pending=!1,n._drainQueue()}}),this._queue.push(r),this._drainQueue()}_drainQueue(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.connected&&0!==this._queue.length){var t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:De.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(t=>String(t.id)===e)){var t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case De.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case De.EVENT:case De.BINARY_EVENT:this.onevent(e);break;case De.ACK:case De.BINARY_ACK:this.onack(e);break;case De.DISCONNECT:this.ondisconnect();break;case De.CONNECT_ERROR:this.destroy();var t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){var t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){var t,n=l(this._anyListeners.slice());try{for(n.s();!(t=n.n()).done;){t.value.apply(this,e)}}catch(fs){n.e(fs)}finally{n.f()}}super.emit.apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){var t=this,n=!1;return function(){if(!n){n=!0;for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];t.packet({type:De.ACK,id:e,data:i})}}}onack(e){var t=this.acks[e.id];"function"==typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:De.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){for(var t=this._anyListeners,n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){for(var t=this._anyOutgoingListeners,n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){var t,n=l(this._anyOutgoingListeners.slice());try{for(n.s();!(t=n.n()).done;){t.value.apply(this,e.data)}}catch(fs){n.e(fs)}finally{n.f()}}}},jd.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=1&Math.floor(10*t)?e+n:e-n}return 0|Math.min(e,this.max)},jd.prototype.reset=function(){this.attempts=0},jd.prototype.setMin=function(e){this.ms=e},jd.prototype.setMax=function(e){this.max=e},jd.prototype.setJitter=function(e){this.jitter=e},He=class extends _d{constructor(e,t){var n;super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,kd(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(n=t.randomizationFactor)&&void 0!==n?n:.5),this.backoff=new jd({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;var r=t.parser||Le;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Te(this.uri,this.opts);var t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;var r=$d(t,"open",function(){n.onopen(),e&&e()}),i=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},o=$d(t,"error",i);if(!1!==this._timeout){var a=this._timeout,s=this.setTimeoutFn(()=>{r(),i(new Error("timeout")),t.close()},a);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}return this.subs.push(r),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");var e=this.engine;this.subs.push($d(e,"ping",this.onping.bind(this)),$d(e,"data",this.ondata.bind(this)),$d(e,"error",this.onerror.bind(this)),$d(e,"close",this.onclose.bind(this)),$d(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(ko){this.onclose("parse error",ko)}}ondecoded(e){ie(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){var n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new Ue(this,e,t),this.nsps[e]=n),n}_destroy(e){for(var t=0,n=Object.keys(this.nsps);t<n.length;t++){var r=n[t];if(this.nsps[r].active)return}this._close()}_packet(e){for(var t=this.encoder.encode(e),n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),null===(n=this.engine)||void 0===n||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var t=this.backoff.duration();this._reconnecting=!0;var n=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open(t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()}))},t);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){var e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}},Fe={},Object.assign(Kd,{Manager:He,Socket:Ue,io:Kd,connect:Kd}),ze="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},qe=[],Ve=[],We="undefined"!=typeof Uint8Array?Uint8Array:Array,Ge=!1,Ye={}.toString,Ze=Array.isArray||function(e){return"[object Array]"==Ye.call(e)},Yd.TYPED_ARRAY_SUPPORT=void 0===ze.TYPED_ARRAY_SUPPORT||ze.TYPED_ARRAY_SUPPORT,Je=Wd(),Yd.poolSize=8192,Yd._augment=function(e){return e.__proto__=Yd.prototype,e},Yd.from=function(e,t,n){return Zd(null,e,t,n)},Yd.TYPED_ARRAY_SUPPORT&&(Yd.prototype.__proto__=Uint8Array.prototype,Yd.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&Yd[Symbol.species]),Yd.alloc=function(e,t,n){return r=null,o=t,a=n,Jd(i=e),i<=0?Gd(r,i):void 0!==o?"string"==typeof a?Gd(r,i).fill(o,a):Gd(r,i).fill(o):Gd(r,i);var r,i,o,a},Yd.allocUnsafe=function(e){return Xd(null,e)},Yd.allocUnsafeSlow=function(e){return Xd(null,e)},Yd.isBuffer=Oh,Yd.compare=function(e,t){if(!th(e)||!th(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},Yd.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Yd.concat=function(e,t){if(!Ze(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Yd.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=Yd.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!th(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},Yd.byteLength=nh,Yd.prototype._isBuffer=!0,Yd.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)ih(this,t,t+1);return this},Yd.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)ih(this,t,t+3),ih(this,t+1,t+2);return this},Yd.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)ih(this,t,t+7),ih(this,t+1,t+6),ih(this,t+2,t+5),ih(this,t+3,t+4);return this},Yd.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?ph(this,0,e):rh.apply(this,arguments)},Yd.prototype.equals=function(e){if(!th(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Yd.compare(this,e)},Yd.prototype.inspect=function(){var e="";return this.length>0&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(e+=" ... ")),"<Buffer "+e+">"},Yd.prototype.compare=function(e,t,n,r,i){if(!th(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),c=this.slice(r,i),l=e.slice(t,n),u=0;u<s;++u)if(c[u]!==l[u]){o=c[u],a=l[u];break}return o<a?-1:a<o?1:0},Yd.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},Yd.prototype.indexOf=function(e,t,n){return oh(this,e,t,n,!0)},Yd.prototype.lastIndexOf=function(e,t,n){return oh(this,e,t,n,!1)},Yd.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return sh(this,e,t,n);case"utf8":case"utf-8":return ch(this,e,t,n);case"ascii":return lh(this,e,t,n);case"latin1":case"binary":return uh(this,e,t,n);case"base64":return dh(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return hh(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},Yd.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},Xe=4096,Yd.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),Yd.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=Yd.prototype;else{var i=t-e;n=new Yd(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},Yd.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||bh(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},Yd.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||bh(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},Yd.prototype.readUInt8=function(e,t){return t||bh(e,1,this.length),this[e]},Yd.prototype.readUInt16LE=function(e,t){return t||bh(e,2,this.length),this[e]|this[e+1]<<8},Yd.prototype.readUInt16BE=function(e,t){return t||bh(e,2,this.length),this[e]<<8|this[e+1]},Yd.prototype.readUInt32LE=function(e,t){return t||bh(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Yd.prototype.readUInt32BE=function(e,t){return t||bh(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Yd.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||bh(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},Yd.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||bh(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},Yd.prototype.readInt8=function(e,t){return t||bh(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Yd.prototype.readInt16LE=function(e,t){t||bh(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},Yd.prototype.readInt16BE=function(e,t){t||bh(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},Yd.prototype.readInt32LE=function(e,t){return t||bh(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Yd.prototype.readInt32BE=function(e,t){return t||bh(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Yd.prototype.readFloatLE=function(e,t){return t||bh(e,4,this.length),qd(this,e,!0,23,4)},Yd.prototype.readFloatBE=function(e,t){return t||bh(e,4,this.length),qd(this,e,!1,23,4)},Yd.prototype.readDoubleLE=function(e,t){return t||bh(e,8,this.length),qd(this,e,!0,52,8)},Yd.prototype.readDoubleBE=function(e,t){return t||bh(e,8,this.length),qd(this,e,!1,52,8)},Yd.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||wh(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},Yd.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||wh(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},Yd.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||wh(this,e,t,1,255,0),Yd.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},Yd.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||wh(this,e,t,2,65535,0),Yd.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):Eh(this,e,t,!0),t+2},Yd.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||wh(this,e,t,2,65535,0),Yd.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):Eh(this,e,t,!1),t+2},Yd.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||wh(this,e,t,4,4294967295,0),Yd.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):_h(this,e,t,!0),t+4},Yd.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||wh(this,e,t,4,4294967295,0),Yd.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):_h(this,e,t,!1),t+4},Yd.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);wh(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a|0)-s&255;return t+n},Yd.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);wh(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a|0)-s&255;return t+n},Yd.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||wh(this,e,t,1,127,-128),Yd.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},Yd.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||wh(this,e,t,2,32767,-32768),Yd.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):Eh(this,e,t,!0),t+2},Yd.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||wh(this,e,t,2,32767,-32768),Yd.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):Eh(this,e,t,!1),t+2},Yd.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||wh(this,e,t,4,2147483647,-2147483648),Yd.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):_h(this,e,t,!0),t+4},Yd.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||wh(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Yd.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):_h(this,e,t,!1),t+4},Yd.prototype.writeFloatLE=function(e,t,n){return kh(this,e,t,!0,n)},Yd.prototype.writeFloatBE=function(e,t,n){return kh(this,e,t,!1,n)},Yd.prototype.writeDoubleLE=function(e,t,n){return Ch(this,e,t,!0,n)},Yd.prototype.writeDoubleBE=function(e,t,n){return Ch(this,e,t,!1,n)},Yd.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!Yd.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},Yd.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!Yd.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=th(e)?e:xh(new Yd(e,r).toString()),s=a.length;for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this},Qe=/[^+\/0-9A-Za-z-_]/g,et=Object.freeze({__proto__:null,Buffer:Yd,INSPECT_MAX_BYTES:50,SlowBuffer:function(e){return+e!=e&&(e=0),Yd.alloc(+e)},isBuffer:Oh,kMaxLength:Je}),tt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},nt={},rt={},it={},Object.defineProperty(it,"__esModule",{value:!0}),it.isBytes=Dh,it.number=Lh,it.bool=Nh,it.bytes=Bh,it.hash=$h,it.exists=jh,it.output=Kh,it.default={number:Lh,bool:Nh,bytes:Bh,hash:$h,exists:jh,output:Kh},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.wrapCipher=e.Hash=e.nextTick=e.isLE=e.createView=e.u32=e.u16=e.u8=void 0,e.bytesToHex=r,e.hexToBytes=s,e.hexToNumber=c,e.bytesToNumberBE=function(e){return c(r(e))},e.numberToBytesBE=function(e,t){return s(e.toString(16).padStart(2*t,"0"))},e.asyncLoop=function(){var t=o(b().m(function t(n,r,i){var o,a,s;return b().w(function(t){for(;;)switch(t.n){case 0:o=Date.now(),a=0;case 1:if(!(a<n)){t.n=4;break}if(i(a),s=Date.now()-o,s>=0&&s<r){t.n=3;break}return t.n=2,(0,e.nextTick)();case 2:o+=s;case 3:a++,t.n=1;break;case 4:return t.a(2)}},t)}));return function(e,n,r){return t.apply(this,arguments)}}(),e.utf8ToBytes=l,e.bytesToUtf8=function(e){return(new TextDecoder).decode(e)},e.toBytes=function(e){if("string"==typeof e)e=l(e);else{if(!(0,t.isBytes)(e))throw new Error("Uint8Array expected, got "+typeof e);e=d(e)}return e},e.concatBytes=function(){for(var e=0,n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];(0,t.bytes)(r),e+=r.length}for(var i=new Uint8Array(e),o=0,a=0;o<arguments.length;o++){var s=o<0||arguments.length<=o?void 0:arguments[o];i.set(s,a),a+=s.length}return i},e.checkOpts=function(e,t){if(null==t||"object"!=typeof t)throw new Error("options must be defined");return Object.assign(e,t)},e.equalBytes=function(e,t){if(e.length!==t.length)return!1;for(var n=0,r=0;r<e.length;r++)n|=e[r]^t[r];return 0===n},e.setBigUint64=u,e.u64Lengths=function(t,n){var r=new Uint8Array(16),i=(0,e.createView)(r);return u(i,0,BigInt(n?n.length:0),!0),u(i,8,BigInt(t.length),!0),r},e.isAligned32=function(e){return e.byteOffset%4==0},e.copyBytes=d,e.clean=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0;r<t.length;r++)t[r].fill(0)};var t=it;if(e.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),e.u16=e=>new Uint16Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/2)),e.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),e.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),e.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!e.isLE)throw new Error("Non little-endian hardware is not supported");var n=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function r(e){(0,t.bytes)(e);for(var r="",i=0;i<e.length;i++)r+=n[e[i]];return r}var i={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function a(e){return e>=i._0&&e<=i._9?e-i._0:e>=i._A&&e<=i._F?e-(i._A-10):e>=i._a&&e<=i._f?e-(i._a-10):void 0}function s(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);var t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);for(var r=new Uint8Array(n),i=0,o=0;i<n;i++,o+=2){var s=a(e.charCodeAt(o)),c=a(e.charCodeAt(o+1));if(void 0===s||void 0===c){var l=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+o)}r[i]=16*s+c}return r}function c(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}function l(e){if("string"!=typeof e)throw new Error("string expected, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function u(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);var i=BigInt(32),o=BigInt(4294967295),a=Number(n>>i&o),s=Number(n&o),c=r?4:0,l=r?0:4;e.setUint32(t+c,a,r),e.setUint32(t+l,s,r)}function d(e){return Uint8Array.from(e)}e.nextTick=o(b().m(function e(){return b().w(function(e){for(;;)if(0===e.n)return e.a(2)},e)})),e.Hash=class{},e.wrapCipher=(e,t)=>(Object.assign(t,e),t)}(rt),ot={},at={},Object.defineProperty(at,"__esModule",{value:!0}),at.AEAD_TAG_LENGTH=at.XCHACHA20_NONCE_LENGTH=at.CURVE25519_PUBLIC_KEY_SIZE=at.ETH_PUBLIC_KEY_SIZE=at.UNCOMPRESSED_PUBLIC_KEY_SIZE=at.COMPRESSED_PUBLIC_KEY_SIZE=at.SECRET_KEY_LENGTH=void 0,at.SECRET_KEY_LENGTH=32,at.COMPRESSED_PUBLIC_KEY_SIZE=33,at.UNCOMPRESSED_PUBLIC_KEY_SIZE=65,at.ETH_PUBLIC_KEY_SIZE=64,at.CURVE25519_PUBLIC_KEY_SIZE=32,at.XCHACHA20_NONCE_LENGTH=24,at.AEAD_TAG_LENGTH=16,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ephemeralKeySize=e.symmetricNonceLength=e.symmetricAlgorithm=e.isHkdfKeyCompressed=e.isEphemeralKeyCompressed=e.ellipticCurve=e.ECIES_CONFIG=void 0;var t=at;e.ECIES_CONFIG=new function(){this.ellipticCurve="secp256k1",this.isEphemeralKeyCompressed=!1,this.isHkdfKeyCompressed=!1,this.symmetricAlgorithm="aes-256-gcm",this.symmetricNonceLength=16},e.ellipticCurve=function(){return e.ECIES_CONFIG.ellipticCurve},e.isEphemeralKeyCompressed=function(){return e.ECIES_CONFIG.isEphemeralKeyCompressed},e.isHkdfKeyCompressed=function(){return e.ECIES_CONFIG.isHkdfKeyCompressed},e.symmetricAlgorithm=function(){return e.ECIES_CONFIG.symmetricAlgorithm},e.symmetricNonceLength=function(){return e.ECIES_CONFIG.symmetricNonceLength},e.ephemeralKeySize=function(){var n={secp256k1:e.ECIES_CONFIG.isEphemeralKeyCompressed?t.COMPRESSED_PUBLIC_KEY_SIZE:t.UNCOMPRESSED_PUBLIC_KEY_SIZE,x25519:t.CURVE25519_PUBLIC_KEY_SIZE,ed25519:t.CURVE25519_PUBLIC_KEY_SIZE};if(e.ECIES_CONFIG.ellipticCurve in n)return n[e.ECIES_CONFIG.ellipticCurve];throw new Error("Not implemented")}}(ot),st={},ct={},lt={},ut={},dt={},ht={},Object.defineProperty(ht,"__esModule",{value:!0}),ht.crypto=void 0,ht.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.gcm=e.ctr=e.cbc=e.utils=void 0,e.randomBytes=i,e.getWebcryptoSubtle=a,e.managedNonce=function(e){return(0,n.number)(e.nonceLength),function(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];return{encrypt(n){for(var a=arguments.length,s=new Array(a>1?a-1:0),c=1;c<a;c++)s[c-1]=arguments[c];var l=i(e.nonceLength),u=e(t,l,...o).encrypt(n,...s),d=(0,r.concatBytes)(l,u);return u.fill(0),d},decrypt(n){for(var r=e.nonceLength,i=n.subarray(0,r),a=n.subarray(r),s=arguments.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=arguments[l];return e(t,i,...o).decrypt(a,...c)}}}};var t=ht,n=it,r=rt;function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(t.crypto&&"function"==typeof t.crypto.getRandomValues)return t.crypto.getRandomValues(new Uint8Array(e));if(t.crypto&&"function"==typeof t.crypto.randomBytes)return t.crypto.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}function a(){if(t.crypto&&"object"==typeof t.crypto.subtle&&null!=t.crypto.subtle)return t.crypto.subtle;throw new Error("crypto.subtle must be defined")}e.utils={encrypt:(e,t,n,r)=>o(b().m(function i(){var o,s,c;return b().w(function(i){for(;;)switch(i.n){case 0:return o=a(),i.n=1,o.importKey("raw",e,t,!0,["encrypt"]);case 1:return s=i.v,i.n=2,o.encrypt(n,s,r);case 2:return c=i.v,i.a(2,new Uint8Array(c))}},i)}))(),decrypt:(e,t,n,r)=>o(b().m(function i(){var o,s,c;return b().w(function(i){for(;;)switch(i.n){case 0:return o=a(),i.n=1,o.importKey("raw",e,t,!0,["decrypt"]);case 1:return s=i.v,i.n=2,o.decrypt(n,s,r);case 2:return c=i.v,i.a(2,new Uint8Array(c))}},i)}))()};var s="AES-CBC",c="AES-CTR",l="AES-GCM";function u(t){return(r,i,o)=>{(0,n.bytes)(r),(0,n.bytes)(i);var a={name:t,length:8*r.length},u=function(e,t,n){if(e===s)return{name:s,iv:t};if(e===c)return{name:c,counter:t,length:64};if(e===l)return n?{name:l,iv:t,additionalData:n}:{name:l,iv:t};throw new Error("unknown aes block mode")}(t,i,o);return{encrypt:t=>((0,n.bytes)(t),e.utils.encrypt(r,a,u,t)),decrypt:t=>((0,n.bytes)(t),e.utils.decrypt(r,a,u,t))}}}e.cbc=u(s),e.ctr=u(c),e.gcm=u(l)}(dt),ft={},pt={},vt={},mt={},Object.defineProperty(mt,"__esModule",{value:!0}),mt.isBytes=Fh,mt.number=Uh,mt.bool=Hh,mt.bytes=zh,mt.hash=qh,mt.exists=Vh,mt.output=Wh,mt.default={number:Uh,bool:Hh,bytes:zh,hash:qh,exists:Vh,output:Wh},gt={},yt={},Object.defineProperty(yt,"__esModule",{value:!0}),yt.crypto=void 0,yt.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Hash=e.nextTick=e.byteSwapIfBE=e.byteSwap=e.isLE=e.rotl=e.rotr=e.createView=e.u32=e.u8=void 0,e.isBytes=function(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name},e.byteSwap32=function(t){for(var n=0;n<t.length;n++)t[n]=(0,e.byteSwap)(t[n])},e.bytesToHex=function(e){(0,n.bytes)(e);for(var t="",i=0;i<e.length;i++)t+=r[e[i]];return t},e.hexToBytes=function(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);var t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);for(var r=new Uint8Array(n),i=0,o=0;i<n;i++,o+=2){var s=a(e.charCodeAt(o)),c=a(e.charCodeAt(o+1));if(void 0===s||void 0===c){var l=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+o)}r[i]=16*s+c}return r},e.asyncLoop=function(){var t=o(b().m(function t(n,r,i){var o,a,s;return b().w(function(t){for(;;)switch(t.n){case 0:o=Date.now(),a=0;case 1:if(!(a<n)){t.n=4;break}if(i(a),s=Date.now()-o,s>=0&&s<r){t.n=3;break}return t.n=2,(0,e.nextTick)();case 2:o+=s;case 3:a++,t.n=1;break;case 4:return t.a(2)}},t)}));return function(e,n,r){return t.apply(this,arguments)}}(),e.utf8ToBytes=s,e.toBytes=c,e.concatBytes=function(){for(var e=0,t=0;t<arguments.length;t++){var r=t<0||arguments.length<=t?void 0:arguments[t];(0,n.bytes)(r),e+=r.length}for(var i=new Uint8Array(e),o=0,a=0;o<arguments.length;o++){var s=o<0||arguments.length<=o?void 0:arguments[o];i.set(s,a),a+=s.length}return i},e.checkOpts=function(e,t){if(void 0!==t&&"[object Object]"!==l.call(t))throw new Error("Options should be object or undefined");return Object.assign(e,t)},e.wrapConstructor=function(e){var t=t=>e().update(c(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t},e.wrapConstructorWithOpts=function(e){var t=(t,n)=>e(n).update(c(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t},e.wrapXOFConstructorWithOpts=function(e){var t=(t,n)=>e(n).update(c(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t},e.randomBytes=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(t.crypto&&"function"==typeof t.crypto.getRandomValues)return t.crypto.getRandomValues(new Uint8Array(e));if(t.crypto&&"function"==typeof t.crypto.randomBytes)return t.crypto.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")};var t=yt,n=mt;e.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),e.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),e.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),e.rotr=(e,t)=>e<<32-t|e>>>t,e.rotl=(e,t)=>e<<t|e>>>32-t>>>0,e.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],e.byteSwap=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255,e.byteSwapIfBE=e.isLE?e=>e:t=>(0,e.byteSwap)(t);var r=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0")),i={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function a(e){return e>=i._0&&e<=i._9?e-i._0:e>=i._A&&e<=i._F?e-(i._A-10):e>=i._a&&e<=i._f?e-(i._a-10):void 0}function s(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function c(e){return"string"==typeof e&&(e=s(e)),(0,n.bytes)(e),e}e.nextTick=o(b().m(function e(){return b().w(function(e){for(;;)if(0===e.n)return e.a(2)},e)})),e.Hash=class{clone(){return this._cloneInto()}};var l={}.toString}(gt),Object.defineProperty(vt,"__esModule",{value:!0}),vt.HashMD=vt.Maj=vt.Chi=void 0,bt=mt,wt=gt,vt.Chi=(e,t,n)=>e&t^~e&n,vt.Maj=(e,t,n)=>e&t^e&n^t&n,vt.HashMD=class extends wt.Hash{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,wt.createView)(this.buffer)}update(e){(0,bt.exists)(this);for(var t=this.view,n=this.buffer,r=this.blockLen,i=(e=(0,wt.toBytes)(e)).length,o=0;o<i;){var a=Math.min(r-this.pos,i-o);if(a!==r)n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===r&&(this.process(t,0),this.pos=0);else for(var s=(0,wt.createView)(e);r<=i-o;o+=r)this.process(s,o)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,bt.exists)(this),(0,bt.output)(e,this),this.finished=!0;var t=this.buffer,n=this.view,r=this.blockLen,i=this.isLE,o=this.pos;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>r-o&&(this.process(n,0),o=0);for(var a=o;a<r;a++)t[a]=0;(function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);var i=BigInt(32),o=BigInt(4294967295),a=Number(n>>i&o),s=Number(n&o),c=r?4:0,l=r?0:4;e.setUint32(t+c,a,r),e.setUint32(t+l,s,r)})(n,r-8,BigInt(8*this.length),i),this.process(n,0);var s=(0,wt.createView)(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");var l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(var d=0;d<l;d++)s.setUint32(4*d,u[d],i)}digest(){var e=this.buffer,t=this.outputLen;this.digestInto(e);var n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());var t=this.blockLen,n=this.buffer,r=this.length,i=this.finished,o=this.destroyed,a=this.pos;return e.length=r,e.pos=a,e.finished=i,e.destroyed=o,r%t&&e.buffer.set(n),e}},Et={},Object.defineProperty(Et,"__esModule",{value:!0}),Et.add5L=Et.add5H=Et.add4H=Et.add4L=Et.add3H=Et.add3L=Et.rotlBL=Et.rotlBH=Et.rotlSL=Et.rotlSH=Et.rotr32L=Et.rotr32H=Et.rotrBL=Et.rotrBH=Et.rotrSL=Et.rotrSH=Et.shrSL=Et.shrSH=Et.toBig=void 0,Et.fromBig=Gh,Et.split=Yh,Et.add=Zh,_t=BigInt(Math.pow(2,32)-1),St=BigInt(32),kt=(e,t)=>BigInt(e>>>0)<<St|BigInt(t>>>0),Et.toBig=kt,Ct=(e,t,n)=>e>>>n,Et.shrSH=Ct,At=(e,t,n)=>e<<32-n|t>>>n,Et.shrSL=At,xt=(e,t,n)=>e>>>n|t<<32-n,Et.rotrSH=xt,Tt=(e,t,n)=>e<<32-n|t>>>n,Et.rotrSL=Tt,Mt=(e,t,n)=>e<<64-n|t>>>n-32,Et.rotrBH=Mt,Ot=(e,t,n)=>e>>>n-32|t<<64-n,Et.rotrBL=Ot,Rt=(e,t)=>t,Et.rotr32H=Rt,Pt=(e,t)=>e,Et.rotr32L=Pt,It=(e,t,n)=>e<<n|t>>>32-n,Et.rotlSH=It,Lt=(e,t,n)=>t<<n|e>>>32-n,Et.rotlSL=Lt,Nt=(e,t,n)=>t<<n-32|e>>>64-n,Et.rotlBH=Nt,Dt=(e,t,n)=>e<<n-32|t>>>64-n,Et.rotlBL=Dt,Bt=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),Et.add3L=Bt,$t=(e,t,n,r)=>t+n+r+(e/Math.pow(2,32)|0)|0,Et.add3H=$t,jt=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),Et.add4L=jt,Kt=(e,t,n,r,i)=>t+n+r+i+(e/Math.pow(2,32)|0)|0,Et.add4H=Kt,Ut=(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0),Et.add5L=Ut,Ht=(e,t,n,r,i,o)=>t+n+r+i+o+(e/Math.pow(2,32)|0)|0,Et.add5H=Ht,Et.default={fromBig:Gh,split:Yh,toBig:kt,shrSH:Ct,shrSL:At,rotrSH:xt,rotrSL:Tt,rotrBH:Mt,rotrBL:Ot,rotr32H:Rt,rotr32L:Pt,rotlSH:It,rotlSL:Lt,rotlBH:Nt,rotlBL:Dt,add:Zh,add3L:Bt,add3H:$t,add4L:jt,add4H:Kt,add5H:Ht,add5L:Ut},Object.defineProperty(pt,"__esModule",{value:!0}),pt.sha384=pt.sha512_256=pt.sha512_224=pt.sha512=pt.SHA384=pt.SHA512_256=pt.SHA512_224=pt.SHA512=void 0,Ft=vt,qt=gt,a=(zt=Et).default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),s=p(a,2),Vt=s[0],Wt=s[1],Gt=new Uint32Array(80),Yt=new Uint32Array(80),Zt=class extends Ft.HashMD{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){return[this.Ah,this.Al,this.Bh,this.Bl,this.Ch,this.Cl,this.Dh,this.Dl,this.Eh,this.El,this.Fh,this.Fl,this.Gh,this.Gl,this.Hh,this.Hl]}set(e,t,n,r,i,o,a,s,c,l,u,d,h,f,p,v){this.Ah=0|e,this.Al=0|t,this.Bh=0|n,this.Bl=0|r,this.Ch=0|i,this.Cl=0|o,this.Dh=0|a,this.Dl=0|s,this.Eh=0|c,this.El=0|l,this.Fh=0|u,this.Fl=0|d,this.Gh=0|h,this.Gl=0|f,this.Hh=0|p,this.Hl=0|v}process(e,t){for(var n,r,i,o,a,s,c,l,u=0;u<16;u++,t+=4)Gt[u]=e.getUint32(t),Yt[u]=e.getUint32(t+=4);for(var d=16;d<80;d++){var h=0|Gt[d-15],f=0|Yt[d-15],p=zt.default.rotrSH(h,f,1)^zt.default.rotrSH(h,f,8)^zt.default.shrSH(h,f,7),v=zt.default.rotrSL(h,f,1)^zt.default.rotrSL(h,f,8)^zt.default.shrSL(h,f,7),m=0|Gt[d-2],g=0|Yt[d-2],y=zt.default.rotrSH(m,g,19)^zt.default.rotrBH(m,g,61)^zt.default.shrSH(m,g,6),b=zt.default.rotrSL(m,g,19)^zt.default.rotrBL(m,g,61)^zt.default.shrSL(m,g,6),w=zt.default.add4L(v,b,Yt[d-7],Yt[d-16]);Gt[d]=0|zt.default.add4H(w,p,y,Gt[d-7],Gt[d-16]),Yt[d]=0|w}for(var E=this.Ah,_=this.Al,S=this.Bh,k=this.Bl,C=this.Ch,A=this.Cl,x=this.Dh,T=this.Dl,M=this.Eh,O=this.El,R=this.Fh,P=this.Fl,I=this.Gh,L=this.Gl,N=this.Hh,D=this.Hl,B=0;B<80;B++){var $,j=zt.default.rotrSH(M,O,14)^zt.default.rotrSH(M,O,18)^zt.default.rotrBH(M,O,41),K=zt.default.rotrSL(M,O,14)^zt.default.rotrSL(M,O,18)^zt.default.rotrBL(M,O,41),U=M&R^~M&I,H=O&P^~O&L,F=zt.default.add5L(D,K,H,Wt[B],Yt[B]),z=zt.default.add5H(F,N,j,U,Vt[B],Gt[B]),q=0|F,V=zt.default.rotrSH(E,_,28)^zt.default.rotrBH(E,_,34)^zt.default.rotrBH(E,_,39),W=zt.default.rotrSL(E,_,28)^zt.default.rotrBL(E,_,34)^zt.default.rotrBL(E,_,39),G=E&S^E&C^S&C,Y=_&k^_&A^k&A;N=0|I,D=0|L,I=0|R,L=0|P,R=0|M,P=0|O,M=($=zt.default.add(0|x,0|T,0|z,0|q)).h,O=$.l,x=0|C,T=0|A,C=0|S,A=0|k,S=0|E,k=0|_;var Z=zt.default.add3L(q,W,Y);E=zt.default.add3H(Z,z,V,G),_=0|Z}E=(n=zt.default.add(0|this.Ah,0|this.Al,0|E,0|_)).h,_=n.l,S=(r=zt.default.add(0|this.Bh,0|this.Bl,0|S,0|k)).h,k=r.l,C=(i=zt.default.add(0|this.Ch,0|this.Cl,0|C,0|A)).h,A=i.l,x=(o=zt.default.add(0|this.Dh,0|this.Dl,0|x,0|T)).h,T=o.l,M=(a=zt.default.add(0|this.Eh,0|this.El,0|M,0|O)).h,O=a.l,R=(s=zt.default.add(0|this.Fh,0|this.Fl,0|R,0|P)).h,P=s.l,I=(c=zt.default.add(0|this.Gh,0|this.Gl,0|I,0|L)).h,L=c.l,N=(l=zt.default.add(0|this.Hh,0|this.Hl,0|N,0|D)).h,D=l.l,this.set(E,_,S,k,C,A,x,T,M,O,R,P,I,L,N,D)}roundClean(){Gt.fill(0),Yt.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},pt.SHA512=Zt,Jt=class extends Zt{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}},pt.SHA512_224=Jt,Xt=class extends Zt{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}},pt.SHA512_256=Xt,Qt=class extends Zt{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}},pt.SHA384=Qt,pt.sha512=(0,qt.wrapConstructor)(()=>new Zt),pt.sha512_224=(0,qt.wrapConstructor)(()=>new Jt),pt.sha512_256=(0,qt.wrapConstructor)(()=>new Xt),pt.sha384=(0,qt.wrapConstructor)(()=>new Qt),en={},tn={},nn={},rn={},Object.defineProperty(rn,"__esModule",{value:!0}),rn.notImplemented=rn.bitMask=void 0,rn.isBytes=Jh,rn.abytes=Xh,rn.abool=function(e,t){if("boolean"!=typeof t)throw new Error(`${e} must be valid boolean, got "${t}".`)},rn.bytesToHex=Qh,rn.numberToHexUnpadded=ef,rn.hexToNumber=tf,rn.hexToBytes=rf,rn.bytesToNumberBE=function(e){return tf(Qh(e))},rn.bytesToNumberLE=function(e){return Xh(e),tf(Qh(Uint8Array.from(e).reverse()))},rn.numberToBytesBE=of,rn.numberToBytesLE=function(e,t){return of(e,t).reverse()},rn.numberToVarBytesBE=function(e){return rf(ef(e))},rn.ensureBytes=function(e,t,n){var r;if("string"==typeof t)try{r=rf(t)}catch(o){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${o}`)}else{if(!Jh(t))throw new Error(`${e} must be hex string or Uint8Array`);r=Uint8Array.from(t)}var i=r.length;if("number"==typeof n&&i!==n)throw new Error(`${e} expected ${n} bytes, got ${i}`);return r},rn.concatBytes=af,rn.equalBytes=function(e,t){if(e.length!==t.length)return!1;for(var n=0,r=0;r<e.length;r++)n|=e[r]^t[r];return 0===n},rn.utf8ToBytes=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))},rn.inRange=sf,rn.aInRange=function(e,t,n,r){if(!sf(t,n,r))throw new Error(`expected valid ${e}: ${n} <= n < ${r}, got ${typeof t} ${t}`)},rn.bitLen=function(e){var t;for(t=0;e>on;e>>=an,t+=1);return t},rn.bitGet=function(e,t){return e>>BigInt(t)&an},rn.bitSet=function(e,t,n){return e|(n?an:on)<<BigInt(t)},rn.createHmacDrbg=function(e,t,n){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");var r=dn(e),i=dn(e),o=0,a=()=>{r.fill(1),i.fill(0),o=0},s=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return n(i,r,...t)},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dn();i=s(hn([0]),e),r=s(),0!==e.length&&(i=s(hn([1]),e),r=s())},l=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");for(var e=0,n=[];e<t;){var i=(r=s()).slice();n.push(i),e+=r.length}return af(...n)};return(e,t)=>{var n;for(a(),c(e);!(n=t(l()));)c();return a(),n}},rn.validateObject=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(t,n,r)=>{var i=fn[n];if("function"!=typeof i)throw new Error(`Invalid validator "${n}", expected function`);var o=e[t];if(!(r&&void 0===o||i(o,e)))throw new Error(`Invalid param ${String(t)}=${o} (${typeof o}), expected ${n}`)},i=0,o=Object.entries(t);i<o.length;i++){var a=p(o[i],2);r(a[0],a[1],!1)}for(var s=0,c=Object.entries(n);s<c.length;s++){var l=p(c[s],2);r(l[0],l[1],!0)}return e},rn.memoized=function(e){var t=new WeakMap;return function(n){var r=t.get(n);if(void 0!==r)return r;for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];var s=e(n,...o);return t.set(n,s),s}},on=BigInt(0),an=BigInt(1),sn=BigInt(2),cn=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0")),ln={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102},un=e=>"bigint"==typeof e&&on<=e,rn.bitMask=e=>(sn<<BigInt(e-1))-an,dn=e=>new Uint8Array(e),hn=e=>Uint8Array.from(e),fn={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||Jh(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)},rn.notImplemented=()=>{throw new Error("not implemented")},Object.defineProperty(nn,"__esModule",{value:!0}),nn.isNegativeLE=void 0,nn.mod=cf,nn.pow=lf,nn.pow2=function(e,t,n){for(var r=e;t-- >vn;)r*=r,r%=n;return r},nn.invert=uf,nn.tonelliShanks=df,nn.FpSqrt=hf,nn.validateField=function(e){var t=_n.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,pn.validateObject)(e,t)},nn.FpPow=ff,nn.FpInvertBatch=pf,nn.FpDiv=function(e,t,n){return e.mul(t,"bigint"==typeof n?uf(n,e.ORDER):e.inv(n))},nn.FpLegendre=vf,nn.FpIsSquare=function(e){var t=vf(e.ORDER);return n=>{var r=t(e,n);return e.eql(r,e.ZERO)||e.eql(r,e.ONE)}},nn.nLength=mf,nn.Field=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(e<=vn)throw new Error(`Expected Field ORDER > 0, got ${e}`);var i=mf(e,t),o=i.nBitLength,a=i.nByteLength;if(a>2048)throw new Error("Field lengths over 2048 bytes are not supported");var s=hf(e),c=Object.freeze({ORDER:e,BITS:o,BYTES:a,MASK:(0,pn.bitMask)(o),ZERO:vn,ONE:mn,create:t=>cf(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("Invalid field element: expected bigint, got "+typeof t);return vn<=t&&t<e},is0:e=>e===vn,isOdd:e=>(e&mn)===mn,neg:t=>cf(-t,e),eql:(e,t)=>e===t,sqr:t=>cf(t*t,e),add:(t,n)=>cf(t+n,e),sub:(t,n)=>cf(t-n,e),mul:(t,n)=>cf(t*n,e),pow:(e,t)=>ff(c,e,t),div:(t,n)=>cf(t*uf(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>uf(t,e),sqrt:r.sqrt||(e=>s(c,e)),invertBatch:e=>pf(c,e),cmov:(e,t,n)=>n?t:e,toBytes:e=>n?(0,pn.numberToBytesLE)(e,a):(0,pn.numberToBytesBE)(e,a),fromBytes:e=>{if(e.length!==a)throw new Error(`Fp.fromBytes: expected ${a}, got ${e.length}`);return n?(0,pn.bytesToNumberLE)(e):(0,pn.bytesToNumberBE)(e)}});return Object.freeze(c)},nn.FpSqrtOdd=function(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");var n=e.sqrt(t);return e.isOdd(n)?n:e.neg(n)},nn.FpSqrtEven=function(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");var n=e.sqrt(t);return e.isOdd(n)?e.neg(n):n},nn.hashToPrivateScalar=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=(e=(0,pn.ensureBytes)("privateHash",e)).length,i=mf(t).nByteLength+8;if(i<24||r<i||r>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${r}`);return cf(n?(0,pn.bytesToNumberLE)(e):(0,pn.bytesToNumberBE)(e),t-mn)+mn},nn.getFieldBytesLength=gf,nn.getMinHashLength=yf,nn.mapHashToField=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.length,i=gf(t),o=yf(t);if(r<16||r<o||r>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${r}`);var a=cf(n?(0,pn.bytesToNumberBE)(e):(0,pn.bytesToNumberLE)(e),t-mn)+mn;return n?(0,pn.numberToBytesLE)(a,i):(0,pn.numberToBytesBE)(a,i)},pn=rn,vn=BigInt(0),mn=BigInt(1),gn=BigInt(2),yn=BigInt(3),bn=BigInt(4),wn=BigInt(5),En=BigInt(8),BigInt(9),BigInt(16),nn.isNegativeLE=(e,t)=>(cf(e,t)&mn)===mn,_n=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"],Object.defineProperty(tn,"__esModule",{value:!0}),tn.wNAF=function(e,t){var n=(e,t)=>{var n=t.negate();return e?n:t},r=e=>{if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error(`Wrong window size=${e}, should be [1..${t}]`)},i=e=>(r(e),{windows:Math.ceil(t/e)+1,windowSize:Math.pow(2,e-1)});return{constTimeNegate:n,unsafeLadder(t,n){for(var r=e.ZERO,i=t;n>Cn;)n&An&&(r=r.add(i)),i=i.double(),n>>=An;return r},precomputeWindow(e,t){for(var n=i(t),r=n.windows,o=n.windowSize,a=[],s=e,c=s,l=0;l<r;l++){c=s,a.push(c);for(var u=1;u<o;u++)c=c.add(s),a.push(c);s=c.double()}return a},wNAF(t,r,o){for(var a=i(t),s=a.windows,c=a.windowSize,l=e.ZERO,u=e.BASE,d=BigInt(Math.pow(2,t)-1),h=Math.pow(2,t),f=BigInt(t),p=0;p<s;p++){var v=p*c,m=Number(o&d);o>>=f,m>c&&(m-=h,o+=An);var g=v,y=v+Math.abs(m)-1,b=p%2!=0,w=m<0;0===m?u=u.add(n(b,r[g])):l=l.add(n(w,r[y]))}return{p:l,f:u}},wNAFCached(e,t,n){var r=Tn.get(e)||1,i=xn.get(e);return i||(i=this.precomputeWindow(e,r),1!==r&&xn.set(e,n(i))),this.wNAF(r,i,t)},setWindowSize(e,t){r(t),Tn.set(e,t),xn.delete(e)}}},tn.pippenger=function(e,t,n,r){if(!Array.isArray(n)||!Array.isArray(r)||r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");r.forEach((e,n)=>{if(!t.isValid(e))throw new Error(`wrong scalar at index ${n}`)}),n.forEach((t,n)=>{if(!(t instanceof e))throw new Error(`wrong point at index ${n}`)});for(var i=(0,kn.bitLen)(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,s=new Array(a+1).fill(e.ZERO),c=Math.floor((t.BITS-1)/o)*o,l=e.ZERO,u=c;u>=0;u-=o){s.fill(e.ZERO);for(var d=0;d<r.length;d++){var h=r[d],f=Number(h>>BigInt(u)&BigInt(a));s[f]=s[f].add(n[d])}for(var p=e.ZERO,v=s.length-1,m=e.ZERO;v>0;v--)m=m.add(s[v]),p=p.add(m);if(l=l.add(p),0!==u)for(var g=0;g<o;g++)l=l.double()}return l},tn.validateBasic=function(e){return(0,Sn.validateField)(e.Fp),(0,kn.validateObject)(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze(h(h(h({},(0,Sn.nLength)(e.n,e.nBitLength)),e),{},{p:e.Fp.ORDER}))},Sn=nn,kn=rn,Cn=BigInt(0),An=BigInt(1),xn=new WeakMap,Tn=new WeakMap,Object.defineProperty(en,"__esModule",{value:!0}),en.twistedEdwards=function(e){var t,n,r=(t=e,n=(0,Mn.validateBasic)(t),Rn.validateObject(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze(h({},n))),i=r.Fp,o=r.n,a=r.prehash,s=r.hash,c=r.randomBytes,l=r.nByteLength,u=r.h,d=Nn<<BigInt(8*l)-Ln,f=i.create,p=(0,On.Field)(r.n,r.nBitLength),v=r.uvRatio||((e,t)=>{try{return{isValid:!0,value:i.sqrt(e*i.inv(t))}}catch(n){return{isValid:!1,value:In}}}),m=r.adjustScalarBytes||(e=>e),g=r.domain||((e,t,n)=>{if((0,Pn.abool)("phflag",n),t.length||n)throw new Error("Contexts/pre-hash are not supported");return e});function y(e,t){Rn.aInRange("coordinate "+e,t,In,d)}function b(e){if(!(e instanceof _))throw new Error("ExtendedPoint expected")}var w=(0,Pn.memoized)((e,t)=>{var n=e.ex,r=e.ey,o=e.ez,a=e.is0();null!=t||(t=a?Dn:i.inv(o));var s=f(n*t),c=f(r*t),l=f(o*t);if(a)return{x:In,y:Ln};if(l!==Ln)throw new Error("invZ was invalid");return{x:s,y:c}}),E=(0,Pn.memoized)(e=>{var t=r.a,n=r.d;if(e.is0())throw new Error("bad point: ZERO");var i=e.ex,o=e.ey,a=e.ez,s=e.et,c=f(i*i),l=f(o*o),u=f(a*a),d=f(u*u),h=f(c*t);if(f(u*f(h+l))!==f(d+f(n*f(c*l))))throw new Error("bad point: equation left != right (1)");if(f(i*o)!==f(a*s))throw new Error("bad point: equation left != right (2)");return!0});class _{constructor(e,t,n,r){this.ex=e,this.ey=t,this.ez=n,this.et=r,y("x",e),y("y",t),y("z",n),y("t",r),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(e){if(e instanceof _)throw new Error("extended point not allowed");var t=e||{},n=t.x,r=t.y;return y("x",n),y("y",r),new _(n,r,Ln,f(n*r))}static normalizeZ(e){var t=i.invertBatch(e.map(e=>e.ez));return e.map((e,n)=>e.toAffine(t[n])).map(_.fromAffine)}static msm(e,t){return(0,Mn.pippenger)(_,p,e,t)}_setWindowSize(e){C.setWindowSize(this,e)}assertValidity(){E(this)}equals(e){b(e);var t=this.ex,n=this.ey,r=this.ez,i=e.ex,o=e.ey,a=e.ez,s=f(t*a),c=f(i*r),l=f(n*a),u=f(o*r);return s===c&&l===u}is0(){return this.equals(_.ZERO)}negate(){return new _(f(-this.ex),this.ey,this.ez,f(-this.et))}double(){var e=r.a,t=this.ex,n=this.ey,i=this.ez,o=f(t*t),a=f(n*n),s=f(Nn*f(i*i)),c=f(e*o),l=t+n,u=f(f(l*l)-o-a),d=c+a,h=d-s,p=c-a,v=f(u*h),m=f(d*p),g=f(u*p),y=f(h*d);return new _(v,m,y,g)}add(e){b(e);var t=r.a,n=r.d,i=this.ex,o=this.ey,a=this.ez,s=this.et,c=e.ex,l=e.ey,u=e.ez,d=e.et;if(t===BigInt(-1)){var h=f((o-i)*(l+c)),p=f((o+i)*(l-c)),v=f(p-h);if(v===In)return this.double();var m=f(a*Nn*d),g=f(s*Nn*u),y=g+m,w=p+h,E=g-m,S=f(y*v),k=f(w*E),C=f(y*E),A=f(v*w);return new _(S,k,A,C)}var x=f(i*c),T=f(o*l),M=f(s*n*d),O=f(a*u),R=f((i+o)*(c+l)-x-T),P=O-M,I=O+M,L=f(T-t*x),N=f(R*P),D=f(I*L),B=f(R*L),$=f(P*I);return new _(N,D,$,B)}subtract(e){return this.add(e.negate())}wNAF(e){return C.wNAFCached(this,e,_.normalizeZ)}multiply(e){var t=e;Rn.aInRange("scalar",t,Ln,o);var n=this.wNAF(t),r=n.p,i=n.f;return _.normalizeZ([r,i])[0]}multiplyUnsafe(e){var t=e;return Rn.aInRange("scalar",t,In,o),t===In?k:this.equals(k)||t===Ln?this:this.equals(S)?this.wNAF(t).p:C.unsafeLadder(this,t)}isSmallOrder(){return this.multiplyUnsafe(u).is0()}isTorsionFree(){return C.unsafeLadder(this,o).is0()}toAffine(e){return w(this,e)}clearCofactor(){var e=r.h;return e===Ln?this:this.multiplyUnsafe(e)}static fromHex(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=r.d,o=r.a,a=i.BYTES;e=(0,Pn.ensureBytes)("pointHex",e,a),(0,Pn.abool)("zip215",t);var s=e.slice(),c=e[a-1];s[a-1]=-129&c;var l=Rn.bytesToNumberLE(s),u=t?d:i.ORDER;Rn.aInRange("pointHex.y",l,In,u);var h=f(l*l),p=f(h-Ln),m=f(n*h-o),g=v(p,m),y=g.isValid,b=g.value;if(!y)throw new Error("Point.fromHex: invalid y coordinate");var w=(b&Ln)===Ln,E=!!(128&c);if(!t&&b===In&&E)throw new Error("Point.fromHex: x=0 and x_0=1");return E!==w&&(b=f(-b)),_.fromAffine({x:b,y:l})}static fromPrivateKey(e){return T(e).point}toRawBytes(){var e=this.toAffine(),t=e.x,n=e.y,r=Rn.numberToBytesLE(n,i.BYTES);return r[r.length-1]|=t&Ln?128:0,r}toHex(){return Rn.bytesToHex(this.toRawBytes())}}_.BASE=new _(r.Gx,r.Gy,Ln,f(r.Gx*r.Gy)),_.ZERO=new _(In,Ln,Ln,In);var S=_.BASE,k=_.ZERO,C=(0,Mn.wNAF)(_,8*l);function A(e){return(0,On.mod)(e,o)}function x(e){return A(Rn.bytesToNumberLE(e))}function T(e){var t=l;e=(0,Pn.ensureBytes)("private key",e,t);var n=(0,Pn.ensureBytes)("hashed private key",s(e),2*t),r=m(n.slice(0,t)),i=n.slice(t,2*t),o=x(r),a=S.multiply(o),c=a.toRawBytes();return{head:r,prefix:i,scalar:o,point:a,pointBytes:c}}function M(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Uint8Array,t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=Rn.concatBytes(...n);return x(s(g(i,(0,Pn.ensureBytes)("context",e),!!a)))}var O=Bn;return S._setWindowSize(8),{CURVE:r,getPublicKey:function(e){return T(e).pointBytes},sign:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e=(0,Pn.ensureBytes)("message",e),a&&(e=a(e));var r=T(t),s=r.prefix,c=r.scalar,u=r.pointBytes,d=M(n.context,s,e),h=S.multiply(d).toRawBytes(),f=A(d+M(n.context,h,u,e)*c);Rn.aInRange("signature.s",f,In,o);var p=Rn.concatBytes(h,Rn.numberToBytesLE(f,i.BYTES));return(0,Pn.ensureBytes)("result",p,2*l)},verify:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:O,o=r.context,s=r.zip215,c=i.BYTES;e=(0,Pn.ensureBytes)("signature",e,2*c),t=(0,Pn.ensureBytes)("message",t),void 0!==s&&(0,Pn.abool)("zip215",s),a&&(t=a(t));var l,u,d,h=Rn.bytesToNumberLE(e.slice(c,2*c));try{l=_.fromHex(n,s),u=_.fromHex(e.slice(0,c),s),d=S.multiplyUnsafe(h)}catch(p){return!1}if(!s&&l.isSmallOrder())return!1;var f=M(o,u.toRawBytes(),l.toRawBytes(),t);return u.add(l.multiplyUnsafe(f)).subtract(d).clearCofactor().equals(_.ZERO)},ExtendedPoint:_,utils:{getExtendedPublicKey:T,randomPrivateKey:()=>c(i.BYTES),precompute:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_.BASE;return t._setWindowSize(e),t.multiply(BigInt(3)),t}}}},Mn=tn,On=nn,Rn=rn,Pn=rn,In=BigInt(0),Ln=BigInt(1),Nn=BigInt(2),Dn=BigInt(8),Bn={zip215:!0},$n={},Object.defineProperty($n,"__esModule",{value:!0}),$n.expand_message_xmd=_f,$n.expand_message_xof=Sf,$n.hash_to_field=kf,$n.isogenyMap=function(e,t){var n=t.map(e=>Array.from(e).reverse());return(t,r)=>{var i=p(n.map(n=>n.reduce((n,r)=>e.add(e.mul(n,t),r))),4),o=i[0],a=i[1],s=i[2],c=i[3];return t=e.div(o,a),r=e.mul(r,e.div(s,c)),{x:t,y:r}}},$n.createHasher=function(e,t,n){if("function"!=typeof t)throw new Error("mapToCurve() must be defined");return{hashToCurve(r,i){var o=kf(r,2,h(h({},n),{},{DST:n.DST},i)),a=e.fromAffine(t(o[0])),s=e.fromAffine(t(o[1])),c=a.add(s).clearCofactor();return c.assertValidity(),c},encodeToCurve(r,i){var o=kf(r,1,h(h({},n),{},{DST:n.encodeDST},i)),a=e.fromAffine(t(o[0])).clearCofactor();return a.assertValidity(),a},mapToCurve(n){if(!Array.isArray(n))throw new Error("mapToCurve: expected array of bigints");var r,i=l(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;if("bigint"!=typeof o)throw new Error(`mapToCurve: expected array of bigints, got ${o} in array`)}}catch(fs){i.e(fs)}finally{i.f()}var a=e.fromAffine(t(n)).clearCofactor();return a.assertValidity(),a}}},jn=nn,Un=(Kn=rn).bytesToNumberBE,Hn={},Object.defineProperty(Hn,"__esModule",{value:!0}),Hn.montgomery=function(e){var t,n=(t=e,(0,zn.validateObject)(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze(h({},t))),r=n.P,i=e=>(0,Fn.mod)(e,r),o=n.montgomeryBits,a=Math.ceil(o/8),s=n.nByteLength,c=n.adjustScalarBytes||(e=>e),l=n.powPminus2||(e=>(0,Fn.pow)(e,r-BigInt(2),r));function u(e,t,n){var r=i(e*(t-n));return[t=i(t-r),n=i(n+r)]}var d=(n.a-BigInt(2))/BigInt(4);function f(e){return(0,zn.numberToBytesLE)(i(e),a)}function p(e,t){var n,h,p=(n=t,h=(0,zn.ensureBytes)("u coordinate",n,a),32===s&&(h[31]&=127),(0,zn.bytesToNumberLE)(h)),v=function(e){var t=(0,zn.ensureBytes)("scalar",e),n=t.length;if(n!==a&&n!==s)throw new Error(`Expected ${a} or ${s} bytes, got ${n}`);return(0,zn.bytesToNumberLE)(c(t))}(e),m=function(e,t){(0,zn.aInRange)("u",e,qn,r),(0,zn.aInRange)("scalar",t,qn,r);for(var n,a=t,s=e,c=Vn,h=qn,f=e,p=Vn,v=qn,m=BigInt(o-1);m>=qn;m--){var g=a>>m&Vn;c=(n=u(v^=g,c,f))[0],f=n[1],h=(n=u(v,h,p))[0],p=n[1],v=g;var y=c+h,b=i(y*y),w=c-h,E=i(w*w),_=b-E,S=f+p,k=i((f-p)*y),C=i(S*w),A=k+C,x=k-C;f=i(A*A),p=i(s*i(x*x)),c=i(b*E),h=i(_*(b+i(d*_)))}c=(n=u(v,c,f))[0],f=n[1],h=(n=u(v,h,p))[0],p=n[1];var T=l(h);return i(c*T)}(p,v);if(m===qn)throw new Error("Invalid private or public key received");return f(m)}var v=f(n.Gu);function m(e){return p(e,v)}return{scalarMult:p,scalarMultBase:m,getSharedSecret:(e,t)=>p(e,t),getPublicKey:e=>m(e),utils:{randomPrivateKey:()=>n.randomBytes(n.nByteLength)},GuBytes:v}},Fn=nn,zn=rn,qn=BigInt(0),Vn=BigInt(1),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hash_to_ristretto255=e.hashToRistretto255=e.RistrettoPoint=e.encodeToCurve=e.hashToCurve=e.edwardsToMontgomery=e.x25519=e.ed25519ph=e.ed25519ctx=e.ed25519=e.ED25519_TORSION_SUBGROUP=void 0,e.edwardsToMontgomeryPub=S,e.edwardsToMontgomeryPriv=function(e){var t=E.hash(e.subarray(0,32));return E.adjustScalarBytes(t).subarray(0,32)};var t=pt,n=gt,r=en,i=$n,o=nn,a=Hn,s=rn,c=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),u=BigInt(0),d=BigInt(1),f=BigInt(2),p=BigInt(3),v=BigInt(5),m=BigInt(8);function g(e){var t=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),a=c,s=e*e%a*e%a,l=(0,o.pow2)(s,f,a)*s%a,u=(0,o.pow2)(l,d,a)*e%a,h=(0,o.pow2)(u,v,a)*u%a,p=(0,o.pow2)(h,t,a)*h%a,m=(0,o.pow2)(p,n,a)*p%a,g=(0,o.pow2)(m,r,a)*m%a,y=(0,o.pow2)(g,i,a)*g%a,b=(0,o.pow2)(y,i,a)*g%a,w=(0,o.pow2)(b,t,a)*h%a;return{pow_p_5_8:(0,o.pow2)(w,f,a)*e%a,b2:s}}function y(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function b(e,t){var n=c,r=(0,o.mod)(t*t*t,n),i=g(e*(0,o.mod)(r*r*t,n)).pow_p_5_8,a=(0,o.mod)(e*r*i,n),s=(0,o.mod)(t*a*a,n),u=a,d=(0,o.mod)(a*l,n),h=s===e,f=s===(0,o.mod)(-e,n),p=s===(0,o.mod)(-e*l,n);return h&&(a=u),(f||p)&&(a=d),(0,o.isNegativeLE)(a,n)&&(a=(0,o.mod)(-a,n)),{isValid:h||f,value:a}}e.ED25519_TORSION_SUBGROUP=["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"];var w=(0,o.Field)(c,void 0,!0),E={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:w,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:m,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:t.sha512,randomBytes:n.randomBytes,adjustScalarBytes:y,uvRatio:b};function _(e,t,r){if(t.length>255)throw new Error("Context is too big");return(0,n.concatBytes)((0,n.utf8ToBytes)("SigEd25519 no Ed25519 collisions"),new Uint8Array([r?1:0,t.length]),t,e)}function S(t){var n=e.ed25519.ExtendedPoint.fromHex(t).y,r=BigInt(1);return w.toBytes(w.create((r+n)*w.inv(r-n)))}e.ed25519=(0,r.twistedEdwards)(E),e.ed25519ctx=(0,r.twistedEdwards)(h(h({},E),{},{domain:_})),e.ed25519ph=(0,r.twistedEdwards)(Object.assign({},E,{domain:_,prehash:t.sha512})),e.x25519=(0,a.montgomery)({P:c,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:e=>{var t=c,n=g(e),r=n.pow_p_5_8,i=n.b2;return(0,o.mod)((0,o.pow2)(r,p,t)*i,t)},adjustScalarBytes:y,randomBytes:n.randomBytes}),e.edwardsToMontgomery=S;var k=(w.ORDER+p)/m,C=w.pow(f,k),A=w.sqrt(w.neg(w.ONE)),x=(0,o.FpSqrtEven)(w,w.neg(BigInt(486664)));var T=(0,i.createHasher)(e.ed25519.ExtendedPoint,e=>function(e){var t=function(e){var t=(w.ORDER-v)/m,n=BigInt(486662),r=w.sqr(e);r=w.mul(r,f);var i=w.add(r,w.ONE),o=w.neg(n),a=w.sqr(i),s=w.mul(a,i),c=w.mul(r,n);c=w.mul(c,o),c=w.add(c,a),c=w.mul(c,o);var l=w.sqr(s);a=w.sqr(l),l=w.mul(l,s),l=w.mul(l,c),a=w.mul(a,l);var u=w.pow(a,t);u=w.mul(u,l);var h=w.mul(u,A);a=w.sqr(u),a=w.mul(a,s);var p=w.eql(a,c),g=w.cmov(h,u,p),y=w.mul(o,r),b=w.mul(u,e);b=w.mul(b,C);var E=w.mul(b,A),_=w.mul(c,r);a=w.sqr(b),a=w.mul(a,s);var S=w.eql(a,_),k=w.cmov(E,b,S);a=w.sqr(g),a=w.mul(a,s);var x=w.eql(a,c),T=w.cmov(y,o,x),M=w.cmov(k,g,x),O=w.isOdd(M);return{xMn:T,xMd:i,yMn:M=w.cmov(M,w.neg(M),x!==O),yMd:d}}(e),n=t.xMn,r=t.xMd,i=t.yMn,o=t.yMd,a=w.mul(n,o);a=w.mul(a,x);var s=w.mul(r,i),c=w.sub(n,r),l=w.add(n,r),u=w.mul(s,l),h=w.eql(u,w.ZERO);a=w.cmov(a,w.ZERO,h),s=w.cmov(s,w.ONE,h),c=w.cmov(c,w.ONE,h),l=w.cmov(l,w.ONE,h);var p=w.invertBatch([s,l]);return{x:w.mul(a,p[0]),y:w.mul(c,p[1])}}(e[0]),{DST:"edwards25519_XMD:SHA-512_ELL2_RO_",encodeDST:"edwards25519_XMD:SHA-512_ELL2_NU_",p:w.ORDER,m:1,k:128,expand:"xmd",hash:t.sha512});function M(e){if(!(e instanceof j))throw new Error("RistrettoPoint expected")}e.hashToCurve=T.hashToCurve,e.encodeToCurve=T.encodeToCurve;var O=l,R=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),P=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),I=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),L=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),N=e=>b(d,e),D=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),B=t=>e.ed25519.CURVE.Fp.create((0,s.bytesToNumberLE)(t)&D);function $(t){var n=e.ed25519.CURVE.d,r=e.ed25519.CURVE.Fp.ORDER,i=e.ed25519.CURVE.Fp.create,a=i(O*t*t),s=i((a+d)*I),c=BigInt(-1),l=i((c-n*a)*i(a+n)),u=b(s,l),h=u.isValid,f=u.value,p=i(f*t);(0,o.isNegativeLE)(p,r)||(p=i(-p)),h||(f=p),h||(c=a);var v=i(c*(a-d)*L-l),m=f*f,g=i((f+f)*l),y=i(v*R),w=i(d-m),E=i(d+m);return new e.ed25519.ExtendedPoint(i(g*E),i(w*y),i(y*E),i(g*w))}class j{constructor(e){this.ep=e}static fromAffine(t){return new j(e.ed25519.ExtendedPoint.fromAffine(t))}static hashToCurve(e){e=(0,s.ensureBytes)("ristrettoHash",e,64);var t=$(B(e.slice(0,32))),n=$(B(e.slice(32,64)));return new j(t.add(n))}static fromHex(t){t=(0,s.ensureBytes)("ristrettoHex",t,32);var n=e.ed25519.CURVE,r=n.a,i=n.d,a=e.ed25519.CURVE.Fp.ORDER,c=e.ed25519.CURVE.Fp.create,l="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",h=B(t);if(!(0,s.equalBytes)((0,s.numberToBytesLE)(h,32),t)||(0,o.isNegativeLE)(h,a))throw new Error(l);var f=c(h*h),p=c(d+r*f),v=c(d-r*f),m=c(p*p),g=c(v*v),y=c(r*i*m-g),b=N(c(y*g)),w=b.isValid,E=b.value,_=c(E*v),S=c(E*_*y),k=c((h+h)*_);(0,o.isNegativeLE)(k,a)&&(k=c(-k));var C=c(p*S),A=c(k*C);if(!w||(0,o.isNegativeLE)(A,a)||C===u)throw new Error(l);return new j(new e.ed25519.ExtendedPoint(k,C,d,A))}toRawBytes(){var t,n=this.ep,r=n.ex,i=n.ey,a=n.ez,c=n.et,l=e.ed25519.CURVE.Fp.ORDER,u=e.ed25519.CURVE.Fp.create,d=u(u(a+i)*u(a-i)),h=u(r*i),f=u(h*h),p=N(u(d*f)).value,v=u(p*d),m=u(p*h),g=u(v*m*c);if((0,o.isNegativeLE)(c*g,l)){var y=u(i*O),b=u(r*O);r=y,i=b,t=u(v*P)}else t=m;(0,o.isNegativeLE)(r*g,l)&&(i=u(-i));var w=u((a-i)*t);return(0,o.isNegativeLE)(w,l)&&(w=u(-w)),(0,s.numberToBytesLE)(w,32)}toHex(){return(0,s.bytesToHex)(this.toRawBytes())}toString(){return this.toHex()}equals(t){M(t);var n=this.ep,r=n.ex,i=n.ey,o=t.ep,a=o.ex,s=o.ey,c=e.ed25519.CURVE.Fp.create,l=c(r*s)===c(i*a),u=c(i*s)===c(r*a);return l||u}add(e){return M(e),new j(this.ep.add(e.ep))}subtract(e){return M(e),new j(this.ep.subtract(e.ep))}multiply(e){return new j(this.ep.multiply(e))}multiplyUnsafe(e){return new j(this.ep.multiplyUnsafe(e))}double(){return new j(this.ep.double())}negate(){return new j(this.ep.negate())}}e.RistrettoPoint=(j.BASE||(j.BASE=new j(e.ed25519.ExtendedPoint.BASE)),j.ZERO||(j.ZERO=new j(e.ed25519.ExtendedPoint.ZERO)),j),e.hashToRistretto255=(e,r)=>{var o=r.DST,a="string"==typeof o?(0,n.utf8ToBytes)(o):o,s=(0,i.expand_message_xmd)(e,a,64,t.sha512);return j.hashToCurve(s)},e.hash_to_ristretto255=e.hashToRistretto255}(ft),Wn={},Gn={},Object.defineProperty(Gn,"__esModule",{value:!0}),Gn.sha224=Gn.sha256=Gn.SHA256=void 0,Yn=vt,Zn=gt,Jn=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Xn=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Qn=new Uint32Array(64),er=class extends Yn.HashMD{constructor(){super(64,32,8,!1),this.A=0|Xn[0],this.B=0|Xn[1],this.C=0|Xn[2],this.D=0|Xn[3],this.E=0|Xn[4],this.F=0|Xn[5],this.G=0|Xn[6],this.H=0|Xn[7]}get(){return[this.A,this.B,this.C,this.D,this.E,this.F,this.G,this.H]}set(e,t,n,r,i,o,a,s){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|o,this.G=0|a,this.H=0|s}process(e,t){for(var n=0;n<16;n++,t+=4)Qn[n]=e.getUint32(t,!1);for(var r=16;r<64;r++){var i=Qn[r-15],o=Qn[r-2],a=(0,Zn.rotr)(i,7)^(0,Zn.rotr)(i,18)^i>>>3;Qn[r]=((0,Zn.rotr)(o,17)^(0,Zn.rotr)(o,19)^o>>>10)+Qn[r-7]+a+Qn[r-16]|0}for(var s=this.A,c=this.B,l=this.C,u=this.D,d=this.E,h=this.F,f=this.G,p=this.H,v=0;v<64;v++){var m=p+((0,Zn.rotr)(d,6)^(0,Zn.rotr)(d,11)^(0,Zn.rotr)(d,25))+(0,Yn.Chi)(d,h,f)+Jn[v]+Qn[v]|0,g=((0,Zn.rotr)(s,2)^(0,Zn.rotr)(s,13)^(0,Zn.rotr)(s,22))+(0,Yn.Maj)(s,c,l)|0;p=f,f=h,h=d,d=u+m|0,u=l,l=c,c=s,s=m+g|0}s=s+this.A|0,c=c+this.B|0,l=l+this.C|0,u=u+this.D|0,d=d+this.E|0,h=h+this.F|0,f=f+this.G|0,p=p+this.H|0,this.set(s,c,l,u,d,h,f,p)}roundClean(){Qn.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},Gn.SHA256=er,tr=class extends er{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}},Gn.sha256=(0,Zn.wrapConstructor)(()=>new er),Gn.sha224=(0,Zn.wrapConstructor)(()=>new tr),nr={},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hmac=e.HMAC=void 0;var t=mt,n=gt;class r extends n.Hash{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,(0,t.hash)(e);var i=(0,n.toBytes)(r);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;var o=this.blockLen,a=new Uint8Array(o);a.set(i.length>o?e.create().update(i).digest():i);for(var s=0;s<a.length;s++)a[s]^=54;this.iHash.update(a),this.oHash=e.create();for(var c=0;c<a.length;c++)a[c]^=106;this.oHash.update(a),a.fill(0)}update(e){return(0,t.exists)(this),this.iHash.update(e),this}digestInto(e){(0,t.exists)(this),(0,t.bytes)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){var e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));var t=this.oHash,n=this.iHash,r=this.finished,i=this.destroyed,o=this.blockLen,a=this.outputLen;return e.finished=r,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}e.HMAC=r,e.hmac=(e,t,n)=>new r(e,t).update(n).digest(),e.hmac.create=(e,t)=>new r(e,t)}(rr={}),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DER=void 0,e.weierstrassPoints=v,e.weierstrass=function(a){var s,l,d=(s=a,l=(0,t.validateBasic)(s),r.validateObject(l,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze(h({lowS:!0},l))),f=d.Fp,p=d.n,m=f.BYTES+1,g=2*f.BYTES+1;function y(e){return n.mod(e,p)}function b(e){return n.invert(e,p)}var w=v(h(h({},d),{},{toBytes(e,t,n){var o=t.toAffine(),a=f.toBytes(o.x),s=r.concatBytes;return(0,i.abool)("isCompressed",n),n?s(Uint8Array.from([t.hasEvenY()?2:3]),a):s(Uint8Array.from([4]),a,f.toBytes(o.y))},fromBytes(e){var t=e.length,n=e[0],i=e.subarray(1);if(t!==m||2!==n&&3!==n){if(t===g&&4===n)return{x:f.fromBytes(i.subarray(0,f.BYTES)),y:f.fromBytes(i.subarray(f.BYTES,2*f.BYTES))};throw new Error(`Point of length ${t} was invalid. Expected ${m} compressed bytes or ${g} uncompressed bytes`)}var o=r.bytesToNumberBE(i);if(!r.inRange(o,u,f.ORDER))throw new Error("Point is not on curve");var a,s=S(o);try{a=f.sqrt(s)}catch(l){var c=l instanceof Error?": "+l.message:"";throw new Error("Point is not on curve"+c)}return!(1&~n)!=((a&u)===u)&&(a=f.neg(a)),{x:o,y:a}}})),E=w.ProjectivePoint,_=w.normPrivateKeyToScalar,S=w.weierstrassEquation,k=w.isWithinCurveOrder,C=e=>r.bytesToHex(r.numberToBytesBE(e,d.nByteLength));function A(e){return e>p>>u}var x=(e,t,n)=>r.bytesToNumberBE(e.slice(t,n));class T{constructor(e,t,n){this.r=e,this.s=t,this.recovery=n,this.assertValidity()}static fromCompact(e){var t=d.nByteLength;return e=(0,i.ensureBytes)("compactSignature",e,2*t),new T(x(e,0,t),x(e,t,2*t))}static fromDER(t){var n=e.DER.toSig((0,i.ensureBytes)("DER",t)),r=n.r,o=n.s;return new T(r,o)}assertValidity(){r.aInRange("r",this.r,u,p),r.aInRange("s",this.s,u,p)}addRecoveryBit(e){return new T(this.r,this.s,e)}recoverPublicKey(e){var t=this.r,n=this.s,r=this.recovery,o=P((0,i.ensureBytes)("msgHash",e));if(null==r||![0,1,2,3].includes(r))throw new Error("recovery id invalid");var a=2===r||3===r?t+d.n:t;if(a>=f.ORDER)throw new Error("recovery id 2 or 3 invalid");var s=1&r?"03":"02",c=E.fromHex(s+C(a)),l=b(a),u=y(-o*l),h=y(n*l),p=E.BASE.multiplyAndAddUnsafe(c,u,h);if(!p)throw new Error("point at infinify");return p.assertValidity(),p}hasHighS(){return A(this.s)}normalizeS(){return this.hasHighS()?new T(this.r,y(-this.s),this.recovery):this}toDERRawBytes(){return r.hexToBytes(this.toDERHex())}toDERHex(){return e.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return r.hexToBytes(this.toCompactHex())}toCompactHex(){return C(this.r)+C(this.s)}}var M={isValidPrivateKey(e){try{return _(e),!0}catch(t){return!1}},normPrivateKeyToScalar:_,randomPrivateKey:()=>{var e=n.getMinHashLength(d.n);return n.mapHashToField(d.randomBytes(e),d.n)},precompute:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:E.BASE;return t._setWindowSize(e),t.multiply(BigInt(3)),t}};function O(e){var t=r.isBytes(e),n="string"==typeof e,i=(t||n)&&e.length;return t?i===m||i===g:n?i===2*m||i===2*g:e instanceof E}var R=d.bits2int||function(e){var t=r.bytesToNumberBE(e),n=8*e.length-d.nBitLength;return n>0?t>>BigInt(n):t},P=d.bits2int_modN||function(e){return y(R(e))},I=r.bitMask(d.nBitLength);function L(e){return r.aInRange(`num < 2^${d.nBitLength}`,e,c,I),r.numberToBytesBE(e,d.nByteLength)}var N={lowS:d.lowS,prehash:!1},D={lowS:d.lowS,prehash:!1};return E.BASE._setWindowSize(8),{CURVE:d,getPublicKey:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return E.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(O(e))throw new Error("first arg must be private key");if(!O(t))throw new Error("second arg must be public key");return E.fromHex(t).multiply(_(e)).toRawBytes(n)},sign:function(e,t){var n=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:N;if(["recovered","canonical"].some(e=>e in n))throw new Error("sign() legacy options not supported");var a=d.hash,s=d.randomBytes,l=n.lowS,h=n.prehash,p=n.extraEntropy;null!=l||(l=!0),e=(0,i.ensureBytes)("msgHash",e),o(n),h&&(e=(0,i.ensureBytes)("prehashed msgHash",a(e)));var v=P(e),m=_(t),g=[L(m),L(v)];if(null!=p&&!1!==p){var w=!0===p?s(f.BYTES):p;g.push((0,i.ensureBytes)("extraEntropy",w))}var S=r.concatBytes(...g),C=v;return{seed:S,k2sig:function(e){var t=R(e);if(k(t)){var n=b(t),r=E.BASE.multiply(t).toAffine(),i=y(r.x);if(i!==c){var o=y(n*y(C+i*m));if(o!==c){var a,s=(r.x===i?0:2)|Number(r.y&u),d=o;return l&&A(o)&&(d=A(a=o)?y(-a):a,s^=1),new T(i,d,s)}}}}}}(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:N),a=n.seed,s=n.k2sig,l=d;return r.createHmacDrbg(l.hash.outputLen,l.nByteLength,l.hmac)(a,s)},verify:function(t,n,a){var s,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:D,l=t;if(n=(0,i.ensureBytes)("msgHash",n),a=(0,i.ensureBytes)("publicKey",a),"strict"in c)throw new Error("options.strict was renamed to lowS");o(c);var u,h,f=c.lowS,p=c.prehash;try{if("string"==typeof l||r.isBytes(l))try{u=T.fromDER(l)}catch(m){if(!(m instanceof e.DER.Err))throw m;u=T.fromCompact(l)}else{if("object"!=typeof l||"bigint"!=typeof l.r||"bigint"!=typeof l.s)throw new Error("PARSE");var v=l.r,m=l.s;u=new T(v,m)}h=E.fromHex(a)}catch(v){if("PARSE"===v.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(f&&u.hasHighS())return!1;p&&(n=d.hash(n));var g=u,w=g.r,_=g.s,S=P(n),k=b(_),C=y(S*k),A=y(w*k),x=null===(s=E.BASE.multiplyAndAddUnsafe(h,C,A))||void 0===s?void 0:s.toAffine();return!!x&&y(x.x)===w},ProjectivePoint:E,Signature:T,utils:M}},e.SWUFpSqrtRatio=m,e.mapToCurveSimpleSWU=function(e,t){if(n.validateField(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");var r=m(e,t.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return n=>{var i,o,a,s,c,l,u,d;i=e.sqr(n),i=e.mul(i,t.Z),o=e.sqr(i),o=e.add(o,i),a=e.add(o,e.ONE),a=e.mul(a,t.B),s=e.cmov(t.Z,e.neg(o),!e.eql(o,e.ZERO)),s=e.mul(s,t.A),o=e.sqr(a),l=e.sqr(s),c=e.mul(l,t.A),o=e.add(o,c),o=e.mul(o,a),l=e.mul(l,s),c=e.mul(l,t.B),o=e.add(o,c),u=e.mul(i,a);var h=r(o,l),f=h.isValid,p=h.value;d=e.mul(i,n),d=e.mul(d,p),u=e.cmov(u,a,f),d=e.cmov(d,p,f);var v=e.isOdd(n)===e.isOdd(d);return d=e.cmov(e.neg(d),d,v),{x:u=e.div(u,s),y:d}}};var t=tn,n=nn,r=rn,i=rn;function o(e){void 0!==e.lowS&&(0,i.abool)("lowS",e.lowS),void 0!==e.prehash&&(0,i.abool)("prehash",e.prehash)}var a=r.bytesToNumberBE,s=r.hexToBytes;e.DER={Err:class extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}},_tlv:{encode:(t,n)=>{var i=e.DER.Err;if(t<0||t>256)throw new i("tlv.encode: wrong tag");if(1&n.length)throw new i("tlv.encode: unpadded data");var o=n.length/2,a=r.numberToHexUnpadded(o);if(a.length/2&128)throw new i("tlv.encode: long form length too big");var s=o>127?r.numberToHexUnpadded(a.length/2|128):"";return`${r.numberToHexUnpadded(t)}${s}${a}${n}`},decode(t,n){var r=e.DER.Err,i=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(n.length<2||n[i++]!==t)throw new r("tlv.decode: wrong tlv");var o=n[i++],a=0;if(128&o){var s=127&o;if(!s)throw new r("tlv.decode(long): indefinite length not supported");if(s>4)throw new r("tlv.decode(long): byte length is too big");var c=n.subarray(i,i+s);if(c.length!==s)throw new r("tlv.decode: length bytes not complete");if(0===c[0])throw new r("tlv.decode(long): zero leftmost byte");var u,d=l(c);try{for(d.s();!(u=d.n()).done;){a=a<<8|u.value}}catch(fs){d.e(fs)}finally{d.f()}if(i+=s,a<128)throw new r("tlv.decode(long): not minimal encoding")}else a=o;var h=n.subarray(i,i+a);if(h.length!==a)throw new r("tlv.decode: wrong value length");return{v:h,l:n.subarray(i+a)}}},_int:{encode(t){var n=e.DER.Err;if(t<c)throw new n("integer: negative integers are not allowed");var i=r.numberToHexUnpadded(t);if(8&Number.parseInt(i[0],16)&&(i="00"+i),1&i.length)throw new n("unexpected assertion");return i},decode(t){var n=e.DER.Err;if(128&t[0])throw new n("Invalid signature integer: negative");if(0===t[0]&&!(128&t[1]))throw new n("Invalid signature integer: unnecessary leading zero");return a(t)}},toSig(t){var n=e.DER,i=n.Err,o=n._int,a=n._tlv,c="string"==typeof t?s(t):t;r.abytes(c);var l=a.decode(48,c),u=l.v;if(l.l.length)throw new i("Invalid signature: left bytes after parsing");var d=a.decode(2,u),h=d.v,f=d.l,p=a.decode(2,f),v=p.v;if(p.l.length)throw new i("Invalid signature: left bytes after parsing");return{r:o.decode(h),s:o.decode(v)}},hexFromSig(t){var n=e.DER,r=n._tlv,i=n._int,o=`${r.encode(2,i.encode(t.r))}${r.encode(2,i.encode(t.s))}`;return r.encode(48,o)}};var c=BigInt(0),u=BigInt(1),d=BigInt(2),f=BigInt(3),p=BigInt(4);function v(e){var o=function(e){var n=(0,t.validateBasic)(e);r.validateObject(n,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});var i=n.endo,o=n.Fp,a=n.a;if(i){if(!o.eql(a,o.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof i||"bigint"!=typeof i.beta||"function"!=typeof i.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze(h({},n))}(e),a=o.Fp,s=n.Field(o.n,o.nBitLength),l=o.toBytes||((e,t,n)=>{var i=t.toAffine();return r.concatBytes(Uint8Array.from([4]),a.toBytes(i.x),a.toBytes(i.y))}),d=o.fromBytes||(e=>{var t=e.subarray(1);return{x:a.fromBytes(t.subarray(0,a.BYTES)),y:a.fromBytes(t.subarray(a.BYTES,2*a.BYTES))}});function p(e){var t=o.a,n=o.b,r=a.sqr(e),i=a.mul(r,e);return a.add(a.add(i,a.mul(e,t)),n)}if(!a.eql(a.sqr(o.Gy),p(o.Gx)))throw new Error("bad generator point: equation left != right");function v(e){var t,a=o.allowedPrivateKeyLengths,s=o.nByteLength,c=o.wrapPrivateKey,l=o.n;if(a&&"bigint"!=typeof e){if(r.isBytes(e)&&(e=r.bytesToHex(e)),"string"!=typeof e||!a.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*s,"0")}try{t="bigint"==typeof e?e:r.bytesToNumberBE((0,i.ensureBytes)("private key",e,s))}catch(d){throw new Error(`private key must be ${s} bytes, hex or bigint, not ${typeof e}`)}return c&&(t=n.mod(t,l)),r.aInRange("private key",t,u,l),t}function m(e){if(!(e instanceof b))throw new Error("ProjectivePoint expected")}var g=(0,i.memoized)((e,t)=>{var n=e.px,r=e.py,i=e.pz;if(a.eql(i,a.ONE))return{x:n,y:r};var o=e.is0();null!=t||(t=o?a.ONE:a.inv(i));var s=a.mul(n,t),c=a.mul(r,t),l=a.mul(i,t);if(o)return{x:a.ZERO,y:a.ZERO};if(!a.eql(l,a.ONE))throw new Error("invZ was invalid");return{x:s,y:c}}),y=(0,i.memoized)(e=>{if(e.is0()){if(o.allowInfinityPoint&&!a.is0(e.py))return;throw new Error("bad point: ZERO")}var t=e.toAffine(),n=t.x,r=t.y;if(!a.isValid(n)||!a.isValid(r))throw new Error("bad point: x or y not FE");var i=a.sqr(r),s=p(n);if(!a.eql(i,s))throw new Error("bad point: equation left != right");if(!e.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class b{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!a.isValid(e))throw new Error("x required");if(null==t||!a.isValid(t))throw new Error("y required");if(null==n||!a.isValid(n))throw new Error("z required");Object.freeze(this)}static fromAffine(e){var t=e||{},n=t.x,r=t.y;if(!e||!a.isValid(n)||!a.isValid(r))throw new Error("invalid affine point");if(e instanceof b)throw new Error("projective point not allowed");var i=e=>a.eql(e,a.ZERO);return i(n)&&i(r)?b.ZERO:new b(n,r,a.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){var t=a.invertBatch(e.map(e=>e.pz));return e.map((e,n)=>e.toAffine(t[n])).map(b.fromAffine)}static fromHex(e){var t=b.fromAffine(d((0,i.ensureBytes)("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return b.BASE.multiply(v(e))}static msm(e,n){return(0,t.pippenger)(b,s,e,n)}_setWindowSize(e){E.setWindowSize(this,e)}assertValidity(){y(this)}hasEvenY(){var e=this.toAffine().y;if(a.isOdd)return!a.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){m(e);var t=this.px,n=this.py,r=this.pz,i=e.px,o=e.py,s=e.pz,c=a.eql(a.mul(t,s),a.mul(i,r)),l=a.eql(a.mul(n,s),a.mul(o,r));return c&&l}negate(){return new b(this.px,a.neg(this.py),this.pz)}double(){var e=o.a,t=o.b,n=a.mul(t,f),r=this.px,i=this.py,s=this.pz,c=a.ZERO,l=a.ZERO,u=a.ZERO,d=a.mul(r,r),h=a.mul(i,i),p=a.mul(s,s),v=a.mul(r,i);return v=a.add(v,v),u=a.mul(r,s),u=a.add(u,u),c=a.mul(e,u),l=a.mul(n,p),l=a.add(c,l),c=a.sub(h,l),l=a.add(h,l),l=a.mul(c,l),c=a.mul(v,c),u=a.mul(n,u),p=a.mul(e,p),v=a.sub(d,p),v=a.mul(e,v),v=a.add(v,u),u=a.add(d,d),d=a.add(u,d),d=a.add(d,p),d=a.mul(d,v),l=a.add(l,d),p=a.mul(i,s),p=a.add(p,p),d=a.mul(p,v),c=a.sub(c,d),u=a.mul(p,h),u=a.add(u,u),u=a.add(u,u),new b(c,l,u)}add(e){m(e);var t=this.px,n=this.py,r=this.pz,i=e.px,s=e.py,c=e.pz,l=a.ZERO,u=a.ZERO,d=a.ZERO,h=o.a,p=a.mul(o.b,f),v=a.mul(t,i),g=a.mul(n,s),y=a.mul(r,c),w=a.add(t,n),E=a.add(i,s);w=a.mul(w,E),E=a.add(v,g),w=a.sub(w,E),E=a.add(t,r);var _=a.add(i,c);return E=a.mul(E,_),_=a.add(v,y),E=a.sub(E,_),_=a.add(n,r),l=a.add(s,c),_=a.mul(_,l),l=a.add(g,y),_=a.sub(_,l),d=a.mul(h,E),l=a.mul(p,y),d=a.add(l,d),l=a.sub(g,d),d=a.add(g,d),u=a.mul(l,d),g=a.add(v,v),g=a.add(g,v),y=a.mul(h,y),E=a.mul(p,E),g=a.add(g,y),y=a.sub(v,y),y=a.mul(h,y),E=a.add(E,y),v=a.mul(g,E),u=a.add(u,v),v=a.mul(_,E),l=a.mul(w,l),l=a.sub(l,v),v=a.mul(w,g),d=a.mul(_,d),d=a.add(d,v),new b(l,u,d)}subtract(e){return this.add(e.negate())}is0(){return this.equals(b.ZERO)}wNAF(e){return E.wNAFCached(this,e,b.normalizeZ)}multiplyUnsafe(e){r.aInRange("scalar",e,c,o.n);var t=b.ZERO;if(e===c)return t;if(e===u)return this;var n=o.endo;if(!n)return E.unsafeLadder(this,e);for(var i=n.splitScalar(e),s=i.k1neg,l=i.k1,d=i.k2neg,h=i.k2,f=t,p=t,v=this;l>c||h>c;)l&u&&(f=f.add(v)),h&u&&(p=p.add(v)),v=v.double(),l>>=u,h>>=u;return s&&(f=f.negate()),d&&(p=p.negate()),p=new b(a.mul(p.px,n.beta),p.py,p.pz),f.add(p)}multiply(e){var t,n,i=o.endo,s=o.n;if(r.aInRange("scalar",e,u,s),i){var c=i.splitScalar(e),l=c.k1neg,d=c.k1,h=c.k2neg,f=c.k2,p=this.wNAF(d),v=p.p,m=p.f,g=this.wNAF(f),y=g.p,w=g.f;v=E.constTimeNegate(l,v),y=E.constTimeNegate(h,y),y=new b(a.mul(y.px,i.beta),y.py,y.pz),t=v.add(y),n=m.add(w)}else{var _=this.wNAF(e);t=_.p,n=_.f}return b.normalizeZ([t,n])[0]}multiplyAndAddUnsafe(e,t,n){var r=b.BASE,i=(e,t)=>t!==c&&t!==u&&e.equals(r)?e.multiply(t):e.multiplyUnsafe(t),o=i(this,t).add(i(e,n));return o.is0()?void 0:o}toAffine(e){return g(this,e)}isTorsionFree(){var e=o.h,t=o.isTorsionFree;if(e===u)return!0;if(t)return t(b,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){var e=o.h,t=o.clearCofactor;return e===u?this:t?t(b,this):this.multiplyUnsafe(o.h)}toRawBytes(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return(0,i.abool)("isCompressed",e),this.assertValidity(),l(b,this,e)}toHex(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return(0,i.abool)("isCompressed",e),r.bytesToHex(this.toRawBytes(e))}}b.BASE=new b(o.Gx,o.Gy,a.ONE),b.ZERO=new b(a.ZERO,a.ONE,a.ZERO);var w=o.nBitLength,E=(0,t.wNAF)(b,o.endo?Math.ceil(w/2):w);return{CURVE:o,ProjectivePoint:b,normPrivateKeyToScalar:v,weierstrassEquation:p,isWithinCurveOrder:function(e){return r.inRange(e,u,o.n)}}}function m(e,t){for(var n=e.ORDER,r=c,i=n-u;i%d===c;i/=d)r+=u;var o=r,a=d<<o-u-u,s=a*d,l=(n-u)/s,h=(l-u)/d,v=s-u,m=a,g=e.pow(t,l),y=e.pow(t,(l+u)/d),b=(t,n)=>{var r=g,i=e.pow(n,v),a=e.sqr(i);a=e.mul(a,n);var s=e.mul(t,a);s=e.pow(s,h),s=e.mul(s,i),i=e.mul(s,n),a=e.mul(s,t);var c=e.mul(a,i);s=e.pow(c,m);var l=e.eql(s,e.ONE);i=e.mul(a,y),s=e.mul(c,r),a=e.cmov(i,a,l),c=e.cmov(s,c,l);for(var f=o;f>u;f--){var p=f-d;p=d<<p-u;var b=e.pow(c,p),w=e.eql(b,e.ONE);i=e.mul(a,r),r=e.mul(r,r),b=e.mul(c,r),a=e.cmov(i,a,w),c=e.cmov(b,c,w)}return{isValid:l,value:a}};if(e.ORDER%p===f){var w=(e.ORDER-f)/p,E=e.sqrt(e.neg(t));b=(t,n)=>{var r=e.sqr(n),i=e.mul(t,n);r=e.mul(r,i);var o=e.pow(r,w);o=e.mul(o,i);var a=e.mul(o,E),s=e.mul(e.sqr(o),n),c=e.eql(s,t);return{isValid:c,value:e.cmov(a,o,c)}}}return b}}(ir={}),Object.defineProperty(nr,"__esModule",{value:!0}),nr.getHash=Cf,nr.createCurve=function(e,t){var n=t=>(0,sr.weierstrass)(h(h({},e),Cf(t)));return Object.freeze(h(h({},n(t)),{},{create:n}))},or=rr,ar=gt,sr=ir,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.encodeToCurve=e.hashToCurve=e.schnorr=e.secp256k1=void 0;var t=Gn,n=gt,r=nr,i=$n,o=nn,a=rn,s=ir,c=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),l=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),u=BigInt(1),d=BigInt(2),h=(e,t)=>(e+t/d)/t;function f(e){var t=c,n=BigInt(3),r=BigInt(6),i=BigInt(11),a=BigInt(22),s=BigInt(23),l=BigInt(44),u=BigInt(88),h=e*e*e%t,f=h*h*e%t,v=(0,o.pow2)(f,n,t)*f%t,m=(0,o.pow2)(v,n,t)*f%t,g=(0,o.pow2)(m,d,t)*h%t,y=(0,o.pow2)(g,i,t)*g%t,b=(0,o.pow2)(y,a,t)*y%t,w=(0,o.pow2)(b,l,t)*b%t,E=(0,o.pow2)(w,u,t)*w%t,_=(0,o.pow2)(E,l,t)*b%t,S=(0,o.pow2)(_,n,t)*f%t,k=(0,o.pow2)(S,s,t)*y%t,C=(0,o.pow2)(k,r,t)*h%t,A=(0,o.pow2)(C,d,t);if(!p.eql(p.sqr(A),e))throw new Error("Cannot find square root");return A}var p=(0,o.Field)(c,void 0,void 0,{sqrt:f});e.secp256k1=(0,r.createCurve)({a:BigInt(0),b:BigInt(7),Fp:p,n:l,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{var t=l,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-u*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),a=n,s=BigInt("0x100000000000000000000000000000000"),c=h(a*e,t),d=h(-r*e,t),f=(0,o.mod)(e-c*n-d*i,t),p=(0,o.mod)(-c*r-d*a,t),v=f>s,m=p>s;if(v&&(f=t-f),m&&(p=t-p),f>s||p>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:v,k1:f,k2neg:m,k2:p}}}},t.sha256);var v=BigInt(0),m={};function g(e){var n=m[e];if(void 0===n){var r=(0,t.sha256)(Uint8Array.from(e,e=>e.charCodeAt(0)));n=(0,a.concatBytes)(r,r),m[e]=n}for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];return(0,t.sha256)((0,a.concatBytes)(n,...o))}var y=e=>e.toRawBytes(!0).slice(1),b=e=>(0,a.numberToBytesBE)(e,32),w=e=>(0,o.mod)(e,c),E=e=>(0,o.mod)(e,l),_=e.secp256k1.ProjectivePoint;function S(t){var n=e.secp256k1.utils.normPrivateKeyToScalar(t),r=_.fromPrivateKey(n);return{scalar:r.hasEvenY()?n:E(-n),bytes:y(r)}}function k(e){(0,a.aInRange)("x",e,u,c);var t=w(e*e),n=f(w(t*e+BigInt(7)));n%d!==v&&(n=w(-n));var r=new _(e,n,u);return r.assertValidity(),r}var C=a.bytesToNumberBE;function A(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return E(C(g("BIP0340/challenge",...t)))}function x(e,t,n){var r=(0,a.ensureBytes)("signature",e,64),i=(0,a.ensureBytes)("message",t),o=(0,a.ensureBytes)("publicKey",n,32);try{var s=k(C(o)),d=C(r.subarray(0,32));if(!(0,a.inRange)(d,u,c))return!1;var h=C(r.subarray(32,64));if(!(0,a.inRange)(h,u,l))return!1;var f=A(b(d),y(s),i),p=((e,t,n)=>_.BASE.multiplyAndAddUnsafe(e,t,n))(s,h,E(-f));return!(!p||!p.hasEvenY()||p.toAffine().x!==d)}catch(s){return!1}}e.schnorr={getPublicKey:function(e){return S(e).bytes},sign:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,n.randomBytes)(32),i=(0,a.ensureBytes)("message",e),o=S(t),s=o.bytes,c=o.scalar,l=(0,a.ensureBytes)("auxRand",r,32),u=b(c^C(g("BIP0340/aux",l))),d=g("BIP0340/nonce",u,s,i),h=E(C(d));if(h===v)throw new Error("sign failed: k is zero");var f=S(h),p=f.bytes,m=f.scalar,y=A(p,s,i),w=new Uint8Array(64);if(w.set(p,0),w.set(b(E(m+y*c)),32),!x(w,i,s))throw new Error("sign: Invalid signature produced");return w},verify:x,utils:{randomPrivateKey:e.secp256k1.utils.randomPrivateKey,lift_x:k,pointToBytes:y,numberToBytesBE:a.numberToBytesBE,bytesToNumberBE:a.bytesToNumberBE,taggedHash:g,mod:o.mod}};var T=(0,i.isogenyMap)(p,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(e=>BigInt(e)))),M=(0,s.mapToCurveSimpleSWU)(p,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:p.create(BigInt("-11"))}),O=(0,i.createHasher)(e.secp256k1.ProjectivePoint,e=>{var t=M(p.create(e[0])),n=t.x,r=t.y;return T(n,r)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:p.ORDER,m:1,k:128,expand:"xmd",hash:t.sha256});e.hashToCurve=O.hashToCurve,e.encodeToCurve=O.encodeToCurve}(Wn),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.decodeHex=e.remove0x=void 0;var t=rt;e.remove0x=function(e){return e.startsWith("0x")||e.startsWith("0X")?e.slice(2):e},e.decodeHex=function(n){return(0,t.hexToBytes)((0,e.remove0x)(n))}}(cr={}),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hexToPublicKey=e.convertPublicKeyFormat=e.getSharedPoint=e.getPublicKey=e.isValidPrivateKey=e.getValidSecret=void 0;var t=dt,n=ft,r=Wn,i=ot,o=at,a=cr;function s(e,t,i,o){if("secp256k1"===e)return t(r.secp256k1);if("x25519"===e)return i(n.x25519);if("ed25519"===e)return o(n.ed25519);throw new Error("Not implemented")}e.getValidSecret=function(){var n;do{n=(0,t.randomBytes)(o.SECRET_KEY_LENGTH)}while(!(0,e.isValidPrivateKey)(n));return n},e.isValidPrivateKey=function(e){return s((0,i.ellipticCurve)(),function(t){return t.utils.isValidPrivateKey(e)},function(){return!0},function(){return!0})},e.getPublicKey=function(e){return s((0,i.ellipticCurve)(),function(t){return t.getPublicKey(e)},function(t){return t.getPublicKey(e)},function(t){return t.getPublicKey(e)})},e.getSharedPoint=function(e,t,n){return s((0,i.ellipticCurve)(),function(r){return r.getSharedSecret(e,t,n)},function(n){return n.getSharedSecret(e,t)},function(n){return l(n,e,t)})},e.convertPublicKeyFormat=function(e,t){return s((0,i.ellipticCurve)(),function(n){return n.getSharedSecret(BigInt(1),e,t)},function(){return e},function(){return e})},e.hexToPublicKey=function(e){var t=(0,a.decodeHex)(e);return s((0,i.ellipticCurve)(),function(){return c(t)},function(){return t},function(){return t})};var c=function(e){if(e.length===o.ETH_PUBLIC_KEY_SIZE){var t=new Uint8Array(1+e.length);return t.set([4]),t.set(e,1),t}return e},l=function(e,t,n){var r=e.utils.getExtendedPublicKey(t).scalar;return e.ExtendedPoint.fromHex(n).multiply(r).toRawBytes()}}(ut),lr={},ur={},Object.defineProperty(ur,"__esModule",{value:!0}),ur.hkdf=void 0,ur.extract=Af,ur.expand=xf,dr=mt,hr=gt,fr=rr,pr=new Uint8Array([0]),vr=new Uint8Array,ur.hkdf=(e,t,n,r,i)=>xf(e,Af(e,t,n),r,i),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getSharedKey=e.deriveKey=void 0;var t=rt,n=ur,r=Gn;e.deriveKey=function(e,t,i){return(0,n.hkdf)(r.sha256,e,t,i,32)},e.getSharedKey=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return(0,e.deriveKey)(t.concatBytes.apply(void 0,n))}}(lr),mr={},gr={},yr={},br={},Object.defineProperty(br,"__esModule",{value:!0}),br.polyval=br.ghash=void 0,br._toGHASHKey=Tf,wr=it,Er=rt,_r=16,Sr=new Uint8Array(16),kr=(0,Er.u32)(Sr),Cr=e=>(e>>>0&255)<<24|(e>>>8&255)<<16|(e>>>16&255)<<8|e>>>24&255,Ar=class{constructor(e,t){this.blockLen=_r,this.outputLen=_r,this.s0=0,this.s1=0,this.s2=0,this.s3=0,this.finished=!1,e=(0,Er.toBytes)(e),(0,wr.bytes)(e,16);for(var n,r,i,o,a=(0,Er.createView)(e),s=a.getUint32(0,!1),c=a.getUint32(4,!1),l=a.getUint32(8,!1),u=a.getUint32(12,!1),d=[],h=0;h<128;h++){var f;d.push({s0:Cr(s),s1:Cr(c),s2:Cr(l),s3:Cr(u)}),s=(f={s3:(i=l)<<31|(o=u)>>>1,s2:(r=c)<<31|i>>>1,s1:(n=s)<<31|r>>>1,s0:n>>>1^225<<24&-(1&o)}).s0,c=f.s1,l=f.s2,u=f.s3}var p=(e=>e>65536?8:e>1024?4:2)(t||1024);if(![1,2,4,8].includes(p))throw new Error(`ghash: wrong window size=${p}, should be 2, 4 or 8`);this.W=p;for(var v=128/p,m=this.windowSize=Math.pow(2,p),g=[],y=0;y<v;y++)for(var b=0;b<m;b++){for(var w=0,E=0,_=0,S=0,k=0;k<p;k++)if(b>>>p-k-1&1){var C=d[p*y+k];w^=C.s0,E^=C.s1,_^=C.s2,S^=C.s3}g.push({s0:w,s1:E,s2:_,s3:S})}this.t=g}_updateBlock(e,t,n,r){e^=this.s0,t^=this.s1,n^=this.s2,r^=this.s3;for(var i=this.W,o=this.t,a=this.windowSize,s=0,c=0,l=0,u=0,d=(1<<i)-1,h=0,f=0,p=[e,t,n,r];f<p.length;f++)for(var v=p[f],m=0;m<4;m++)for(var g=v>>>8*m&255,y=8/i-1;y>=0;y--){var b=o[h*a+(g>>>i*y&d)];s^=b.s0,c^=b.s1,l^=b.s2,u^=b.s3,h+=1}this.s0=s,this.s1=c,this.s2=l,this.s3=u}update(e){e=(0,Er.toBytes)(e),(0,wr.exists)(this);for(var t=(0,Er.u32)(e),n=Math.floor(e.length/_r),r=e.length%_r,i=0;i<n;i++)this._updateBlock(t[4*i+0],t[4*i+1],t[4*i+2],t[4*i+3]);return r&&(Sr.set(e.subarray(n*_r)),this._updateBlock(kr[0],kr[1],kr[2],kr[3]),(0,Er.clean)(kr)),this}destroy(){var e,t=l(this.t);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.s0=0,n.s1=0,n.s2=0,n.s3=0}}catch(fs){t.e(fs)}finally{t.f()}}digestInto(e){(0,wr.exists)(this),(0,wr.output)(e,this),this.finished=!0;var t=this.s0,n=this.s1,r=this.s2,i=this.s3,o=(0,Er.u32)(e);return o[0]=t,o[1]=n,o[2]=r,o[3]=i,e}digest(){var e=new Uint8Array(_r);return this.digestInto(e),this.destroy(),e}},xr=class extends Ar{constructor(e,t){e=(0,Er.toBytes)(e);var n=Tf((0,Er.copyBytes)(e));super(n,t),(0,Er.clean)(n)}update(e){e=(0,Er.toBytes)(e),(0,wr.exists)(this);for(var t=(0,Er.u32)(e),n=e.length%_r,r=Math.floor(e.length/_r),i=0;i<r;i++)this._updateBlock(Cr(t[4*i+3]),Cr(t[4*i+2]),Cr(t[4*i+1]),Cr(t[4*i+0]));return n&&(Sr.set(e.subarray(r*_r)),this._updateBlock(Cr(kr[3]),Cr(kr[2]),Cr(kr[1]),Cr(kr[0])),(0,Er.clean)(kr)),this}digestInto(e){(0,wr.exists)(this),(0,wr.output)(e,this),this.finished=!0;var t=this.s0,n=this.s1,r=this.s2,i=this.s3,o=(0,Er.u32)(e);return o[0]=t,o[1]=n,o[2]=r,o[3]=i,e.reverse()}},br.ghash=Mf((e,t)=>new Ar(e,t)),br.polyval=Mf((e,t)=>new xr(e,t)),Object.defineProperty(yr,"__esModule",{value:!0}),yr.unsafe=yr.aeskwp=yr.aeskw=yr.siv=yr.gcm=yr.cfb=yr.cbc=yr.ecb=yr.ctr=void 0,yr.expandKeyLE=If,yr.expandKeyDecLE=Lf,Tr=it,Mr=br,Or=rt,Rr=16,Pr=new Uint8Array(Rr),Ir=283,Lr=(()=>{for(var e=new Uint8Array(256),t=0,n=1;t<256;t++,n^=Of(n))e[t]=n;var r=new Uint8Array(256);r[0]=99;for(var i=0;i<255;i++){var o=e[255-i];o|=o<<8,r[e[i]]=255&(o^o>>4^o>>5^o>>6^o>>7^99)}return(0,Or.clean)(e),r})(),Nr=Lr.map((e,t)=>Lr.indexOf(t)),Dr=e=>e<<24|e>>>8,Br=e=>e<<8|e>>>24,$r=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255,jr=Pf(Lr,e=>Rf(e,3)<<24|e<<16|e<<8|Rf(e,2)),Kr=Pf(Nr,e=>Rf(e,11)<<24|Rf(e,13)<<16|Rf(e,9)<<8|Rf(e,14)),Ur=(()=>{for(var e=new Uint8Array(16),t=0,n=1;t<16;t++,n=Of(n))e[t]=n;return e})(),yr.ctr=(0,Or.wrapCipher)({blockSize:16,nonceLength:16},function(e,t){function n(n,r){if((0,Tr.bytes)(n),void 0!==r&&((0,Tr.bytes)(r),!(0,Or.isAligned32)(r)))throw new Error("unaligned destination");var i=If(e),o=(0,Or.copyBytes)(t),a=[i,o];(0,Or.isAligned32)(n)||a.push(n=(0,Or.copyBytes)(n));var s=Kf(i,o,n,r);return(0,Or.clean)(...a),s}return(0,Tr.bytes)(e),(0,Tr.bytes)(t,Rr),{encrypt:(e,t)=>n(e,t),decrypt:(e,t)=>n(e,t)}}),yr.ecb=(0,Or.wrapCipher)({blockSize:16},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,Tr.bytes)(e);var n=!t.disablePadding;return{encrypt(t,r){for(var i=Ff(t,n,r),o=i.b,a=i.o,s=i.out,c=If(e),l=0;l+4<=o.length;){var u=Bf(c,o[l+0],o[l+1],o[l+2],o[l+3]),d=u.s0,h=u.s1,f=u.s2,p=u.s3;a[l++]=d,a[l++]=h,a[l++]=f,a[l++]=p}if(n){var v=qf(t.subarray(4*l)),m=Bf(c,v[0],v[1],v[2],v[3]),g=m.s0,y=m.s1,b=m.s2,w=m.s3;a[l++]=g,a[l++]=y,a[l++]=b,a[l++]=w}return(0,Or.clean)(c),s},decrypt(t,r){Hf(t);var i=Lf(e),o=jf(t.length,r),a=[i];(0,Or.isAligned32)(t)||a.push(t=(0,Or.copyBytes)(t));for(var s=(0,Or.u32)(t),c=(0,Or.u32)(o),l=0;l+4<=s.length;){var u=$f(i,s[l+0],s[l+1],s[l+2],s[l+3]),d=u.s0,h=u.s1,f=u.s2,p=u.s3;c[l++]=d,c[l++]=h,c[l++]=f,c[l++]=p}return(0,Or.clean)(...a),zf(o,n)}}}),yr.cbc=(0,Or.wrapCipher)({blockSize:16,nonceLength:16},function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,Tr.bytes)(e),(0,Tr.bytes)(t,16);var r=!n.disablePadding;return{encrypt(n,i){var o=If(e),a=Ff(n,r,i),s=a.b,c=a.o,l=a.out,u=t,d=[o];(0,Or.isAligned32)(u)||d.push(u=(0,Or.copyBytes)(u));for(var h=(0,Or.u32)(u),f=h[0],p=h[1],v=h[2],m=h[3],g=0;g+4<=s.length;){var y;f=(y=Bf(o,f^=s[g+0],p^=s[g+1],v^=s[g+2],m^=s[g+3])).s0,p=y.s1,v=y.s2,m=y.s3,c[g++]=f,c[g++]=p,c[g++]=v,c[g++]=m}if(r){var b,w=qf(n.subarray(4*g));f=(b=Bf(o,f^=w[0],p^=w[1],v^=w[2],m^=w[3])).s0,p=b.s1,v=b.s2,m=b.s3,c[g++]=f,c[g++]=p,c[g++]=v,c[g++]=m}return(0,Or.clean)(...d),l},decrypt(n,i){Hf(n);var o=Lf(e),a=t,s=[o];(0,Or.isAligned32)(a)||s.push(a=(0,Or.copyBytes)(a));var c=(0,Or.u32)(a),l=jf(n.length,i);(0,Or.isAligned32)(n)||s.push(n=(0,Or.copyBytes)(n));for(var u=(0,Or.u32)(n),d=(0,Or.u32)(l),h=c[0],f=c[1],p=c[2],v=c[3],m=0;m+4<=u.length;){var g=h,y=f,b=p,w=v,E=$f(o,h=u[m+0],f=u[m+1],p=u[m+2],v=u[m+3]),_=E.s0,S=E.s1,k=E.s2,C=E.s3;d[m++]=_^g,d[m++]=S^y,d[m++]=k^b,d[m++]=C^w}return(0,Or.clean)(...s),zf(l,r)}}}),yr.cfb=(0,Or.wrapCipher)({blockSize:16,nonceLength:16},function(e,t){function n(n,r,i){(0,Tr.bytes)(n);var o=n.length;i=jf(o,i);var a=If(e),s=t,c=[a];(0,Or.isAligned32)(s)||c.push(s=(0,Or.copyBytes)(s)),(0,Or.isAligned32)(n)||c.push(n=(0,Or.copyBytes)(n));for(var l=(0,Or.u32)(n),u=(0,Or.u32)(i),d=r?u:l,h=(0,Or.u32)(s),f=h[0],p=h[1],v=h[2],m=h[3],g=0;g+4<=l.length;){var y=Bf(a,f,p,v,m),b=y.s0,w=y.s1,E=y.s2,_=y.s3;u[g+0]=l[g+0]^b,u[g+1]=l[g+1]^w,u[g+2]=l[g+2]^E,u[g+3]=l[g+3]^_,f=d[g++],p=d[g++],v=d[g++],m=d[g++]}var S=Rr*Math.floor(l.length/4);if(S<o){var k=Bf(a,f,p,v,m);f=k.s0,p=k.s1,v=k.s2,m=k.s3;for(var C=(0,Or.u8)(new Uint32Array([f,p,v,m])),A=S,x=0;A<o;A++,x++)i[A]=n[A]^C[x];(0,Or.clean)(C)}return(0,Or.clean)(...c),i}return(0,Tr.bytes)(e),(0,Tr.bytes)(t,16),{encrypt:(e,t)=>n(e,!0,t),decrypt:(e,t)=>n(e,!1,t)}}),yr.gcm=(0,Or.wrapCipher)({blockSize:16,nonceLength:12,tagLength:16},function(e,t,n){if((0,Tr.bytes)(e),(0,Tr.bytes)(t),void 0!==n&&(0,Tr.bytes)(n),t.length<8)throw new Error("aes/gcm: invalid nonce length");function r(e,t,r){for(var i=Vf(Mr.ghash,!1,e,r,n),o=0;o<t.length;o++)i[o]^=t[o];return i}function i(){var n=If(e),r=Pr.slice(),i=Pr.slice();if(Uf(n,!1,i,i,r),12===t.length)i.set(t);else{var o=Pr.slice(),a=(0,Or.createView)(o);(0,Or.setBigUint64)(a,8,BigInt(8*t.length),!1);var s=Mr.ghash.create(r).update(t).update(o);s.digestInto(i),s.destroy()}return{xk:n,authKey:r,counter:i,tagMask:Uf(n,!1,i,Pr)}}return{encrypt(e){(0,Tr.bytes)(e);var t=i(),n=t.xk,o=t.authKey,a=t.counter,s=t.tagMask,c=new Uint8Array(e.length+16),l=[n,o,a,s];(0,Or.isAligned32)(e)||l.push(e=(0,Or.copyBytes)(e)),Uf(n,!1,a,e,c);var u=r(o,s,c.subarray(0,c.length-16));return l.push(u),c.set(u,e.length),(0,Or.clean)(...l),c},decrypt(e){if((0,Tr.bytes)(e),e.length<16)throw new Error("aes/gcm: ciphertext less than tagLen (16)");var t=i(),n=t.xk,o=t.authKey,a=t.counter,s=t.tagMask,c=[n,o,s,a];(0,Or.isAligned32)(e)||c.push(e=(0,Or.copyBytes)(e));var l=e.subarray(0,-16),u=e.subarray(-16),d=r(o,s,l);if(c.push(d),!(0,Or.equalBytes)(d,u))throw new Error("aes/gcm: invalid ghash tag");var h=Uf(n,!1,a,l);return(0,Or.clean)(...c),h}}}),Hr=(e,t,n)=>r=>{if(!Number.isSafeInteger(r)||t>r||r>n)throw new Error(`${e}: invalid value=${r}, must be [${t}..${n}]`)},yr.siv=(0,Or.wrapCipher)({blockSize:16,nonceLength:12,tagLength:16},function(e,t,n){var r=Hr("AAD",0,Math.pow(2,36)),i=Hr("plaintext",0,Math.pow(2,36)),o=Hr("nonce",12,12),a=Hr("ciphertext",16,Math.pow(2,36)+16);function s(){var n=If(e),r=new Uint8Array(e.length),i=new Uint8Array(16),o=[n,r],a=t;(0,Or.isAligned32)(a)||o.push(a=(0,Or.copyBytes)(a));var s,c=(0,Or.u32)(a),u=0,d=c[0],h=c[1],f=c[2],p=0,v=l([i,r].map(Or.u32));try{for(v.s();!(s=v.n()).done;)for(var m=s.value,g=(0,Or.u32)(m),y=0;y<g.length;y+=2){var b=Bf(n,u,d,h,f),w=b.s0,E=b.s1;g[y+0]=w,g[y+1]=E,u=++p}}catch(fs){v.e(fs)}finally{v.f()}var _={authKey:i,encKey:If(r)};return(0,Or.clean)(...o),_}function c(e,r,i){for(var o,a=Vf(Mr.polyval,!0,r,i,n),s=0;s<12;s++)a[s]^=t[s];a[15]&=127;var c=(0,Or.u32)(a),l=c[0],u=c[1],d=c[2],h=c[3];return l=(o=Bf(e,l,u,d,h)).s0,u=o.s1,d=o.s2,h=o.s3,c[0]=l,c[1]=u,c[2]=d,c[3]=h,a}function u(e,t,n){var r=(0,Or.copyBytes)(t);r[15]|=128;var i=Uf(e,!0,r,n);return(0,Or.clean)(r),i}return(0,Tr.bytes)(e,16,24,32),(0,Tr.bytes)(t),o(t.length),void 0!==n&&((0,Tr.bytes)(n),r(n.length)),{encrypt(e){(0,Tr.bytes)(e),i(e.length);var t=s(),n=t.encKey,r=t.authKey,o=c(n,r,e),a=[n,r,o];(0,Or.isAligned32)(e)||a.push(e=(0,Or.copyBytes)(e));var l=new Uint8Array(e.length+16);return l.set(o,e.length),l.set(u(n,o,e)),(0,Or.clean)(...a),l},decrypt(e){(0,Tr.bytes)(e),a(e.length);var t=e.subarray(-16),n=s(),r=n.encKey,i=n.authKey,o=[r,i];(0,Or.isAligned32)(e)||o.push(e=(0,Or.copyBytes)(e));var l=u(r,t,e.subarray(0,-16)),d=c(r,i,l);if(o.push(d),!(0,Or.equalBytes)(t,d))throw(0,Or.clean)(...o),new Error("invalid polyval tag");return(0,Or.clean)(...o),l}}}),Fr={encrypt(e,t){if(t.length>=Math.pow(2,32))throw new Error("plaintext should be less than 4gb");var n=If(e);if(16===t.length)Gf(n,t);else{for(var r=(0,Or.u32)(t),i=r[0],o=r[1],a=0,s=1;a<6;a++)for(var c=2;c<r.length;c+=2,s++){var l=Bf(n,i,o,r[c],r[c+1]),u=l.s0,d=l.s1,h=l.s2,f=l.s3;i=u,o=d^$r(s),r[c]=h,r[c+1]=f}r[0]=i,r[1]=o}n.fill(0)},decrypt(e,t){if(t.length-8>=Math.pow(2,32))throw new Error("ciphertext should be less than 4gb");var n=Lf(e),r=t.length/8-1;if(1===r)Yf(n,t);else{for(var i=(0,Or.u32)(t),o=i[0],a=i[1],s=0,c=6*r;s<6;s++)for(var l=2*r;l>=1;l-=2,c--){var u=$f(n,o,a^=$r(c),i[l],i[l+1]),d=u.s0,h=u.s1,f=u.s2,p=u.s3;o=d,a=h,i[l]=f,i[l+1]=p}i[0]=o,i[1]=a}n.fill(0)}},zr=new Uint8Array(8).fill(166),yr.aeskw=(0,Or.wrapCipher)({blockSize:8},e=>({encrypt(t){if((0,Tr.bytes)(t),!t.length||t.length%8!=0)throw new Error("invalid plaintext length");if(8===t.length)throw new Error("8-byte keys not allowed in AESKW, use AESKWP instead");var n=(0,Or.concatBytes)(zr,t);return Fr.encrypt(e,n),n},decrypt(t){if((0,Tr.bytes)(t),t.length%8!=0||t.length<24)throw new Error("invalid ciphertext length");var n=(0,Or.copyBytes)(t);if(Fr.decrypt(e,n),!(0,Or.equalBytes)(n.subarray(0,8),zr))throw new Error("integrity check failed");return n.subarray(0,8).fill(0),n.subarray(8)}})),qr=2790873510,yr.aeskwp=(0,Or.wrapCipher)({blockSize:8},e=>({encrypt(t){if((0,Tr.bytes)(t),!t.length)throw new Error("invalid plaintext length");var n=8*Math.ceil(t.length/8),r=new Uint8Array(8+n);r.set(t,8);var i=(0,Or.u32)(r);return i[0]=qr,i[1]=$r(t.length),Fr.encrypt(e,r),r},decrypt(t){if((0,Tr.bytes)(t),t.length<16)throw new Error("invalid ciphertext length");var n=(0,Or.copyBytes)(t),r=(0,Or.u32)(n);Fr.decrypt(e,n);var i=$r(r[1])>>>0,o=8*Math.ceil(i/8);if(r[0]!==qr||n.length-8!==o)throw new Error("integrity check failed");for(var a=i;a<o;a++)if(0!==n[8+a])throw new Error("integrity check failed");return n.subarray(0,8).fill(0),n.subarray(8,8+i)}})),yr.unsafe={expandKeyLE:If,expandKeyDecLE:Lf,encrypt:Bf,decrypt:$f,encryptBlock:Gf,decryptBlock:Yf,ctrCounter:Kf,ctr32:Uf},Object.defineProperty(gr,"__esModule",{value:!0}),gr.aes256cbc=gr.aes256gcm=void 0,Vr=yr,gr.aes256gcm=function(e,t,n){return(0,Vr.gcm)(e,t,n)},gr.aes256cbc=function(e,t,n){return(0,Vr.cbc)(e,t)},Wr={},Gr={},Yr={},Object.defineProperty(Yr,"__esModule",{value:!0}),Yr.sigma=void 0,Yr.rotl=function(e,t){return e<<t|e>>>32-t},Yr.createCipher=function(e,t){var n=(0,Jr.checkOpts)({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t),r=n.allowShortKeys,i=n.extendNonceFn,o=n.counterLength,a=n.counterRight,s=n.rounds;if("function"!=typeof e)throw new Error("core must be a function");return(0,Zr.number)(o),(0,Zr.number)(s),(0,Zr.bool)(a),(0,Zr.bool)(r),function(t,n,c,l){var u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;(0,Zr.bytes)(t),(0,Zr.bytes)(n),(0,Zr.bytes)(c);var d=c.length;if(void 0===l&&(l=new Uint8Array(d)),(0,Zr.bytes)(l),(0,Zr.number)(u),u<0||u>=oi)throw new Error("arx: counter overflow");if(l.length<d)throw new Error(`arx: output (${l.length}) is shorter than data (${d})`);var h,f,p=[],v=t.length;if(32===v)p.push(h=(0,Jr.copyBytes)(t)),f=ni;else{if(16!==v||!r)throw new Error(`arx: invalid 32-byte key, got length=${v}`);(h=new Uint8Array(32)).set(t),h.set(t,16),f=ti,p.push(h)}Zf(n)||p.push(n=(0,Jr.copyBytes)(n));var m=(0,Jr.u32)(h);if(i){if(24!==n.length)throw new Error("arx: extended nonce must be 24 bytes");i(f,m,(0,Jr.u32)(n.subarray(0,16)),m),n=n.subarray(16)}var g=16-o;if(g!==n.length)throw new Error(`arx: nonce must be ${g} or 16 bytes`);if(12!==g){var y=new Uint8Array(12);y.set(n,a?0:12-n.length),n=y,p.push(n)}var b=(0,Jr.u32)(n);return function(e,t,n,r,i,o,a,s){for(var c=i.length,l=new Uint8Array(ri),u=(0,Jr.u32)(l),d=Zf(i)&&Zf(o),h=d?(0,Jr.u32)(i):ai,f=d?(0,Jr.u32)(o):ai,p=0;p<c;a++){if(e(t,n,r,u,a,s),a>=oi)throw new Error("arx: counter overflow");var v=Math.min(ri,c-p);if(d&&v===ri){var m=p/4;if(p%4!=0)throw new Error("arx: invalid block position");for(var g,y=0;y<ii;y++)f[g=m+y]=h[g]^u[y];p+=ri}else{for(var b,w=0;w<v;w++)o[b=p+w]=i[b]^l[w];p+=v}}}(e,f,m,b,c,l,u,s),(0,Jr.clean)(...p),l}},Zr=it,Jr=rt,Xr=e=>Uint8Array.from(e.split("").map(e=>e.charCodeAt(0))),Qr=Xr("expand 16-byte k"),ei=Xr("expand 32-byte k"),ti=(0,Jr.u32)(Qr),ni=(0,Jr.u32)(ei),Yr.sigma=ni.slice(),ri=64,ii=16,oi=Math.pow(2,32)-1,ai=new Uint32Array,si={},Object.defineProperty(si,"__esModule",{value:!0}),si.poly1305=void 0,si.wrapConstructorWithKey=Jf,ci=it,li=rt,ui=(e,t)=>255&e[t++]|(255&e[t++])<<8,di=class{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=(0,li.toBytes)(e),(0,ci.bytes)(e,32);var t=ui(e,0),n=ui(e,2),r=ui(e,4),i=ui(e,6),o=ui(e,8),a=ui(e,10),s=ui(e,12),c=ui(e,14);this.r[0]=8191&t,this.r[1]=8191&(t>>>13|n<<3),this.r[2]=7939&(n>>>10|r<<6),this.r[3]=8191&(r>>>7|i<<9),this.r[4]=255&(i>>>4|o<<12),this.r[5]=o>>>1&8190,this.r[6]=8191&(o>>>14|a<<2),this.r[7]=8065&(a>>>11|s<<5),this.r[8]=8191&(s>>>8|c<<8),this.r[9]=c>>>5&127;for(var l=0;l<8;l++)this.pad[l]=ui(e,16+2*l)}process(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?0:2048,r=this.h,i=this.r,o=i[0],a=i[1],s=i[2],c=i[3],l=i[4],u=i[5],d=i[6],h=i[7],f=i[8],p=i[9],v=ui(e,t+0),m=ui(e,t+2),g=ui(e,t+4),y=ui(e,t+6),b=ui(e,t+8),w=ui(e,t+10),E=ui(e,t+12),_=ui(e,t+14),S=r[0]+(8191&v),k=r[1]+(8191&(v>>>13|m<<3)),C=r[2]+(8191&(m>>>10|g<<6)),A=r[3]+(8191&(g>>>7|y<<9)),x=r[4]+(8191&(y>>>4|b<<12)),T=r[5]+(b>>>1&8191),M=r[6]+(8191&(b>>>14|w<<2)),O=r[7]+(8191&(w>>>11|E<<5)),R=r[8]+(8191&(E>>>8|_<<8)),P=r[9]+(_>>>5|n),I=0,L=I+S*o+k*(5*p)+C*(5*f)+A*(5*h)+x*(5*d);I=L>>>13,L&=8191;var N=(I+=(L+=T*(5*u)+M*(5*l)+O*(5*c)+R*(5*s)+P*(5*a))>>>13)+S*a+k*o+C*(5*p)+A*(5*f)+x*(5*h);I=N>>>13,N&=8191,I+=(N+=T*(5*d)+M*(5*u)+O*(5*l)+R*(5*c)+P*(5*s))>>>13,N&=8191;var D=I+S*s+k*a+C*o+A*(5*p)+x*(5*f);I=D>>>13,D&=8191,I+=(D+=T*(5*h)+M*(5*d)+O*(5*u)+R*(5*l)+P*(5*c))>>>13,D&=8191;var B=I+S*c+k*s+C*a+A*o+x*(5*p);I=B>>>13,B&=8191,I+=(B+=T*(5*f)+M*(5*h)+O*(5*d)+R*(5*u)+P*(5*l))>>>13,B&=8191;var $=I+S*l+k*c+C*s+A*a+x*o;I=$>>>13,$&=8191,I+=($+=T*(5*p)+M*(5*f)+O*(5*h)+R*(5*d)+P*(5*u))>>>13,$&=8191;var j=I+S*u+k*l+C*c+A*s+x*a;I=j>>>13,j&=8191,I+=(j+=T*o+M*(5*p)+O*(5*f)+R*(5*h)+P*(5*d))>>>13,j&=8191;var K=I+S*d+k*u+C*l+A*c+x*s;I=K>>>13,K&=8191,I+=(K+=T*a+M*o+O*(5*p)+R*(5*f)+P*(5*h))>>>13,K&=8191;var U=I+S*h+k*d+C*u+A*l+x*c;I=U>>>13,U&=8191,I+=(U+=T*s+M*a+O*o+R*(5*p)+P*(5*f))>>>13,U&=8191;var H=I+S*f+k*h+C*d+A*u+x*l;I=H>>>13,H&=8191,I+=(H+=T*c+M*s+O*a+R*o+P*(5*p))>>>13,H&=8191;var F=I+S*p+k*f+C*h+A*d+x*u;I=F>>>13,F&=8191,I+=(F+=T*l+M*c+O*s+R*a+P*o)>>>13,F&=8191,L=8191&(I=(I=(I<<2)+I|0)+(L&=8191)|0),N+=I>>>=13,r[0]=L,r[1]=N,r[2]=D,r[3]=B,r[4]=$,r[5]=j,r[6]=K,r[7]=U,r[8]=H,r[9]=F}finalize(){var e=this.h,t=this.pad,n=new Uint16Array(10),r=e[1]>>>13;e[1]&=8191;for(var i=2;i<10;i++)e[i]+=r,r=e[i]>>>13,e[i]&=8191;e[0]+=5*r,r=e[0]>>>13,e[0]&=8191,e[1]+=r,r=e[1]>>>13,e[1]&=8191,e[2]+=r,n[0]=e[0]+5,r=n[0]>>>13,n[0]&=8191;for(var o=1;o<10;o++)n[o]=e[o]+r,r=n[o]>>>13,n[o]&=8191;n[9]-=8192;for(var a=(1^r)-1,s=0;s<10;s++)n[s]&=a;a=~a;for(var c=0;c<10;c++)e[c]=e[c]&a|n[c];e[0]=65535&(e[0]|e[1]<<13),e[1]=65535&(e[1]>>>3|e[2]<<10),e[2]=65535&(e[2]>>>6|e[3]<<7),e[3]=65535&(e[3]>>>9|e[4]<<4),e[4]=65535&(e[4]>>>12|e[5]<<1|e[6]<<14),e[5]=65535&(e[6]>>>2|e[7]<<11),e[6]=65535&(e[7]>>>5|e[8]<<8),e[7]=65535&(e[8]>>>8|e[9]<<5);var l=e[0]+t[0];e[0]=65535&l;for(var u=1;u<8;u++)l=(e[u]+t[u]|0)+(l>>>16)|0,e[u]=65535&l;(0,li.clean)(n)}update(e){(0,ci.exists)(this);for(var t=this.buffer,n=this.blockLen,r=(e=(0,li.toBytes)(e)).length,i=0;i<r;){var o=Math.min(n-this.pos,r-i);if(o!==n)t.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===n&&(this.process(t,0,!1),this.pos=0);else for(;n<=r-i;i+=n)this.process(e,i)}return this}destroy(){(0,li.clean)(this.h,this.r,this.buffer,this.pad)}digestInto(e){(0,ci.exists)(this),(0,ci.output)(e,this),this.finished=!0;var t=this.buffer,n=this.h,r=this.pos;if(r){for(t[r++]=1;r<16;r++)t[r]=0;this.process(t,0,!0)}this.finalize();for(var i=0,o=0;o<8;o++)e[i++]=n[o]>>>0,e[i++]=n[o]>>>8;return e}digest(){var e=this.buffer,t=this.outputLen;this.digestInto(e);var n=e.slice(0,t);return this.destroy(),n}},si.poly1305=Jf(e=>new di(e)),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.xchacha20poly1305=e.chacha20poly1305=e._poly1305_aead=e.chacha12=e.chacha8=e.xchacha20=e.chacha20=e.chacha20orig=void 0,e.hchacha=a;var t=Yr,n=it,r=si,i=rt;function o(e,n,r,i,o){for(var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:20,s=e[0],c=e[1],l=e[2],u=e[3],d=n[0],h=n[1],f=n[2],p=n[3],v=n[4],m=n[5],g=n[6],y=n[7],b=o,w=r[0],E=r[1],_=r[2],S=s,k=c,C=l,A=u,x=d,T=h,M=f,O=p,R=v,P=m,I=g,L=y,N=b,D=w,B=E,$=_,j=0;j<a;j+=2)S=S+x|0,R=R+(N=(0,t.rotl)(N^S,16))|0,S=S+(x=(0,t.rotl)(x^R,12))|0,R=R+(N=(0,t.rotl)(N^S,8))|0,x=(0,t.rotl)(x^R,7),k=k+T|0,P=P+(D=(0,t.rotl)(D^k,16))|0,k=k+(T=(0,t.rotl)(T^P,12))|0,P=P+(D=(0,t.rotl)(D^k,8))|0,T=(0,t.rotl)(T^P,7),C=C+M|0,I=I+(B=(0,t.rotl)(B^C,16))|0,C=C+(M=(0,t.rotl)(M^I,12))|0,I=I+(B=(0,t.rotl)(B^C,8))|0,M=(0,t.rotl)(M^I,7),A=A+O|0,L=L+($=(0,t.rotl)($^A,16))|0,A=A+(O=(0,t.rotl)(O^L,12))|0,L=L+($=(0,t.rotl)($^A,8))|0,O=(0,t.rotl)(O^L,7),S=S+T|0,I=I+($=(0,t.rotl)($^S,16))|0,S=S+(T=(0,t.rotl)(T^I,12))|0,I=I+($=(0,t.rotl)($^S,8))|0,T=(0,t.rotl)(T^I,7),k=k+M|0,L=L+(N=(0,t.rotl)(N^k,16))|0,k=k+(M=(0,t.rotl)(M^L,12))|0,L=L+(N=(0,t.rotl)(N^k,8))|0,M=(0,t.rotl)(M^L,7),C=C+O|0,R=R+(D=(0,t.rotl)(D^C,16))|0,C=C+(O=(0,t.rotl)(O^R,12))|0,R=R+(D=(0,t.rotl)(D^C,8))|0,O=(0,t.rotl)(O^R,7),A=A+x|0,P=P+(B=(0,t.rotl)(B^A,16))|0,A=A+(x=(0,t.rotl)(x^P,12))|0,P=P+(B=(0,t.rotl)(B^A,8))|0,x=(0,t.rotl)(x^P,7);var K=0;i[K++]=s+S|0,i[K++]=c+k|0,i[K++]=l+C|0,i[K++]=u+A|0,i[K++]=d+x|0,i[K++]=h+T|0,i[K++]=f+M|0,i[K++]=p+O|0,i[K++]=v+R|0,i[K++]=m+P|0,i[K++]=g+I|0,i[K++]=y+L|0,i[K++]=b+N|0,i[K++]=w+D|0,i[K++]=E+B|0,i[K++]=_+$|0}function a(e,n,r,i){for(var o=e[0],a=e[1],s=e[2],c=e[3],l=n[0],u=n[1],d=n[2],h=n[3],f=n[4],p=n[5],v=n[6],m=n[7],g=r[0],y=r[1],b=r[2],w=r[3],E=0;E<20;E+=2)o=o+l|0,f=f+(g=(0,t.rotl)(g^o,16))|0,o=o+(l=(0,t.rotl)(l^f,12))|0,f=f+(g=(0,t.rotl)(g^o,8))|0,l=(0,t.rotl)(l^f,7),a=a+u|0,p=p+(y=(0,t.rotl)(y^a,16))|0,a=a+(u=(0,t.rotl)(u^p,12))|0,p=p+(y=(0,t.rotl)(y^a,8))|0,u=(0,t.rotl)(u^p,7),s=s+d|0,v=v+(b=(0,t.rotl)(b^s,16))|0,s=s+(d=(0,t.rotl)(d^v,12))|0,v=v+(b=(0,t.rotl)(b^s,8))|0,d=(0,t.rotl)(d^v,7),c=c+h|0,m=m+(w=(0,t.rotl)(w^c,16))|0,c=c+(h=(0,t.rotl)(h^m,12))|0,m=m+(w=(0,t.rotl)(w^c,8))|0,h=(0,t.rotl)(h^m,7),o=o+u|0,v=v+(w=(0,t.rotl)(w^o,16))|0,o=o+(u=(0,t.rotl)(u^v,12))|0,v=v+(w=(0,t.rotl)(w^o,8))|0,u=(0,t.rotl)(u^v,7),a=a+d|0,m=m+(g=(0,t.rotl)(g^a,16))|0,a=a+(d=(0,t.rotl)(d^m,12))|0,m=m+(g=(0,t.rotl)(g^a,8))|0,d=(0,t.rotl)(d^m,7),s=s+h|0,f=f+(y=(0,t.rotl)(y^s,16))|0,s=s+(h=(0,t.rotl)(h^f,12))|0,f=f+(y=(0,t.rotl)(y^s,8))|0,h=(0,t.rotl)(h^f,7),c=c+l|0,p=p+(b=(0,t.rotl)(b^c,16))|0,c=c+(l=(0,t.rotl)(l^p,12))|0,p=p+(b=(0,t.rotl)(b^c,8))|0,l=(0,t.rotl)(l^p,7);var _=0;i[_++]=o,i[_++]=a,i[_++]=s,i[_++]=c,i[_++]=g,i[_++]=y,i[_++]=b,i[_++]=w}e.chacha20orig=(0,t.createCipher)(o,{counterRight:!1,counterLength:8,allowShortKeys:!0}),e.chacha20=(0,t.createCipher)(o,{counterRight:!1,counterLength:4,allowShortKeys:!1}),e.xchacha20=(0,t.createCipher)(o,{counterRight:!1,counterLength:8,extendNonceFn:a,allowShortKeys:!1}),e.chacha8=(0,t.createCipher)(o,{counterRight:!1,counterLength:4,rounds:8}),e.chacha12=(0,t.createCipher)(o,{counterRight:!1,counterLength:4,rounds:12});var s=new Uint8Array(16),c=(e,t)=>{e.update(t);var n=t.length%16;n&&e.update(s.subarray(n))},l=new Uint8Array(32);function u(e,t,n,o,a){var s=e(t,n,l),u=r.poly1305.create(s);a&&c(u,a),c(u,o);var d=new Uint8Array(16),h=(0,i.createView)(d);(0,i.setBigUint64)(h,0,BigInt(a?a.length:0),!0),(0,i.setBigUint64)(h,8,BigInt(o.length),!0),u.update(d);var f=u.digest();return(0,i.clean)(s,d),f}e._poly1305_aead=e=>(t,r,o)=>((0,n.bytes)(t,32),(0,n.bytes)(r),{encrypt(a,s){var c=a.length,l=c+16;s?(0,n.bytes)(s,l):s=new Uint8Array(l),e(t,r,a,s,1);var d=u(e,t,r,s.subarray(0,-16),o);return s.set(d,c),(0,i.clean)(d),s},decrypt(a,s){var c=a.length,l=c-16;if(c<16)throw new Error("encrypted data must be at least 16 bytes");s?(0,n.bytes)(s,l):s=new Uint8Array(l);var d=a.subarray(0,-16),h=a.subarray(-16),f=u(e,t,r,d,o);if(!(0,i.equalBytes)(h,f))throw new Error("invalid tag");return e(t,r,d,s,1),(0,i.clean)(f),s}}),e.chacha20poly1305=(0,i.wrapCipher)({blockSize:64,nonceLength:12,tagLength:16},(0,e._poly1305_aead)(e.chacha20)),e.xchacha20poly1305=(0,i.wrapCipher)({blockSize:64,nonceLength:24,tagLength:16},(0,e._poly1305_aead)(e.xchacha20))}(Gr),Object.defineProperty(Wr,"__esModule",{value:!0}),Wr.xchacha20=void 0,vi=Gr,Wr.xchacha20=function(e,t,n){return(0,vi.xchacha20poly1305)(e,t,n)},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.aesDecrypt=e.aesEncrypt=e.symDecrypt=e.symEncrypt=void 0;var t=rt,n=dt,r=gr,i=Wr,o=ot,a=at;function s(e,t,n,s){var c=(0,o.symmetricAlgorithm)();if("aes-256-gcm"===c)return e(r.aes256gcm,t,n,(0,o.symmetricNonceLength)(),a.AEAD_TAG_LENGTH,s);if("xchacha20"===c)return e(i.xchacha20,t,n,a.XCHACHA20_NONCE_LENGTH,a.AEAD_TAG_LENGTH,s);if("aes-256-cbc"===c)return e(r.aes256cbc,t,n,16,0);throw new Error("Not implemented")}function c(e,r,i,o,a,s){var c=(0,n.randomBytes)(o),l=e(r,c,s).encrypt(i);if(0===a)return(0,t.concatBytes)(c,l);var u=l.length-a,d=l.subarray(0,u),h=l.subarray(u);return(0,t.concatBytes)(c,h,d)}function l(e,n,r,i,o,a){var s=r.subarray(0,i),c=e(n,Uint8Array.from(s),a),l=r.subarray(i);if(0===o)return c.decrypt(l);var u=l.subarray(0,o),d=l.subarray(o);return c.decrypt((0,t.concatBytes)(d,u))}e.symEncrypt=function(e,t,n){return s(c,e,t,n)},e.symDecrypt=function(e,t,n){return s(l,e,t,n)},e.aesEncrypt=e.symEncrypt,e.aesDecrypt=e.symDecrypt}(mr),hi=lt,fi=tt&&tt.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),pi=tt&&tt.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||fi(t,e,n)},Object.defineProperty(hi,"__esModule",{value:!0}),pi(ut,hi),pi(lr,hi),pi(cr,hi),pi(mr,hi),mi={},Object.defineProperty(mi,"__esModule",{value:!0}),mi.PublicKey=void 0,gi=rt,yi=lt,mi.PublicKey=function(){function e(e){this.data=(0,yi.convertPublicKeyFormat)(e,!0)}return e.fromHex=function(t){return new e((0,yi.hexToPublicKey)(t))},Object.defineProperty(e.prototype,"uncompressed",{get:function(){return Yd.from((0,yi.convertPublicKeyFormat)(this.data,!1))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"compressed",{get:function(){return Yd.from(this.data)},enumerable:!1,configurable:!0}),e.prototype.toHex=function(e){return void 0===e&&(e=!0),(0,gi.bytesToHex)(e?this.data:this.uncompressed)},e.prototype.decapsulate=function(e,t){void 0===t&&(t=!1);var n=t?this.data:this.uncompressed,r=e.multiply(this,t);return(0,yi.getSharedKey)(n,r)},e.prototype.equals=function(e){return(0,gi.equalBytes)(this.data,e.data)},e}(),Object.defineProperty(ct,"__esModule",{value:!0}),ct.PrivateKey=void 0,bi=rt,wi=lt,Ei=mi,ct.PrivateKey=function(){function e(e){if(void 0===e)this.data=(0,wi.getValidSecret)();else{if(!(0,wi.isValidPrivateKey)(e))throw new Error("Invalid private key");this.data=e}this.publicKey=new Ei.PublicKey((0,wi.getPublicKey)(this.data))}return e.fromHex=function(t){return new e((0,wi.decodeHex)(t))},Object.defineProperty(e.prototype,"secret",{get:function(){return Yd.from(this.data)},enumerable:!1,configurable:!0}),e.prototype.toHex=function(){return(0,bi.bytesToHex)(this.data)},e.prototype.encapsulate=function(e,t){void 0===t&&(t=!1);var n=t?this.publicKey.compressed:this.publicKey.uncompressed,r=this.multiply(e,t);return(0,wi.getSharedKey)(n,r)},e.prototype.multiply=function(e,t){return void 0===t&&(t=!1),(0,wi.getSharedPoint)(this.data,e.compressed,t)},e.prototype.equals=function(e){return(0,bi.equalBytes)(this.data,e.data)},e}(),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PublicKey=e.PrivateKey=void 0;var t=ct;Object.defineProperty(e,"PrivateKey",{enumerable:!0,get:function(){return t.PrivateKey}});var n=mi;Object.defineProperty(e,"PublicKey",{enumerable:!0,get:function(){return n.PublicKey}})}(st),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.utils=e.PublicKey=e.PrivateKey=e.ECIES_CONFIG=void 0,e.encrypt=function(e,o){var a=new r.PrivateKey,s=e instanceof Uint8Array?new r.PublicKey(e):r.PublicKey.fromHex(e),c=a.encapsulate(s,(0,n.isHkdfKeyCompressed)()),l=(0,n.isEphemeralKeyCompressed)()?a.publicKey.compressed:a.publicKey.uncompressed,u=(0,i.symEncrypt)(c,o);return Yd.from((0,t.concatBytes)(l,u))},e.decrypt=function(e,t){var o=e instanceof Uint8Array?new r.PrivateKey(e):r.PrivateKey.fromHex(e),a=(0,n.ephemeralKeySize)(),s=new r.PublicKey(t.subarray(0,a)),c=t.subarray(a),l=s.decapsulate(o,(0,n.isHkdfKeyCompressed)());return Yd.from((0,i.symDecrypt)(l,c))};var t=rt,n=ot,r=st,i=lt,o=ot;Object.defineProperty(e,"ECIES_CONFIG",{enumerable:!0,get:function(){return o.ECIES_CONFIG}});var a=st;Object.defineProperty(e,"PrivateKey",{enumerable:!0,get:function(){return a.PrivateKey}}),Object.defineProperty(e,"PublicKey",{enumerable:!0,get:function(){return a.PublicKey}}),e.utils={aesEncrypt:i.aesEncrypt,aesDecrypt:i.aesDecrypt,symEncrypt:i.symEncrypt,symDecrypt:i.symDecrypt,decodeHex:i.decodeHex,getValidSecret:i.getValidSecret,remove0x:i.remove0x}}(nt),_i=(0,B.default)("KeyExchange:Layer"),Si=(0,B.default)("SocketService:Layer"),ki=(0,B.default)("Ecies:Layer"),Ci=(0,B.default)("RemoteCommunication:Layer"),_i.color="##95c44e",Si.color="#f638d7",ki.color="#465b9c",Ci.color="#47a2be",Ai={KeyExchange:_i,SocketService:Si,Ecies:ki,RemoteCommunication:Ci},Ti=[],Mi=[],Oi=(e,t)=>Ud(void 0,void 0,void 0,b().m(function n(){return b().w(function(n){for(;;)switch(n.n){case 0:xi=t,Mi.push(e),function(e){return Ud(this,void 0,void 0,b().m(function t(){var n,r,i,o,a,s,c,l,u;return b().w(function(t){for(;;)switch(t.p=t.n){case 0:if(xi&&e){t.n=1;break}return t.a(2);case 1:if(function(){var e=Mi;Mi=Ti,Ti=e}(),n=xi.endsWith("/")?`${xi}evt`:`${xi}/evt`,delete(r=Object.assign({},e)).params,e.params)for(i=0,o=Object.entries(e.params);i<o.length;i++)a=p(o[i],2),s=a[0],c=a[1],r[s]=c;return l=JSON.stringify(r),Ai.RemoteCommunication(`[sendBufferedEvents] Sending ${Ti.length} analytics events to ${n}`),t.p=2,t.n=3,(0,$.default)(n,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:l});case 3:return t.n=4,t.v.text();case 4:u=t.v,Ai.RemoteCommunication(`[sendBufferedEvents] Response: ${u}`),Ti.length=0,t.n=6;break;case 5:t.p=5,t.v;case 6:return t.a(2)}},t,null,[[2,5]])}))}(e).catch(()=>{});case 1:return n.a(2)}},n)})),Ri=class{constructor(e){this.enabled=!0,null!=e&&e.debug&&B.default.enable("Ecies:Layer"),this.ecies=(null==e?void 0:e.privateKey)?nt.PrivateKey.fromHex(e.privateKey):new nt.PrivateKey,Ai.Ecies("[ECIES constructor()] initialized secret: ",this.ecies.toHex()),Ai.Ecies("[ECIES constructor()] initialized public: ",this.ecies.publicKey.toHex()),Ai.Ecies("[ECIES constructor()] init with",this)}generateECIES(){this.ecies=new nt.PrivateKey}getPublicKey(){return this.ecies.publicKey.toHex()}encrypt(e,t){var n=e;if(this.enabled)try{Ai.Ecies("[ECIES: encrypt()] using otherPublicKey",t);var r=Yd.from(e),i=nt.encrypt(t,r);n=Yd.from(i).toString("base64")}catch(o){throw Ai.Ecies("[ECIES: encrypt()] error encrypt:",o),Ai.Ecies("[ECIES: encrypt()] private: ",this.ecies.toHex()),Ai.Ecies("[ECIES: encrypt()] data: ",e),Ai.Ecies("[ECIES: encrypt()] otherkey: ",t),o}return n}decrypt(e){var t=e;if(this.enabled)try{Ai.Ecies("[ECIES: decrypt()] using privateKey",this.ecies.toHex());var n=Yd.from(e.toString(),"base64");t=nt.decrypt(this.ecies.toHex(),n).toString()}catch(r){throw Ai.Ecies("[ECIES: decrypt()] error decrypt",r),Ai.Ecies("[ECIES: decrypt()] private: ",this.ecies.toHex()),Ai.Ecies("[ECIES: decrypt()] encryptedData: ",e),r}return t}getKeyInfo(){return{private:this.ecies.toHex(),public:this.ecies.publicKey.toHex()}}toString(){Ai.Ecies("[ECIES: toString()]",this.getKeyInfo())}},Pi={name:"@metamask/sdk-communication-layer",version:"0.33.1",description:"",homepage:"https://github.com/MetaMask/metamask-sdk#readme",bugs:{url:"https://github.com/MetaMask/metamask-sdk/issues"},repository:{type:"git",url:"https://github.com/MetaMask/metamask-sdk.git",directory:"packages/sdk-communication-layer"},main:"dist/node/cjs/metamask-sdk-communication-layer.js",unpkg:"dist/browser/umd/metamask-sdk-communication-layer.js",module:"dist/node/es/metamask-sdk-communication-layer.js",browser:"dist/browser/es/metamask-sdk-communication-layer.js","react-native":"dist/react-native/es/metamask-sdk-communication-layer.js",types:"dist/types/src/index.d.ts",files:["/dist"],scripts:{"build:types":"tsc --project tsconfig.build.json --emitDeclarationOnly --outDir dist/types","build:clean":"yarn clean && yarn build",build:"yarn build:types && rollup -c --bundleConfigAsCjs","build:dev":"yarn build:types && NODE_ENV=dev rollup -c --bundleConfigAsCjs",dev:'concurrently "tsc --watch" "rollup -c --bundleConfigAsCjs -w"',"build:post-tsc":"echo 'N/A'","build:pre-tsc":"echo 'N/A'",size:"size-limit",clean:"rimraf ./dist",lint:"yarn lint:eslint && yarn lint:misc --check","lint:changelog":"../../scripts/validate-changelog.sh @metamask/sdk-communication-layer","lint:eslint":"eslint . --cache --ext js,ts","lint:fix":"yarn lint:eslint --fix && yarn lint:misc --write","lint:misc":"prettier '**/*.json' '**/*.md' '!CHANGELOG.md' --ignore-path ../../.gitignore","publish:preview":"yarn npm publish --tag preview",prepack:"../../scripts/prepack.sh",reset:"yarn clean && rimraf ./node_modules/",test:'jest --testPathIgnorePatterns "/e2e/"',"test:e2e":'jest --testPathPattern "/e2e/"',"test:coverage":"jest --coverage","test:ci":'jest --coverage --passWithNoTests --setupFilesAfterEnv ./jest-preload.js --testPathIgnorePatterns "/e2e/"',"test:dev":"jest",watch:"rollup -c --bundleConfigAsCjs -w"},dependencies:{"@metamask/sdk-analytics":"workspace:*",bufferutil:"^4.0.8","date-fns":"^2.29.3",debug:"4.3.4","utf-8-validate":"^5.0.2",uuid:"^8.3.2"},devDependencies:{"@jest/globals":"^29.3.1","@lavamoat/allow-scripts":"^2.3.1","@metamask/auto-changelog":"3.1.0","@metamask/eslint-config":"^6.0.0","@metamask/eslint-config-nodejs":"^6.0.0","@metamask/eslint-config-typescript":"^6.0.0","@rollup/plugin-commonjs":"^25.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.2","@rollup/plugin-replace":"^6.0.1","@rollup/plugin-terser":"^0.4.4","@size-limit/preset-big-lib":"^11.0.2","@types/jest":"^29.2.4","@types/node":"^20.1.3","@types/uuid":"^9.0.0","@typescript-eslint/eslint-plugin":"^4.26.0","@typescript-eslint/parser":"^4.26.0",concurrently:"^9.1.2","cross-fetch":"^4.0.0",eciesjs:"^0.4.11",eslint:"^7.30.0","eslint-config-prettier":"^8.3.0","eslint-plugin-import":"^2.23.4","eslint-plugin-jest":"^24.4.0","eslint-plugin-jsdoc":"^36.1.0","eslint-plugin-node":"^11.1.0","eslint-plugin-prettier":"^3.4.0",eventemitter2:"^6.4.9",jest:"^29.3.1",prettier:"^2.3.0",rimraf:"^3.0.2",rollup:"^4.26.0","rollup-plugin-jscc":"^2.0.0","rollup-plugin-natives":"^0.7.5","rollup-plugin-node-builtins":"^2.1.2","rollup-plugin-node-globals":"^1.4.0","rollup-plugin-peer-deps-external":"^2.2.4","rollup-plugin-polyfill-node":"^0.13.0","rollup-plugin-sizes":"^1.0.6","rollup-plugin-typescript2":"^0.31.2","rollup-plugin-visualizer":"^5.12.0","size-limit":"^11.1.6","socket.io-client":"^4.5.1","stream-browserify":"^3.0.0","ts-jest":"^29.0.3","ts-node":"^10.9.1",typescript:"^5.6.3"},peerDependencies:{"cross-fetch":"^4.0.0",eciesjs:"*",eventemitter2:"^6.4.9","readable-stream":"^3.6.2","socket.io-client":"^4.5.1"},publishConfig:{access:"public",registry:"https://registry.npmjs.org/"},lavamoat:{allowScripts:{"@lavamoat/preinstall-always-fail":!1,canvas:!0,"eciesjs>secp256k1":!1,"socket.io-client>engine.io-client>ws>bufferutil":!1,"socket.io-client>engine.io-client>ws>utf-8-validate":!1,bufferutil:!1,"utf-8-validate":!1}}},i("DEFAULT_SERVER_URL",Ii="https://metamask-sdk.api.cx.metamask.io/"),Li=["websocket"],Ni=6048e5,Bi=[(Di={METAMASK_GETPROVIDERSTATE:"metamask_getProviderState",METAMASK_CONNECTSIGN:"metamask_connectSign",METAMASK_CONNECTWITH:"metamask_connectWith",METAMASK_OPEN:"metamask_open",METAMASK_BATCH:"metamask_batch",PERSONAL_SIGN:"personal_sign",WALLET_REQUESTPERMISSIONS:"wallet_requestPermissions",WALLET_REVOKEPERMISSIONS:"wallet_revokePermissions",WALLET_GETPERMISSIONS:"wallet_getPermissions",WALLET_WATCHASSET:"wallet_watchAsset",WALLET_SWITCHETHEREUMCHAIN:"wallet_switchEthereumChain",WALLET_ADDETHEREUMCHAIN:"wallet_addEthereumChain",ETH_REQUESTACCOUNTS:"eth_requestAccounts",ETH_ACCOUNTS:"eth_accounts",ETH_CHAINID:"eth_chainId",ETH_SENDTRANSACTION:"eth_sendTransaction",ETH_SIGNTYPEDDATA:"eth_signTypedData",ETH_SIGNTYPEDDATA_V3:"eth_signTypedData_v3",ETH_SIGNTYPEDDATA_V4:"eth_signTypedData_v4",ETH_SIGNTRANSACTION:"eth_signTransaction",ETH_SIGN:"eth_sign",PERSONAL_EC_RECOVER:"personal_ecRecover"}).METAMASK_CONNECTSIGN,Di.METAMASK_CONNECTWITH,Di.METAMASK_OPEN,Di.METAMASK_BATCH,Di.PERSONAL_SIGN,Di.WALLET_REQUESTPERMISSIONS,Di.WALLET_REVOKEPERMISSIONS,Di.WALLET_WATCHASSET,Di.ETH_SENDTRANSACTION,Di.ETH_SIGNTYPEDDATA,Di.ETH_SIGNTYPEDDATA_V3,Di.ETH_SIGNTYPEDDATA_V4,Di.ETH_SIGNTRANSACTION,Di.ETH_SIGN,Di.PERSONAL_EC_RECOVER],(zi=$i||i("ConnectionStatus",$i={})).DISCONNECTED="disconnected",zi.WAITING="waiting",zi.TIMEOUT="timeout",zi.LINKED="linked",zi.PAUSED="paused",zi.TERMINATED="terminated",(ko=ji||i("EventType",ji={})).KEY_INFO="key_info",ko.SERVICE_STATUS="service_status",ko.PROVIDER_UPDATE="provider_update",ko.RPC_UPDATE="rpc_update",ko.KEYS_EXCHANGED="keys_exchanged",ko.JOIN_CHANNEL="join_channel",ko.PUBLIC_KEY="public_key",ko.CHANNEL_CREATED="channel_created",ko.CLIENTS_CONNECTED="clients_connected",ko.CLIENTS_DISCONNECTED="clients_disconnected",ko.CLIENTS_WAITING="clients_waiting",ko.CLIENTS_READY="clients_ready",ko.REJECTED="rejected",ko.WALLET_INIT="wallet_init",ko.CHANNEL_PERSISTENCE="channel_persistence",ko.CONFIG="config",ko.MESSAGE_ACK="ack",ko.SOCKET_DISCONNECTED="socket_disconnected",ko.SOCKET_RECONNECT="socket_reconnect",ko.OTP="otp",ko.SDK_RPC_CALL="sdk_rpc_call",ko.AUTHORIZED="authorized",ko.CONNECTION_STATUS="connection_status",ko.MESSAGE="message",ko.TERMINATE="terminate",(Ki||(Ki={})).KEY_EXCHANGE="key_exchange",function(e){e.KEY_HANDSHAKE_START="key_handshake_start",e.KEY_HANDSHAKE_CHECK="key_handshake_check",e.KEY_HANDSHAKE_SYN="key_handshake_SYN",e.KEY_HANDSHAKE_SYNACK="key_handshake_SYNACK",e.KEY_HANDSHAKE_ACK="key_handshake_ACK",e.KEY_HANDSHAKE_WALLET="key_handshake_wallet",e.KEY_HANDSHAKE_NONE="none"}(Ui||(Ui={})),qi=class extends N.EventEmitter2{constructor(e){var t=e.communicationLayer,n=e.otherPublicKey,r=e.context,i=e.ecies,o=e.logging;super(),this.keysExchanged=!1,this.step=Ui.KEY_HANDSHAKE_NONE,this.debug=!1,this.context=r,this.communicationLayer=t,null!=i&&i.privateKey&&n&&(Ai.KeyExchange(`[KeyExchange: constructor()] otherPubKey=${n} set keysExchanged to true!`,i),this.keysExchanged=!0),this.myECIES=new Ri(Object.assign(Object.assign({},i),{debug:null==o?void 0:o.eciesLayer})),this.communicationLayer.state.eciesInstance=this.myECIES,this.myPublicKey=this.myECIES.getPublicKey(),this.debug=!0===(null==o?void 0:o.keyExchangeLayer),n&&this.setOtherPublicKey(n),this.communicationLayer.on(Ki.KEY_EXCHANGE,this.onKeyExchangeMessage.bind(this))}onKeyExchangeMessage(e){var t=this.communicationLayer.remote.state.relayPersistence;if(Ai.KeyExchange(`[KeyExchange: onKeyExchangeMessage()] context=${this.context} keysExchanged=${this.keysExchanged} relayPersistence=${t}`,e),t)Ai.KeyExchange("[KeyExchange: onKeyExchangeMessage()] Ignoring key exchange message because relay persistence is activated");else{var n=e.message;this.keysExchanged&&Ai.KeyExchange(`[KeyExchange: onKeyExchangeMessage()] context=${this.context} received handshake while already exchanged. step=${this.step} otherPubKey=${this.otherPublicKey}`),this.emit(ji.KEY_INFO,n.type),n.type===Ui.KEY_HANDSHAKE_SYN?(this.checkStep([Ui.KEY_HANDSHAKE_NONE,Ui.KEY_HANDSHAKE_ACK]),Ai.KeyExchange("[KeyExchange: onKeyExchangeMessage()] KEY_HANDSHAKE_SYN",n),n.pubkey&&this.setOtherPublicKey(n.pubkey),this.communicationLayer.sendMessage({type:Ui.KEY_HANDSHAKE_SYNACK,pubkey:this.myPublicKey}).catch(e=>{Ai.KeyExchange("[KeyExchange: onKeyExchangeMessage()] Error sending KEY_HANDSHAKE_SYNACK",e)}),this.setStep(Ui.KEY_HANDSHAKE_ACK)):n.type===Ui.KEY_HANDSHAKE_SYNACK?(this.checkStep([Ui.KEY_HANDSHAKE_SYNACK,Ui.KEY_HANDSHAKE_ACK,Ui.KEY_HANDSHAKE_NONE]),Ai.KeyExchange("[KeyExchange: onKeyExchangeMessage()] KEY_HANDSHAKE_SYNACK"),n.pubkey&&this.setOtherPublicKey(n.pubkey),this.communicationLayer.sendMessage({type:Ui.KEY_HANDSHAKE_ACK}).catch(e=>{Ai.KeyExchange("[KeyExchange: onKeyExchangeMessage()] Error sending KEY_HANDSHAKE_ACK",e)}),this.keysExchanged=!0,this.setStep(Ui.KEY_HANDSHAKE_ACK),this.emit(ji.KEYS_EXCHANGED)):n.type===Ui.KEY_HANDSHAKE_ACK&&(Ai.KeyExchange("[KeyExchange: onKeyExchangeMessage()] KEY_HANDSHAKE_ACK set keysExchanged to true!"),this.checkStep([Ui.KEY_HANDSHAKE_ACK,Ui.KEY_HANDSHAKE_NONE]),this.keysExchanged=!0,this.setStep(Ui.KEY_HANDSHAKE_ACK),this.emit(ji.KEYS_EXCHANGED))}}resetKeys(e){this.clean(),this.myECIES=new Ri(e)}clean(){Ai.KeyExchange(`[KeyExchange: clean()] context=${this.context} reset handshake state`),this.setStep(Ui.KEY_HANDSHAKE_NONE),this.emit(ji.KEY_INFO,this.step),this.keysExchanged=!1}start(e){var t=e.isOriginator,n=e.force,r=this.communicationLayer.remote.state,i=r.relayPersistence,o=r.protocolVersion,a=o>=2;i?Ai.KeyExchange("[KeyExchange: start()] Ignoring key exchange message because relay persistence is activated"):(Ai.KeyExchange(`[KeyExchange: start()] context=${this.context} protocolVersion=${o} isOriginator=${t} step=${this.step} force=${n} relayPersistence=${i} keysExchanged=${this.keysExchanged}`),t?!(this.keysExchanged||this.step!==Ui.KEY_HANDSHAKE_NONE&&this.step!==Ui.KEY_HANDSHAKE_SYNACK)||n?(Ai.KeyExchange(`[KeyExchange: start()] context=${this.context} -- start key exchange (force=${n}) -- step=${this.step}`,this.step),this.clean(),this.setStep(Ui.KEY_HANDSHAKE_SYNACK),this.communicationLayer.sendMessage({type:Ui.KEY_HANDSHAKE_SYN,pubkey:this.myPublicKey,v:2}).catch(e=>{Ai.KeyExchange("[KeyExchange: start()] Error sending KEY_HANDSHAKE_SYN",e)})):Ai.KeyExchange(`[KeyExchange: start()] context=${this.context} -- key exchange already ${this.keysExchanged?"done":"in progress"} -- aborted.`,this.step):this.keysExchanged&&!0!==n?Ai.KeyExchange("[KeyExchange: start()] don't send KEY_HANDSHAKE_START -- exchange already done."):a?this.communicationLayer.sendMessage({type:Ui.KEY_HANDSHAKE_SYNACK,pubkey:this.myPublicKey,v:2}).catch(e=>{Ai.KeyExchange("[KeyExchange: start()] Error sending KEY_HANDSHAKE_SYNACK",e)}):(this.communicationLayer.sendMessage({type:Ui.KEY_HANDSHAKE_START}).catch(e=>{Ai.KeyExchange("[KeyExchange: start()] Error sending KEY_HANDSHAKE_START",e)}),this.clean()))}setStep(e){this.step=e,this.emit(ji.KEY_INFO,e)}checkStep(e){e.length>0&&e.indexOf(this.step.toString())}setRelayPersistence(e){var t=e.localKey,n=e.otherKey;this.otherPublicKey=n,this.myECIES=new Ri({privateKey:t,debug:this.debug}),this.keysExchanged=!0}setKeysExchanged(e){this.keysExchanged=e}areKeysExchanged(){return this.keysExchanged}getMyPublicKey(){return this.myPublicKey}getOtherPublicKey(){return this.otherPublicKey}setOtherPublicKey(e){Ai.KeyExchange("[KeyExchange: setOtherPubKey()]",e),this.otherPublicKey=e}encryptMessage(e){if(!this.otherPublicKey)throw new Error("encryptMessage: Keys not exchanged - missing otherPubKey");return this.myECIES.encrypt(e,this.otherPublicKey)}decryptMessage(e){if(!this.otherPublicKey)throw new Error("decryptMessage: Keys not exchanged - missing otherPubKey");return this.myECIES.decrypt(e)}getKeyInfo(){return{ecies:Object.assign(Object.assign({},this.myECIES.getKeyInfo()),{otherPubKey:this.otherPublicKey}),step:this.step,keysExchanged:this.areKeysExchanged()}}toString(){var e={keyInfo:this.getKeyInfo(),keysExchanged:this.keysExchanged,step:this.step};return JSON.stringify(e)}},function(e){e.TERMINATE="terminate",e.ANSWER="answer",e.OFFER="offer",e.CANDIDATE="candidate",e.JSONRPC="jsonrpc",e.WALLET_INFO="wallet_info",e.WALLET_INIT="wallet_init",e.ORIGINATOR_INFO="originator_info",e.PAUSE="pause",e.OTP="otp",e.AUTHORIZED="authorized",e.PING="ping",e.READY="ready"}(Hi||i("MessageType",Hi={})),function(e){e.REQUEST="sdk_connect_request_started",e.REQUEST_MOBILE="sdk_connect_request_started_mobile",e.RECONNECT="sdk_reconnect_request_started",e.CONNECTED="sdk_connection_established",e.CONNECTED_MOBILE="sdk_connection_established_mobile",e.AUTHORIZED="sdk_connection_authorized",e.REJECTED="sdk_connection_rejected",e.TERMINATED="sdk_connection_terminated",e.DISCONNECTED="sdk_disconnected",e.SDK_USE_EXTENSION="sdk_use_extension",e.SDK_RPC_REQUEST="sdk_rpc_request",e.SDK_RPC_REQUEST_RECEIVED="sdk_rpc_request_received",e.SDK_RPC_REQUEST_DONE="sdk_rpc_request_done",e.SDK_EXTENSION_UTILIZED="sdk_extension_utilized",e.SDK_USE_INAPP_BROWSER="sdk_use_inapp_browser"}(Fi||(Fi={})),Vi=(e,t,n)=>Ud(void 0,void 0,void 0,b().m(function r(){var i,o,a,s,c,l,u,d,h,f,p,v,m,g,y,w,E;return b().w(function(r){for(;;)switch(r.n){case 0:if(u=e.remote,d=e.state,h=d.channelId,f=d.isOriginator,"error_terminated"!==t){r.n=1;break}return r.a(2,(Ai.SocketService(`handleJoinChannelResults: Channel ${h} terminated`),void e.emit(ji.TERMINATE)));case 1:if(n){r.n=2;break}return r.a(2,void Ai.SocketService(`handleJoinChannelResults: No result for channel ${h}`));case 2:if(p=n.persistence,v=n.walletKey,m=n.rejected,Ai.SocketService(`handleJoinChannelResults: Channel ${h} persistence=${p} walletKey=${v} rejected=${m}`),!m){r.n=4;break}return Ai.SocketService(`handleJoinChannelResults: Channel ${h} rejected`),r.n=3,e.remote.disconnect({terminate:!0});case 3:return e.remote.emit(ji.REJECTED,{channelId:h}),r.a(2,void e.remote.emitServiceStatusEvent());case 4:if(!v||(null===(i=u.state.channelConfig)||void 0===i?void 0:i.otherKey)){r.n=6;break}return e.getKeyExchange().setOtherPublicKey(v),null===(o=e.state.keyExchange)||void 0===o||o.setKeysExchanged(!0),u.state.ready=!0,u.state.authorized=!0,u.emit(ji.AUTHORIZED),g=u.state,y=g.communicationLayer,w=g.storageManager,E=Object.assign(Object.assign({},u.state.channelConfig),{channelId:null!==(a=u.state.channelId)&&void 0!==a?a:"",validUntil:Date.now()+Ni,localKey:null==y?void 0:y.getKeyInfo().ecies.private,otherKey:v}),e.sendMessage({type:Ui.KEY_HANDSHAKE_ACK}).catch(e=>{}),null===(s=e.state.socket)||void 0===s||s.emit(Hi.PING,{id:h,clientType:f?"dapp":"wallet",context:"on_channel_reconnect",message:""}),r.n=5,null==w?void 0:w.persistChannelConfig(E);case 5:u.emitServiceStatusEvent(),u.setConnectionStatus($i.LINKED);case 6:p&&(e.emit(ji.CHANNEL_PERSISTENCE),null===(c=e.state.keyExchange)||void 0===c||c.setKeysExchanged(!0),u.state.ready=!0,u.state.authorized=!0,u.emit(ji.AUTHORIZED),Oi(Object.assign(Object.assign({id:null!=h?h:"",event:f?Fi.CONNECTED:Fi.CONNECTED_MOBILE},e.remote.state.originatorInfo),{sdkVersion:e.remote.state.sdkVersion,commLayer:e.state.communicationLayerPreference,commLayerVersion:Pi.version,walletVersion:null===(l=e.remote.state.walletInfo)||void 0===l?void 0:l.version}),d.communicationServerUrl).catch(e=>{}));case 7:return r.a(2)}},r)})),Wi=e=>new Promise(t=>{setTimeout(t,e)}),Gi=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return Ud(void 0,[e,t,...r],void 0,function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200;return b().m(function r(){var i,o,a;return b().w(function(r){for(;;)switch(r.n){case 0:o=Date.now(),a=!1;case 1:if(a){r.n=4;break}if(a=Date.now()-o>3e5,void 0===(i=t[e]).elapsedTime){r.n=2;break}return r.a(2,i);case 2:return r.n=3,Wi(n);case 3:r.n=1;break;case 4:throw new Error(`RPC ${e} timed out`);case 5:return r.a(2)}},r)})()})},Yi=e=>Ud(void 0,void 0,void 0,b().m(function t(){var n,r,i,o,a,s,c;return b().w(function(t){for(;;)switch(t.p=t.n){case 0:if(n=e.state,r=n.socket,i=n.channelId,o=n.context,a=n.isOriginator,!n.isReconnecting){t.n=1;break}return t.a(2,(Ai.SocketService("[SocketService: reconnectSocket()] Reconnection already in progress, skipping",e),!1));case 1:if(r){t.n=2;break}return t.a(2,(Ai.SocketService("[SocketService: reconnectSocket()] socket is not defined",e),!1));case 2:if(i){t.n=3;break}return t.a(2,!1);case 3:s=r.connected,n.isReconnecting=!0,n.reconnectionAttempts=0,Ai.SocketService(`[SocketService: reconnectSocket()] connected=${s} trying to reconnect after socketio disconnection`,e),t.p=4;case 5:if(!(3>n.reconnectionAttempts)){t.n=15;break}return Ai.SocketService(`[SocketService: reconnectSocket()] Attempt ${n.reconnectionAttempts+1} of 3`,e),t.n=6,Wi(200);case 6:if(!r.connected){t.n=7;break}return t.a(2,(Ai.SocketService("Socket already connected --- ping to retrieve messages"),r.emit(Hi.PING,{id:i,clientType:a?"dapp":"wallet",context:"on_channel_config",message:""}),!0));case 7:return n.resumed=!0,r.connect(),e.emit(ji.SOCKET_RECONNECT),t.p=8,t.n=9,new Promise((t,n)=>{r.emit(ji.JOIN_CHANNEL,{channelId:i,context:`${o}connect_again`,clientType:a?"dapp":"wallet"},(r,i)=>Ud(void 0,void 0,void 0,b().m(function o(){var a;return b().w(function(o){for(;;)switch(o.p=o.n){case 0:return o.p=0,o.n=1,Vi(e,r,i);case 1:t(),o.n=3;break;case 2:o.p=2,a=o.v,n(a);case 3:return o.a(2)}},o,null,[[0,2]])})))});case 9:return t.n=10,Wi(100);case 10:if(!r.connected){t.n=11;break}return t.a(2,(Ai.SocketService(`Reconnection successful on attempt ${n.reconnectionAttempts+1}`),!0));case 11:t.n=13;break;case 12:t.p=12,c=t.v,Ai.SocketService(`Error during reconnection attempt ${n.reconnectionAttempts+1}:`,c);case 13:if(n.reconnectionAttempts+=1,!(3>n.reconnectionAttempts)){t.n=14;break}return t.n=14,Wi(200);case 14:t.n=5;break;case 15:return t.a(2,(Ai.SocketService("Failed to reconnect after 3 attempts"),!1));case 16:return t.p=16,n.isReconnecting=!1,n.reconnectionAttempts=0,t.f(16);case 17:return t.a(2)}},t,null,[[8,12],[4,,16,17]])})),function(e){e.RPC_CHECK="rpcCheck",e.SKIPPED_RPC="skippedRpc"}(Zi||(Zi={})),Ji=["eth_sendTransaction","eth_signTypedData","eth_signTransaction","personal_sign","wallet_requestPermissions","wallet_switchEthereumChain","eth_signTypedData_v3","eth_signTypedData_v4","metamask_connectSign","metamask_connectWith","metamask_batch"].map(e=>e.toLowerCase()),Xi=[{event:ji.CLIENTS_CONNECTED,handler:function(e,t){return n=>Ud(this,void 0,void 0,b().m(function n(){var r,i,o,a,s,c,l,u,d,h,f,p,v;return b().w(function(n){for(;;)switch(n.n){case 0:p=null!==(i=null===(r=e.remote.state.channelConfig)||void 0===r?void 0:r.relayPersistence)&&void 0!==i&&i,Ai.SocketService(`[SocketService: handleClientsConnected()] context=${e.state.context} on 'clients_connected-${t}' relayPersistence=${p} resumed=${e.state.resumed}  clientsPaused=${e.state.clientsPaused} keysExchanged=${null===(o=e.state.keyExchange)||void 0===o?void 0:o.areKeysExchanged()} isOriginator=${e.state.isOriginator}`),e.emit(ji.CLIENTS_CONNECTED,{isOriginator:e.state.isOriginator,keysExchanged:null===(a=e.state.keyExchange)||void 0===a?void 0:a.areKeysExchanged(),context:e.state.context}),e.state.resumed?(e.state.isOriginator||(Ai.SocketService(`[SocketService: handleClientsConnected()] context=${e.state.context} 'clients_connected' / keysExchanged=${null===(s=e.state.keyExchange)||void 0===s?void 0:s.areKeysExchanged()} -- backward compatibility`),null===(c=e.state.keyExchange)||void 0===c||c.start({isOriginator:null!==(l=e.state.isOriginator)&&void 0!==l&&l})),e.state.resumed=!1):e.state.clientsPaused?Ai.SocketService("[SocketService: handleClientsConnected()] 'clients_connected' skip sending originatorInfo on pause"):e.state.isOriginator||(v=!p,Ai.SocketService(`[SocketService: handleClientsConnected()] context=${e.state.context} on 'clients_connected' / keysExchanged=${null===(u=e.state.keyExchange)||void 0===u?void 0:u.areKeysExchanged()} -- force=${v} -- backward compatibility`),Ai.SocketService(`[SocketService: handleClientsConnected()] context=${e.state.context} on 'clients_connected' / keysExchanged=${null===(d=e.state.keyExchange)||void 0===d?void 0:d.areKeysExchanged()} -- force=${v} -- backward compatibility`),null===(h=e.state.keyExchange)||void 0===h||h.start({isOriginator:null!==(f=e.state.isOriginator)&&void 0!==f&&f,force:v})),e.state.clientsConnected=!0,e.state.clientsPaused=!1;case 1:return n.a(2)}},n)}))}},{event:ji.CHANNEL_CREATED,handler:function(e,t){return n=>{Ai.SocketService(`[SocketService: handleChannelCreated()] context=${e.state.context} on 'channel_created-${t}'`,n),e.emit(ji.CHANNEL_CREATED,n)}}},{event:ji.CLIENTS_DISCONNECTED,handler:function(e,t){return()=>{var n;e.state.clientsConnected=!1,Ai.SocketService(`[SocketService: handlesClientsDisconnected()] context=${e.state.context} on 'clients_disconnected-${t}'`),e.remote.state.relayPersistence?Ai.SocketService(`[SocketService: handlesClientsDisconnected()] context=${e.state.context} on 'clients_disconnected-${t}' - relayPersistence enabled, skipping key exchange cleanup.`):(e.state.isOriginator&&!e.state.clientsPaused&&(null===(n=e.state.keyExchange)||void 0===n||n.clean()),e.emit(ji.CLIENTS_DISCONNECTED,t))}}},{event:ji.CONFIG,handler:function(e,t){return n=>Ud(this,void 0,void 0,b().m(function r(){var i,o,a,s,c;return b().w(function(r){for(;;)switch(r.n){case 0:if(Ai.SocketService(`[SocketService: handleChannelConfig()] update relayPersistence on 'config-${t}'`,n),s=n.persistence,c=n.walletKey,!e.state.isOriginator||!e.remote.state.channelConfig){r.n=5;break}if(!(n.walletKey&&!e.remote.state.channelConfig.otherKey)){r.n=3;break}return Ai.SocketService(`Setting wallet key ${c}`),e.remote.state.channelConfig.otherKey=c,e.getKeyExchange().setOtherPublicKey(n.walletKey),null===(i=e.state.keyExchange)||void 0===i||i.setKeysExchanged(!0),r.n=1,e.remote.sendMessage({type:Ui.KEY_HANDSHAKE_ACK});case 1:return r.n=2,e.remote.sendMessage({type:Hi.PING});case 2:return r.n=3,null===(o=e.remote.state.storageManager)||void 0===o?void 0:o.persistChannelConfig(e.remote.state.channelConfig);case 3:if(!0!==s||e.remote.state.channelConfig.relayPersistence){r.n=4;break}return Ai.SocketService(`Setting relay persistence ${s}`),e.remote.state.channelConfig.relayPersistence=s,e.remote.state.relayPersistence=!0,e.remote.emit(ji.CHANNEL_PERSISTENCE),e.remote.state.authorized=!0,e.remote.state.ready=!0,e.remote.emit(ji.AUTHORIZED),r.n=4,null===(a=e.remote.state.storageManager)||void 0===a?void 0:a.persistChannelConfig(e.remote.state.channelConfig);case 4:r.n=6;break;case 5:e.state.isOriginator||n.persistence&&(e.remote.state.relayPersistence=!0,e.remote.emit(ji.CHANNEL_PERSISTENCE));case 6:return r.a(2)}},r)}))}},{event:ji.MESSAGE,handler:function(e,t){return n=>{var r,i,o,a,s,c,l,u,d,h,f,p,v,m,g,y,b,w,E=n.ackId,_=n.message,S=n.error,k=null!==(r=e.remote.state.relayPersistence)&&void 0!==r&&r;if(Ai.SocketService(`[SocketService handleMessage()]  relayPersistence=${k}  context=${e.state.context} on 'message' ${t} keysExchanged=${null===(i=e.state.keyExchange)||void 0===i?void 0:i.areKeysExchanged()}`,n),S)throw Ai.SocketService(`\n      [SocketService handleMessage()] context=${e.state.context}::on 'message' error=${S}`),new Error(S);var C="string"==typeof _;if(!C&&(null==_?void 0:_.type)===Ui.KEY_HANDSHAKE_START){if(k)return;return Ai.SocketService(`[SocketService handleMessage()] context=${e.state.context}::on 'message' received HANDSHAKE_START isOriginator=${e.state.isOriginator}`,_),void(null===(o=e.state.keyExchange)||void 0===o||o.start({isOriginator:null!==(a=e.state.isOriginator)&&void 0!==a&&a,force:!0}))}if(!C&&(null===(s=null==_?void 0:_.type)||void 0===s?void 0:s.startsWith("key_handshake"))){if(k)return;return Ai.SocketService(`[SocketService handleMessage()] context=${e.state.context}::on 'message' emit KEY_EXCHANGE`,_),void e.emit(Ki.KEY_EXCHANGE,{message:_,context:e.state.context})}if(C&&!(null===(c=e.state.keyExchange)||void 0===c?void 0:c.areKeysExchanged())){var A=!1;try{Ai.SocketService(`[SocketService handleMessage()] context=${e.state.context}::on 'message' trying to decrypt message`),null===(l=e.state.keyExchange)||void 0===l||l.decryptMessage(_),A=!0}catch(I){Ai.SocketService(`[SocketService handleMessage()] context=${e.state.context}::on 'message' error`,I)}if(!A)return e.state.isOriginator?null===(d=e.state.keyExchange)||void 0===d||d.start({isOriginator:null!==(h=e.state.isOriginator)&&void 0!==h&&h}):e.sendMessage({type:Ui.KEY_HANDSHAKE_START}).catch(e=>{}),void Ai.SocketService(`Message ignored because invalid key exchange status. step=${null===(f=e.state.keyExchange)||void 0===f?void 0:f.getKeyInfo().step}`,null===(p=e.state.keyExchange)||void 0===p?void 0:p.getKeyInfo(),_);Ai.SocketService("Invalid key exchange status detected --- updating it."),null===(u=e.state.keyExchange)||void 0===u||u.setKeysExchanged(!0)}else if(!C&&(null==_?void 0:_.type))return void e.emit(ji.MESSAGE,_);if(C){var x=null===(v=e.state.keyExchange)||void 0===v?void 0:v.decryptMessage(_),T=JSON.parse(null!=x?x:"{}");if(E&&(null==E?void 0:E.length)>0&&(Ai.SocketService(`[SocketService handleMessage()] context=${e.state.context}::on 'message' ackid=${E} channelId=${t}`),null===(m=e.state.socket)||void 0===m||m.emit(ji.MESSAGE_ACK,{ackId:E,channelId:t,clientType:e.state.isOriginator?"dapp":"wallet"})),e.state.clientsPaused=(null==T?void 0:T.type)===Hi.PAUSE,e.state.isOriginator&&T.data){var M=T.data,O=e.state.rpcMethodTracker[M.id];if(O){var R=Date.now()-O.timestamp;Ai.SocketService(`[SocketService handleMessage()] context=${e.state.context}::on 'message' received answer for id=${M.id} method=${O.method} responseTime=${R}`,T),e.remote.state.analytics&&Ji.includes(O.method.toLowerCase())&&Oi(Object.assign(Object.assign({id:null!==(g=e.remote.state.channelId)&&void 0!==g?g:"",event:Fi.SDK_RPC_REQUEST_DONE,sdkVersion:e.remote.state.sdkVersion,commLayerVersion:Pi.version},e.remote.state.originatorInfo),{walletVersion:null===(y=e.remote.state.walletInfo)||void 0===y?void 0:y.version,params:{method:O.method,from:"mobile"}}),e.remote.state.communicationServerUrl).catch(e=>{}),Xf(O.method)&&D.analytics.track(M.error?4001===M.error.code?"sdk_action_rejected":"sdk_action_failed":"sdk_action_succeeded",{action:O.method});var P=Object.assign(Object.assign({},O),{result:M.result,error:M.error?{code:null===(b=M.error)||void 0===b?void 0:b.code,message:null===(w=M.error)||void 0===w?void 0:w.message}:void 0,elapsedTime:R});e.state.rpcMethodTracker[M.id]=P,e.emit(ji.RPC_UPDATE,P)}}e.emit(ji.MESSAGE,{message:T})}else e.emit(ji.MESSAGE,_)}}},{event:ji.REJECTED,handler:function(e,t){return n=>Ud(this,void 0,void 0,b().m(function n(){var r;return b().w(function(n){for(;;)switch(n.n){case 0:if(!e.state.isOriginator||e.remote.state.ready){n.n=2;break}return Ai.SocketService(`[SocketService: handleChannelRejected()] context=${e.state.context} channelId=${t} isOriginator=${e.state.isOriginator} ready=${e.remote.state.ready}`,e.remote.state.originatorInfo),Oi(Object.assign(Object.assign({id:t,event:Fi.REJECTED},e.remote.state.originatorInfo),{sdkVersion:e.remote.state.sdkVersion,commLayer:e.state.communicationLayerPreference,commLayerVersion:Pi.version,walletVersion:null===(r=e.remote.state.walletInfo)||void 0===r?void 0:r.version}),e.remote.state.communicationServerUrl).catch(e=>{}),D.analytics.track("sdk_connection_rejected",{transport_type:"websocket"}),n.n=1,e.remote.disconnect({terminate:!0});case 1:e.remote.emit(ji.REJECTED,{channelId:t}),e.remote.setConnectionStatus($i.DISCONNECTED),n.n=3;break;case 2:Ai.SocketService(`[SocketService: handleChannelRejected()] SKIP -- channelId=${t} isOriginator=${e.state.isOriginator} ready=${e.remote.state.ready}`);case 3:return n.a(2)}},n)}))}},{event:"clients_waiting_to_join",handler:function(e,t){return n=>{Ai.SocketService(`[SocketService: handleClientsWaitingToJoin()] context=${e.state.context} on 'clients_waiting_to_join-${t}'`,n),e.emit(ji.CLIENTS_WAITING,n)}}}],Qi=[{event:ji.KEY_INFO,handler:function(e){return t=>{Ai.SocketService("[SocketService: handleKeyInfo()] on 'KEY_INFO'",t),e.emit(ji.KEY_INFO,t)}}},{event:ji.KEYS_EXCHANGED,handler:function(e){return()=>{var t,n,r;Ai.SocketService(`[SocketService: handleKeysExchanged()] on 'keys_exchanged' keyschanged=${null===(t=e.state.keyExchange)||void 0===t?void 0:t.areKeysExchanged()}`);var i=e.remote.state.channelConfig;if(i){var o=e.getKeyExchange().getKeyInfo().ecies;i.localKey=o.private,i.otherKey=o.otherPubKey,e.remote.state.channelConfig=i,null===(n=e.remote.state.storageManager)||void 0===n||n.persistChannelConfig(i).catch(e=>{})}e.emit(ji.KEYS_EXCHANGED,{keysExchanged:null===(r=e.state.keyExchange)||void 0===r?void 0:r.areKeysExchanged(),isOriginator:e.state.isOriginator});var a={keyInfo:e.getKeyInfo()};e.emit(ji.SERVICE_STATUS,a)}}}],eo=class extends N.EventEmitter2{constructor(e){super(),this.state={clientsConnected:!1,clientsPaused:!1,manualDisconnect:!1,lastRpcId:void 0,rpcMethodTracker:{},hasPlaintext:!1,communicationServerUrl:"",focusListenerAdded:!1,removeFocusListener:void 0,isReconnecting:!1,reconnectionAttempts:0},this.options=e;var t=e.reconnect,n=e.communicationLayerPreference,r=e.communicationServerUrl,i=e.context,o=e.remote,a=e.logging;this.state.resumed=t,this.state.context=i,this.state.isOriginator=o.state.isOriginator,this.state.communicationLayerPreference=n,this.state.debug=!0===(null==a?void 0:a.serviceLayer),this.remote=o,!0===(null==a?void 0:a.serviceLayer)&&B.default.enable("SocketService:Layer"),this.state.communicationServerUrl=r,this.state.hasPlaintext="https://metamask-sdk.api.cx.metamask.io/"!==this.state.communicationServerUrl&&!0===(null==a?void 0:a.plaintext),Ai.SocketService(`[SocketService: constructor()] Socket IO url: ${this.state.communicationServerUrl}`),this.initSocket()}initSocket(){var e,t=this.options,n=t.otherPublicKey,r=t.ecies,i=t.logging,o={autoConnect:!1,transports:Li,withCredentials:!0},a=this.state.communicationServerUrl;Ai.SocketService(`[SocketService: initSocket()] Socket IO url: ${a}`),this.state.socket=Kd(a,o),function(e){if("undefined"!=typeof window&&"undefined"!=typeof document&&(Ai.SocketService(`[SocketService: setupSocketFocusListener()] hasFocus=${document.hasFocus()}`,e),!e.state.focusListenerAdded)){var t=()=>{Ai.SocketService("Document has focus --- reconnecting socket"),Yi(e).catch(e=>{})};window.addEventListener("focus",t),e.state.focusListenerAdded=!0,e.state.removeFocusListener=()=>{window.removeEventListener("focus",t),e.state.focusListenerAdded=!1}}}(this);var s={communicationLayer:this,otherPublicKey:n,sendPublicKey:!1,context:null!==(e=this.state.context)&&void 0!==e?e:"",ecies:r,logging:i};this.state.keyExchange=new qi(s)}resetKeys(){var e;Ai.SocketService("[SocketService: resetKeys()] Resetting keys."),null===(e=this.state.keyExchange)||void 0===e||e.resetKeys()}createChannel(){return Ud(this,void 0,void 0,b().m(function e(){return b().w(function(e){for(;;)if(0===e.n)return e.a(2,function(e){return Ud(this,void 0,void 0,b().m(function t(){var n,r,i,o,a;return b().w(function(t){for(;;)switch(t.n){case 0:if(Ai.SocketService(`[SocketService: createChannel()] context=${e.state.context}`),e.state.socket||e.initSocket(),!(null===(n=e.state.socket)||void 0===n?void 0:n.connected)){t.n=1;break}throw new Error("socket already connected");case 1:return null===(r=e.state.socket)||void 0===r||r.connect(),e.state.manualDisconnect=!1,e.state.isOriginator=!0,o=L(),e.state.channelId=o,tp(e,o),t.n=2,new Promise((t,n)=>{var r;null===(r=e.state.socket)||void 0===r||r.emit(ji.JOIN_CHANNEL,{channelId:o,context:`${e.state.context}createChannel`,clientType:"dapp"},(r,i)=>Ud(this,void 0,void 0,b().m(function o(){var a;return b().w(function(o){for(;;)switch(o.p=o.n){case 0:return o.p=0,o.n=1,Vi(e,r,i);case 1:t(),o.n=3;break;case 2:o.p=2,a=o.v,n(a);case 3:return o.a(2)}},o,null,[[0,2]])})))});case 2:return a=null===(i=e.state.keyExchange)||void 0===i?void 0:i.getKeyInfo(),t.a(2,{channelId:o,pubKey:(null==a?void 0:a.ecies.public)||"",privKey:(null==a?void 0:a.ecies.private)||""})}},t,this)}))}(this))},e,this)}))}connectToChannel(e){var t=e.channelId,n=e.withKeyExchange;return function(e){return Ud(this,arguments,void 0,function(e){var t=this,n=e.options,r=e.instance;return b().m(function e(){var i,o,a,s,c,l,u,d,h,f,p,v;return b().w(function(e){for(;;)switch(e.n){case 0:if(i=n.channelId,o=n.authorized,a=n.withKeyExchange,s=r.state,c=r.remote,l=s.isOriginator,u=void 0!==l&&l,d=s.socket,h=s.keyExchange,f=c.state.channelConfig,!(null==d?void 0:d.connected)){e.n=1;break}throw new Error("socket already connected");case 1:return u&&(null==f?void 0:f.relayPersistence)&&(p=f.localKey,v=f.otherKey,p&&v&&(null==h||h.setRelayPersistence({localKey:p,otherKey:v}))),e.a(2,(Object.assign(s,{manualDisconnect:!1,withKeyExchange:a,isOriginator:u,channelId:i}),null!=d&&d.connect(),tp(r,i),!u&&o&&(null!=h&&h.setKeysExchanged(!0),Object.assign(c.state,{ready:!0,authorized:!0})),new Promise(e=>{var n,a=null===(n=null==h?void 0:h.getKeyInfo())||void 0===n?void 0:n.ecies.public;null==d||d.emit(ji.JOIN_CHANNEL,{channelId:i,context:`${s.context}_connectToChannel`,clientType:u?"dapp":"wallet",publicKey:o&&!u?a:void 0},(n,i)=>Ud(t,void 0,void 0,b().m(function t(){return b().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Vi(r,n,i);case 1:e();case 2:return t.a(2)}},t)})))})))}},e)})()})}({options:{channelId:t,withKeyExchange:void 0!==n&&n,authorized:e.authorized},instance:this})}getKeyInfo(){return this.state.keyExchange.getKeyInfo()}keyCheck(){var e,t;null===(t=(e=this).state.socket)||void 0===t||t.emit(ji.MESSAGE,{id:e.state.channelId,context:e.state.context,message:{type:Ui.KEY_HANDSHAKE_CHECK,pubkey:e.getKeyInfo().ecies.otherPubKey}})}getKeyExchange(){return this.state.keyExchange}sendMessage(e){return Ud(this,void 0,void 0,b().m(function t(){return b().w(function(t){for(;;)if(0===t.n)return t.a(2,function(e,t){return Ud(this,void 0,void 0,b().m(function n(){var r,i,o,a;return b().w(function(n){for(;;)switch(n.n){case 0:if(e.state.channelId){n.n=1;break}throw Ai.SocketService("handleSendMessage: no channelId - Create a channel first"),new Error("Create a channel first");case 1:if(Ai.SocketService(`[SocketService: handleSendMessage()] context=${e.state.context} areKeysExchanged=${null===(r=e.state.keyExchange)||void 0===r?void 0:r.areKeysExchanged()}`,t),!(null===(i=null==t?void 0:t.type)||void 0===i?void 0:i.startsWith("key_handshake"))){n.n=2;break}return n.a(2,(function(e,t){var n;Ai.SocketService(`[SocketService: handleKeyHandshake()] context=${e.state.context}`,t),null===(n=e.state.socket)||void 0===n||n.emit(ji.MESSAGE,{id:e.state.channelId,context:e.state.context,clientType:e.state.isOriginator?"dapp":"wallet",message:t})}(e,t),!0));case 2:return function(e,t){var n;if(!(null===(n=e.state.keyExchange)||void 0===n?void 0:n.areKeysExchanged())&&!e.remote.state.relayPersistence)throw Ai.SocketService(`[SocketService: validateKeyExchange()] context=${e.state.context} ERROR keys not exchanged`,t),new Error("Keys not exchanged BBB")}(e,t),function(e,t){var n,r=null!==(n=null==t?void 0:t.method)&&void 0!==n?n:"",i=null==t?void 0:t.id;e.state.isOriginator&&i&&(e.state.rpcMethodTracker[i]={id:i,timestamp:Date.now(),method:r},e.emit(ji.RPC_UPDATE,e.state.rpcMethodTracker[i]))}(e,t),n.n=3,ep(e,t);case 3:return a=n.v,n.a(2,(e.remote.state.analytics&&e.remote.state.isOriginator&&t.method&&Ji.includes(t.method.toLowerCase())&&Oi({id:null!==(o=e.remote.state.channelId)&&void 0!==o?o:"",event:Fi.SDK_RPC_REQUEST,params:{method:t.method,from:"mobile"}},e.remote.state.communicationServerUrl).catch(e=>{}),e.remote.state.isOriginator&&t.method&&Xf(t.method)&&D.analytics.track("sdk_action_requested",{action:t.method}),function(e,t){return Ud(this,void 0,void 0,b().m(function n(){var r,i,o,a,s,c,l,u,d;return b().w(function(n){for(;;)switch(n.p=n.n){case 0:if(i=null==t?void 0:t.id,o=null!==(r=null==t?void 0:t.method)&&void 0!==r?r:"",!e.state.isOriginator||!i){n.n=7;break}return n.p=1,a=Gi(i,e.state.rpcMethodTracker,200).then(e=>({type:Zi.RPC_CHECK,result:e})),s=(()=>Ud(this,void 0,void 0,b().m(function t(){var n,r;return b().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,(e=>Ud(void 0,[e],void 0,function(e){var t=e.rpcId,n=e.instance;return b().m(function e(){return b().w(function(e){for(;;)switch(e.n){case 0:if(n.state.lastRpcId!==t&&void 0!==n.state.lastRpcId){e.n=2;break}return e.n=1,Wi(200);case 1:e.n=0;break;case 2:return e.a(2,n.state.lastRpcId)}},e)})()}))({instance:e,rpcId:i});case 1:return n=t.v,t.n=2,Gi(n,e.state.rpcMethodTracker,200);case 2:return r=t.v,t.a(2,{type:Zi.SKIPPED_RPC,result:r})}},t)})))(),n.n=2,Promise.race([a,s]);case 2:if((c=n.v).type!==Zi.RPC_CHECK){n.n=3;break}l=c.result,Ai.SocketService(`[SocketService:handleRpcReplies()] id=${t.id} ${o} ( ${l.elapsedTime} ms)`,l.result),n.n=5;break;case 3:if(c.type===Zi.SKIPPED_RPC){n.n=4;break}throw new Error(`Error handling RPC replies for ${i}`);case 4:u=Object.assign(Object.assign({},e.state.rpcMethodTracker[i]),{error:new Error("SDK_CONNECTION_ISSUE")}),e.emit(ji.RPC_UPDATE,u),d={data:Object.assign(Object.assign({},u),{jsonrpc:"2.0"}),name:"metamask-provider"},e.emit(ji.MESSAGE,{message:d});case 5:n.n=7;break;case 6:throw n.p=6,n.v;case 7:return n.a(2)}},n,this,[[1,6]])}))}(e,t).catch(e=>{}),a))}},n)}))}(this,e))},t,this)}))}ping(){return function(e){return Ud(this,void 0,void 0,b().m(function t(){var n,r;return b().w(function(t){for(;;)switch(t.n){case 0:Ai.SocketService(`[SocketService: ping()] context=${e.state.context} originator=${e.state.isOriginator} keysExchanged=${null===(n=e.state.keyExchange)||void 0===n?void 0:n.areKeysExchanged()}`),null===(r=e.state.socket)||void 0===r||r.emit(Hi.PING,{id:e.state.channelId,context:"ping",clientType:e.remote.state.isOriginator?"dapp":"wallet",message:""});case 1:return t.a(2)}},t)}))}(this)}pause(){return function(e){return Ud(this,void 0,void 0,b().m(function t(){var n,r;return b().w(function(t){for(;;)switch(t.n){case 0:if(Ai.SocketService(`[SocketService: pause()] context=${e.state.context}`),e.state.manualDisconnect=!0,!(!(null===(n=e.state.keyExchange)||void 0===n)&&n.areKeysExchanged())){t.n=1;break}return t.n=1,e.sendMessage({type:Hi.PAUSE});case 1:null===(r=e.state.socket)||void 0===r||r.disconnect();case 2:return t.a(2)}},t)}))}(this)}isConnected(){var e;return null===(e=this.state.socket)||void 0===e?void 0:e.connected}resume(){return function(e){return Ud(this,void 0,void 0,b().m(function t(){var n,r,i,o,a,s,c,l;return b().w(function(t){for(;;)switch(t.n){case 0:if(n=e.state,r=e.remote,i=n.socket,o=n.channelId,a=n.context,s=n.keyExchange,c=n.isOriginator,l=r.state.isOriginator,Ai.SocketService(`[SocketService: resume()] channelId=${o} context=${a} connected=${null==i?void 0:i.connected} manualDisconnect=${n.manualDisconnect} resumed=${n.resumed} keysExchanged=${null==s?void 0:s.areKeysExchanged()}`),o){t.n=1;break}throw Ai.SocketService("[SocketService: resume()] channelId is not defined"),new Error("ChannelId is not defined");case 1:if(!(null==i?void 0:i.connected)){t.n=5;break}if(Ai.SocketService("[SocketService: resume()] already connected."),i.emit(Hi.PING,{id:o,clientType:l?"dapp":"wallet",context:"on_channel_config",message:""}),r.hasRelayPersistence()||null!=s&&s.areKeysExchanged()){t.n=4;break}if(!c){t.n=3;break}return t.n=2,e.sendMessage({type:Hi.READY});case 2:t.n=4;break;case 3:null==s||s.start({isOriginator:!1});case 4:t.n=6;break;case 5:null!=i&&i.connect(),Ai.SocketService(`[SocketService: resume()] after connecting socket --\x3e connected=${null==i?void 0:i.connected}`),null==i||i.emit(ji.JOIN_CHANNEL,{channelId:o,context:`${a}_resume`,clientType:l?"dapp":"wallet"},(t,n)=>Ud(this,void 0,void 0,b().m(function r(){return b().w(function(r){for(;;)switch(r.p=r.n){case 0:return r.p=0,r.n=1,Vi(e,t,n);case 1:r.n=3;break;case 2:r.p=2,r.v;case 3:return r.a(2)}},r,null,[[0,2]])})));case 6:n.manualDisconnect=!1,n.resumed=!0;case 7:return t.a(2)}},t,this)}))}(this)}getRPCMethodTracker(){return this.state.rpcMethodTracker}disconnect(e){return function(e,t){var n,r,i,o,a;Ai.SocketService(`[SocketService: disconnect()] context=${e.state.context}`,t),null!=t&&t.terminate&&(null===(r=(n=e.state).removeFocusListener)||void 0===r||r.call(n),e.state.channelId=t.channelId,null===(i=e.state.socket)||void 0===i||i.removeAllListeners(),null===(o=e.state.keyExchange)||void 0===o||o.clean(),e.remote.state.ready=!1,e.state.socket=void 0,e.state.rpcMethodTracker={}),e.state.manualDisconnect=!0,null===(a=e.state.socket)||void 0===a||a.disconnect()}(this,e)}},(to||i("CommunicationLayerPreference",to={})).SOCKET="socket",function(e){e.NonBrowser="nodejs",e.MetaMaskMobileWebview="in-app-browser",e.DesktopWeb="web-desktop",e.MobileWeb="web-mobile",e.ReactNative="react-native"}(no||i("PlatformType",no={})),io=class extends N.EventEmitter2{constructor(e){super(),this.state={ready:!1,anonId:"",authorized:!1,isOriginator:!1,terminated:!1,protocolVersion:1,paused:!1,deeplinkProtocolAvailable:!1,platformType:"metamask-mobile",analytics:!1,reconnection:!1,originatorInfoSent:!1,communicationServerUrl:Ii,context:"",persist:!1,clientsConnected:!1,sessionDuration:Ni,originatorConnectStarted:!1,debug:!1,_connectionStatus:$i.DISCONNECTED},this._options=e;var t=e.anonId,n=e.platformType,r=e.communicationLayerPreference,i=e.otherPublicKey,o=e.reconnect,a=e.walletInfo,s=e.dappMetadata,c=e.protocolVersion,l=e.transports,u=e.context,d=e.relayPersistence,h=e.ecies,f=e.analytics,p=void 0!==f&&f,v=e.storage,m=e.sdkVersion,g=e.communicationServerUrl,y=void 0===g?Ii:g,b=e.logging,w=e.autoConnect,E=void 0===w?{timeout:3e3}:w;this.state.anonId=t,this.state.otherPublicKey=i,this.state.dappMetadata=s,this.state.walletInfo=a,this.state.transports=l,this.state.platformType=n,this.state.analytics=p,this.state.protocolVersion=null!=c?c:1,this.state.isOriginator=!i,this.state.relayPersistence=d,this.state.communicationServerUrl=y,this.state.context=u,this.state.terminated=!1,this.state.sdkVersion=m,this.setMaxListeners(50),this.setConnectionStatus($i.DISCONNECTED),null!=v&&v.duration&&(this.state.sessionDuration=Ni),this.state.storageOptions=v,this.state.autoConnectOptions=E,this.state.debug=!0===(null==b?void 0:b.remoteLayer),!0===(null==b?void 0:b.remoteLayer)&&B.default.enable("RemoteCommunication:Layer"),!0===(null==b?void 0:b.serviceLayer)&&B.default.enable("SocketService:Layer"),!0===(null==b?void 0:b.eciesLayer)&&B.default.enable("ECIES:Layer"),!0===(null==b?void 0:b.keyExchangeLayer)&&B.default.enable("KeyExchange:Layer"),this.state.logging=b,null!=v&&v.storageManager&&(this.state.storageManager=v.storageManager),Ai.RemoteCommunication(`[RemoteCommunication: constructor()] protocolVersion=${c} relayPersistence=${d} isOriginator=${this.state.isOriginator} communicationLayerPreference=${r} otherPublicKey=${i} reconnect=${o}`),this.state.isOriginator||hp({communicationLayerPreference:r,otherPublicKey:i,reconnect:o,ecies:h,communicationServerUrl:y,instance:this}),this.emitServiceStatusEvent({context:"constructor"})}initFromDappStorage(){return Ud(this,void 0,void 0,b().m(function e(){var t,n;return b().w(function(e){for(;;)switch(e.n){case 0:if(!this.state.storageManager){e.n=2;break}return e.n=1,this.state.storageManager.getPersistedChannelConfig({});case 1:if(n=e.v,!n){e.n=2;break}if(this.state.channelConfig=n,this.state.channelId=n.channelId,this.state.deeplinkProtocolAvailable=null!==(t=n.deeplinkProtocolAvailable)&&void 0!==t&&t,!n.relayPersistence){e.n=2;break}return this.state.authorized=!0,this.state.ready=!0,this.setConnectionStatus($i.LINKED),e.n=2,this.connectToChannel({channelId:n.channelId});case 2:hp({communicationLayerPreference:to.SOCKET,otherPublicKey:this.state.otherPublicKey,reconnect:this._options.reconnect,ecies:this._options.ecies,communicationServerUrl:this.state.communicationServerUrl,instance:this});case 3:return e.a(2)}},e,this)}))}originatorSessionConnect(){return Ud(this,void 0,void 0,b().m(function e(){return b().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,function(e){return Ud(this,void 0,void 0,b().m(function t(){var n,r,i;return b().w(function(t){for(;;)switch(t.n){case 0:if((r=e.state).storageManager){t.n=1;break}return t.a(2,void Ai.RemoteCommunication("[RemoteCommunication: originatorSessionConnect()] no storage manager defined - skip"));case 1:return t.n=2,r.storageManager.getPersistedChannelConfig({});case 2:if(i=t.v,Ai.RemoteCommunication(`[RemoteCommunication: originatorSessionConnect()] autoStarted=${r.originatorConnectStarted} channelConfig`,i),!(null===(n=r.communicationLayer)||void 0===n?void 0:n.isConnected())){t.n=3;break}return t.a(2,(Ai.RemoteCommunication("[RemoteCommunication: originatorSessionConnect()] socket already connected - skip"),i));case 3:if(!i){t.n=5;break}if(!(i.validUntil>Date.now())){t.n=4;break}return t.a(2,(r.channelConfig=i,r.originatorConnectStarted=!0,r.channelId=null==i?void 0:i.channelId,r.reconnection=!0,i));case 4:Ai.RemoteCommunication("[RemoteCommunication: autoConnect()] Session has expired");case 5:r.originatorConnectStarted=!1;case 6:return t.a(2)}},t)}))}(this);case 1:return e.a(2,e.v)}},e,this)}))}generateChannelIdConnect(){return Ud(this,void 0,void 0,b().m(function e(){return b().w(function(e){for(;;)if(0===e.n)return e.a(2,function(e){return Ud(this,void 0,void 0,b().m(function t(){var n,r,i,o,a,s,c,l;return b().w(function(t){for(;;)switch(t.n){case 0:if(e.communicationLayer){t.n=1;break}throw new Error("communication layer not initialized");case 1:if(!e.ready){t.n=2;break}throw new Error("Channel already connected");case 2:if(!e.channelId||!(null===(n=e.communicationLayer)||void 0===n?void 0:n.isConnected())){t.n=3;break}return t.a(2,(e.channelConfig=Object.assign(Object.assign({},e.channelConfig),{channelId:e.channelId,validUntil:Date.now()+e.sessionDuration}),null===(r=e.storageManager)||void 0===r||r.persistChannelConfig(e.channelConfig),{channelId:e.channelId,privKey:null===(o=null===(i=e.communicationLayer)||void 0===i?void 0:i.getKeyInfo())||void 0===o?void 0:o.ecies.private,pubKey:null===(s=null===(a=e.communicationLayer)||void 0===a?void 0:a.getKeyInfo())||void 0===s?void 0:s.ecies.public}));case 3:return Ai.RemoteCommunication("[RemoteCommunication: generateChannelId()]"),t.n=4,e.communicationLayer.createChannel();case 4:return c=t.v,Ai.RemoteCommunication("[RemoteCommunication: generateChannelId()] channel created",c),l=Object.assign(Object.assign({},e.channelConfig),{channelId:c.channelId,localKey:c.privKey,validUntil:Date.now()+e.sessionDuration}),t.a(2,(e.channelId=c.channelId,e.channelConfig=l,{channelId:e.channelId,pubKey:c.pubKey,privKey:c.privKey}))}},t)}))}(this.state))},e,this)}))}clean(){return Qf(this.state)}connectToChannel(e){var t=e.channelId,n=e.withKeyExchange;return function(e){return Ud(this,arguments,void 0,function(e){var t=e.channelId,n=e.withKeyExchange,r=e.authorized,i=e.state;return b().m(function e(){var o,a,s,c;return b().w(function(e){for(;;)switch(e.n){case 0:if(O(t)){e.n=1;break}throw Ai.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${i.context} invalid channel channelId=${t}`),new Error(`Invalid channel ${t}`);case 1:if(Ai.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${i.context} channelId=${t} withKeyExchange=${n}`),!(null===(o=i.communicationLayer)||void 0===o?void 0:o.isConnected())){e.n=2;break}return e.a(2,void Ai.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${i.context} already connected - interrupt connection.`));case 2:return i.channelId=t,e.n=3,null===(a=i.communicationLayer)||void 0===a?void 0:a.connectToChannel({channelId:t,authorized:r,withKeyExchange:n});case 3:c=Object.assign(Object.assign({},i.channelConfig),{channelId:t,validUntil:Date.now()+i.sessionDuration}),i.channelConfig=c,null===(s=i.storageManager)||void 0===s||s.persistChannelConfig(c);case 4:return e.a(2)}},e)})()})}({channelId:t,authorized:e.authorized,withKeyExchange:n,state:this.state})}sendMessage(e){return Ud(this,void 0,void 0,b().m(function t(){var n,r;return b().w(function(t){for(;;)switch(t.p=t.n){case 0:return(n=this.state.isOriginator&&e.method&&Xf(e.method))&&D.analytics.track("sdk_action_requested",{action:e.method}),t.p=1,t.n=2,function(e,t){return Ud(this,void 0,void 0,b().m(function n(){var r,i,o;return b().w(function(n){for(;;)switch(n.p=n.n){case 0:if(o=e.state,Ai.RemoteCommunication(`[RemoteCommunication: sendMessage()] context=${o.context} paused=${o.paused} ready=${o.ready} relayPersistence=${o.relayPersistence} authorized=${o.authorized} socket=${null===(r=o.communicationLayer)||void 0===r?void 0:r.isConnected()} clientsConnected=${o.clientsConnected} status=${o._connectionStatus}`,t),o.relayPersistence||o.ready&&!(null===(i=o.communicationLayer)||void 0===i)&&i.isConnected()&&o.clientsConnected){n.n=2;break}return Ai.RemoteCommunication(`[RemoteCommunication: sendMessage()] context=${o.context}  SKIP message waiting for MM mobile readiness.`),n.n=1,new Promise(t=>{e.once(ji.CLIENTS_READY,t)});case 1:Ai.RemoteCommunication(`[RemoteCommunication: sendMessage()] context=${o.context}  AFTER SKIP / READY -- sending pending message`);case 2:return n.p=2,n.n=3,function(e,t){return Ud(this,void 0,void 0,b().m(function n(){return b().w(function(n){for(;;)if(0===n.n)return n.a(2,new Promise(n=>{var r,i=e.state;Ai.RemoteCommunication(`[RemoteCommunication: handleAuthorization()] context=${i.context} ready=${i.ready} authorized=${i.authorized} method=${t.method}`),!i.isOriginator||i.authorized||i.relayPersistence?null===(r=i.communicationLayer)||void 0===r||r.sendMessage(t).then(e=>{n(e)}).catch(e=>{n(!1)}):e.once(ji.AUTHORIZED,()=>{var e;Ai.RemoteCommunication(`[RemoteCommunication: handleAuthorization()] context=${i.context}  AFTER SKIP / AUTHORIZED -- sending pending message`),null===(e=i.communicationLayer)||void 0===e||e.sendMessage(t).then(e=>{n(e)}).catch(e=>{n(!1)})})}))},n)}))}(e,t);case 3:return n.a(2,n.v);case 4:throw n.p=4,n.v;case 5:return n.a(2)}},n,null,[[2,4]])}))}(this,e);case 2:return t.a(2,t.v);case 3:throw t.p=3,r=t.v,n&&D.analytics.track("sdk_action_failed",{action:e.method}),r;case 4:return t.a(2)}},t,this,[[1,3]])}))}testStorage(){return Ud(this,void 0,void 0,b().m(function e(){return b().w(function(e){for(;;)if(0===e.n)return e.a(2,function(e){return Ud(this,void 0,void 0,b().m(function t(){var n,r;return b().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,null===(n=e.storageManager)||void 0===n?void 0:n.getPersistedChannelConfig();case 1:r=t.v,Ai.RemoteCommunication("[RemoteCommunication: testStorage()] res",r);case 2:return t.a(2)}},t)}))}(this.state))},e,this)}))}hasDeeplinkProtocol(){return this.state.deeplinkProtocolAvailable}getChannelConfig(){return this.state.channelConfig}isReady(){return this.state.ready}isConnected(){var e;return null===(e=this.state.communicationLayer)||void 0===e?void 0:e.isConnected()}isAuthorized(){return this.state.authorized}isPaused(){return this.state.paused}getCommunicationLayer(){return this.state.communicationLayer}ping(){return Ud(this,void 0,void 0,b().m(function e(){var t;return b().w(function(e){for(;;)switch(e.n){case 0:return Ai.RemoteCommunication(`[RemoteCommunication: ping()] channel=${this.state.channelId}`),e.n=1,null===(t=this.state.communicationLayer)||void 0===t?void 0:t.ping();case 1:return e.a(2)}},e,this)}))}testLogger(){Ai.RemoteCommunication(`testLogger() channel=${this.state.channelId}`),Ai.SocketService(`testLogger() channel=${this.state.channelId}`),Ai.Ecies(`testLogger() channel=${this.state.channelId}`),Ai.KeyExchange(`testLogger() channel=${this.state.channelId}`)}keyCheck(){var e;Ai.RemoteCommunication(`[RemoteCommunication: keyCheck()] channel=${this.state.channelId}`),null===(e=this.state.communicationLayer)||void 0===e||e.keyCheck()}setConnectionStatus(e){this.state._connectionStatus!==e&&(this.state._connectionStatus=e,this.emit(ji.CONNECTION_STATUS,e),this.emitServiceStatusEvent({context:"setConnectionStatus"}))}emitServiceStatusEvent(){this.emit(ji.SERVICE_STATUS,this.getServiceStatus())}getConnectionStatus(){return this.state._connectionStatus}getServiceStatus(){return{originatorInfo:this.state.originatorInfo,keyInfo:this.getKeyInfo(),connectionStatus:this.state._connectionStatus,channelConfig:this.state.channelConfig,channelId:this.state.channelId}}getKeyInfo(){var e;return null===(e=this.state.communicationLayer)||void 0===e?void 0:e.getKeyInfo()}resetKeys(){var e;null===(e=this.state.communicationLayer)||void 0===e||e.resetKeys()}setOtherPublicKey(e){var t,n=null===(t=this.state.communicationLayer)||void 0===t?void 0:t.getKeyExchange();if(!n)throw new Error("KeyExchange is not initialized.");n.getOtherPublicKey()!==e&&n.setOtherPublicKey(e)}pause(){return Ud(this,void 0,void 0,b().m(function e(){var t;return b().w(function(e){for(;;)switch(e.n){case 0:return Ai.RemoteCommunication(`[RemoteCommunication: pause()] channel=${this.state.channelId}`),e.n=1,null===(t=this.state.communicationLayer)||void 0===t?void 0:t.pause();case 1:this.setConnectionStatus($i.PAUSED);case 2:return e.a(2)}},e,this)}))}getVersion(){return Pi.version}hasRelayPersistence(){var e;return null!==(e=this.state.relayPersistence)&&void 0!==e&&e}resume(){return Ud(this,void 0,void 0,b().m(function e(){return b().w(function(e){for(;;)if(0===e.n)return e.a(2,function(e){return Ud(this,void 0,void 0,b().m(function t(){var n,r;return b().w(function(t){for(;;)switch(t.n){case 0:return r=e.state,Ai.RemoteCommunication(`[RemoteCommunication: resume()] channel=${r.channelId}`),t.n=1,null===(n=r.communicationLayer)||void 0===n?void 0:n.resume();case 1:e.setConnectionStatus($i.LINKED);case 2:return t.a(2)}},t)}))}(this))},e,this)}))}encrypt(e){var t,n,r,i=null===(t=this.state.communicationLayer)||void 0===t?void 0:t.getKeyExchange(),o=null==i?void 0:i.getOtherPublicKey();if(!o)throw new Error("KeyExchange not completed");return null===(r=null===(n=this.state.communicationLayer)||void 0===n?void 0:n.state.eciesInstance)||void 0===r?void 0:r.encrypt(e,o)}decrypt(e){var t,n,r;if(!(null===(t=this.state.communicationLayer)||void 0===t?void 0:t.state.eciesInstance))throw new Error("ECIES instance is not initialized");return null===(r=null===(n=this.state.communicationLayer)||void 0===n?void 0:n.state.eciesInstance)||void 0===r?void 0:r.decrypt(e)}getChannelId(){return this.state.channelId}getRPCMethodTracker(){var e;return null===(e=this.state.communicationLayer)||void 0===e?void 0:e.getRPCMethodTracker()}reject(e){return function(e){return Ud(this,arguments,void 0,function(e){var t=e.channelId,n=e.state;return b().m(function e(){var r,i,o,a,s;return b().w(function(e){for(;;)switch(e.n){case 0:if(O(t)){e.n=1;break}throw Ai.RemoteCommunication(`[RemoteCommunication: connectToChannel()] context=${n.context} invalid channel channelId=${t}`),new Error(`Invalid channel ${t}`);case 1:if(!n.isOriginator){e.n=2;break}return e.a(2,void Ai.RemoteCommunication(`[RemoteCommunication: reject()] context=${n.context} isOriginator=${n.isOriginator} channelId=${t}`));case 2:return a=null!==(i=null===(r=n.communicationLayer)||void 0===r?void 0:r.state)&&void 0!==i?i:{},null!=(s=a.socket)&&s.connected||(Ai.RemoteCommunication(`[RemoteCommunication: reject()] context=${n.context} socket already connected`),null!=s&&s.connect()),Oi(Object.assign(Object.assign({id:t,event:Fi.REJECTED},n.originatorInfo),{sdkVersion:n.sdkVersion,commLayerVersion:Pi.version,walletVersion:null===(o=n.walletInfo)||void 0===o?void 0:o.version}),n.communicationServerUrl).catch(e=>{}),e.n=3,new Promise((e,r)=>{null==s||s.emit(ji.REJECTED,{channelId:t},(t,i)=>{Ai.RemoteCommunication(`[RemoteCommunication: reject()] context=${n.context} socket=${null==s?void 0:s.id}`,{error:t,response:i}),t?r(t):e(i)})});case 3:return e.a(2)}},e)})()})}({channelId:e.channelId,state:this.state})}disconnect(e){return Ud(this,void 0,void 0,b().m(function t(){return b().w(function(t){for(;;)if(0===t.n)return t.a(2,fp({options:e,instance:this}))},t,this)}))}},function(e){e.RENEW="renew",e.LINK="link"}(ro||(ro={})),oo="ERC721",ao="ERC1155",so={errors:{disconnected:()=>"MetaMask: Disconnected from chain. Attempting to connect.",permanentlyDisconnected:()=>"MetaMask: Disconnected from MetaMask background. Page reload required.",sendSiteMetadata:()=>"MetaMask: Failed to send site metadata. This is an internal error, please report this bug.",unsupportedSync:e=>`MetaMask: The MetaMask Ethereum provider does not support synchronous methods like ${e} without a callback parameter.`,invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidNetworkParams:()=>"MetaMask: Received invalid network parameters. Please report this bug.",invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidLoggerObject:()=>"'args.logger' must be an object if provided.",invalidLoggerMethod:e=>`'args.logger' must include required method '${e}'.`},info:{connected:e=>`MetaMask: Connected to chain with ID "${e}".`},warnings:{chainIdDeprecation:"MetaMask: 'ethereum.chainId' is deprecated and may be removed in the future. Please use the 'eth_chainId' RPC method instead.\nFor more information, see: https://github.com/MetaMask/metamask-improvement-proposals/discussions/23",networkVersionDeprecation:"MetaMask: 'ethereum.networkVersion' is deprecated and may be removed in the future. Please use the 'net_version' RPC method instead.\nFor more information, see: https://github.com/MetaMask/metamask-improvement-proposals/discussions/23",selectedAddressDeprecation:"MetaMask: 'ethereum.selectedAddress' is deprecated and may be removed in the future. Please use the 'eth_accounts' RPC method instead.\nFor more information, see: https://github.com/MetaMask/metamask-improvement-proposals/discussions/23",enableDeprecation:"MetaMask: 'ethereum.enable()' is deprecated and may be removed in the future. Please use the 'eth_requestAccounts' RPC method instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1102",sendDeprecation:"MetaMask: 'ethereum.send(...)' is deprecated and may be removed in the future. Please use 'ethereum.sendAsync(...)' or 'ethereum.request(...)' instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193",events:{close:"MetaMask: The event 'close' is deprecated and may be removed in the future. Please use 'disconnect' instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193#disconnect",data:"MetaMask: The event 'data' is deprecated and will be removed in the future. Use 'message' instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193#message",networkChanged:"MetaMask: The event 'networkChanged' is deprecated and may be removed in the future. Use 'chainChanged' instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193#chainchanged",notification:"MetaMask: The event 'notification' is deprecated and may be removed in the future. Use 'message' instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193#message"},rpc:{ethDecryptDeprecation:"MetaMask: The RPC method 'eth_decrypt' is deprecated and may be removed in the future.\nFor more information, see: https://medium.com/metamask/metamask-api-method-deprecation-2b0564a84686",ethGetEncryptionPublicKeyDeprecation:"MetaMask: The RPC method 'eth_getEncryptionPublicKey' is deprecated and may be removed in the future.\nFor more information, see: https://medium.com/metamask/metamask-api-method-deprecation-2b0564a84686",walletWatchAssetNFTExperimental:"MetaMask: The RPC method 'wallet_watchAsset' is experimental for ERC721/ERC1155 assets and may change in the future.\nFor more information, see: https://github.com/MetaMask/metamask-improvement-proposals/blob/main/MIPs/mip-1.md and https://github.com/MetaMask/metamask-improvement-proposals/blob/main/PROCESS-GUIDE.md#proposal-lifecycle"},experimentalMethods:"MetaMask: 'ethereum._metamask' exposes non-standard, experimental methods. They may be removed or changed without warning."}},co=4294967295,lo=Math.floor(Math.random()*co),uo=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},ho=(e,t,n)=>(uo(e,t,"read from private field"),n?n.call(e):t.get(e)),fo=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},po=(e,t,n,r)=>(uo(e,t,"write to private field"),t.set(e,n),n),vo=(e,t,n)=>(uo(e,t,"access private method"),n),mo={invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},go={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},yo=(e,t)=>Object.hasOwnProperty.call(e,t),bo=class extends TypeError{constructor(e,t){var i,o=e.message,a=e.explanation,s=r(e,n),c=e.path,l=0===c.length?o:`At path: ${c.join(".")} -- ${o}`;super(null!=a?a:l),null!=a&&(this.cause=l),Object.assign(this,s),this.name=this.constructor.name,this.failures=()=>null!=i?i:i=[e,...t()]}},wo=class{constructor(e){var t=e.type,n=e.schema,r=e.validator,i=e.refiner,o=e.coercer,a=void 0===o?e=>e:o,s=e.entries,c=void 0===s?b().m(function e(){return b().w(function(e){for(;;)if(0===e.n)return e.a(2)},e)}):s;this.type=t,this.schema=n,this.entries=c,this.coercer=a,this.validator=r?(e,t)=>bp(r(e,t),t,this,e):()=>[],this.refiner=i?(e,t)=>bp(i(e,t),t,this,e):()=>[]}assert(e,t){return Ep(e,this,t)}create(e,t){return _p(e,this,t)}is(e){return Sp(e,this)}mask(e,t){return function(e,t,n){var r=kp(e,t,{coerce:!0,mask:!0,message:n});if(r[0])throw r[0];return r[1]}(e,this,t)}validate(e){return kp(e,this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}},Eo=class extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}},_o=Np,So=Dp,"function"==typeof ze.setTimeout&&(_o=setTimeout),"function"==typeof ze.clearTimeout&&(So=clearTimeout),Co=[],Ao=!1,xo=-1,Kp.prototype.run=function(){this.fun.apply(null,this.array)},To=Up,Mo=Up,Oo=Up,Ro=Up,Po=Up,Io=Up,Lo=Up,No=ze.performance||{},Do=No.now||No.mozNow||No.msNow||No.oNow||No.webkitNow||function(){return(new Date).getTime()},Bo=new Date,$o={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];Co.push(new Kp(e,t)),1!==Co.length||Ao||Bp(jp)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:To,addListener:Mo,once:Oo,off:Ro,removeListener:Po,removeAllListeners:Io,emit:Lo,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*Do.call(No),n=Math.floor(t),r=Math.floor(t%1*1e9);return e&&(n-=e[0],(r-=e[1])<0&&(n--,r+=1e9)),[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-Bo)/1e3}},jo=e=>Op(e),Fo=Lp([Tp(null),Cp("boolean",e=>"boolean"==typeof e),Cp("finite number",e=>Sp(e,Mp())&&Number.isFinite(e)),Ip(),xp(Ap(()=>Fo)),Pp(Ip(),Ap(()=>Fo))]),Ko=Fo,Uo=Cp("any",()=>!0),Ho=e=>(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Assertion failed",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Eo;try{Ep(e,t)}catch(i){throw function(e,t){var n;return Boolean("string"==typeof(null===(n=e)||void 0===n||null===(n=n.prototype)||void 0===n||null===(n=n.constructor)||void 0===n?void 0:n.name))?new e({message:t}):e({message:t})}(r,`${n}: ${function(e){return(t=e,"object"==typeof(n=t)&&null!==n&&"message"in n&&"string"==typeof t.message?t.message:null==t?"":String(t)).replace(/\.$/,"");var t,n}(i)}.`)}}(e,Fo),JSON.parse(JSON.stringify(e,(e,t)=>{if("__proto__"!==e&&"constructor"!==e)return t}))),zo=new wo(h(h({},Ko),{},{coercer:(e,t)=>Sp(e,Uo)?Ko.coercer(Ho(e),t):Ko.coercer(e,t)})),qo=Tp("2.0"),Vo=function(e){return new wo(h(h({},e),{},{validator:(t,n)=>null===t||e.validator(t,n),refiner:(t,n)=>null===t||e.refiner(t,n)}))}(Lp([Mp(),Ip()])),Wo=jo({code:Cp("integer",e=>"number"==typeof e&&!isNaN(e)&&Number.isInteger(e)||`Expected an integer, but received: ${gp(e)}`),message:Ip(),data:Fp(zo),stack:Fp(Ip())}),Go=Lp([Pp(Ip(),zo),xp(zo)]),Yo=jo({id:Vo,jsonrpc:qo,method:Ip(),params:Fp(Go)}),Zo=jo({jsonrpc:qo,method:Ip(),params:Fp(Go)}),Op({id:Vo,jsonrpc:qo,result:Rp(Cp("unknown",()=>!0)),error:Rp(Wo)}),Lp([jo({id:Vo,jsonrpc:qo,result:zo}),jo({id:Vo,jsonrpc:qo,error:Wo})]),Xo="Unspecified error message. This is a bug, please report it.",Qo={code:Jo=mo.internal,message:Wp(Jo)},ea="Unspecified server error.",ta=Xp,Xp.default=Xp,Xp.stable=nv,Xp.stableStringify=nv,na="[...]",ra="[Circular]",ia=[],oa=[],aa=Ph(ta),sa=class extends Error{constructor(e,t,n){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!t||"string"!=typeof t)throw new Error('"message" must be a non-empty string.');super(t),this.code=e,void 0!==n&&(this.data=n)}serialize(){var e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data,function(e){if("object"!=typeof e||null===e)return!1;try{for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(n){return!1}}(this.data)&&(e.data.cause=Yp(this.data.cause))),this.stack&&(e.stack=this.stack),e}toString(){return aa(this.serialize(),ov,2)}},ca=e=>function(e,t){var n=p(function(e){if(e){if("string"==typeof e)return[e];if("object"==typeof e&&!Array.isArray(e)){var t=e.message,n=e.data;if(t&&"string"!=typeof t)throw new Error("Must specify string message.");return[null!=t?t:void 0,n]}}return[]}(t),2),r=n[0],i=n[1];return new sa(e,null!=r?r:Wp(e),i)}(mo.invalidRequest,e),la={},av.prototype=Object.create(null),sv.EventEmitter=sv,sv.usingDomains=!1,sv.prototype.domain=void 0,sv.prototype._events=void 0,sv.prototype._maxListeners=void 0,sv.defaultMaxListeners=10,sv.init=function(){this.domain=null,sv.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new av,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},sv.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},sv.prototype.getMaxListeners=function(){return cv(this)},sv.prototype.emit=function(e){var t,n,r,i,o,a,s,c="error"===e;if(a=this._events)c=c&&null==a.error;else if(!c)return!1;if(s=this.domain,c){if(t=arguments[1],!s){if(t instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}return t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=s,t.domainThrown=!1,s.emit("error",t),!1}if(!(n=a[e]))return!1;var u="function"==typeof n;switch(r=arguments.length){case 1:!function(e,t,n){if(t)e.call(n);else for(var r=e.length,i=hv(e,r),o=0;o<r;++o)i[o].call(n)}(n,u,this);break;case 2:!function(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,o=hv(e,i),a=0;a<i;++a)o[a].call(n,r)}(n,u,this,arguments[1]);break;case 3:!function(e,t,n,r,i){if(t)e.call(n,r,i);else for(var o=e.length,a=hv(e,o),s=0;s<o;++s)a[s].call(n,r,i)}(n,u,this,arguments[1],arguments[2]);break;case 4:!function(e,t,n,r,i,o){if(t)e.call(n,r,i,o);else for(var a=e.length,s=hv(e,a),c=0;c<a;++c)s[c].call(n,r,i,o)}(n,u,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),o=1;o<r;o++)i[o-1]=arguments[o];!function(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,o=hv(e,i),a=0;a<i;++a)o[a].apply(n,r)}(n,u,this,i)}return!0},sv.prototype.addListener=function(e,t){return lv(this,e,t,!1)},sv.prototype.on=sv.prototype.addListener,sv.prototype.prependListener=function(e,t){return lv(this,e,t,!0)},sv.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,uv(this,e,t)),this},sv.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,uv(this,e,t)),this},sv.prototype.removeListener=function(e,t){var n,r,i,o,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener&&n.listener===t)0==--this._eventsCount?this._events=new av:(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length;o-- >0;)if(n[o]===t||n[o].listener&&n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new av,this;delete r[e]}else!function(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}(n,i);r.removeListener&&this.emit("removeListener",e,a||t)}return this},sv.prototype.off=function(e,t){return this.removeListener(e,t)},sv.prototype.removeAllListeners=function(e){var t,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new av,this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=new av:delete n[e]),this;if(0===arguments.length){for(var r,i=Object.keys(n),o=0;o<i.length;++o)"removeListener"!==(r=i[o])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new av,this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)do{this.removeListener(e,t[t.length-1])}while(t[0]);return this},sv.prototype.listeners=function(e){var t,n=this._events;return n&&(t=n[e])?"function"==typeof t?[t.listener||t]:function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(t):[]},sv.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):dv.call(e,t)},sv.prototype.listenerCount=dv,sv.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]},ua=Ih(Object.freeze({__proto__:null,EventEmitter:sv,default:sv})),Object.defineProperty(la,"__esModule",{value:!0}),da=ua,ha=class extends da.EventEmitter{emit(e){var t="error"===e,n=this._events;if(void 0!==n)t=t&&void 0===n.error;else if(!t)return!1;for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];if(t){var a;if(i.length>0&&(a=p(i,1)[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?` (${a.message})`:""));throw s.context=a,s}var c=n[e];if(void 0===c)return!1;if("function"==typeof c)fv(c,this,i);else for(var l=c.length,u=function(e){for(var t=e.length,n=new Array(t),r=0;r<t;r+=1)n[r]=e[r];return n}(c),d=0;d<l;d+=1)fv(u[d],this,i);return!0}},Pa=la.default=ha,Ia=class e extends Pa{constructor(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).notificationHandler;super(),fo(this,ma),fo(this,ya),fo(this,wa),fo(this,fa,!1),fo(this,pa,void 0),fo(this,va,void 0),po(this,pa,[]),po(this,va,e)}destroy(){ho(this,pa).forEach(e=>{"destroy"in e&&"function"==typeof e.destroy&&e.destroy()}),po(this,pa,[]),po(this,fa,!0)}push(e){vo(this,ma,ga).call(this),ho(this,pa).push(e)}handle(e,t){if(vo(this,ma,ga).call(this),t&&"function"!=typeof t)throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?t?vo(this,ya,ba).call(this,e,t):vo(this,ya,ba).call(this,e):t?vo(this,wa,Ea).call(this,e,t):this._promiseHandle(e)}asMiddleware(){var t=this;return vo(this,ma,ga).call(this),function(){var n=o(b().m(function n(r,i,a,s){var c,l,u,d,h,f,v,m,g;return b().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,n.n=1,vo(c=e,ka,Ca).call(c,r,i,ho(t,pa));case 1:if(u=n.v,d=p(u,3),h=d[0],f=d[1],v=d[2],!f){n.n=3;break}return n.n=2,vo(l=e,Ta,Ma).call(l,v);case 2:m=s(h),n.n=4;break;case 3:m=a(function(){var t=o(b().m(function t(n){var r,i;return b().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,vo(r=e,Ta,Ma).call(r,v);case 1:t.n=3;break;case 2:return t.p=2,i=t.v,t.a(2,n(i));case 3:return t.a(2,n())}},t,null,[[0,2]])}));return function(e){return t.apply(this,arguments)}}());case 4:return n.a(2,m);case 5:return n.p=5,g=n.v,n.a(2,s(g))}},n,null,[[0,5]])}));return function(e,t,r,i){return n.apply(this,arguments)}}()}_promiseHandle(e){var t=this;return o(b().m(function n(){return b().w(function(n){for(;;)if(0===n.n)return n.a(2,new Promise((n,r)=>{vo(t,wa,Ea).call(t,e,(e,t)=>{e&&void 0===t?r(e):n(t)}).catch(r)}))},n)}))()}},fa=new WeakMap,pa=new WeakMap,va=new WeakMap,ma=new WeakSet,ga=function(){if(ho(this,fa))throw new Error("This engine is destroyed and can no longer be used.")},ya=new WeakSet,ba=function(){var e=o(b().m(function e(t,n){var r,i,o;return b().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,0!==t.length){e.n=1;break}return r=[{id:null,jsonrpc:"2.0",error:new sa(mo.invalidRequest,"Request batch must contain plain objects. Received an empty array")}],e.a(2,n?n(null,r):r);case 1:return e.n=2,Promise.all(t.map(this._promiseHandle.bind(this)));case 2:return i=e.v.filter(e=>void 0!==e),e.a(2,n?n(null,i):i);case 3:if(e.p=3,o=e.v,!n){e.n=4;break}return e.a(2,n(o));case 4:throw o;case 5:return e.a(2)}},e,this,[[0,3]])}));return function(t,n){return e.apply(this,arguments)}}(),wa=new WeakSet,Ea=function(){var e=o(b().m(function e(t,n){var r,i,o,a,s,c,l,u,d;return b().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t&&!Array.isArray(t)&&"object"==typeof t){e.n=1;break}return i=new sa(mo.invalidRequest,"Requests must be plain objects. Received: "+typeof t,{request:t}),e.a(2,n(i,{id:null,jsonrpc:"2.0",error:i}));case 1:if("string"==typeof t.method){e.n=2;break}return a=new sa(mo.invalidRequest,"Must specify a string method. Received: "+typeof t.method,{request:t}),e.a(2,ho(this,va)&&!qp(t)?n(null):n(a,{id:null!==(o=t.id)&&void 0!==o?o:null,jsonrpc:"2.0",error:a}));case 2:if(!ho(this,va)||!Sp(t,Zo)||qp(t)){e.n=7;break}return e.p=3,e.n=4,ho(this,va).call(this,t);case 4:e.n=6;break;case 5:return e.p=5,u=e.v,e.a(2,n(u));case 6:return e.a(2,n(null));case 7:return s=null,c=h({},t),l={id:c.id,jsonrpc:c.jsonrpc},e.p=8,e.n=9,vo(r=Ia,_a,Sa).call(r,c,l,ho(this,pa));case 9:e.n=11;break;case 10:e.p=10,d=e.v,s=d;case 11:return e.a(2,(s&&(delete l.result,l.error||(l.error=Gp(s))),n(s,l)))}},e,this,[[8,10],[3,5]])}));return function(t,n){return e.apply(this,arguments)}}(),_a=new WeakSet,Sa=function(){var e=o(b().m(function e(t,n,r){var i,o,a,s,c,l,u,d;return b().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,vo(i=Ia,ka,Ca).call(i,t,n,r);case 1:return s=e.v,c=p(s,3),l=c[0],u=c[1],d=c[2],vo(o=Ia,Oa,Ra).call(o,t,n,u),e.n=2,vo(a=Ia,Ta,Ma).call(a,d);case 2:if(!l){e.n=3;break}throw l;case 3:return e.a(2)}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),ka=new WeakSet,Ca=function(){var e=o(b().m(function e(t,n,r){var i,o,a,s,c,u,d,h,f,v;return b().w(function(e){for(;;)switch(e.p=e.n){case 0:o=[],a=null,s=!1,c=l(r),e.p=1,c.s();case 2:if((u=c.n()).done){e.n=5;break}return f=u.value,e.n=3,vo(i=Ia,Aa,xa).call(i,t,n,f,o);case 3:if(d=e.v,h=p(d,2),a=h[0],!(s=h[1])){e.n=4;break}return e.a(3,5);case 4:e.n=2;break;case 5:e.n=7;break;case 6:e.p=6,v=e.v,c.e(v);case 7:return e.p=7,c.f(),e.f(7);case 8:return e.a(2,[a,s,o.reverse()])}},e,null,[[1,6,7,8]])}));return function(t,n,r){return e.apply(this,arguments)}}(),Aa=new WeakSet,xa=function(){var e=o(b().m(function e(t,n,r,i){return b().w(function(e){for(;;)if(0===e.n)return e.a(2,new Promise(e=>{var o=t=>{var r=t||n.error;r&&(n.error=Gp(r)),e([r,!0])};try{r(t,n,r=>{n.error?o(n.error):(r&&("function"!=typeof r&&o(new sa(mo.internal,`JsonRpcEngine: "next" return handlers must be functions. Received "${typeof r}" for request:\n${pv(t)}`,{request:t})),i.push(r)),e([null,!1]))},o)}catch(a){o(a)}}))},e)}));return function(t,n,r,i){return e.apply(this,arguments)}}(),Ta=new WeakSet,Ma=function(){var e=o(b().m(function e(t){var n,r,i,o;return b().w(function(e){for(;;)switch(e.p=e.n){case 0:n=l(t),e.p=1,i=b().m(function e(){var t;return b().w(function(e){for(;;)switch(e.n){case 0:return t=r.value,e.n=1,new Promise((e,n)=>{t(t=>t?n(t):e())});case 1:return e.a(2)}},e)}),n.s();case 2:if((r=n.n()).done){e.n=4;break}return e.d(c(i()),3);case 3:e.n=2;break;case 4:e.n=6;break;case 5:e.p=5,o=e.v,n.e(o);case 6:return e.p=6,n.f(),e.f(6);case 7:return e.a(2)}},e,null,[[1,5,6,7]])}));return function(t){return e.apply(this,arguments)}}(),Oa=new WeakSet,Ra=function(e,t,n){if(!yo(t,"result")&&!yo(t,"error"))throw new sa(mo.internal,`JsonRpcEngine: Response has no error or result for request:\n${pv(e)}`,{request:e});if(!n)throw new sa(mo.internal,`JsonRpcEngine: Nothing ended request:\n${pv(e)}`,{request:e})},fo(Ia,_a),fo(Ia,ka),fo(Ia,Aa),fo(Ia,Ta),fo(Ia,Oa),La=Ia,Na=Object.freeze(["eth_subscription"]),Da=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:console;return[(e,t,n,r)=>{var i=e.id,o=lo=(lo+1)%co;e.id=o,t.id=o,n(n=>{e.id=i,t.id=i,n()})},vv(e),pp(e)]},Ba=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(r,i)=>{r||i.error?t(r||i.error):!n||Array.isArray(i)?e(i):e(i.result)}},$a=e=>Boolean(e)&&"string"==typeof e&&e.startsWith("0x"),ja=()=>{},Ka=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)},Ua=(e,t,n)=>(Ka(e,t,"read from private field"),n?n.call(e):t.get(e)),Ha=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Fa=(e,t,n,r)=>(Ka(e,t,"write to private field"),t.set(e,n),n),za=class extends sv{emit(e){var t="error"===e,n=this._events;if(void 0!==n)t=t&&void 0===n.error;else if(!t)return!1;for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];if(t){var a;if(i.length>0&&(a=p(i,1)[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?` (${a.message})`:""));throw s.context=a,s}var c=n[e];if(void 0===c)return!1;if("function"==typeof c)Sv(c,this,i);else for(var l=c.length,u=function(e){for(var t=e.length,n=new Array(t),r=0;r<t;r+=1)n[r]=e[r];return n}(c),d=0;d<l;d+=1)Sv(u[d],this,i);return!0}},Wa=Ph(function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!=i--;){var a=o[i];if(!e(t[a],n[a]))return!1}return!0}return t!=t&&n!=n}),Ga=class e extends za{constructor(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.logger,r=void 0===n?console:n,i=t.maxEventListeners,o=void 0===i?100:i,a=t.rpcMiddleware,s=void 0===a?[]:a;super(),Ha(this,qa,void 0),Ha(this,Va,void 0),this._log=r,this.setMaxListeners(o),this._state=h({},e._defaultState),Fa(this,Va,null),Fa(this,qa,null),this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleConnect=this._handleConnect.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this.request=this.request.bind(this);var c=new La;s.forEach(e=>c.push(e)),this._rpcEngine=c}get chainId(){return Ua(this,qa)}get selectedAddress(){return Ua(this,Va)}isConnected(){return this._state.isConnected}request(e){var t=this;return o(b().m(function n(){var r,i,o;return b().w(function(n){for(;;)switch(n.n){case 0:if(e&&"object"==typeof e&&!Array.isArray(e)){n.n=1;break}throw ca({message:so.errors.invalidRequestArgs(),data:e});case 1:if(r=e.method,i=e.params,"string"==typeof r&&0!==r.length){n.n=2;break}throw ca({message:so.errors.invalidRequestMethod(),data:e});case 2:if(void 0===i||Array.isArray(i)||"object"==typeof i&&null!==i){n.n=3;break}throw ca({message:so.errors.invalidRequestParams(),data:e});case 3:return o=null==i?{method:r}:{method:r,params:i},n.a(2,new Promise((e,n)=>{t._rpcRequest(o,Ba(e,n))}))}},n)}))()}_initializeState(e){if(this._state.initialized)throw new Error("Provider already initialized.");if(e){var t=e.accounts,n=e.chainId,r=e.isUnlocked,i=e.networkVersion;this._handleConnect(n),this._handleChainChanged({chainId:n,networkVersion:i}),this._handleUnlockStateChanged({accounts:t,isUnlocked:r}),this._handleAccountsChanged(t)}this._state.initialized=!0,this.emit("_initialized")}_rpcRequest(e,t){var n=t;return Array.isArray(e)||(e.jsonrpc||(e.jsonrpc="2.0"),"eth_accounts"!==e.method&&"eth_requestAccounts"!==e.method||(n=(n,r)=>{var i;this._handleAccountsChanged(null!==(i=r.result)&&void 0!==i?i:[],"eth_accounts"===e.method),t(n,r)})),this._rpcEngine.handle(e,n)}_handleConnect(e){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId:e}),this._log.debug(so.info.connected(e)))}_handleDisconnect(e,t){var n;(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e)&&(this._state.isConnected=!1,e?(n=new sa(1013,null!=t?t:so.errors.disconnected()),this._log.debug(n)):(n=new sa(1011,null!=t?t:so.errors.permanentlyDisconnected()),this._log.error(n),Fa(this,qa,null),this._state.accounts=null,Fa(this,Va,null),this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",n))}_handleChainChanged(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).chainId;$a(e)?(this._handleConnect(e),e!==Ua(this,qa)&&(Fa(this,qa,e),this._state.initialized&&this.emit("chainChanged",Ua(this,qa)))):this._log.error(so.errors.invalidNetworkParams(),{chainId:e})}_handleAccountsChanged(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e;Array.isArray(e)||(this._log.error("MetaMask: Received invalid accounts parameter. Please report this bug.",e),n=[]);var r,i=l(e);try{for(i.s();!(r=i.n()).done;){if("string"!=typeof r.value){this._log.error("MetaMask: Received non-string account. Please report this bug.",e),n=[];break}}}catch(fs){i.e(fs)}finally{i.f()}if(!Wa(this._state.accounts,n)&&(t&&null!==this._state.accounts&&this._log.error("MetaMask: 'eth_accounts' unexpectedly updated accounts. Please report this bug.",n),this._state.accounts=n,Ua(this,Va)!==n[0]&&Fa(this,Va,n[0]||null),this._state.initialized)){var o=[...n];this.emit("accountsChanged",o)}}_handleUnlockStateChanged(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.accounts,n=e.isUnlocked;"boolean"==typeof n?n!==this._state.isUnlocked&&(this._state.isUnlocked=n,this._handleAccountsChanged(null!=t?t:[])):this._log.error("MetaMask: Received invalid isUnlocked parameter. Please report this bug.")}},qa=new WeakMap,Va=new WeakMap,Ga._defaultState={accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1},Za=Ga,Ja={exports:{}},Xa=ua.EventEmitter,Qa=Ih(et),Ya="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e},es=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},ts=/%[sdj%]/g,rs={},xv.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},xv.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},is="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0,Xv.custom=is,ss={inherits:Ya,_extend:Zv,log:Yv,isBuffer:Wv,isPrimitive:Vv,isFunction:qv,isError:zv,isDate:Fv,isObject:Hv,isRegExp:Uv,isUndefined:Kv,isSymbol:jv,isString:$v,isNumber:Bv,isNullOrUndefined:Dv,isNull:Nv,isBoolean:Lv,isArray:Iv,inspect:xv,deprecate:Cv,format:kv,debuglog:Av,promisify:Xv,callbackify:em},cs=Ih(Object.freeze({__proto__:null,_extend:Zv,callbackify:em,debuglog:Av,default:ss,deprecate:Cv,format:kv,inherits:Ya,inspect:xv,isArray:Iv,isBoolean:Lv,isBuffer:Wv,isDate:Fv,isError:zv,isFunction:qv,isNull:Nv,isNullOrUndefined:Dv,isNumber:Bv,isObject:Hv,isPrimitive:Vv,isRegExp:Uv,isString:$v,isSymbol:jv,isUndefined:Kv,log:Yv,promisify:Xv})),ls={destroy:function(e,t){var n=this,r=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return r||i?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,$o.nextTick(im,this,e)):$o.nextTick(im,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?n._writableState?n._writableState.errorEmitted?$o.nextTick(rm,n):(n._writableState.errorEmitted=!0,$o.nextTick(nm,n,e)):$o.nextTick(nm,n,e):t?($o.nextTick(rm,n),t(e)):$o.nextTick(rm,n)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}},us={},ds={},om("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),om("ERR_INVALID_ARG_TYPE",function(e,t,n){var r,i,o,a,s,c;if("string"==typeof t&&(i="not ",t.substr(0,4)===i)?(r="must not be",t=t.replace(/^not /,"")):r="must be",a=e,s=" argument",(void 0===c||c>a.length)&&(c=a.length),a.substring(c-9,c)===s)o="The ".concat(e," ").concat(r," ").concat(am(t,"type"));else{var l=function(e,t,n){return"number"!=typeof n&&(n=0),!(n+1>e.length)&&-1!==e.indexOf(".",n)}(e)?"property":"argument";o='The "'.concat(e,'" ').concat(l," ").concat(r," ").concat(am(t,"type"))}return o+". Received type ".concat(typeof n)},TypeError),om("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),om("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),om("ERR_STREAM_PREMATURE_CLOSE","Premature close"),om("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),om("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),om("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),om("ERR_STREAM_WRITE_AFTER_END","write after end"),om("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),om("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),om("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),us.codes=ds,hs=us.codes.ERR_INVALID_OPT_VALUE,gs={getHighWaterMark:function(e,t,n,r){var i,o,a,s=(o=r,a=n,null!=(i=t).highWaterMark?i.highWaterMark:o?i[a]:null);if(null!=s){if(!isFinite(s)||Math.floor(s)!==s||s<0)throw new hs(r?n:"highWaterMark",s);return Math.floor(s)}return e.objectMode?16:16384}},ys="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e},bs=Ih(Object.freeze({__proto__:null,default:ys})),ws=function(e,t){if(sm("noDeprecation"))return e;var n=!1;return function(){if(!n){if(sm("throwDeprecation"))throw new Error(t);sm("traceDeprecation"),n=!0}return e.apply(this,arguments)}},Es=Yd.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},um.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";if(e=e.slice(n,e.length),!((r=(t=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(t.length-1))>=55296&&r<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var r,i=e.length;if(this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),i=(t+=e.toString(this.encoding,0,i)).length-1,(r=t.charCodeAt(i))>=55296&&r<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,i)}return t},um.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(t<=2&&n>>4==14){this.charLength=3;break}if(t<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=t},um.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;t+=r.slice(0,n).toString(i)}return t},_s=Ih(Object.freeze({__proto__:null,StringDecoder:um})),Ss=us.codes.ERR_STREAM_PREMATURE_CLOSE,Os=function e(t,n,r){if("function"==typeof n)return e(t,null,n);var i,o;n||(n={}),i=r||pm,o=!1,r=function(){if(!o){o=!0;for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.apply(this,t)}};var a=n.readable||!1!==n.readable&&t.readable,s=n.writable||!1!==n.writable&&t.writable,c=function(){t.writable||u()},l=t._writableState&&t._writableState.finished,u=function(){s=!1,l=!0,a||r.call(t)},d=t._readableState&&t._readableState.endEmitted,h=function(){a=!1,d=!0,s||r.call(t)},f=function(e){r.call(t,e)},p=function(){var e;return a&&!d?(t._readableState&&t._readableState.ended||(e=new Ss),r.call(t,e)):s&&!l?(t._writableState&&t._writableState.ended||(e=new Ss),r.call(t,e)):void 0},v=function(){t.req.on("finish",u)};return function(e){return e.setHeader&&"function"==typeof e.abort}(t)?(t.on("complete",u),t.on("abort",p),t.req?v():t.on("request",v)):s&&!t._writableState&&(t.on("end",c),t.on("close",c)),t.on("end",h),t.on("finish",u),!1!==n.error&&t.on("error",f),t.on("close",p),function(){t.removeListener("complete",u),t.removeListener("abort",p),t.removeListener("request",v),t.req&&t.req.removeListener("finish",u),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",u),t.removeListener("end",h),t.removeListener("error",f),t.removeListener("close",p)}},Rs=ym,Ps=us.codes,Is=Ps.ERR_METHOD_NOT_IMPLEMENTED,Ls=Ps.ERR_MULTIPLE_CALLBACK,Ns=Ps.ERR_TRANSFORM_ALREADY_TRANSFORMING,Ds=Ps.ERR_TRANSFORM_WITH_LENGTH_0,Bs=lm(),bs(ym,Bs),ym.prototype.push=function(e,t){return this._transformState.needTransform=!1,Bs.prototype.push.call(this,e,t)},ym.prototype._transform=function(e,t,n){n(new Is("_transform()"))},ym.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},ym.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},ym.prototype._destroy=function(e,t){Bs.prototype._destroy.call(this,e,function(e){t(e)})},js=Em,bs(Em,Ks=Rs),Em.prototype._transform=function(e,t,n){n(null,e)},Us=us.codes,Hs=Us.ERR_MISSING_ARGS,Fs=Us.ERR_STREAM_DESTROYED,zs=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i,o=(i=t).length?"function"!=typeof i[i.length-1]?_m:i.pop():_m;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Hs("streams");var a=t.map(function(e,n){var i=n<t.length-1;return function(e,t,n,r){var i,o;i=r,o=!1,r=function(){o||(o=!0,i.apply(void 0,arguments))};var a=!1;e.on("close",function(){a=!0}),void 0===$s&&($s=Os),$s(e,{readable:t,writable:n},function(e){if(e)return r(e);a=!0,r()});var s=!1;return function(t){if(!a&&!s)return s=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void r(t||new Fs("pipe"))}}(e,i,n>0,function(e){r||(r=e),e&&a.forEach(Sm),i||(a.forEach(Sm),o(r))})});return t.reduce(km)},ns=Ja.exports,(ns=Ja.exports=mm()).Stream=ns,ns.Readable=ns,ns.Writable=cm(),ns.Duplex=lm(),ns.Transform=Rs,ns.PassThrough=js,ns.finished=Os,ns.pipeline=zs,qs=Ja.exports,Vs={},Gs=function e(t,n){if(t&&n)return e(t)(n);if("function"!=typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach(function(e){r[e]=t[e]}),r;function r(){for(var e=new Array(arguments.length),n=0;n<e.length;n++)e[n]=arguments[n];var r=t.apply(this,e),i=e[e.length-1];return"function"==typeof r&&r!==i&&Object.keys(i).forEach(function(e){r[e]=i[e]}),r}},(Ws={exports:{}}).exports=Gs(Cm),Ws.exports.strict=Gs(Am),Cm.proto=Cm(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return Cm(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return Am(this)},configurable:!0})}),Ys=Ws.exports,Zs={},Object.defineProperty(Zs,"__esModule",{value:!0}),Zs.Substream=void 0,Js=qs,Xs=class extends Js.Duplex{constructor(e){var t=e.parent,n=e.name;super({objectMode:!0}),this._parent=t,this._name=n}_read(){}_write(e,t,n){this._parent.push({name:this._name,data:e}),n()}},Zs.Substream=Xs,Qs=tt&&tt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Object.defineProperty(Vs,"__esModule",{value:!0}),Vs.ObjectMultiplex=void 0,ec=qs,tc=Qs(Ys),nc=Zs,rc=Symbol("IGNORE_SUBSTREAM"),ic=class extends ec.Duplex{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(Object.assign(Object.assign({},e),{objectMode:!0})),this._substreams={}}createStream(e){if(this.destroyed)throw new Error(`ObjectMultiplex - parent stream for name "${e}" already destroyed`);if(this._readableState.ended||this._writableState.ended)throw new Error(`ObjectMultiplex - parent stream for name "${e}" already ended`);if(!e)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw new Error(`ObjectMultiplex - Substream for name "${e}" already exists`);var t,n,r=new nc.Substream({parent:this,name:e});return this._substreams[e]=r,t=this,n=(0,tc.default)(e=>r.destroy(e||void 0)),(0,ec.finished)(t,{readable:!1},n),(0,ec.finished)(t,{writable:!1},n),r}ignoreStream(e){if(!e)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw new Error(`ObjectMultiplex - Substream for name "${e}" already exists`);this._substreams[e]=rc}_read(){}_write(e,t,n){var r=e.name,i=e.data;if(!r)return n();var o=this._substreams[r];return o?(o!==rc&&o.push(i),n()):n()}},Vs.ObjectMultiplex=ic,oc=Ph(Vs.ObjectMultiplex),ac=e=>null!==e&&"object"==typeof e&&"function"==typeof e.pipe,ac.writable=e=>ac(e)&&!1!==e.writable&&"function"==typeof e._write&&"object"==typeof e._writableState,ac.readable=e=>ac(e)&&!1!==e.readable&&"function"==typeof e._read&&"object"==typeof e._readableState,ac.duplex=e=>ac.writable(e)&&ac.readable(e),ac.transform=e=>ac.duplex(e)&&"function"==typeof e._transform,cc=ac,lc=class extends Za{constructor(e,t){var n=t.jsonRpcStreamName,r=t.logger,i=void 0===r?console:r,o=t.maxEventListeners,a=void 0===o?100:o,s=t.rpcMiddleware;if(super({logger:i,maxEventListeners:a,rpcMiddleware:void 0===s?[]:s}),!cc.duplex(e))throw new Error(so.errors.invalidDuplexStream());this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this);var c=new oc;qs.pipeline(e,c,e,this._handleStreamDisconnect.bind(this,"MetaMask")),this._jsonRpcConnection=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},n=new qs.Duplex({objectMode:!0,read:()=>{},write:function(n,o,a){var s,c=null;try{n.id?function(e){var n=e.id;if(null!==n){var r=t[n];r&&(delete t[n],Object.assign(r.res,e),setTimeout(r.end))}}(n):(s=n,(null==e?void 0:e.retryOnMessage)&&s.method===e.retryOnMessage&&Object.values(t).forEach(e=>{var n=e.req,r=e.retryCount,o=void 0===r?0:r;if(n.id){if(o>=3)throw new Error(`StreamMiddleware - Retry limit exceeded for request id "${n.id}"`);var a=t[n.id];a&&(a.retryCount=o+1),i(n)}}),r.emit("notification",s))}catch(l){c=l}a(c)}}),r=new Pa;return{events:r,middleware:(e,n,r,o)=>{t[e.id]={req:e,res:n,next:r,end:o},i(e)},stream:n};function i(e){n.push(e)}}({retryOnMessage:"METAMASK_EXTENSION_CONNECT_CAN_RETRY"}),qs.pipeline(this._jsonRpcConnection.stream,c.createStream(n),this._jsonRpcConnection.stream,this._handleStreamDisconnect.bind(this,"MetaMask RpcProvider")),this._rpcEngine.push(this._jsonRpcConnection.middleware),this._jsonRpcConnection.events.on("notification",t=>{var n=t.method,r=t.params;"metamask_accountsChanged"===n?this._handleAccountsChanged(r):"metamask_unlockStateChanged"===n?this._handleUnlockStateChanged(r):"metamask_chainChanged"===n?this._handleChainChanged(r):Na.includes(n)?this.emit("message",{type:n,data:r}):"METAMASK_STREAM_FAILURE"===n&&e.destroy(new Error(so.errors.permanentlyDisconnected()))})}_initializeStateAsync(){var e=this;return o(b().m(function t(){var n,r;return b().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,e.request({method:"metamask_getProviderState"});case 1:n=t.v,t.n=3;break;case 2:t.p=2,r=t.v,e._log.error("MetaMask: Failed to get initial state. Please report this bug.",r);case 3:e._initializeState(n);case 4:return t.a(2)}},t,null,[[0,2]])}))()}_handleStreamDisconnect(e,t){var n=`MetaMask: Lost connection to "${e}".`;null!=t&&t.stack&&(n+=`\n${t.stack}`),this._log.warn(n),this.listenerCount("error")>0&&this.emit("error",n),this._handleDisconnect(!1,t?t.message:void 0)}_handleChainChanged(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.chainId,r=t.networkVersion;$a(n)&&(e=r,Boolean(e)&&"string"==typeof e)?"loading"===r?this._handleDisconnect(!0):super._handleChainChanged({chainId:n}):this._log.error(so.errors.invalidNetworkParams(),{chainId:n,networkVersion:r})}},uc=class extends lc{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.jsonRpcStreamName,r=void 0===n?"metamask-provider":n,i=t.logger,o=void 0===i?console:i,a=t.maxEventListeners,s=void 0===a?100:a,c=t.shouldSendMetadata;if(super(e,{jsonRpcStreamName:r,logger:o,maxEventListeners:s,rpcMiddleware:Da(o)}),this._sentWarnings={chainId:!1,networkVersion:!1,selectedAddress:!1,enable:!1,experimentalMethods:!1,send:!1,events:{close:!1,data:!1,networkChanged:!1,notification:!1}},Ha(this,sc,void 0),this._initializeStateAsync(),Fa(this,sc,null),this.isMetaMask=!0,this._sendSync=this._sendSync.bind(this),this.enable=this.enable.bind(this),this.send=this.send.bind(this),this.sendAsync=this.sendAsync.bind(this),this._warnOfDeprecation=this._warnOfDeprecation.bind(this),this._metamask=this._getExperimentalApi(),this._jsonRpcConnection.events.on("notification",e=>{var t=e.method;Na.includes(t)&&(this.emit("data",e),this.emit("notification",e.params.result))}),c)if("complete"===document.readyState)mv(this._rpcEngine,this._log);else{var l=()=>{mv(this._rpcEngine,this._log),window.removeEventListener("DOMContentLoaded",l)};window.addEventListener("DOMContentLoaded",l)}}get chainId(){return this._sentWarnings.chainId||(this._log.warn(so.warnings.chainIdDeprecation),this._sentWarnings.chainId=!0),super.chainId}get networkVersion(){return this._sentWarnings.networkVersion||(this._log.warn(so.warnings.networkVersionDeprecation),this._sentWarnings.networkVersion=!0),Ua(this,sc)}get selectedAddress(){return this._sentWarnings.selectedAddress||(this._log.warn(so.warnings.selectedAddressDeprecation),this._sentWarnings.selectedAddress=!0),super.selectedAddress}sendAsync(e,t){this._rpcRequest(e,t)}addListener(e,t){return this._warnOfDeprecation(e),super.addListener(e,t)}on(e,t){return this._warnOfDeprecation(e),super.on(e,t)}once(e,t){return this._warnOfDeprecation(e),super.once(e,t)}prependListener(e,t){return this._warnOfDeprecation(e),super.prependListener(e,t)}prependOnceListener(e,t){return this._warnOfDeprecation(e),super.prependOnceListener(e,t)}_handleDisconnect(e,t){super._handleDisconnect(e,t),Ua(this,sc)&&!e&&Fa(this,sc,null)}_warnOfDeprecation(e){var t;!1===(null===(t=this._sentWarnings)||void 0===t?void 0:t.events[e])&&(this._log.warn(so.warnings.events[e]),this._sentWarnings.events[e]=!0)}enable(){var e=this;return o(b().m(function t(){return b().w(function(t){for(;;)if(0===t.n)return t.a(2,(e._sentWarnings.enable||(e._log.warn(so.warnings.enableDeprecation),e._sentWarnings.enable=!0),new Promise((t,n)=>{try{e._rpcRequest({method:"eth_requestAccounts",params:[]},Ba(t,n))}catch(r){n(r)}})))},t)}))()}send(e,t){return this._sentWarnings.send||(this._log.warn(so.warnings.sendDeprecation),this._sentWarnings.send=!0),"string"!=typeof e||t&&!Array.isArray(t)?e&&"object"==typeof e&&"function"==typeof t?this._rpcRequest(e,t):this._sendSync(e):new Promise((n,r)=>{try{this._rpcRequest({method:e,params:t},Ba(n,r,!1))}catch(i){r(i)}})}_sendSync(e){var t,n,r;switch(e.method){case"eth_accounts":r=this.selectedAddress?[this.selectedAddress]:[];break;case"eth_coinbase":r=null!==(t=this.selectedAddress)&&void 0!==t?t:null;break;case"eth_uninstallFilter":this._rpcRequest(e,ja),r=!0;break;case"net_version":r=null!==(n=Ua(this,sc))&&void 0!==n?n:null;break;default:throw new Error(so.errors.unsupportedSync(e.method))}return{id:e.id,jsonrpc:e.jsonrpc,result:r}}_getExperimentalApi(){var e,t,n=this;return new Proxy({isUnlocked:(t=o(b().m(function e(){return b().w(function(e){for(;;)switch(e.n){case 0:if(n._state.initialized){e.n=1;break}return e.n=1,new Promise(e=>{n.on("_initialized",()=>e())});case 1:return e.a(2,n._state.isUnlocked)}},e)})),function(){return t.apply(this,arguments)}),requestBatch:(e=o(b().m(function e(t){return b().w(function(e){for(;;)switch(e.n){case 0:if(Array.isArray(t)){e.n=1;break}throw ca({message:"Batch requests must be made with an array of request objects.",data:t});case 1:return e.a(2,new Promise((e,r)=>{n._rpcRequest(t,Ba(e,r))}))}},e)})),function(t){return e.apply(this,arguments)})},{get:function(e,t){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];return n._sentWarnings.experimentalMethods||(n._log.warn(so.warnings.experimentalMethods),n._sentWarnings.experimentalMethods=!0),Reflect.get(e,t,...i)}})}_handleChainChanged(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.chainId,n=e.networkVersion;super._handleChainChanged({chainId:t,networkVersion:n}),this._state.isConnected&&n!==Ua(this,sc)&&(Fa(this,sc,n),this._state.initialized&&this.emit("networkChanged",Ua(this,sc)))}},sc=new WeakMap,(dc=(0,B.default)("MM_SDK")).color="#FFAC1C",fc={},pc={},Object.defineProperty(pc,"__esModule",{value:!0}),pc.EthereumProviderError=pc.EthereumRpcError=void 0,vc=ta,mc=class extends Error{constructor(e,t,n){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!t||"string"!=typeof t)throw new Error('"message" must be a nonempty string.');super(t),this.code=e,void 0!==n&&(this.data=n)}serialize(){var e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data),this.stack&&(e.stack=this.stack),e}toString(){return vc.default(this.serialize(),xm,2)}},pc.EthereumRpcError=mc,pc.EthereumProviderError=class extends mc{constructor(e,t,n){if(r=e,!(Number.isInteger(r)&&r>=1e3&&r<=4999))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');var r;super(e,t,n)}},gc={},yc={},Object.defineProperty(yc,"__esModule",{value:!0}),yc.errorValues=yc.errorCodes=void 0,yc.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},yc.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.serializeError=e.isValidCode=e.getMessageFromCode=e.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;var t=yc,n=pc,r=t.errorCodes.rpc.internal,i={code:r,message:o(r)};function o(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Unspecified error message. This is a bug, please report it.";if(Number.isInteger(n)){var i=n.toString();if(l(t.errorValues,i))return t.errorValues[i].message;if(s(n))return e.JSON_RPC_SERVER_ERROR_MESSAGE}return r}function a(e){if(!Number.isInteger(e))return!1;var n=e.toString();return!!t.errorValues[n]||!!s(e)}function s(e){return e>=-32099&&e<=-32e3}function c(e){return e&&"object"==typeof e&&!Array.isArray(e)?Object.assign({},e):e}function l(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.",e.getMessageFromCode=o,e.isValidCode=a,e.serializeError=function(e){var t,r,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=s.fallbackError,d=void 0===u?i:u,h=s.shouldIncludeStack,f=void 0!==h&&h;if(!d||!Number.isInteger(d.code)||"string"!=typeof d.message)throw new Error("Must provide fallback error with integer number code and string message.");if(e instanceof n.EthereumRpcError)return e.serialize();var p={};if(e&&"object"==typeof e&&!Array.isArray(e)&&l(e,"code")&&a(e.code)){var v=e;p.code=v.code,v.message&&"string"==typeof v.message?(p.message=v.message,l(v,"data")&&(p.data=v.data)):(p.message=o(p.code),p.data={originalError:c(e)})}else{p.code=d.code;var m=null===(t=e)||void 0===t?void 0:t.message;p.message=m&&"string"==typeof m?m:d.message,p.data={originalError:c(e)}}var g=null===(r=e)||void 0===r?void 0:r.stack;return f&&e&&g&&"string"==typeof g&&(p.stack=g),p}}(gc),bc={},Object.defineProperty(bc,"__esModule",{value:!0}),bc.ethErrors=void 0,wc=pc,Ec=gc,_c=yc,bc.ethErrors={rpc:{parse:e=>Tm(_c.errorCodes.rpc.parse,e),invalidRequest:e=>Tm(_c.errorCodes.rpc.invalidRequest,e),invalidParams:e=>Tm(_c.errorCodes.rpc.invalidParams,e),methodNotFound:e=>Tm(_c.errorCodes.rpc.methodNotFound,e),internal:e=>Tm(_c.errorCodes.rpc.internal,e),server:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");var t=e.code;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return Tm(t,e)},invalidInput:e=>Tm(_c.errorCodes.rpc.invalidInput,e),resourceNotFound:e=>Tm(_c.errorCodes.rpc.resourceNotFound,e),resourceUnavailable:e=>Tm(_c.errorCodes.rpc.resourceUnavailable,e),transactionRejected:e=>Tm(_c.errorCodes.rpc.transactionRejected,e),methodNotSupported:e=>Tm(_c.errorCodes.rpc.methodNotSupported,e),limitExceeded:e=>Tm(_c.errorCodes.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>Mm(_c.errorCodes.provider.userRejectedRequest,e),unauthorized:e=>Mm(_c.errorCodes.provider.unauthorized,e),unsupportedMethod:e=>Mm(_c.errorCodes.provider.unsupportedMethod,e),disconnected:e=>Mm(_c.errorCodes.provider.disconnected,e),chainDisconnected:e=>Mm(_c.errorCodes.provider.chainDisconnected,e),custom:e=>{if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");var t=e.code,n=e.message,r=e.data;if(!n||"string"!=typeof n)throw new Error('"message" must be a nonempty string');return new wc.EthereumProviderError(t,n,r)}}},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getMessageFromCode=e.serializeError=e.EthereumProviderError=e.EthereumRpcError=e.ethErrors=e.errorCodes=void 0;var t=pc;Object.defineProperty(e,"EthereumRpcError",{enumerable:!0,get:function(){return t.EthereumRpcError}}),Object.defineProperty(e,"EthereumProviderError",{enumerable:!0,get:function(){return t.EthereumProviderError}});var n=gc;Object.defineProperty(e,"serializeError",{enumerable:!0,get:function(){return n.serializeError}}),Object.defineProperty(e,"getMessageFromCode",{enumerable:!0,get:function(){return n.getMessageFromCode}});var r=bc;Object.defineProperty(e,"ethErrors",{enumerable:!0,get:function(){return r.ethErrors}});var i=yc;Object.defineProperty(e,"errorCodes",{enumerable:!0,get:function(){return i.errorCodes}})}(fc),(Sc={exports:{}}).exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=90)}({17:function(e,t,n){t.__esModule=!0,t.default=void 0;var r=n(18);t.default=function(){function e(){}return e.getFirstMatch=function(e,t){var n=t.match(e);return n&&n.length>0&&n[1]||""},e.getSecondMatch=function(e,t){var n=t.match(e);return n&&n.length>1&&n[2]||""},e.matchAndReturnConst=function(e,t,n){if(e.test(t))return n},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map(function(e){return parseInt(e,10)||0});if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map(function(e){return parseInt(e,10)||0});if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,n,r){void 0===r&&(r=!1);var i=e.getVersionPrecision(t),o=e.getVersionPrecision(n),a=Math.max(i,o),s=0,c=e.map([t,n],function(t){var n=a-e.getVersionPrecision(t),r=t+new Array(n+1).join(".0");return e.map(r.split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});for(r&&(s=a-Math.min(i,o)),a-=1;a>=s;){if(c[0][a]>c[1][a])return 1;if(c[0][a]===c[1][a]){if(a===s)return 0;a-=1}else if(c[0][a]<c[1][a])return-1}},e.map=function(e,t){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n+=1)r.push(t(e[n]));return r},e.find=function(e,t){var n,r;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(n=0,r=e.length;n<r;n+=1){var i=e[n];if(t(i,n))return i}},e.assign=function(e){for(var t,n,r=e,i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];if(Object.assign)return Object.assign.apply(Object,[e].concat(o));var s=function(){var e=o[t];"object"==typeof e&&null!==e&&Object.keys(e).forEach(function(t){r[t]=e[t]})};for(t=0,n=o.length;t<n;t+=1)s();return e},e.getBrowserAlias=function(e){return r.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return r.BROWSER_MAP[e]||""},e}(),e.exports=t.default},18:function(e,t,n){t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,i=(r=n(91))&&r.__esModule?r:{default:r},o=n(18);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}t.default=function(){function e(){}var t,n;return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("UserAgent should be a string");return new i.default(e,t)},e.parse=function(e){return new i.default(e).getResult()},t=e,n=[{key:"BROWSER_MAP",get:function(){return o.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return o.ENGINE_MAP}},{key:"OS_MAP",get:function(){return o.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return o.PLATFORMS_MAP}}],null&&a(t.prototype,null),n&&a(t,n),e}(),e.exports=t.default},91:function(e,t,n){t.__esModule=!0,t.default=void 0;var r=c(n(92)),i=c(n(93)),o=c(n(94)),a=c(n(95)),s=c(n(17));function c(e){return e&&e.__esModule?e:{default:e}}t.default=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=s.default.find(r.default,function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=s.default.find(i.default,function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=s.default.find(o.default,function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=s.default.find(a.default,function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return s.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,n={},r=0,i={},o=0;if(Object.keys(e).forEach(function(t){var a=e[t];"string"==typeof a?(i[t]=a,o+=1):"object"==typeof a&&(n[t]=a,r+=1)}),r>0){var a=Object.keys(n),c=s.default.find(a,function(e){return t.isOS(e)});if(c){var l=this.satisfies(n[c]);if(void 0!==l)return l}var u=s.default.find(a,function(e){return t.isPlatform(e)});if(u){var d=this.satisfies(n[u]);if(void 0!==d)return d}}if(o>0){var h=Object.keys(i),f=s.default.find(h,function(e){return t.isBrowser(e,!0)});if(void 0!==f)return this.compareVersion(i[f])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var n=this.getBrowserName().toLowerCase(),r=e.toLowerCase(),i=s.default.getBrowserTypeByAlias(r);return t&&i&&(r=i.toLowerCase()),r===n},t.compareVersion=function(e){var t=[0],n=e,r=!1,i=this.getBrowserVersion();if("string"==typeof i)return">"===e[0]||"<"===e[0]?(n=e.substr(1),"="===e[1]?(r=!0,n=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?n=e.substr(1):"~"===e[0]&&(r=!0,n=e.substr(1)),t.indexOf(s.default.compareVersions(i,n,r))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e,t){return void 0===t&&(t=!1),this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some(function(e){return t.is(e)})},e}(),e.exports=t.default},92:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=/version\/(\d+(\.?_?\d+)+)/i;t.default=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},n=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},n=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},n=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},n=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},n=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},n=i.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},n=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},n=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},n=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},n=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},n=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},n=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},n=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},n=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},n=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return n&&(t.version=n),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},n=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},n=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},n=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},n=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},n=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},n=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},n=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},n=i.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MiuiBrowser/i],describe:function(e){var t={name:"Miui"},n=i.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},n=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},n=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},n=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t={name:"Android Browser"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(t,e),version:i.default.getSecondMatch(t,e)}}}],e.exports=t.default},93:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18);t.default=[{test:[/Roku\/DVP/],describe:function(e){var t=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:o.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),n=i.default.getWindowsVersionName(t);return{name:o.OS_MAP.Windows,version:t,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:o.OS_MAP.iOS},n=i.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return n&&(t.version=n),t}},{test:[/macintosh/i],describe:function(e){var t=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),n=i.default.getMacOSVersionName(t),r={name:o.OS_MAP.MacOS,version:t};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:o.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),n=i.default.getAndroidVersionName(t),r={name:o.OS_MAP.Android,version:t};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),n={name:o.OS_MAP.WebOS};return t&&t.length&&(n.version=t),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||i.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:o.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:o.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:o.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.PlayStation4,version:t}}}],e.exports=t.default},94:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18);t.default=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=i.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",n={type:o.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(n.model=t),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),n=e.test(/like (ipod|iphone)/i);return t&&!n},describe:function(e){var t=i.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:o.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}}],e.exports=t.default},95:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18);t.default=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:o.ENGINE_MAP.Blink};var t=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:o.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:o.ENGINE_MAP.Trident},n=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:o.ENGINE_MAP.Presto},n=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=e.test(/gecko/i),n=e.test(/like gecko/i);return t&&!n},describe:function(e){var t={name:o.ENGINE_MAP.Gecko},n=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:o.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:o.ENGINE_MAP.WebKit},n=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}}],e.exports=t.default}}),kc=Ph(Sc.exports),i("MetaMaskSDKEvent",Cc={Initialized:"initialized",DisplayURI:"display_uri",ProviderUpdate:"provider_update",ConnectWithResponse:"connectWithResponse",ConnectionStatus:"connection_status",ServiceStatus:"service_status"}),Ac=class e{constructor(e){var t,n=e.shouldSetOnWindow,r=e.connectionStream,i=e.shouldSendMetadata,o=void 0!==i&&i,a=e.shouldShimWeb3,s=e.sdkInstance,c=new Mc({connectionStream:r,shouldSendMetadata:o,shouldSetOnWindow:n,shouldShimWeb3:a,autoRequestAccounts:!1});if(this.provider=new Proxy(c,{deleteProperty:()=>!0}),this.sdkInstance=s,n&&"undefined"!=typeof window)try{t=c,window.ethereum=t,window.dispatchEvent(new Event("ethereum#initialized"))}catch(l){dc("[Ethereum] Unable to set global provider - window.ethereum may be read-only",l)}if(a&&"undefined"!=typeof window)try{!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:console,n=!1,r=!1;if(!window.web3){var i="__isMetaMaskShim__",o={currentProvider:e};Object.defineProperty(o,i,{value:!0,enumerable:!0,configurable:!1,writable:!1}),o=new Proxy(o,{get:function(o,a){for(var s=arguments.length,c=new Array(s>2?s-2:0),l=2;l<s;l++)c[l-2]=arguments[l];return"currentProvider"!==a||n?"currentProvider"===a||a===i||r||(r=!0,t.error("MetaMask no longer injects web3. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3"),e.request({method:"metamask_logWeb3ShimUsage"}).catch(e=>{t.debug("MetaMask: Failed to log web3 shim usage.",e)})):(n=!0,t.warn("You are accessing the MetaMask window.web3.currentProvider shim. This property is deprecated; use window.ethereum instead. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3")),Reflect.get(o,a,...c)},set:function(){return t.warn("You are accessing the MetaMask window.web3 shim. This object is deprecated; use window.ethereum instead. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3"),Reflect.set(...arguments)}}),Object.defineProperty(window,"web3",{value:o,enumerable:!1,configurable:!0,writable:!0})}}(this.provider)}catch(l){dc("[Ethereum] Unable to shim web3 - window.web3 may be read-only",l)}this.provider.on("display_uri",e=>{this.sdkInstance.emit(Cc.DisplayURI,e)}),this.provider.on("_initialized",()=>{var e={chainId:this.provider.getChainId(),isConnected:this.provider.isConnected(),isMetaMask:this.provider.isMetaMask,selectedAddress:this.provider.getSelectedAddress(),networkVersion:this.provider.getNetworkVersion()};this.sdkInstance.emit(Cc.Initialized,e),dc("[Ethereum: constructor()] provider initialized",e)})}static init(t){var n;return dc("[Ethereum: init()] Initializing Ethereum service"),this.instance=new e(t),null===(n=this.instance)||void 0===n?void 0:n.provider}static destroy(){}static getInstance(){var e;if(!(null===(e=this.instance)||void 0===e?void 0:e.provider))throw new Error("Ethereum instance not intiialized - call Ethereum.factory first.");return this.instance}static getProvider(){var e;if(!(null===(e=this.instance)||void 0===e?void 0:e.provider))throw new Error("Ethereum instance not intiialized - call Ethereum.factory first.");return this.instance.provider}},xc=class e{constructor(e){var t=e.useDeepLink,n=e.preferredOpenLink,r=e.debug,i=void 0!==r&&r;this.state={platformType:void 0,useDeeplink:!1,preferredOpenLink:void 0,debug:!1},this.state.platformType=this.getPlatformType(),this.state.useDeeplink=t,this.state.preferredOpenLink=n,this.state.debug=i}openDeeplink(e,t,n){return function(e,t,n,r){var i=e.state;dc(`[PlatfformManager: openDeeplink()] universalLink --\x3e ${t}`),dc(`[PlatfformManager: openDeeplink()] deepLink --\x3e ${n}`);try{if(i.preferredOpenLink)return void i.preferredOpenLink(i.useDeeplink?n:t,r);if(dc(`[PlatfformManager: openDeeplink()] open link now useDeepLink=${i.useDeeplink} link=${i.useDeeplink?n:t}`),i.useDeeplink)"undefined"!=typeof window&&(window.location.href=n);else if("undefined"!=typeof document){var o=document.createElement("a");o.href=t,o.target="_self",o.rel="noreferrer noopener",o.click()}}catch(o){}}(this,e,t,n)}isReactNative(){var e;return this.isNotBrowser()&&"undefined"!=typeof window&&(null===window||void 0===window?void 0:window.navigator)&&"ReactNative"===(null===(e=window.navigator)||void 0===e?void 0:e.product)}isMetaMaskInstalled(){return function(){var e=Ac.getProvider()||(null===window||void 0===window?void 0:window.ethereum);return dc(`[PlatfformManager: isMetaMaskInstalled()] isMetaMask=${null==e?void 0:e.isMetaMask} isConnected=${null==e?void 0:e.isConnected()}`),(null==e?void 0:e.isMetaMask)&&(null==e?void 0:e.isConnected())}()}isDesktopWeb(){return this.isBrowser()&&!this.isMobileWeb()}isMobile(){var e,t,n=kc.parse(window.navigator.userAgent);return"mobile"===(null===(e=null==n?void 0:n.platform)||void 0===e?void 0:e.type)||"tablet"===(null===(t=null==n?void 0:n.platform)||void 0===t?void 0:t.type)}isSecure(){return this.isReactNative()||this.isMobileWeb()}isMetaMaskMobileWebView(){return"undefined"!=typeof window&&Boolean(window.ReactNativeWebView)&&Boolean(navigator.userAgent.endsWith("MetaMaskMobile"))}isMobileWeb(){return this.state.platformType===no.MobileWeb}static isNotBrowser(){var e;return"undefined"==typeof window||!(null===window||void 0===window?void 0:window.navigator)||void 0!==ze&&"ReactNative"===(null===(e=null==ze?void 0:ze.navigator)||void 0===e?void 0:e.product)||"ReactNative"===(null===navigator||void 0===navigator?void 0:navigator.product)}isNotBrowser(){return e.isNotBrowser()}static isBrowser(){return!this.isNotBrowser()}isBrowser(){return e.isBrowser()}isNodeJS(){return this.isNotBrowser()&&!this.isReactNative()}isUseDeepLink(){return this.state.useDeeplink}getPlatformType(){return function(e){var t=e.state;return t.platformType?t.platformType:e.isReactNative()?no.ReactNative:e.isNotBrowser()?no.NonBrowser:e.isMetaMaskMobileWebView()?no.MetaMaskMobileWebview:e.isMobile()?no.MobileWeb:no.DesktopWeb}(this)}},Tc=e=>Ud(void 0,void 0,void 0,b().m(function t(){var n,r;return b().w(function(t){for(;;)switch(t.n){case 0:if(!xc.isBrowser()){t.n=2;break}return t.n=1,Promise.resolve().then(function(){return El});case 1:return n=t.v,r=n.StorageManagerWeb,t.a(2,new r(e));case 2:return t.a(2,Promise.resolve({persistChannelConfig:()=>Ud(void 0,void 0,void 0,b().m(function e(){return b().w(function(e){for(;;)if(0===e.n)return e.a(2)},e)})),getPersistedChannelConfig:()=>Ud(void 0,void 0,void 0,b().m(function e(){return b().w(function(e){for(;;)if(0===e.n)return e.a(2)},e)})),persistAccounts:()=>Ud(void 0,void 0,void 0,b().m(function e(){return b().w(function(e){for(;;)if(0===e.n)return e.a(2)},e)})),getCachedAccounts:()=>Ud(void 0,void 0,void 0,b().m(function e(){return b().w(function(e){for(;;)if(0===e.n)return e.a(2,[])},e)})),persistChainId:()=>Ud(void 0,void 0,void 0,b().m(function e(){return b().w(function(e){for(;;)if(0===e.n)return e.a(2)},e)})),getCachedChainId:()=>Ud(void 0,void 0,void 0,b().m(function e(){return b().w(function(e){for(;;)if(0===e.n)return e.a(2)},e)})),terminate:()=>Ud(void 0,void 0,void 0,b().m(function e(){return b().w(function(e){for(;;)if(0===e.n)return e.a(2)},e)}))}))}},t)})),i("SDKProvider",Mc=class extends uc{constructor(e){var t=e.connectionStream,n=e.shouldSendMetadata,r=e.autoRequestAccounts,i=void 0!==r&&r;super(t,{logger:console,maxEventListeners:100,shouldSendMetadata:n}),this.state={accounts:null,autoRequestAccounts:!1,providerStateRequested:!1,chainId:"",networkVersion:""},dc(`[SDKProvider: constructor()] autoRequestAccounts=${i}`),this.state.autoRequestAccounts=i}forceInitializeState(){return Ud(this,void 0,void 0,b().m(function e(){return b().w(function(e){for(;;)if(0===e.n)return e.a(2,(dc(`[SDKProvider: forceInitializeState()] autoRequestAccounts=${this.state.autoRequestAccounts}`),this._initializeStateAsync()))},e,this)}))}_setConnected(){dc("[SDKProvider: _setConnected()] Setting connected state"),this._state.isConnected=!0}getState(){return this._state}getSDKProviderState(){return this.state}getSelectedAddress(){var e,t=this._state.accounts;return t&&0!==t.length?(null===(e=t[0])||void 0===e?void 0:e.toLowerCase())||"":(dc("[SDKProvider: getSelectedAddress] No accounts found"),null)}getChainId(){return this.state.chainId}getNetworkVersion(){return this.state.networkVersion}setSDKProviderState(e){this.state=Object.assign(Object.assign({},this.state),e)}handleAccountsChanged(e,t){return this._handleAccountsChanged(e,t)}handleDisconnect(e){var t=e.terminate;!function(e){var t=e.terminate,n=void 0!==t&&t,r=e.instance,i=r.state;dc(`[SDKProvider: handleDisconnect()] cleaning up provider state terminate=${n}`,r),n&&(r._state.accounts=null,r._state.isUnlocked=!1,r._state.isPermanentlyDisconnected=!0,r._state.initialized=!1),r._handleAccountsChanged([]),r._state.isConnected=!1,r.emit("disconnect",fc.ethErrors.provider.disconnected()),i.providerStateRequested=!1}({terminate:void 0!==t&&t,instance:this})}_initializeStateAsync(){return Ud(this,void 0,void 0,b().m(function e(){return b().w(function(e){for(;;)if(0===e.n)return e.a(2,function(e){var t,n;return Ud(this,void 0,void 0,b().m(function r(){var i,o,a,s,c,l,u,d,h,f;return b().w(function(r){for(;;)switch(r.p=r.n){case 0:if(void 0===e.state&&(e.state={accounts:null,autoRequestAccounts:!1,providerStateRequested:!1,chainId:""}),!(i=e.state).providerStateRequested){r.n=1;break}dc("[SDKProvider: initializeStateAsync()] initialization already in progress"),r.n=14;break;case 1:return i.providerStateRequested=!0,s=null,c=!1,l=!1,r.n=2,Tc({enabled:!0});case 2:if(!(u=r.v)){r.n=6;break}return r.n=3,u.getPersistedChannelConfig({});case 3:return d=r.v,c=null!==(t=null==d?void 0:d.relayPersistence)&&void 0!==t&&t,r.n=4,u.getCachedChainId();case 4:return a=r.v,r.n=5,u.getCachedAccounts();case 5:(h=r.v).length>0&&(s=h[0]);case 6:if(dc(`[SDKProvider: initializeStateAsync()] relayPersistence=${c}`,{relayPersistence:c,cachedChainId:a,cachedSelectedAddress:s}),!c){r.n=10;break}if(!a||!s){r.n=7;break}o={accounts:[s],chainId:a,isUnlocked:!1},l=!0,r.n=10;break;case 7:return r.p=7,r.n=8,e.request({method:"metamask_getProviderState"});case 8:o=r.v,r.n=10;break;case 9:return r.p=9,f=r.v,e._log.error("MetaMask: Failed to get initial state. Please report this bug.",f),i.providerStateRequested=!1,r.a(2);case 10:if(0!==(null===(n=null==o?void 0:o.accounts)||void 0===n?void 0:n.length)){r.n=13;break}if(!e.getSelectedAddress()){r.n=11;break}o.accounts=[e.getSelectedAddress()],r.n=13;break;case 11:return dc("[SDKProvider: initializeStateAsync()] Fetch accounts remotely."),r.n=12,e.request({method:"eth_requestAccounts",params:[]});case 12:o.accounts=r.v;case 13:e._initializeState(o),i.providerStateRequested=!1,l&&(e._state.isConnected=!0,e.emit("connect",{chainId:null==o?void 0:o.chainId}));case 14:return r.a(2)}},r,null,[[7,9]])}))}(this))},e,this)}))}_initializeState(e){return dc("[SDKProvider: _initializeState()]",e),function(e,t,n){return dc("[SDKProvider: initializeState()] set state._initialized to false"),e._state.initialized=!1,t(n)}(this,super._initializeState.bind(this),e)}_handleChainChanged(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.chainId,n=e.networkVersion;this.state.chainId=t,this.state.networkVersion=n,function(e){var t=e.instance,n=e.chainId,r=e.networkVersion,i=e.superHandleChainChanged;dc(`[SDKProvider: handleChainChanged()] chainId=${n} networkVersion=${r}`);var o=r;r||(dc("[SDKProvider: handleChainChanged()] forced network version to prevent provider error"),o="1"),n!==hc&&(D.analytics.track("sdk_used_chain",{caip_chain_id:`eip155:${parseInt(null!=n?n:"0x1",16)}`}),hc=n),t._state.isConnected=!0,t.emit("connect",{chainId:n}),i({chainId:n,networkVersion:o})}({instance:this,chainId:t,networkVersion:n,superHandleChainChanged:super._handleChainChanged.bind(this)})}}),Rc={name:"@metamask/sdk",version:"0.33.1",description:"",homepage:"https://github.com/MetaMask/metamask-sdk#readme",bugs:{url:"https://github.com/MetaMask/metamask-sdk/issues"},repository:{type:"git",url:"https://github.com/MetaMask/metamask-sdk",directory:"packages/sdk"},main:"dist/node/cjs/metamask-sdk.js",module:"dist/browser/es/metamask-sdk.js",browser:"dist/browser/es/metamask-sdk.js",unpkg:"dist/browser/umd/metamask-sdk.js","react-native":"dist/react-native/es/metamask-sdk.js",types:"dist/types/src/index.d.ts",sideEffects:!1,files:["/dist"],scripts:{"build:types":"tsc --project tsconfig.build.json --emitDeclarationOnly --outDir dist/types",build:"yarn build:types && rollup -c --bundleConfigAsCjs","build:clean":"yarn clean && yarn build","build:post-tsc":"echo 'N/A'","build:pre-tsc":"echo 'N/A'",typecheck:"tsc --noEmit",clean:"rimraf ./dist",size:"node bundle-size && size-limit",lint:"yarn lint:eslint && yarn lint:misc --check","lint:changelog":"../../scripts/validate-changelog.sh @metamask/sdk","lint:eslint":"eslint . --cache --ext js,ts","lint:fix":"yarn lint:eslint --fix && yarn lint:misc --write","lint:misc":"prettier '**/*.json' '**/*.md' '!CHANGELOG.md' --ignore-path ../../.gitignore",prepack:"../../scripts/prepack.sh","publish:preview":"yarn npm publish --tag preview",reset:"yarn clean && rimraf ./node_modules/",test:'jest --testPathIgnorePatterns "/e2e/"',"test:coverage":'jest --coverage --testPathIgnorePatterns "/e2e/"',"test:e2e":'jest --testPathPattern "/e2e/"',"test:ci":'jest --coverage --passWithNoTests --setupFilesAfterEnv ./jest-preload.js --testPathIgnorePatterns "/e2e/"',"test:dev":'jest -c ./jest.config.ts --detectOpenHandles  --testPathIgnorePatterns "/e2e/"',watch:"rollup -c -w",dev:'concurrently "tsc --watch" "rollup -c -w --bundleConfigAsCjs"',"build:dev":"yarn build:types && NODE_ENV=dev rollup -c --bundleConfigAsCjs"},dependencies:{"@babel/runtime":"^7.26.0","@metamask/onboarding":"^1.0.1","@metamask/providers":"16.1.0","@metamask/sdk-analytics":"workspace:*","@metamask/sdk-communication-layer":"workspace:*","@metamask/sdk-install-modal-web":"workspace:*","@paulmillr/qr":"^0.2.1",bowser:"^2.9.0","cross-fetch":"^4.0.0",debug:"4.3.4",eciesjs:"^0.4.11","eth-rpc-errors":"^4.0.3",eventemitter2:"^6.4.9","obj-multiplex":"^1.0.0",pump:"^3.0.0","readable-stream":"^3.6.2","socket.io-client":"^4.5.1",tslib:"^2.6.0",util:"^0.12.4",uuid:"^8.3.2"},devDependencies:{"@jest/globals":"^29.3.1","@lavamoat/allow-scripts":"^2.3.1","@metamask/auto-changelog":"3.1.0","@metamask/eslint-config":"^6.0.0","@metamask/eslint-config-nodejs":"^6.0.0","@metamask/eslint-config-typescript":"^6.0.0","@react-native-async-storage/async-storage":"^1.19.6","@rollup/plugin-alias":"^5.1.1","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.2","@rollup/plugin-replace":"^6.0.1","@rollup/plugin-terser":"^0.4.1","@size-limit/preset-big-lib":"^11.0.2","@types/dom-screen-wake-lock":"^1.0.2","@types/node":"^20.1.3","@types/pump":"^1.1.1","@types/qrcode-terminal":"^0.12.0","@types/uuid":"^10.0.0","@typescript-eslint/eslint-plugin":"^4.26.0","@typescript-eslint/parser":"^4.26.0","browserify-zlib":"^0.2.0",buffer:"^6.0.3",concurrently:"^9.1.2","crypto-browserify":"^3.12.0",eslint:"^7.30.0","eslint-config-prettier":"^8.3.0","eslint-plugin-import":"^2.23.4","eslint-plugin-jest":"^24.4.0","eslint-plugin-jsdoc":"^36.1.0","eslint-plugin-node":"^11.1.0","eslint-plugin-prettier":"^3.4.0","https-browserify":"^1.0.0",jest:"^29.3.1","jest-environment-jsdom":"^29.3.1",prettier:"^2.3.0",process:"^0.11.10",rimraf:"^4.4.0",rollup:"^4.26.0","rollup-plugin-analyzer":"^4.0.0","rollup-plugin-jscc":"^2.0.0","rollup-plugin-natives":"^0.7.5","rollup-plugin-node-builtins":"^2.1.2","rollup-plugin-polyfill-node":"^0.13.0","rollup-plugin-sizes":"^1.0.6","rollup-plugin-typescript2":"^0.31.2","rollup-plugin-visualizer":"^5.12.0","size-limit":"^11.0.2","stream-browserify":"^3.0.0","stream-http":"^3.2.0","ts-jest":"^29.0.3","ts-node":"^10.9.1",typescript:"^4.3.2",url:"^0.11.0",webpack:"^5.0.0"},publishConfig:{access:"public",registry:"https://registry.npmjs.org/"},lavamoat:{allowScripts:{"eciesjs>secp256k1":!1,"socket.io-client>engine.io-client>ws>bufferutil":!1,"socket.io-client>engine.io-client>ws>utf-8-validate":!1,"@metamask/sdk-communication-layer>bufferutil":!1,"@metamask/sdk-communication-layer>eciesjs>secp256k1":!1,"@metamask/sdk-communication-layer>utf-8-validate":!1}}},function(e){e.INPAGE="metamask-inpage",e.CONTENT_SCRIPT="metamask-contentscript",e.PROVIDER="metamask-provider"}(Oc||(Oc={})),Pc="direct",Ic="https://metamask.app.link/connect",Lc="metamask://connect",Nc={NAME:"MetaMask",RDNS:["io.metamask","io.metamask.flask"]},Dc=/(?:^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[0-9a-f]{4}-[0-9a-f]{12}$)|(?:^0{8}-0{4}-0{4}-0{4}-0{12}$)/,Bc={METAMASK_GETPROVIDERSTATE:"metamask_getProviderState",METAMASK_CONNECTSIGN:"metamask_connectSign",METAMASK_CONNECTWITH:"metamask_connectWith",METAMASK_OPEN:"metamask_open",METAMASK_BATCH:"metamask_batch",PERSONAL_SIGN:"personal_sign",WALLET_REQUESTPERMISSIONS:"wallet_requestPermissions",WALLET_REVOKEPERMISSIONS:"wallet_revokePermissions",WALLET_GETPERMISSIONS:"wallet_getPermissions",WALLET_WATCHASSET:"wallet_watchAsset",WALLET_ADDETHEREUMCHAIN:"wallet_addEthereumChain",WALLET_SWITCHETHETHEREUMCHAIN:"wallet_switchEthereumChain",ETH_REQUESTACCOUNTS:"eth_requestAccounts",ETH_ACCOUNTS:"eth_accounts",ETH_CHAINID:"eth_chainId",ETH_SENDTRANSACTION:"eth_sendTransaction",ETH_SIGNTYPEDDATA:"eth_signTypedData",ETH_SIGNTYPEDDATA_V3:"eth_signTypedData_v3",ETH_SIGNTYPEDDATA_V4:"eth_signTypedData_v4",ETH_SIGNTRANSACTION:"eth_signTransaction",ETH_SIGN:"eth_sign",PERSONAL_EC_RECOVER:"personal_ecRecover"},$c={[Bc.ETH_REQUESTACCOUNTS]:!0,[Bc.ETH_SENDTRANSACTION]:!0,[Bc.ETH_SIGNTRANSACTION]:!0,[Bc.ETH_SIGN]:!0,[Bc.PERSONAL_SIGN]:!0,[Bc.ETH_ACCOUNTS]:!1,[Bc.ETH_CHAINID]:!1,[Bc.PERSONAL_SIGN]:!0,[Bc.ETH_SIGNTYPEDDATA]:!0,[Bc.ETH_SIGNTYPEDDATA_V3]:!0,[Bc.ETH_SIGNTYPEDDATA_V4]:!0,[Bc.WALLET_REQUESTPERMISSIONS]:!0,[Bc.WALLET_GETPERMISSIONS]:!0,[Bc.WALLET_WATCHASSET]:!0,[Bc.WALLET_ADDETHEREUMCHAIN]:!0,[Bc.WALLET_SWITCHETHETHEREUMCHAIN]:!0,[Bc.METAMASK_CONNECTSIGN]:!0,[Bc.METAMASK_CONNECTWITH]:!0,[Bc.PERSONAL_EC_RECOVER]:!0,[Bc.METAMASK_BATCH]:!0,[Bc.METAMASK_OPEN]:!0},jc=Object.keys($c).filter(e=>!0===$c[e]).map(e=>e.toLowerCase()),Kc=["eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sign"].map(e=>e.toLowerCase()),Uc=".sdk-comm",Hc="providerType",Fc=".MMSDK_cached_address",zc=".MMSDK_cached_chainId",qc={CHAIN_CHANGED:"chainChanged",ACCOUNTS_CHANGED:"accountsChanged",DISCONNECT:"disconnect",CONNECT:"connect",CONNECTED:"connected"},Vc=1e6,function(e){e.TERMINATE="terminate",e.EXTENSION="extension",e.INITIALIZED="initialized"}(Wc||i("PROVIDER_UPDATE_TYPE",Wc={})),Gc="undefined"!=typeof window&&window.localStorage,Yc=class extends qs.Duplex{constructor(e){var t=e.name,n=e.remote,r=e.deeplinkProtocol,i=e.platformManager;super({objectMode:!0}),this.state={_name:null,remote:null,deeplinkProtocol:!1,platformManager:null},this.state._name=t,this.state.remote=n,this.state.deeplinkProtocol=r,this.state.platformManager=i,this._onMessage=this._onMessage.bind(this),this.state.remote.on(ji.MESSAGE,this._onMessage)}_write(e,t,n){return Ud(this,void 0,void 0,b().m(function t(){return b().w(function(t){for(;;)if(0===t.n)return t.a(2,Lm(this,e,0,n))},t,this)}))}_read(){}_onMessage(e){return function(e,t){try{if(dc("[RCPMS: onMessage()] message",t),!t||"object"!=typeof t)return;if("object"!=typeof(null==t?void 0:t.data))return;if(!(null==t?void 0:t.name))return void dc("[RCPMS: onMessage()] ignore message without name",t);if((null==t?void 0:t.name)!==Oc.PROVIDER)return void dc(`[RCPMS: onMessage()] ignore message with wrong name message=${t}`);if(Yd.isBuffer(t)){var n=Yd.from(t);e.push(n)}else e.push(t)}catch(r){dc(`[RCPMS: onMessage()] ignore message error err=${r}`)}}(this,e)}start(){}},Zc=1,Jc=e=>new Promise(t=>{setTimeout(()=>{t(!0)},e)}),Xc=e=>{var t=e.checkInstallationOnAllCalls,n=void 0!==t&&t,r=e.communicationLayerPreference,i=e.injectProvider,o=e.shouldShimWeb3,a=e.platformManager,s=e.installer,c=e.sdk,l=e.remoteConnection,u=e.debug;return Ud(void 0,void 0,void 0,b().m(function e(){var t,d,h,f,v,m,g,y,w,E,_,S,k,C,A,x,T,M,O;return b().w(function(e){for(;;)switch(e.p=e.n){case 0:if(h=(e=>{var t=e.name,n=e.remoteConnection;if(!n||!(null==n?void 0:n.getConnector()))throw new Error("Missing remote connection parameter");return new Yc({name:t,remote:null==n?void 0:n.getConnector(),deeplinkProtocol:null==n?void 0:n.state.deeplinkProtocol,platformManager:null==n?void 0:n.getPlatformManager()})})({name:Oc.INPAGE,target:Oc.CONTENT_SCRIPT,platformManager:a,communicationLayerPreference:r,remoteConnection:l}),f=a.getPlatformType(),v=c.options.dappMetadata,m=`Sdk/Javascript SdkVersion/${Rc.version} Platform/${f} dApp/${null!==(t=v.url)&&void 0!==t?t:v.name} dAppTitle/${v.name}`,g=null,y=null,!(w=null===(d=c.options.storage)||void 0===d?void 0:d.storageManager)){e.n=7;break}return e.p=1,e.n=2,w.getCachedAccounts();case 2:(E=e.v).length>0&&(g=E[0]),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.p=4,e.n=5,w.getCachedChainId();case 5:(_=e.v)&&(y=_),e.n=7;break;case 6:e.p=6,e.v;case 7:return dc(`[initializeMobileProvider] cachedAccountAddress: ${g}, cachedChainId: ${y}`),S=!(!i||f===no.NonBrowser||f===no.ReactNative),k=Ac.init({shouldSetOnWindow:S,connectionStream:h,shouldShimWeb3:o,sdkInstance:c}),C=!1,A=e=>{C=e},x=()=>C,T=(e,t,r,i)=>Ud(void 0,void 0,void 0,b().m(function o(){var u,d,h,f,v,E,_,S,k,T,M,O,R,P,I,L,N,D,B,j,K,U,H,F,z,q,V,W,G,Y,Z,J,X,Q,ee,te,ne,re,ie,oe;return b().w(function(o){for(;;)switch(o.p=o.n){case 0:if(T=Ac.getProvider(),!C){o.n=4;break}T.emit("display_uri",(null==l?void 0:l.state.qrcodeLink)||""),null==l||l.showActiveModal(),M=x();case 1:if(!M){o.n=3;break}return O=x(),R=null==l?void 0:l.isAuthorized(),M=O&&!R,dc(`[initializeMobileProvider: sendRequest()] waiting for initialization to complete - initializing: ${O} authorized: ${R}`),o.n=2,Jc(1e3);case 2:o.n=1;break;case 3:return o.a(2,(dc("[initializeMobileProvider: sendRequest()] initial method completed -- prevent installation and call provider"),r(...t)));case 4:if(P=a.isMetaMaskInstalled(),I=null==l?void 0:l.isConnected(),L=null,N=null,D=null,L=null!==(u=T.getSelectedAddress())&&void 0!==u?u:g,D=T.getChainId()||y,L&&w&&L!==g&&w.persistAccounts([L]).catch(e=>{}),D&&(y=D,w&&w.persistChainId(D).catch(e=>{})),dc("[initializeMobileProvider: sendRequest()]",{selectedAddress:L,chainId:D}),i&&dc(`[initializeMobileProvider: sendRequest()] method=${e} ongoing=${C} selectedAddress=${L} isInstalled=${P} checkInstallationOnAllCalls=${n} socketConnected=${I}`),!L||e.toLowerCase()!==Bc.ETH_ACCOUNTS.toLowerCase()){o.n=5;break}return o.a(2,[L]);case 5:if(!D||e.toLowerCase()!==Bc.ETH_CHAINID.toLowerCase()){o.n=6;break}return o.a(2,D);case 6:if(B=[Bc.ETH_REQUESTACCOUNTS,Bc.WALLET_REQUESTPERMISSIONS,Bc.METAMASK_CONNECTSIGN,Bc.METAMASK_CONNECTWITH],j=!$c[e],!(K=null===(d=c.options.readonlyRPCMap)||void 0===d?void 0:d[D])||!j){o.n=10;break}return o.p=7,U=null===(h=null==t?void 0:t[0])||void 0===h?void 0:h.params,o.n=8,(e=>{var t=e.rpcEndpoint,n=e.method,r=e.sdkInfo,i=e.params;return Ud(void 0,void 0,void 0,b().m(function e(){var o,a,s,c;return b().w(function(e){for(;;)switch(e.p=e.n){case 0:return o=JSON.stringify({jsonrpc:"2.0",method:n,params:i,id:(Zc+=1,Zc)}),a={Accept:"application/json","Content-Type":"application/json"},t.includes("infura")&&(a["Metamask-Sdk-Info"]=r),e.p=1,e.n=2,(0,$.default)(t,{method:"POST",headers:a,body:o});case 2:s=e.v,e.n=4;break;case 3:throw e.p=3,(c=e.v)instanceof Error?new Error(`Failed to fetch from RPC: ${c.message}`):new Error(`Failed to fetch from RPC: ${c}`);case 4:if(s.ok){e.n=5;break}throw new Error(`Server responded with a status of ${s.status}`);case 5:return e.n=6,s.json();case 6:return e.a(2,e.v.result)}},e,null,[[1,3]])}))})({rpcEndpoint:K,sdkInfo:m,method:e,params:U||[]});case 8:return H=o.v,o.a(2,(i&&dc(`initializeProvider::ReadOnlyRPCResponse ${H}`),H));case 9:o.p=9,o.v;case 10:if(P&&(!P||I)||e===Bc.METAMASK_GETPROVIDERSTATE){o.n=36;break}if(F=(null===(f=null==t?void 0:t[0])||void 0===f?void 0:f.params)||[],-1===B.indexOf(e)&&!n){o.n=32;break}return A(!0),z=e===Bc.METAMASK_CONNECTWITH,q=`${Date.now()}`,o.p=11,o.n=12,s.start({wait:!1,connectWith:z?{method:e,id:q,params:F}:void 0});case 12:return o.n=13,new Promise((e,t)=>{null!=l&&l.isAuthorized()&&(dc("[initializeMobileProvider: sendRequest()] already authorized"),e(!0)),null!=l&&l.getConnector().once(ji.AUTHORIZED,()=>{e(!0)}),c.once(ji.PROVIDER_UPDATE,e=>{dc(`[initializeMobileProvider: sendRequest()] PROVIDER_UPDATE --- remote provider request interupted type=${e}`),e===Wc.EXTENSION?t(ji.PROVIDER_UPDATE):t(new Error("Connection Terminated"))})});case 13:o.n=24;break;case 14:if(o.p=14,ie=o.v,Wc.EXTENSION!==ie){o.n=22;break}if(dc(`[initializeMobileProvider: sendRequest()] extension provider detect: re-create ${e} on the active provider`),e.toLowerCase()!==Bc.METAMASK_CONNECTSIGN.toLowerCase()){o.n=18;break}return o.n=15,null===(v=c.getProvider())||void 0===v?void 0:v.request({method:Bc.ETH_REQUESTACCOUNTS,params:[]});case 15:if((V=o.v).length){o.n=16;break}throw new Error("SDK state invalid -- undefined accounts");case 16:return o.n=17,null===(E=c.getProvider())||void 0===E?void 0:E.request({method:Bc.PERSONAL_SIGN,params:[F[0],V[0]]});case 17:return W=o.v,o.a(2,(c.emit(Cc.ConnectWithResponse,W),W));case 18:if(e.toLowerCase()!==Bc.METAMASK_CONNECTWITH.toLowerCase()){o.n=20;break}return G=p(F,1),Y=G[0],o.n=19,(e=>{var t=e.method,n=e.sdk,r=e.params;return Ud(void 0,void 0,void 0,b().m(function e(){var i,o,a,s,c,l,u,d;return b().w(function(e){for(;;)switch(e.n){case 0:if(n.isExtensionActive()){e.n=1;break}throw new Error("SDK state invalid -- extension is not active");case 1:return dc("[MetaMaskProvider: extensionConnectWithOverwrite()] Overwriting request method",t,r),e.n=2,null===(i=n.getProvider())||void 0===i?void 0:i.request({method:Bc.ETH_REQUESTACCOUNTS,params:[]});case 2:if((c=e.v).length){e.n=3;break}throw new Error("SDK state invalid -- undefined accounts");case 3:if((null==t?void 0:t.toLowerCase())!==Bc.PERSONAL_SIGN.toLowerCase()){e.n=5;break}return l={method:t,params:[r[0],c[0]]},e.n=4,null===(o=n.getProvider())||void 0===o?void 0:o.request(l);case 4:return e.a(2,e.v);case 5:if((null==t?void 0:t.toLowerCase())!==Bc.ETH_SENDTRANSACTION.toLowerCase()){e.n=7;break}return u={method:t,params:[Object.assign(Object.assign({},r[0]),{from:c[0]})]},e.n=6,null===(a=n.getProvider())||void 0===a?void 0:a.request(u);case 6:return e.a(2,e.v);case 7:if(!Kc.includes(t.toLowerCase())){e.n=8;break}d=c,e.n=10;break;case 8:return e.n=9,null===(s=n.getProvider())||void 0===s?void 0:s.request({method:t,params:r});case 9:d=e.v;case 10:return e.a(2,d)}},e)}))})({method:Y.method,sdk:c,params:Y.params});case 19:return Z=o.v,o.a(2,(c.emit(Cc.ConnectWithResponse,Z),Z));case 20:return dc(`[initializeMobileProvider: sendRequest()] sending '${e}' on active provider`,F),o.n=21,null===(_=c.getProvider())||void 0===_?void 0:_.request({method:e,params:F});case 21:return o.a(2,o.v);case 22:if(ie!==ji.REJECTED){o.n=23;break}throw null!=l&&l.closeModal(),null===(S=c.getProvider())||void 0===S||S.handleDisconnect({terminate:!1}),Object.assign(new Error("User rejected connection"),{code:4001});case 23:throw dc(`[initializeMobileProvider: sendRequest()] failed to start installer: ${ie}`),ie;case 24:return o.p=24,A(!1),o.f(24);case 25:if(e!==Bc.ETH_REQUESTACCOUNTS){o.n=27;break}return o.n=26,new Promise(e=>{var t=setInterval(()=>{var n=T.getState().accounts;n&&(clearInterval(t),e(n))},100)});case 26:return N=o.v,dc(`[initializeMobileProvider: sendRequest()] selectedAddress: ${L} --- SKIP rpc call`),o.a(2,N);case 27:if(e!==Bc.METAMASK_CONNECTWITH){o.n=31;break}return o.p=28,X=0,Q=e=>{var t=e.resolve,n=e.reject;X+=1;var r=null==l?void 0:l.getConnector().getRPCMethodTracker(),i=null==r?void 0:r[q];dc(`TRACKER: update method ${q}`,i),(null==i?void 0:i.result)?(dc("[initializeMobileProvider: sendRequest()] found result",i.result),c.emit(Cc.ConnectWithResponse,i.result),t(i.result)):(null==i?void 0:i.error)?(dc("[initializeMobileProvider: sendRequest()] found error",i.error),n(i.error)):X>=5?(dc("[initializeMobileProvider: sendRequest()] max message count reached without result"),n(new Error("Max message count reached without result"))):dc("[initializeMobileProvider: sendRequest()] not found yet, need to wait for next update")},o.n=29,new Promise((e,t)=>{var n=null==l?void 0:l.getConnector().getRPCMethodTracker();dc(`TRACKER: method ${q}`,n),(null==n?void 0:n[q].result)?(dc("[initializeMobileProvider: sendRequest()] found result",null==n?void 0:n[q].result),e(null==n?void 0:n[q].result)):null!=n&&n[q].error&&(dc("[initializeMobileProvider: sendRequest()] found error",null==n?void 0:n[q].error),t(null==n?void 0:n[q].error)),H=()=>Q({resolve:e,reject:t}),ee=null==l?void 0:l.getConnector().on(ji.RPC_UPDATE,H)});case 29:return te=o.v,o.a(2,(H&&null!==(J=ee)&&void 0!==J&&J.off(ji.RPC_UPDATE,H),dc("TRACKER: result",te),te));case 30:throw o.p=30,oe=o.v,dc("[initializeMobileProvider: sendRequest()] error:",oe),oe;case 31:return t[0]&&"object"==typeof t[0]&&(t[0].params={__triggeredInstaller:!0,wrappedParams:t[0].params}),o.a(2,r(...t));case 32:if(!a.isSecure()||!$c[e]){o.n=33;break}return o.a(2,r(...t));case 33:if(!c.isExtensionActive()){o.n=35;break}return dc(`[initializeMobileProvider: sendRequest()] EXTENSION active - redirect request '${e}' to it`,t,F),o.n=34,null===(k=c.getProvider())||void 0===k?void 0:k.request({method:e,params:F});case 34:return o.a(2,o.v);case 35:throw dc(`[initializeMobileProvider: sendRequest()] method=${e} --- skip --- not connected/installed`),new Error("MetaMask is not connected/installed, please call eth_requestAccounts to connect first.");case 36:return o.p=36,o.n=37,r(...t);case 37:return ne=o.v,dc(`[initializeMobileProvider: sendRequest()] method=${e} rpcResponse`,ne),e===Bc.WALLET_REQUESTPERMISSIONS&&(re=ne.reduce((e,t)=>{var n;if("eth_accounts"===t.parentCapability){var r=null===(n=t.caveats.find(e=>"restrictReturnedAccounts"===e.type))||void 0===n?void 0:n.value;r&&e.push(...r)}return e},[]),dc("[initializeMobileProvider: sendRequest()] accountsToPersist:",re),re.length>0&&(T.handleAccountsChanged(re,!1),null==w||w.persistAccounts(re))),o.a(2,ne);case 38:throw o.p=38,o.v;case 39:return o.a(2)}},o,null,[[36,38],[28,30],[11,14,24,25],[7,9]])})),M=k.request,k.request=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ud(void 0,void 0,void 0,b().m(function e(){return b().w(function(e){for(;;)if(0===e.n)return e.a(2,T(null==t?void 0:t[0].method,t,M,u))},e)}))},O=k.send,e.a(2,(k.send=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ud(void 0,void 0,void 0,b().m(function e(){return b().w(function(e){for(;;)if(0===e.n)return e.a(2,T(null==t?void 0:t[0],t,O,u))},e)}))},dc("[initializeMobileProvider: sendRequest()] metamaskStream.start()"),h.start(),k))}},e,null,[[4,6],[1,3]])}))},Qc=class{constructor(e){var t=e.serverUrl,n=e.enabled,r=e.originatorInfo;this.serverURL=Ii,this.serverURL=t,this.originatorInfo=r,this.enabled=null==n||n}send(e){var t=e.event,n=e.params;if(this.enabled){var r=Object.assign(Object.assign({id:"sdk",event:t,sdkVersion:Rc.version},this.originatorInfo),{params:n});dc(`[Analytics: send()] event: ${t}`,r),Oi(r,this.serverURL).catch(e=>{dc(`[Analytics: send()] error: ${e}`)})}}},el=()=>{if("undefined"!=typeof document){for(var e,t=document.getElementsByTagName("link"),n=0;n<t.length;n++)"icon"!==t[n].getAttribute("rel")&&"shortcut icon"!==t[n].getAttribute("rel")||(e=t[n].getAttribute("href"));return e}},tl=163400,nl=(e,t,n)=>{if(Xf(e))if(n||t&&"object"==typeof t&&null!==t&&"error"in t){var r=n||(null==t?void 0:t.error);r&&4001===r.code?D.analytics.track("sdk_action_rejected",{action:e}):D.analytics.track("sdk_action_failed",{action:e})}else D.analytics.track("sdk_action_succeeded",{action:e})},rl=e=>{var t=e.provider,n=e.sdkInstance;if("state"in t)throw new Error("INVALID EXTENSION PROVIDER");return new Proxy(t,{get:(e,r)=>"request"===r?function(t){var r,i;return Ud(this,void 0,void 0,b().m(function o(){var a,s,c,u,d,h,f,v,m;return b().w(function(o){for(;;)switch(o.p=o.n){case 0:if(dc("[wrapExtensionProvider()] Overwriting request method",t),a=t.method,s=t.params,c=jc.includes(a.toLowerCase()),u=Dm(n),d=u.id,h=u.from,c&&(null===(r=n.analytics)||void 0===r||r.send({event:Fi.SDK_RPC_REQUEST,params:{method:a,from:h,id:d}})),Xf(a)&&D.analytics.track("sdk_action_requested",{action:a}),a!==Bc.METAMASK_BATCH||!Array.isArray(s)){o.n=1;break}return o.a(2,(e=>{var t=e.target,n=e.args,r=e.trackEvent,i=e.sdkInstance;return Ud(void 0,void 0,void 0,b().m(function e(){var o,a,s,c,u,d,h,f,p,v,m,g,y,w,E;return b().w(function(e){for(;;)switch(e.p=e.n){case 0:if("metamask_batch"===n.method){e.n=1;break}throw new Error("Invalid usage");case 1:s=[],c=null!==(o=null==n?void 0:n.params)&&void 0!==o?o:[],u=l(c),e.p=2,u.s();case 3:if((d=u.n()).done){e.n=6;break}return h=d.value,e.n=4,null==t?void 0:t.request({method:h.method,params:h.params});case 4:f=e.v,s.push(f);case 5:e.n=3;break;case 6:e.n=8;break;case 7:e.p=7,E=e.v,u.e(E);case 8:return e.p=8,u.f(),e.f(8);case 9:for(p=Dm(i),v=p.id,m=p.from,r&&(null===(a=i.analytics)||void 0===a||a.send({event:Fi.SDK_RPC_REQUEST_DONE,params:{method:n.method,from:m,id:v}})),g=0,y=s;g<y.length;g++)w=y[g],nl(n.method,w,null);return e.a(2,s)}},e,null,[[2,7,8,9]])}))})({target:e,args:t,trackEvent:c,sdkInstance:n}));case 1:if(a.toLowerCase()!==Bc.METAMASK_CONNECTSIGN.toLowerCase()||!Array.isArray(s)){o.n=2;break}return o.a(2,(e=>{var t=e.target,n=e.params;return Ud(void 0,void 0,void 0,b().m(function e(){var r,i,o,a;return b().w(function(e){for(;;)switch(e.p=e.n){case 0:return i=null,e.p=1,e.n=2,t.request({method:Bc.ETH_REQUESTACCOUNTS,params:[]});case 2:if((o=e.v).length){e.n=3;break}throw new Error("SDK state invalid -- undefined accounts");case 3:return e.n=4,t.request({method:Bc.PERSONAL_SIGN,params:[n[0],o[0]]});case 4:return r=e.v,e.a(2,r);case 5:throw e.p=5,a=e.v,i=a,a;case 6:return e.p=6,nl(Bc.PERSONAL_SIGN,r,i),e.f(6);case 7:return e.a(2)}},e,null,[[1,5,6,7]])}))})({target:e,params:s}));case 2:if(a.toLowerCase()!==Bc.METAMASK_CONNECTWITH.toLowerCase()||!Array.isArray(s)){o.n=3;break}return o.a(2,(e=>{var t=e.target,n=e.params;return Ud(void 0,void 0,void 0,b().m(function e(){var r,i,o,a,s,c,l,u,d,h,f;return b().w(function(e){for(;;)switch(e.p=e.n){case 0:return r=p(n,1),i=r[0],o=i.method,a=i.params,c=null,e.p=1,e.n=2,t.request({method:Bc.ETH_REQUESTACCOUNTS,params:[]});case 2:if(l=e.v,Array.isArray(l)&&l.length){e.n=3;break}throw new Error("SDK state invalid -- undefined accounts");case 3:if((null==o?void 0:o.toLowerCase())!==Bc.PERSONAL_SIGN.toLowerCase()){e.n=5;break}return e.n=4,t.request({method:o,params:[a[0],l[0]]});case 4:s=e.v,u=s,e.n=12;break;case 5:if((null==o?void 0:o.toLowerCase())!==Bc.ETH_SENDTRANSACTION.toLowerCase()){e.n=7;break}return e.n=6,t.request({method:o,params:[Object.assign(Object.assign({},a[0]),{from:l[0]})]});case 6:s=e.v,d=s,e.n=11;break;case 7:if(!Kc.includes(o.toLowerCase())){e.n=8;break}h=s=l,e.n=10;break;case 8:return e.n=9,t.request({method:o,params:a});case 9:s=e.v,h=s;case 10:d=h;case 11:u=d;case 12:return e.a(2,u);case 13:throw e.p=13,f=e.v,c=f,f;case 14:return e.p=14,nl(o,s,c),e.f(14);case 15:return e.a(2)}},e,null,[[1,13,14,15]])}))})({target:e,params:s}));case 3:return v=null,o.p=4,o.n=5,e.request(t);case 5:return f=o.v,o.a(2,f);case 6:throw o.p=6,m=o.v,v=m,m;case 7:return o.p=7,c&&(null===(i=n.analytics)||void 0===i||i.send({event:Fi.SDK_RPC_REQUEST_DONE,params:{method:a,from:h,id:d}})),nl(a,f,v),o.f(7);case 8:return o.a(2)}},o,null,[[4,6,7,8]])}))}:"getChainId"===r?function(){return t.chainId}:"getNetworkVersion"===r?function(){return t.networkVersion}:"getSelectedAddress"===r?function(){return t.selectedAddress}:"isConnected"===r?function(){return t._state.isConnected}:e[r]})},function(e){e.Announce="eip6963:announceProvider",e.Request="eip6963:requestProvider"}(il||(il={})),ol=e=>Ud(void 0,void 0,void 0,b().m(function t(){var n,r,i;return b().w(function(t){for(;;)switch(t.n){case 0:if(n=e.options,r=n.infuraAPIKey){t.n=1;break}return t.a(2);case 1:i={"0x1":`https://mainnet.infura.io/v3/${r}`,"0x5":`https://goerli.infura.io/v3/${r}`,"0xaa36a7":`https://sepolia.infura.io/v3/${r}`,"0xe708":`https://linea-mainnet.infura.io/v3/${r}`,"0xe704":`https://linea-goerli.infura.io/v3/${r}`,"0x89":`https://polygon-mainnet.infura.io/v3/${r}`,"0x13881":`https://polygon-mumbai.infura.io/v3/${r}`,"0x45":`https://optimism-mainnet.infura.io/v3/${r}`,"0x1a4":`https://optimism-goerli.infura.io/v3/${r}`,"0xa4b1":`https://arbitrum-mainnet.infura.io/v3/${r}`,"0x66eed":`https://arbitrum-goerli.infura.io/v3/${r}`,"0x2a15c308d":`https://palm-mainnet.infura.io/v3/${r}`,"0x2a15c3083":`https://palm-testnet.infura.io/v3/${r}`,"0xa86a":`https://avalanche-mainnet.infura.io/v3/${r}`,"0xa869":`https://avalanche-fuji.infura.io/v3/${r}`,"0x4e454152":`https://aurora-mainnet.infura.io/v3/${r}`,"0x4e454153":`https://aurora-testnet.infura.io/v3/${r}`,"0x534e5f4d41494e":`https://starknet-mainnet.infura.io/v3/${r}`,"0x534e5f474f45524c49":`https://starknet-goerli.infura.io/v3/${r}`,"0x534e5f474f45524c4932":`https://starknet-goerli2.infura.io/v3/${r}`,"0xa4ec":`https://celo-mainnet.infura.io/v3/${r}`,"0xaef3":`https://celo-alfajores.infura.io/v3/${r}`},e.options.readonlyRPCMap?e.options.readonlyRPCMap=Object.assign(Object.assign({},e.options.readonlyRPCMap),i):e.options.readonlyRPCMap=i;case 2:return t.a(2)}},t)})),al=e=>Ud(void 0,void 0,void 0,b().m(function t(){var n,r;return b().w(function(t){for(;;)switch(t.p=t.n){case 0:if(n=e.options,!(r=n.readonlyRPCMap)){t.n=3;break}t.p=1,dc("[MetaMaskSDK: setupReadOnlyRPCProviders()] Setting up Readonly RPC Providers",r),e.setReadOnlyRPCCalls(!0),t.n=3;break;case 2:throw t.p=2,t.v,new Error("Invalid Infura Settings");case 3:return t.a(2)}},t,null,[[1,2]])})),sl="INSTALLED",cl="NOT_INSTALLED",ll="REGISTERED",ul="REGISTERING",dl="RELOADING",hl={CHROME:"https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn",FIREFOX:"https://addons.mozilla.org/firefox/addon/ether-metamask/",DEFAULT:"https://metamask.io"},fl="REGISTRATION_IN_PROGRESS",pl="FORWARDER_ID",vl=function(){function e(t){var n=void 0===t?{}:t,r=n.forwarderOrigin,i=void 0===r?"https://fwd.metamask.io":r,o=n.forwarderMode,a=void 0===o?e.FORWARDER_MODE.INJECT:o;this.forwarderOrigin=i,this.forwarderMode=a,this.state=e.isMetaMaskInstalled()?sl:cl;var s=e._detectBrowser();this.downloadUrl=s?hl[s]:hl.DEFAULT,this._onMessage=this._onMessage.bind(this),this._onMessageFromForwarder=this._onMessageFromForwarder.bind(this),this._openForwarder=this._openForwarder.bind(this),this._openDownloadPage=this._openDownloadPage.bind(this),this.startOnboarding=this.startOnboarding.bind(this),this.stopOnboarding=this.stopOnboarding.bind(this),window.addEventListener("message",this._onMessage),a===e.FORWARDER_MODE.INJECT&&"true"===sessionStorage.getItem(fl)&&e._injectForwarder(this.forwarderOrigin)}return e.prototype._onMessage=function(e){if(e.origin===this.forwarderOrigin)return"metamask:reload"===e.data.type?this._onMessageFromForwarder(e):void 0},e.prototype._onMessageUnknownStateError=function(e){throw new Error("Unknown state: '"+e+"'")},e.prototype._onMessageFromForwarder=function(t){return function(e,t,n,r){return new(n||(n=Promise))(function(t,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function a(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){var r;e.done?t(e.value):(r=e.value,r instanceof n?r:new n(function(e){e(r)})).then(o,a)}s((r=r.apply(e,[])).next())})}(this,0,void 0,function(){return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,function(n){switch(n.label){case 0:switch(this.state){case dl:return[3,1];case cl:return[3,2];case sl:return[3,3];case ul:return[3,5];case ll:return[3,6]}return[3,7];case 1:return[3,8];case 2:return this.state=dl,location.reload(),[3,8];case 3:return this.state=ul,[4,e._register()];case 4:return n.sent(),this.state=ll,t.source.postMessage({type:"metamask:registrationCompleted"},t.origin),this.stopOnboarding(),[3,8];case 5:case 6:return[3,8];case 7:this._onMessageUnknownStateError(this.state),n.label=8;case 8:return[2]}})})},e.prototype.startOnboarding=function(){sessionStorage.setItem(fl,"true"),this._openDownloadPage(),this._openForwarder()},e.prototype.stopOnboarding=function(){"true"===sessionStorage.getItem(fl)&&(this.forwarderMode===e.FORWARDER_MODE.INJECT&&e._removeForwarder(),sessionStorage.setItem(fl,"false"))},e.prototype._openForwarder=function(){this.forwarderMode===e.FORWARDER_MODE.OPEN_TAB?window.open(this.forwarderOrigin,"_blank"):e._injectForwarder(this.forwarderOrigin)},e.prototype._openDownloadPage=function(){window.open(this.downloadUrl,"_blank")},e.isMetaMaskInstalled=function(){return Boolean(window.ethereum&&window.ethereum.isMetaMask)},e._register=function(){return window.ethereum.request({method:"wallet_registerOnboarding"})},e._injectForwarder=function(e){var t=document.body,n=document.createElement("iframe");n.setAttribute("height","0"),n.setAttribute("width","0"),n.setAttribute("style","display: none;"),n.setAttribute("src",e),n.setAttribute("id",pl),t.insertBefore(n,t.children[0])},e._removeForwarder=function(){var e;null===(e=document.getElementById(pl))||void 0===e||e.remove()},e._detectBrowser=function(){var e=kc.parse(window.navigator.userAgent);return"Firefox"===e.browser.name?"FIREFOX":["Chrome","Chromium"].includes(e.browser.name||"")?"CHROME":null},e.FORWARDER_MODE={INJECT:"INJECT",OPEN_TAB:"OPEN_TAB"},e}(),ml=class{constructor(e){var t=e.remote,n=e.preferDesktop,r=e.platformManager,i=e.debug,o=void 0!==i&&i;this.state={isInstalling:!1,hasInstalled:!1,resendRequest:null,preferDesktop:!1,platformManager:null,remote:null,debug:!1,connectWith:void 0},this.state.remote=t,this.state.preferDesktop=n,this.state.platformManager=r,this.state.debug=o}startDesktopOnboarding(){return function(){return Ud(this,void 0,void 0,b().m(function e(){return b().w(function(e){for(;;)switch(e.n){case 0:dc("[MetamaskInstaller: startDesktopOnboarding() starting desktop onboarding"),window.ethereum&&(window.ethereum=void 0),(new vl).startOnboarding();case 1:return e.a(2)}},e)}))}()}redirectToProperInstall(){return Ud(this,void 0,void 0,b().m(function e(){return b().w(function(e){for(;;)if(0===e.n)return e.a(2,function(e){var t,n;return Ud(this,void 0,void 0,b().m(function r(){var i,o,a;return b().w(function(r){for(;;)switch(r.p=r.n){case 0:if(i=e.state,o=null===(t=i.platformManager)||void 0===t?void 0:t.getPlatformType(),dc(`[MetamaskInstaller: redirectToProperInstall()] platform=${o}`),o!==no.MetaMaskMobileWebview){r.n=1;break}return r.a(2,!1);case 1:return i.isInstalling=!0,r.p=2,r.n=3,null===(n=i.remote)||void 0===n?void 0:n.startConnection({connectWith:i.connectWith});case 3:i.isInstalling=!1,i.hasInstalled=!0,r.n=5;break;case 4:throw r.p=4,a=r.v,i.isInstalling=!1,a;case 5:return r.a(2,!0)}},r,null,[[2,4]])}))}(this))},e,this)}))}checkInstallation(){return Ud(this,void 0,void 0,b().m(function e(){return b().w(function(e){for(;;)if(0===e.n)return e.a(2,function(e){var t;return Ud(this,void 0,void 0,b().m(function n(){var r,i,o;return b().w(function(n){for(;;)switch(n.n){case 0:if(r=e.state,i=null===(t=r.platformManager)||void 0===t?void 0:t.isMetaMaskInstalled(),dc(`[MetamaskInstaller: checkInstallation()] isInstalled=${i}`),o=!!i){n.n=2;break}return n.n=1,e.redirectToProperInstall();case 1:o=n.v;case 2:return n.a(2,o)}},n)}))}(this))},e,this)}))}start(e){var t=e.wait,n=void 0!==t&&t,r=e.connectWith;return Ud(this,void 0,void 0,b().m(function e(){return b().w(function(e){for(;;)switch(e.n){case 0:return this.state.connectWith=r,dc(`[MetaMaskInstaller: start()] wait=${n}`,r),e.n=1,$m(this,{wait:n});case 1:return e.a(2)}},e,this)}))}},gl=class{constructor(e){var t=e.debug,n=e.sdkVersion;this.containers={install:void 0,pending:void 0,select:void 0},this.defined={install:!1,pending:!1,select:!1},this.debug=null!=t&&t,this.sdkVersion=n}loadComponent(e){return Ud(this,void 0,void 0,b().m(function t(){return b().w(function(t){for(;;)switch(t.p=t.n){case 0:if(this.defined[e]){t.n=4;break}return this.defined[e]=!0,t.p=1,t.n=2,Promise.resolve().then(function(){return ju});case 2:t.v.defineCustomElements(),t.n=4;break;case 3:t.p=3,t.v;case 4:return t.a(2)}},t,this,[[1,3]])}))}renderInstallModal(e){var t;return Ud(this,void 0,void 0,b().m(function n(){var r;return b().w(function(n){for(;;)switch(n.n){case 0:return this.debug,this.containers.install=e.parentElement,n.n=1,this.loadComponent("install");case 1:(r=document.createElement("mm-install-modal")).link=e.link,r.preferDesktop=e.preferDesktop,r.sdkVersion=null!==(t=e.sdkVersion)&&void 0!==t?t:this.sdkVersion,r.addEventListener("close",t=>{var n=t.detail.shouldTerminate;return e.onClose(n)}),r.addEventListener("startDesktopOnboarding",e.metaMaskInstaller.startDesktopOnboarding),r.addEventListener("trackAnalytics",t=>{var n;return null===(n=e.onAnalyticsEvent)||void 0===n?void 0:n.call(e,t.detail)}),e.parentElement.appendChild(r);case 2:return n.a(2)}},n,this)}))}renderSelectModal(e){var t;return Ud(this,void 0,void 0,b().m(function n(){var r;return b().w(function(n){for(;;)switch(n.n){case 0:return this.containers.select=e.parentElement,n.n=1,this.loadComponent("select");case 1:(r=document.createElement("mm-select-modal")).link=e.link,r.sdkVersion=null!==(t=e.sdkVersion)&&void 0!==t?t:this.sdkVersion,r.preferDesktop=e.preferDesktop,r.addEventListener("close",t=>{var n=t.detail.shouldTerminate;return e.onClose(n)}),r.addEventListener("connectWithExtension",e.connectWithExtension),e.parentElement.appendChild(r),setTimeout(()=>this.updateQRCode(e.link),100);case 2:return n.a(2)}},n,this)}))}renderPendingModal(e){var t;return Ud(this,void 0,void 0,b().m(function n(){var r;return b().w(function(n){for(;;)switch(n.n){case 0:return this.containers.pending=e.parentElement,n.n=1,this.loadComponent("pending");case 1:(r=document.createElement("mm-pending-modal")).sdkVersion=null!==(t=e.sdkVersion)&&void 0!==t?t:this.sdkVersion,r.displayOTP=e.displayOTP,r.addEventListener("close",e.onClose),r.addEventListener("updateOTPValue",t=>{var n=t.detail.otpValue;return e.updateOTPValue(n)}),e.onDisconnect&&r.addEventListener("disconnect",e.onDisconnect),e.parentElement.appendChild(r);case 2:return n.a(2)}},n,this)}))}updateOTPValue(e){var t=()=>{var t,n=null===(t=this.containers.pending)||void 0===t?void 0:t.querySelector("mm-pending-modal");return!!n&&(n.otpCode=e,!0)};setTimeout(()=>{t()},800)}updateQRCode(e){var t,n,r=null===(t=this.containers.install)||void 0===t?void 0:t.querySelector("mm-install-modal");if(r)r.link=e;else{var i=null===(n=this.containers.select)||void 0===n?void 0:n.querySelector("mm-select-modal");i&&(i.link=e)}}unmount(){Object.entries(this.containers).forEach(e=>{var t,n=p(e,2),r=n[0],i=n[1];null===(t=null==i?void 0:i.parentNode)||void 0===t||t.removeChild(i),this.containers[r]=void 0})}},yl=e=>{var t=e.link,n=e.debug,r=e.installer,i=e.terminate,o=e.connectWithExtension,a=e.preferDesktop,s=e.onAnalyticsEvent,c=null,l=null;dc("[UI: InstallModal-web: sdkWebInstallModal()] ################## Installing Modal #################"),dc(`[UI: InstallModal-web: sdkWebInstallModal()] link=${t}`),dc(`[UI: InstallModal-web: sdkWebInstallModal()] npx uri-scheme open "${t}" --ios`),dc(`[UI: InstallModal-web: sdkWebInstallModal()] npx uri-scheme open "${t}" --android`),dc(`[UI: InstallModal-web: sdkWebInstallModal()] adb shell am start -a android.intent.action.VIEW -d "${t}"`);var u=e=>{var t;dc("[UI: InstallModal-web: sdkWebInstallModal()] installModal-web unmounting install modal -- shouldTerminate:",e,l),null!=l&&l.parentNode&&(null===(t=l.parentNode)||void 0===t||t.removeChild(l)),l=null,c=null,!0===e&&(null==i||i())};return{mount:e=>{if(dc("[UI: InstallModal-web: sdkWebInstallModal()] installModal-web mounting install modal",l),l)return l.style.display="block",void(null==c||c.updateQRCode(e));c=new gl({debug:n,sdkVersion:Rc.version}),l=document.createElement("div"),document.body.appendChild(l),window.extension?c.renderSelectModal({parentElement:l,connectWithExtension:()=>{u(),null==o||o()},onClose:u,link:t,preferDesktop:null!=a&&a}).catch(e=>{}):c.renderInstallModal({parentElement:l,preferDesktop:null!=a&&a,link:t,metaMaskInstaller:r,onClose:u,onAnalyticsEvent:s}).catch(e=>{})},unmount:u}},bl=e=>{var t=e.onDisconnect,n=e.debug,r=null,i=null,o=()=>{dc("[UI: pendingModal-web: sdkWebPendingModal()] pendingModal-web unmount",r),null!=r&&r.parentNode&&r.parentNode.removeChild(r),r=null,i=null},a=e=>{dc("[UI: pendingModal-web: sdkWebPendingModal()] pendingModal-web updateOTPValue",e),i&&i.updateOTPValue(e)},s=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{displayOTP:!0}).displayOTP;dc("[UI: pendingModal-web: sdkWebPendingModal()] pendingModal-web mount",r),r?r.style.display="block":(i=new gl({debug:n,sdkVersion:Rc.version}),r=document.createElement("div"),document.body.appendChild(r),i.renderPendingModal({parentElement:r,onClose:o,onDisconnect:t,updateOTPValue:a,displayOTP:e}).catch(e=>{}))};return s(),{mount:s,unmount:o,updateOTPValue:a}},wl=class{constructor(e){var t,n,r;this.state={connector:void 0,qrcodeLink:void 0,analytics:void 0,developerMode:!1,authorized:!1,reconnection:!1,preferDesktop:!1,deeplinkProtocol:!1,listeners:[],communicationLayerPreference:void 0,platformManager:void 0,pendingModal:void 0,installModal:void 0,otpAnswer:void 0},this.options=e;var i=!0===(null===(t=e.logging)||void 0===t?void 0:t.developerMode)||!0===(null===(n=e.logging)||void 0===n?void 0:n.sdk);this.state.developerMode=i,this.state.analytics=e.analytics,this.state.preferDesktop=null!==(r=e.preferDesktop)&&void 0!==r&&r,this.state.useDeeplink=e.sdk.options.useDeeplink,this.state.communicationLayerPreference=e.communicationLayerPreference,this.state.platformManager=e.platformManager,e.modals.install||(e.modals.install=yl),e.modals.otp||(e.modals.otp=bl)}startConnection(e){return Ud(this,void 0,void 0,b().m(function t(){return b().w(function(t){for(;;)if(0===t.n)return t.a(2,Fm(this.state,this.options,e))},t,this)}))}initRemoteCommunication(e){var t,n,r,i=e.sdkInstance;return Ud(this,void 0,void 0,b().m(function e(){var o,a;return b().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,null===(n=null===(t=i.options.storage)||void 0===t?void 0:t.storageManager)||void 0===n?void 0:n.getPersistedChannelConfig();case 1:return o=e.v,this.options.ecies||(a={privateKey:null==o?void 0:o.localKey},this.options.ecies=a),jm(this.state,this.options),e.n=2,null===(r=this.getConnector())||void 0===r?void 0:r.initFromDappStorage();case 2:Hm(this.state,this.options);case 3:return e.a(2)}},e,this)}))}showActiveModal(){return function(e){var t,n,r,i;e.authorized?dc("[RemoteConnection: showActiveModal()] already authorized"):e.pendingModal?null===(n=(t=e.pendingModal).mount)||void 0===n||n.call(t):e.installModal&&(null===(i=(r=e.installModal).mount)||void 0===i||i.call(r,e.qrcodeLink||""))}(this.state)}closeModal(){var e,t,n,r;null===(t=null===(e=this.state.pendingModal)||void 0===e?void 0:e.unmount)||void 0===t||t.call(e),null===(r=null===(n=this.state.installModal)||void 0===n?void 0:n.unmount)||void 0===r||r.call(n,!1)}getUniversalLink(){if(!this.state.qrcodeLink)throw new Error("connection not started. run startConnection() first.");return this.state.qrcodeLink}getChannelConfig(){var e;return null===(e=this.state.connector)||void 0===e?void 0:e.getChannelConfig()}getKeyInfo(){var e;return null===(e=this.state.connector)||void 0===e?void 0:e.getKeyInfo()}getConnector(){if(!this.state.connector)throw new Error("invalid remote connector");return this.state.connector}getPlatformManager(){if(!this.state.platformManager)throw new Error("PlatformManager not available");return this.state.platformManager}isConnected(){var e;return(null===(e=this.state.connector)||void 0===e?void 0:e.isReady())||!1}isAuthorized(){var e;return(null===(e=this.state.connector)||void 0===e?void 0:e.isAuthorized())||!1}isPaused(){var e;return null===(e=this.state.connector)||void 0===e?void 0:e.isPaused()}disconnect(e){var t,n,r,i;dc("[RemoteConnection: disconnect()]",e),null!=e&&e.terminate&&(Ac.getProvider().handleDisconnect({terminate:!0}),null===(n=null===(t=this.state.pendingModal)||void 0===t?void 0:t.unmount)||void 0===n||n.call(t),this.state.otpAnswer=void 0),null===(r=this.state.connector)||void 0===r||r.disconnect(e),i=this.state,dc("[RemoteConnection: cleanupConnector()] cleaning up connector"),i.connector&&(Km(i),i.connector.disconnect({terminate:!0}).catch(e=>{dc("[RemoteConnection: cleanupConnector()] error disconnecting connector",e)}))}},i("default",i("MetaMaskSDK",class extends N.default{constructor(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{storage:{enabled:!0},injectProvider:!0,forceInjectProvider:!1,enableAnalytics:!0,shouldShimWeb3:!0,useDeeplink:!0,extensionOnly:!0,headless:!1,dappMetadata:{name:"",url:"",iconUrl:""},_source:Pc,i18nOptions:{enabled:!1}};super(),this.extensionActive=!1,this._initialized=!1,this.sdkInitPromise=void 0,this.debug=!1,this.readonlyRPCCalls=!1,this.availableLanguages=["en"],this.ANON_ID_STORAGE_KEY="mm-sdk-anon-id",B.default.disable();var i=!0===(null===(e=r.logging)||void 0===e?void 0:e.developerMode);if((!(null===(t=r.logging)||void 0===t)&&t.sdk||i)&&B.default.enable("MM_SDK"),dc("[MetaMaskSDK: constructor()]: begin."),this.setMaxListeners(50),!(null===(n=r.dappMetadata)||void 0===n?void 0:n.url)){if("undefined"==typeof window||"undefined"==typeof document)throw new Error("You must provide dAppMetadata url");r.dappMetadata=Object.assign(Object.assign({},r.dappMetadata),{url:`${window.location.protocol}//${window.location.host}`})}this.options=r,this.options._source||(r._source=Pc),this.init().then(()=>{dc("[MetaMaskSDK: constructor()]: initialized successfully."),"undefined"!=typeof window&&(window.mmsdk=this)}).catch(e=>{})}init(){return Ud(this,void 0,void 0,b().m(function e(){return b().w(function(e){for(;;)if(0===e.n)return e.a(2,function(e){var t;return Ud(this,void 0,void 0,b().m(function n(){return b().w(function(n){for(;;)switch(n.p=n.n){case 0:if("undefined"==typeof window||!(null===(t=window.mmsdk)||void 0===t?void 0:t.isInitialized())){n.n=1;break}return n.a(2,(dc("[MetaMaskSDK: initializeMetaMaskSDK()] already initialized"),Promise.resolve(window.mmsdk)));case 1:if(!e._initialized){n.n=2;break}return n.a(2,(dc("[MetaMaskSDK: initializeMetaMaskSDK()] already initialized"),e.sdkInitPromise));case 2:if(!e.sdkInitPromise){n.n=3;break}return n.a(2,(dc("[MetaMaskSDK: initializeMetaMaskSDK()] already initializing"),e.sdkInitPromise));case 3:return n.p=3,e.sdkInitPromise=zm(e),n.n=4,e.sdkInitPromise;case 4:n.n=6;break;case 5:throw n.p=5,n.v;case 6:return n.a(2,e.sdkInitPromise)}},n,null,[[3,5]])}))}(this))},e,this)}))}isExtensionActive(){return this.extensionActive}checkExtensionAvailability(){var e;return"undefined"!=typeof window&&Boolean(null===(e=window.ethereum)||void 0===e?void 0:e.isMetaMask)}connect(){return Ud(this,void 0,void 0,b().m(function e(){return b().w(function(e){for(;;)if(0===e.n)return e.a(2,function(e){return Ud(this,void 0,void 0,b().m(function t(){var n;return b().w(function(t){for(;;)switch(t.n){case 0:if(e._initialized){t.n=1;break}return dc("[MetaMaskSDK: connect()] provider not ready -- wait for init()"),t.n=1,e.init();case 1:if(dc(`[MetaMaskSDK: connect()] isExtensionActive=${e.isExtensionActive()} activeProvider`,e.activeProvider),e.activeProvider){t.n=2;break}throw new Error("SDK state invalid -- undefined provider");case 2:return n=e.activeProvider.getSelectedAddress(),t.a(2,n?[n]:e.activeProvider.request({method:Bc.ETH_REQUESTACCOUNTS,params:[]}))}},t)}))}(this))},e,this)}))}connectAndSign(e){var t=e.msg;return Ud(this,void 0,void 0,b().m(function e(){return b().w(function(e){for(;;)if(0===e.n)return e.a(2,Rm({instance:this,msg:t}))},e,this)}))}connectWith(e){return Ud(this,void 0,void 0,b().m(function t(){return b().w(function(t){for(;;)if(0===t.n)return t.a(2,function(e){var t=e.instance,n=e.rpc;return Ud(this,void 0,void 0,b().m(function e(){return b().w(function(e){for(;;)switch(e.n){case 0:if(t._initialized){e.n=1;break}return dc("[MetaMaskSDK: connectWith()] provider not ready -- wait for init()"),e.n=1,t.init();case 1:if(dc(`[MetaMaskSDK: connectWith()] method: ${n.method} rpc=${n}`),t.activeProvider){e.n=2;break}throw new Error("SDK state invalid -- undefined provider");case 2:return e.a(2,t.activeProvider.request({method:Bc.METAMASK_CONNECTWITH,params:[n]}))}},e)}))}({instance:this,rpc:e}))},t,this)}))}resume(){return function(e){var t,n,r;return Ud(this,void 0,void 0,b().m(function i(){return b().w(function(i){for(;;)switch(i.n){case 0:if(null===(n=null===(t=e.remoteConnection)||void 0===t?void 0:t.getConnector())||void 0===n?void 0:n.isReady()){i.n=1;break}return i.a(2,(dc("[MetaMaskSDK: resume()] channel is not ready -- starting connection"),void(null===(r=e.remoteConnection)||void 0===r||r.startConnection())));case 1:dc("[MetaMaskSDK: resume()] channel is ready");case 2:return i.a(2)}},i)}))}(this)}disconnect(){return this.terminate()}isAuthorized(){var e;null===(e=this.remoteConnection)||void 0===e||e.isAuthorized()}terminate(){return function(e){var t,n,r;return Ud(this,void 0,void 0,b().m(function i(){var o;return b().w(function(i){for(;;)switch(i.p=i.n){case 0:if(null===(t=e.platformManager)||void 0===t?void 0:t.isMetaMaskMobileWebView()){i.n=6;break}if(Gc&&(window.localStorage.removeItem(Hc),window.localStorage.removeItem(zc),window.localStorage.removeItem(Fc)),!e.extensionActive){i.n=5;break}return i.p=1,i.n=2,null===(n=e.activeProvider)||void 0===n?void 0:n.request({method:Bc.WALLET_REVOKEPERMISSIONS,params:[{eth_accounts:{}}]});case 2:i.n=4;break;case 3:i.p=3,o=i.v,dc("[MetaMaskSDK: terminate()] error revoking permissions",o);case 4:return e.options.extensionOnly?(e.emit(Cc.ProviderUpdate,Wc.TERMINATE),dc("[MetaMaskSDK: terminate()] extensionOnly --- prevent switching providers")):(e.activeProvider=e.sdkProvider,window.ethereum=e.activeProvider,e.extensionActive=!1,e.emit(Cc.ProviderUpdate,Wc.TERMINATE)),i.a(2);case 5:e.emit(Cc.ProviderUpdate,Wc.TERMINATE),dc(`[MetaMaskSDK: terminate()] remoteConnection=${e.remoteConnection}`),null===(r=e.remoteConnection)||void 0===r||r.disconnect({terminate:!0,sendMessage:!0});case 6:return i.a(2)}},i,null,[[1,3]])}))}(this)}isInitialized(){return this._initialized}setReadOnlyRPCCalls(e){this.readonlyRPCCalls=e}hasReadOnlyRPCCalls(){return this.readonlyRPCCalls}getProvider(){if(this.activeProvider)return this.activeProvider}getMobileProvider(){if(!this.sdkProvider)throw new Error("SDK state invalid -- undefined mobile provider");return this.sdkProvider}getUniversalLink(){var e,t=null===(e=this.remoteConnection)||void 0===e?void 0:e.getUniversalLink();if(!t)throw new Error("No Universal Link available, please call eth_requestAccounts first.");return t}getChannelId(){var e,t;return null===(t=null===(e=this.remoteConnection)||void 0===e?void 0:e.getChannelConfig())||void 0===t?void 0:t.channelId}getRPCHistory(){var e,t;return null===(t=null===(e=this.remoteConnection)||void 0===e?void 0:e.getConnector())||void 0===t?void 0:t.getRPCMethodTracker()}getVersion(){return Rc.version}getDappId(){var e,t,n,r;return"undefined"==typeof window||void 0===window.location?null!==(r=null!==(t=null===(e=this.options.dappMetadata)||void 0===e?void 0:e.name)&&void 0!==t?t:null===(n=this.options.dappMetadata)||void 0===n?void 0:n.url)&&void 0!==r?r:"N/A":window.location.hostname}getAnonId(){var e,t;return Ud(this,void 0,void 0,b().m(function n(){var r,i,o;return b().w(function(n){for(;;)switch(n.n){case 0:if(!this._anonId){n.n=1;break}return n.a(2,this._anonId);case 1:if(!(null===(e=this.platformManager)||void 0===e?void 0:e.isBrowser())){n.n=2;break}i=this.getBrowserAnonId(),n.n=6;break;case 2:if(!(null===(t=this.platformManager)||void 0===t?void 0:t.isReactNative())){n.n=4;break}return n.n=3,this.getReactNativeAnonId();case 3:o=n.v,n.n=5;break;case 4:o=L();case 5:i=o;case 6:return r=i,this._anonId=r,n.a(2,r)}},n,this)}))}getBrowserAnonId(){var e=this.ANON_ID_STORAGE_KEY;try{var t=localStorage.getItem(e);if(t)return t;var n=L();return localStorage.setItem(e,n),n}catch(r){return L()}}getReactNativeAnonId(){return Ud(this,void 0,void 0,b().m(function e(){var t,n,r,i;return b().w(function(e){for(;;)switch(e.p=e.n){case 0:return t=this.ANON_ID_STORAGE_KEY,e.p=1,n=d("@react-native-async-storage/async-storage").default,e.n=2,n.getItem(t);case 2:if(!(r=e.v)){e.n=3;break}return e.a(2,r);case 3:return i=L(),e.n=4,n.setItem(t,i);case 4:return e.a(2,i);case 5:return e.p=5,e.v,e.a(2,L())}},e,this,[[1,5]])}))}getWalletStatus(){var e,t;return null===(t=null===(e=this.remoteConnection)||void 0===e?void 0:e.getConnector())||void 0===t?void 0:t.getConnectionStatus()}_getChannelConfig(){var e;return null===(e=this.remoteConnection)||void 0===e?void 0:e.getChannelConfig()}_ping(){var e,t;null===(t=null===(e=this.remoteConnection)||void 0===e?void 0:e.getConnector())||void 0===t||t.ping()}_keyCheck(){var e,t;null===(t=null===(e=this.remoteConnection)||void 0===e?void 0:e.getConnector())||void 0===t||t.keyCheck()}_getServiceStatus(){var e,t;return null===(t=null===(e=this.remoteConnection)||void 0===e?void 0:e.getConnector())||void 0===t?void 0:t.getServiceStatus()}_getRemoteConnection(){return this.remoteConnection}_getDappMetadata(){return this.dappMetadata}_getKeyInfo(){var e;return null===(e=this.remoteConnection)||void 0===e?void 0:e.getKeyInfo()}_resetKeys(){var e,t;null===(t=null===(e=this.remoteConnection)||void 0===e?void 0:e.getConnector())||void 0===t||t.resetKeys()}_getConnection(){return this.remoteConnection}emit(e,t){return super.emit(e,t)}on(e,t){return super.on(e,t)}})),El=Object.freeze({__proto__:null,StorageManagerWeb:class{constructor(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{enabled:!1}).enabled;this.enabled=!1,this.enabled=e}persistChannelConfig(e){return Ud(this,void 0,void 0,b().m(function t(){var n;return b().w(function(t){for(;;)switch(t.n){case 0:n=JSON.stringify(e),dc(`[StorageManagerWeb: persistChannelConfig()] enabled=${this.enabled}`,e),localStorage.setItem(Uc,n);case 1:return t.a(2)}},t,this)}))}getPersistedChannelConfig(){return Ud(this,void 0,void 0,b().m(function e(){var t,n;return b().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,dc(`[StorageManagerWeb: getPersistedChannelConfig()] enabled=${this.enabled}`),t=localStorage.getItem(Uc),dc("[StorageManagerWeb: getPersistedChannelConfig()]",t),t){e.n=1;break}return e.a(2);case 1:return n=JSON.parse(t),e.a(2,(dc("[StorageManagerWeb: getPersistedChannelConfig()] channelConfig",n),n));case 2:return e.p=2,e.v,e.a(2)}},e,this,[[0,2]])}))}persistAccounts(e){return Ud(this,void 0,void 0,b().m(function t(){var n;return b().w(function(t){for(;;)switch(t.n){case 0:dc(`[StorageManagerWeb: persistAccounts()] enabled=${this.enabled}`,e),n=JSON.stringify(e),localStorage.setItem(Fc,n);case 1:return t.a(2)}},t,this)}))}getCachedAccounts(){return Ud(this,void 0,void 0,b().m(function e(){var t;return b().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,t=localStorage.getItem(Fc),e.a(2,t?JSON.parse(t):[]);case 1:throw e.p=1,e.v;case 2:return e.a(2)}},e,null,[[0,1]])}))}persistChainId(e){return Ud(this,void 0,void 0,b().m(function t(){return b().w(function(t){for(;;)switch(t.n){case 0:dc(`[StorageManagerWeb: persistChainId()] enabled=${this.enabled}`,e),localStorage.setItem(zc,e);case 1:return t.a(2)}},t,this)}))}getCachedChainId(){return Ud(this,void 0,void 0,b().m(function e(){var t;return b().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,t=localStorage.getItem(zc),e.a(2,null!=t?t:void 0);case 1:throw e.p=1,e.v;case 2:return e.a(2)}},e,null,[[0,1]])}))}terminate(){return Ud(this,void 0,void 0,b().m(function e(){return b().w(function(e){for(;;)switch(e.n){case 0:dc(`[StorageManagerWeb: terminate()] enabled=${this.enabled}`),localStorage.removeItem(Uc);case 1:return e.a(2)}},e,this)}))}}}),_l=Object.defineProperty,Sl=new WeakMap,kl=e=>Sl.get(e),Cl=(e,t)=>Sl.set(t.$lazyInstance$=e,t),Al=(e,t)=>t in e,xl=(e,t)=>(0,console.error)(e,t),Tl=new Map,Ml=new Map,Ol="slot-fb{display:contents}slot-fb[hidden]{display:none}",Rl="undefined"!=typeof window?window:{},Pl=Rl.document||{head:{}},Il={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,n,r)=>e.addEventListener(t,n,r),rel:(e,t,n,r)=>e.removeEventListener(t,n,r),ce:(e,t)=>new CustomEvent(e,t)},Ll=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch(ko){}return!1})(),Nl=!1,Dl=[],$l=(e,t)=>t=>{e.push(t),Nl||(Nl=!0,4&Il.$flags$?Ul(Kl):Il.raf(Kl))},jl=e=>{for(var t=0;t<e.length;t++)try{e[t](performance.now())}catch(n){xl(n)}e.length=0},Kl=()=>{jl(Dl),jl(Bl),(Nl=Dl.length>0)&&Il.raf(Kl)},Ul=e=>Promise.resolve(void 0).then(e),Hl=$l(Bl=[]),Fl={},zl=e=>"object"==(e=typeof e)||"function"===e,((e,t)=>{for(var n in t)_l(e,n,{get:t[n],enumerable:!0})})({},{err:()=>Vl,map:()=>Vm,ok:()=>ql,unwrap:()=>Gl,unwrapErr:()=>Yl}),ql=e=>({isOk:!0,isErr:!1,value:e}),Vl=e=>({isOk:!1,isErr:!0,value:e}),Gl=e=>{if(e.isOk)return e.value;throw e.value},Yl=e=>{if(e.isErr)return e.value;throw e.value},Zl=function(e,t){for(var n=null,r=!1,i=!1,o=[],a=t=>{for(var s=0;s<t.length;s++)n=t[s],Array.isArray(n)?a(n):null!=n&&"boolean"!=typeof n&&((r="function"!=typeof e&&!zl(n))&&(n=String(n)),r&&i?o[o.length-1].$text$+=n:o.push(r?Jl(null,n):n),i=r)},s=arguments.length,c=new Array(s>2?s-2:0),l=2;l<s;l++)c[l-2]=arguments[l];if(a(c),t){var u=t.className||t.class;u&&(t.class="object"!=typeof u?u:Object.keys(u).filter(e=>u[e]).join(" "))}if("function"==typeof e)return e(null===t?{}:t,o,Ql);var d=Jl(e,null);return d.$attrs$=t,o.length>0&&(d.$children$=o),d},Jl=(e,t)=>({$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null,$attrs$:null}),Xl={},Ql={forEach:(e,t)=>e.map(eu).forEach(t),map:(e,t)=>e.map(eu).map(t).map(tu)},eu=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),tu=e=>{if("function"==typeof e.vtag){var t=h({},e.vattrs);return e.vkey&&(t.key=e.vkey),e.vname&&(t.name=e.vname),Zl(e.vtag,t,...e.vchildren||[])}var n=Jl(e.vtag,e.vtext);return n.$attrs$=e.vattrs,n.$children$=e.vchildren,n.$key$=e.vkey,n.$name$=e.vname,n},nu=e=>kl(e).$hostElement$,ru=(e,t,n)=>{var r=nu(e);return{emit:e=>iu(r,t,{bubbles:!!(4&n),composed:!!(2&n),cancelable:!!(1&n),detail:e})}},iu=(e,t,n)=>{var r=Il.ce(t,n);return e.dispatchEvent(r),r},ou=new WeakMap,au=e=>{var t=e.$cmpMeta$,n=e.$hostElement$,r=t.$flags$,i=(t.$tagName$,()=>{}),o=((e,t)=>{var n,r=su(t),i=Ml.get(r);if(e=11===e.nodeType?e:Pl,i)if("string"==typeof i){e=e.head||e;var o,a=ou.get(e);if(a||ou.set(e,a=new Set),!a.has(r)){(o=Pl.createElement("style")).innerHTML=i;var s=null!=(n=Il.$nonce$)?n:qm(Pl);if(null!=s&&o.setAttribute("nonce",s),!(1&t.$flags$))if("HEAD"===e.nodeName){var c=e.querySelectorAll("link[rel=preconnect]"),l=c.length>0?c[c.length-1].nextSibling:e.querySelector("style");e.insertBefore(o,l)}else if("host"in e)if(Ll){var u=new CSSStyleSheet;u.replaceSync(i),e.adoptedStyleSheets=[u,...e.adoptedStyleSheets]}else{var d=e.querySelector("style");d?d.innerHTML=i+d.innerHTML:e.prepend(o)}else e.append(o);1&t.$flags$&&"HEAD"!==e.nodeName&&e.insertBefore(o,null),4&t.$flags$&&(o.innerHTML+=Ol),a&&a.add(r)}}else e.adoptedStyleSheets.includes(i)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,i]);return r})(n.shadowRoot?n.shadowRoot:n.getRootNode(),t);10&r&&2&r&&(n["s-sc"]=o,n.classList.add(o+"-h")),i()},su=(e,t)=>"sc-"+e.$tagName$,cu=(e,t,n,r,i,o)=>{if(n!==r){var a=Al(e,t),s=t.toLowerCase();if("class"===t){var c=e.classList,l=uu(n),u=uu(r);c.remove(...l.filter(e=>e&&!u.includes(e))),c.add(...u.filter(e=>e&&!l.includes(e)))}else if("style"===t){for(var d in n)r&&null!=r[d]||(d.includes("-")?e.style.removeProperty(d):e.style[d]="");for(var h in r)n&&r[h]===n[h]||(h.includes("-")?e.style.setProperty(h,r[h]):e.style[h]=r[h])}else if(a||"o"!==t[0]||"n"!==t[1]){var f=zl(r);if((a||f&&null!==r)&&!i)try{if(e.tagName.includes("-"))e[t]=r;else{var p=null==r?"":r;"list"===t?a=!1:null!=n&&e[t]==p||("function"==typeof e.__lookupSetter__(t)?e[t]=p:e.setAttribute(t,p))}}catch(m){}null==r||!1===r?!1===r&&""!==e.getAttribute(t)||e.removeAttribute(t):(!a||4&o||i)&&!f&&(r=!0===r?"":r,e.setAttribute(t,r))}else if(t="-"===t[2]?t.slice(3):Al(Rl,s)?s.slice(2):s[2]+t.slice(3),n||r){var v=t.endsWith(du);t=t.replace(hu,""),n&&Il.rel(e,t,n,v),r&&Il.ael(e,t,r,v)}}},lu=/\s/,uu=e=>e?e.split(lu):[],du="Capture",hu=new RegExp(du+"$"),fu=(e,t,n)=>{var r,i=11===t.$elm$.nodeType&&t.$elm$.host?t.$elm$.host:t.$elm$,o=e&&e.$attrs$||Fl,a=t.$attrs$||Fl,s=l(Wm(Object.keys(o)));try{for(s.s();!(r=s.n()).done;){var c=r.value;c in a||cu(i,c,o[c],void 0,n,t.$flags$)}}catch(fs){s.e(fs)}finally{s.f()}var u,d=l(Wm(Object.keys(a)));try{for(d.s();!(u=d.n()).done;){var h=u.value;cu(i,h,o[h],a[h],n,t.$flags$)}}catch(fs){d.e(fs)}finally{d.f()}},pu=!1,vu=(e,t,n,r)=>{var i,o,a=t.$children$[n],s=0;if(null!==a.$text$)i=a.$elm$=Pl.createTextNode(a.$text$);else{if(pu||(pu="svg"===a.$tag$),i=a.$elm$=Pl.createElementNS(pu?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",a.$tag$),pu&&"foreignObject"===a.$tag$&&(pu=!1),fu(null,a,pu),i.getRootNode().querySelector("body"),a.$children$)for(s=0;s<a.$children$.length;++s)(o=vu(e,a,s))&&i.appendChild(o);"svg"===a.$tag$?pu=!1:"foreignObject"===i.tagName&&(pu=!0)}return i["s-hn"]=Wl,i},mu=(e,t,n,r,i,o)=>{var a,s=e;for(s.shadowRoot&&s.tagName===Wl&&(s=s.shadowRoot);i<=o;++i)r[i]&&((a=vu(null,n,i))&&(r[i].$elm$=a,wu(s,a,t)))},gu=(e,t,n)=>{for(var r=t;r<=n;++r){var i=e[r];if(i){var o=i.$elm$;o&&o.remove()}}},yu=function(e,t){return e.$tag$===t.$tag$},bu=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.$elm$=e.$elm$,i=e.$children$,o=t.$children$,a=t.$tag$,s=t.$text$;null===s?(fu(e,t,pu="svg"===a||"foreignObject"!==a&&pu),null!==i&&null!==o?function(e,t,n,r){for(var i,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=0,s=0,c=t.length-1,l=t[0],u=t[c],d=r.length-1,h=r[0],f=r[d];a<=c&&s<=d;)null==l?l=t[++a]:null==u?u=t[--c]:null==h?h=r[++s]:null==f?f=r[--d]:yu(l,h,o)?(bu(l,h,o),l=t[++a],h=r[++s]):yu(u,f,o)?(bu(u,f,o),u=t[--c],f=r[--d]):yu(l,f,o)?(bu(l,f,o),wu(e,l.$elm$,u.$elm$.nextSibling),l=t[++a],f=r[--d]):yu(u,h,o)?(bu(u,h,o),wu(e,u.$elm$,l.$elm$),u=t[--c],h=r[++s]):(i=vu(t&&t[s],n,s),h=r[++s],i&&wu(l.$elm$.parentNode,i,l.$elm$));a>c?mu(e,null==r[d+1]?null:r[d+1].$elm$,n,r,s,d):s>d&&gu(t,a,c)}(r,i,t,o,n):null!==o?(null!==e.$text$&&(r.textContent=""),mu(r,null,t,o,0,o.length-1)):!n&&null!==i&&gu(i,0,i.length-1),pu&&"svg"===a&&(pu=!1)):e.$text$!==s&&(r.data=s)},wu=(e,t,n)=>null==e?void 0:e.insertBefore(t,n),Eu=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e.$hostElement$,o=e.$cmpMeta$,a=e.$vnode$||Jl(null,null),s=(n=t)&&n.$tag$===Xl?t:Zl(null,null,t);if(Wl=i.tagName,r&&s.$attrs$)for(var c=0,l=Object.keys(s.$attrs$);c<l.length;c++){var u=l[c];i.hasAttribute(u)&&!["key","ref","style","class"].includes(u)&&(s.$attrs$[u]=i[u])}s.$tag$=null,s.$flags$|=4,e.$vnode$=s,s.$elm$=a.$elm$=i.shadowRoot||i,i["s-sc"],o.$flags$,bu(a,s,r)},_u=(e,t)=>{t&&!e.$onRenderResolve$&&t["s-p"]&&t["s-p"].push(new Promise(t=>e.$onRenderResolve$=t))},Su=(e,t)=>{if(e.$flags$|=16,!(4&e.$flags$))return _u(e,e.$ancestorComponent$),Hl(()=>ku(e,t));e.$flags$|=512},ku=(e,t)=>{var n=e.$hostElement$,r=(e.$cmpMeta$.$tagName$,()=>{}),i=e.$lazyInstance$;if(!i)throw new Error(`Can't render component <${n.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);return r(),Cu(void 0,()=>xu(e,i,t))},Cu=(e,t)=>Au(e)?e.then(t).catch(e=>{t()}):t(),Au=e=>e instanceof Promise||e&&e.then&&"function"==typeof e.then,xu=function(){var e=o(b().m(function e(t,n,r){var i,o,a,s,c,l,u;return b().w(function(e){for(;;)switch(e.n){case 0:o=t.$hostElement$,t.$cmpMeta$.$tagName$,a=()=>{},s=o["s-rc"],r&&au(t),t.$cmpMeta$.$tagName$,c=()=>{},Tu(t,n,o,r),s&&(s.map(e=>e()),o["s-rc"]=void 0),c(),a(),l=null!=(i=o["s-p"])?i:[],u=()=>Mu(t),0===l.length?u():(Promise.all(l).then(u),t.$flags$|=4,l.length=0);case 1:return e.a(2)}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),Tu=(e,t,n,r)=>{try{t=t.render(),e.$flags$&=-17,e.$flags$|=2,Eu(e,t,r)}catch(i){xl(i,e.$hostElement$)}return null},Mu=e=>{e.$cmpMeta$.$tagName$;var t=e.$hostElement$,n=e.$lazyInstance$,r=e.$ancestorComponent$;64&e.$flags$||(e.$flags$|=64,Pu(t),Ru(n,"componentDidLoad"),e.$onReadyResolve$(t),r||Ou()),e.$onRenderResolve$&&(e.$onRenderResolve$(),e.$onRenderResolve$=void 0),512&e.$flags$&&Ul(()=>Su(e,!1)),e.$flags$&=-517},Ou=e=>{Pu(Pl.documentElement),Ul(()=>iu(Rl,"appload",{detail:{namespace:"sdk-install-modal-web"}}))},Ru=(e,t,n)=>{if(e&&e[t])try{return e[t](n)}catch(r){xl(r)}},Pu=e=>e.classList.add("hydrated"),Iu=(e,t,n,r)=>{var i=kl(e);if(!i)throw new Error(`Couldn't find host element for "${r.$tagName$}" as it is unknown to this Stencil runtime. This usually happens when integrating a 3rd party Stencil component with another Stencil component or application. Please reach out to the maintainers of the 3rd party Stencil component or report this on the Stencil Discord server (https://chat.stenciljs.com) or comment on this similar [GitHub issue](https://github.com/ionic-team/stencil/issues/5457).`);var o=i.$hostElement$,a=i.$instanceValues$.get(t),s=i.$flags$,c=i.$lazyInstance$,l=n,u=r.$members$[t][0];n=null==l||zl(l)?l:4&u?"false"!==l&&(""===l||!!l):1&u?String(l):l;var d=Number.isNaN(a)&&Number.isNaN(n);if((!(8&s)||void 0===a)&&n!==a&&!d&&(i.$instanceValues$.set(t,n),c)){if(r.$watchers$&&128&s){var h=r.$watchers$[t];h&&h.map(e=>{try{c[e](n,a,t)}catch(r){xl(r,o)}})}2==(18&s)&&Su(i,!1)}},Lu=(e,t,n)=>{var r,i,o=e.prototype;if(t.$members$||t.$watchers$||e.watchers){e.watchers&&!t.$watchers$&&(t.$watchers$=e.watchers);var a=Object.entries(null!=(r=t.$members$)?r:{});if(a.map(e=>{var r=p(e,2),i=r[0],a=p(r[1],1)[0];(31&a||2&n&&32&a)&&Object.defineProperty(o,i,{get(){return e=i,kl(this).$instanceValues$.get(e);var e},set(e){Iu(this,i,e,t)},configurable:!0,enumerable:!0})}),1&n){var s=new Map;o.attributeChangedCallback=function(e,n,r){Il.jmp(()=>{var i,a=s.get(e);if(this.hasOwnProperty(a))r=this[a],delete this[a];else{if(o.hasOwnProperty(a)&&"number"==typeof this[a]&&this[a]==r)return;if(null==a){var c=kl(this),l=null==c?void 0:c.$flags$;if(l&&!(8&l)&&128&l&&r!==n){var u,d=c.$lazyInstance$;null===(u=null==(i=t.$watchers$)?void 0:i[e])||void 0===u||u.forEach(t=>{null!=d[t]&&d[t].call(d,r,n,e)})}return}}this[a]=(null!==r||"boolean"!=typeof this[a])&&r})},e.observedAttributes=Array.from(new Set([...Object.keys(null!=(i=t.$watchers$)?i:{}),...a.filter(e=>{var t=p(e,2);t[0];return 15&t[1][0]}).map(e=>{var t=p(e,2),n=t[0],r=t[1][1]||n;return s.set(r,n),r})]))}}return e},Nu=function(){var e=o(b().m(function e(t,n,r,i){var o,a,s,c,l,d,h,f,p,v;return b().w(function(e){for(;;)switch(e.n){case 0:if(32&n.$flags$){e.n=7;break}if(n.$flags$|=32,!r.$lazyBundleId$){e.n=5;break}if(!(a=(e=>{var t=e.$tagName$.replace(/-/g,"_"),n=e.$lazyBundleId$;if(n){var r=Tl.get(n);if(r)return r[t];return"mm-install-modal_3"===n?Promise.resolve().then(function(){return hd}).then(e=>(Tl.set(n,e),e[t]),xl):y(()=>{return e=`./${n}.entry.js`,new Promise(t=>t(u.import(e)));var e},void 0).then(e=>(Tl.set(n,e),e[t]),xl)}})(r))||!("then"in a)){e.n=2;break}return s=()=>{},e.n=1,a;case 1:o=e.v,s(),e.n=3;break;case 2:o=a;case 3:if(o){e.n=4;break}throw new Error(`Constructor for "${r.$tagName$}#${n.$modeName$}" was not found`);case 4:o.isProxied||(r.$watchers$=o.watchers,Lu(o,r,2),o.isProxied=!0),r.$tagName$,c=()=>{},n.$flags$|=8;try{new o(n)}catch(i){xl(i)}n.$flags$&=-9,n.$flags$|=128,c(),Du(n.$lazyInstance$),e.n=6;break;case 5:o=t.constructor,l=t.localName,customElements.whenDefined(l).then(()=>n.$flags$|=128);case 6:o&&o.style&&("string"==typeof o.style&&(d=o.style),h=su(r),Ml.has(h)||(r.$tagName$,f=()=>{},((e,t,n)=>{var r=Ml.get(e);Ll&&n?"string"==typeof(r=r||new CSSStyleSheet)?r=t:r.replaceSync(t):r=t,Ml.set(e,r)})(h,d,!!(1&r.$flags$)),f()));case 7:p=n.$ancestorComponent$,v=()=>Su(n,!0),p&&p["s-rc"]?p["s-rc"].push(v):v();case 8:return e.a(2)}},e)}));return function(t,n,r,i){return e.apply(this,arguments)}}(),Du=e=>{Ru(e,"connectedCallback")},Bu=e=>{Ru(e,"disconnectedCallback")},$u=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=[],a=r.exclude||[],s=Rl.customElements,c=Pl.head,l=c.querySelector("meta[charset]"),u=Pl.createElement("style"),d=[],h=!0;Object.assign(Il,r),Il.$resourcesUrl$=new URL(r.resourcesUrl||"./",Pl.baseURI).href;var f=!1;if(e.map(e=>{e[1].map(t=>{var r,c={$flags$:t[0],$tagName$:t[1],$members$:t[2],$listeners$:t[3]};4&c.$flags$&&(f=!0),c.$members$=t[2],c.$watchers$=null!=(r=t[4])?r:{};var l=c.$tagName$,u=class extends HTMLElement{constructor(e){if(super(e),this.hasRegisteredEventListeners=!1,t=e=this,(n={$flags$:0,$hostElement$:t,$cmpMeta$:c,$instanceValues$:new Map}).$onReadyPromise$=new Promise(e=>n.$onReadyResolve$=e),t["s-p"]=[],t["s-rc"]=[],Sl.set(t,n),1&c.$flags$)if(e.shadowRoot){if("open"!==e.shadowRoot.mode)throw new Error(`Unable to re-use existing shadow root for ${c.$tagName$}! Mode is set to ${e.shadowRoot.mode} but Stencil only supports open shadow roots.`)}else e.attachShadow({mode:"open"});var t,n}connectedCallback(){kl(this),this.hasRegisteredEventListeners||(this.hasRegisteredEventListeners=!0),n&&(clearTimeout(n),n=null),h?d.push(this):Il.jmp(()=>(e=>{if(!(1&Il.$flags$)){var t=kl(e),n=t.$cmpMeta$,r=(n.$tagName$,()=>{});if(1&t.$flags$)(null==t?void 0:t.$lazyInstance$)?Du(t.$lazyInstance$):null!=t&&t.$onReadyPromise$&&t.$onReadyPromise$.then(()=>Du(t.$lazyInstance$));else{t.$flags$|=1;for(var i=e;i=i.parentNode||i.host;)if(i["s-p"]){_u(t,t.$ancestorComponent$=i);break}n.$members$&&Object.entries(n.$members$).map(t=>{var n=p(t,2),r=n[0];if(31&p(n[1],1)[0]&&e.hasOwnProperty(r)){var i=e[r];delete e[r],e[r]=i}}),Nu(e,t,n)}r()}})(this))}disconnectedCallback(){Il.jmp(()=>{return(e=o(b().m(function e(t){var n;return b().w(function(e){for(;;)switch(e.n){case 0:1&Il.$flags$||((null==(n=kl(t))?void 0:n.$lazyInstance$)?Bu(n.$lazyInstance$):null!=n&&n.$onReadyPromise$&&n.$onReadyPromise$.then(()=>Bu(n.$lazyInstance$)));case 1:return e.a(2)}},e)})),function(t){return e.apply(this,arguments)})(this);var e})}componentOnReady(){return kl(this).$onReadyPromise$}};c.$lazyBundleId$=e[0],a.includes(l)||s.get(l)||(i.push(l),s.define(l,Lu(u,c,1)))})}),i.length>0&&(f&&(u.textContent+=Ol),u.textContent+=i.sort()+"{visibility:hidden}.hydrated{visibility:inherit}",u.innerHTML.length)){u.setAttribute("data-styles","");var v=null!=(t=Il.$nonce$)?t:qm(Pl);null!=v&&u.setAttribute("nonce",v),c.insertBefore(u,l?l.nextSibling:c.firstChild)}h=!1,d.length?d.map(e=>e.connectedCallback()):Il.jmp(()=>n=setTimeout(Ou,30))},function(){if("undefined"!=typeof window&&void 0!==window.Reflect&&void 0!==window.customElements){var e=HTMLElement;window.HTMLElement=function(){return Reflect.construct(e,[],this.constructor)},HTMLElement.prototype=e.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,e)}}(),ju=Object.freeze({__proto__:null,defineCustomElements:(os=o(b().m(function e(t,n){return b().w(function(e){for(;;)switch(e.n){case 0:if("undefined"==typeof window){e.n=2;break}return void(e.n=1);case 1:return e.a(2,$u([["mm-install-modal_3",[[1,"mm-install-modal",{link:[1],sdkVersion:[1,"sdk-version"],preferDesktop:[4,"prefer-desktop"],tab:[32],isDefaultTab:[32],translationsLoaded:[32]},null,{preferDesktop:["updatePreferDesktop"]}],[1,"mm-pending-modal",{displayOTP:[4,"display-o-t-p"],sdkVersion:[1,"sdk-version"],otpCode:[1,"otp-code"],translationsLoaded:[32]}],[1,"mm-select-modal",{link:[1],sdkVersion:[1,"sdk-version"],preferDesktop:[4,"prefer-desktop"],tab:[32],isDefaultTab:[32],translationsLoaded:[32]},null,{preferDesktop:["updatePreferDesktop"]}]]]],n));case 2:return e.a(2)}},e)})),function(e,t){return os.apply(this,arguments)}),setNonce:e=>Il.$nonce$=e}),Ku={fontFamily:"Roboto, sans-serif"},Uu=(e,t)=>{var n=e.className;return Zl("div",{style:Ku,class:n},t)},Hu=e=>{var t=e.Icon,n=e.text;return Zl("div",{class:"flexContainer",style:{padding:"6",flexDirection:"row"}},Zl("div",{class:"flexItem1"},Zl(t,null)),Zl("div",{class:"flexItem11"},Zl("span",{style:{lineHeight:"2",color:"black"}},n)))},Fu=()=>Zl("svg",{width:"20",height:"18",viewBox:"0 0 20 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Zl("path",{d:"M20.0002 7.9702V10.0302C20.0002 10.5802 19.5602 11.0302 19.0002 11.0502H17.0402C15.9602 11.0502 14.9702 10.2602 14.8802 9.1802C14.8202 8.5502 15.0602 7.9602 15.4802 7.5502C15.8502 7.1702 16.3602 6.9502 16.9202 6.9502H19.0002C19.5602 6.9702 20.0002 7.4202 20.0002 7.9702Z",fill:"#037DD6"}),Zl("path",{d:"M18.47 12.55H17.04C15.14 12.55 13.54 11.12 13.38 9.3C13.29 8.26 13.67 7.22 14.43 6.48C15.07 5.82 15.96 5.45 16.92 5.45H18.47C18.76 5.45 19 5.21 18.97 4.92C18.75 2.49 17.14 0.83 14.75 0.55C14.51 0.51 14.26 0.5 14 0.5H5C4.72 0.5 4.45 0.52 4.19 0.56C1.64 0.88 0 2.78 0 5.5V12.5C0 15.26 2.24 17.5 5 17.5H14C16.8 17.5 18.73 15.75 18.97 13.08C19 12.79 18.76 12.55 18.47 12.55ZM11 6.75H5C4.59 6.75 4.25 6.41 4.25 6C4.25 5.59 4.59 5.25 5 5.25H11C11.41 5.25 11.75 5.59 11.75 6C11.75 6.41 11.41 6.75 11 6.75Z",fill:"#037DD6"})),zu=()=>Zl("svg",{width:"20",height:"18",viewBox:"0 0 20 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Zl("path",{d:"M14.44 0.0999756C12.63 0.0999756 11.01 0.979976 10 2.32998C8.99 0.979976 7.37 0.0999756 5.56 0.0999756C2.49 0.0999756 0 2.59998 0 5.68998C0 6.87998 0.19 7.97998 0.52 8.99998C2.1 14 6.97 16.99 9.38 17.81C9.72 17.93 10.28 17.93 10.62 17.81C13.03 16.99 17.9 14 19.48 8.99998C19.81 7.97998 20 6.87998 20 5.68998C20 2.59998 17.51 0.0999756 14.44 0.0999756Z",fill:"#037DD6"})),qu=()=>Zl("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Zl("path",{d:"M16.28 7.53V6.28C16.28 3.58 15.63 0 10 0C4.37 0 3.72 3.58 3.72 6.28V7.53C0.92 7.88 0 9.3 0 12.79V14.65C0 18.75 1.25 20 5.35 20H14.65C18.75 20 20 18.75 20 14.65V12.79C20 9.3 19.08 7.88 16.28 7.53ZM10 16.74C8.33 16.74 6.98 15.38 6.98 13.72C6.98 12.05 8.34 10.7 10 10.7C11.66 10.7 13.02 12.06 13.02 13.72C13.02 15.39 11.67 16.74 10 16.74ZM5.35 7.44C5.27 7.44 5.2 7.44 5.12 7.44V6.28C5.12 3.35 5.95 1.4 10 1.4C14.05 1.4 14.88 3.35 14.88 6.28V7.45C14.8 7.45 14.73 7.45 14.65 7.45H5.35V7.44Z",fill:"#037DD6"})),Vu=()=>Zl("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Zl("path",{d:"M16.4405 8.8999C20.0405 9.2099 21.5105 11.0599 21.5105 15.1099V15.2399C21.5105 19.7099 19.7205 21.4999 15.2505 21.4999H8.74047C4.27047 21.4999 2.48047 19.7099 2.48047 15.2399V15.1099C2.48047 11.0899 3.93047 9.2399 7.47047 8.9099",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),Zl("path",{d:"M12 2V14.88",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),Zl("path",{d:"M15.3504 12.6499L12.0004 15.9999L8.65039 12.6499",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})),Wu=()=>Zl("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Zl("rect",{width:"16",height:"16",fill:"white"}),Zl("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.40554 2.40554C2.94627 1.86482 3.82296 1.86482 4.36369 2.40554L8 6.04186L11.6363 2.40554C12.177 1.86482 13.0537 1.86482 13.5945 2.40554C14.1352 2.94627 14.1352 3.82296 13.5945 4.36369L9.95814 8L13.5945 11.6363C14.1352 12.177 14.1352 13.0537 13.5945 13.5945C13.0537 14.1352 12.177 14.1352 11.6363 13.5945L8 9.95814L4.36369 13.5945C3.82296 14.1352 2.94627 14.1352 2.40554 13.5945C1.86482 13.0537 1.86482 12.177 2.40554 11.6363L6.04186 8L2.40554 4.36369C1.86482 3.82296 1.86482 2.94627 2.40554 2.40554Z",fill:"#BBC0C5"})),Gu=()=>Zl("svg",{width:"120",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 127 63"},Zl("path",{fill:"currentColor",d:"M71.554 48.607v13.81h-7.072v-9.568l-8.059.945c-1.77.205-2.548.79-2.548 1.864 0 1.575 1.478 2.239 4.648 2.239 1.932 0 4.073-.29 5.963-.79l-3.66 5.225c-1.479.332-2.92.496-4.44.496-6.414 0-10.074-2.57-10.074-7.132 0-4.023 2.877-6.136 9.416-6.884l8.638-1.012c-.467-2.532-2.362-3.633-6.13-3.633-3.537 0-7.443.912-10.937 2.613l1.111-6.18c3.248-1.369 6.95-2.074 10.69-2.074 8.226 0 12.461 3.444 12.461 10.075l-.008.005ZM7.938 31.315.208 62.416h7.73l3.836-15.628 6.65 8.039h8.06l6.65-8.039 3.836 15.628h7.73l-7.73-31.105-14.518 17.388L7.934 31.311l.004.004ZM36.97.21 22.452 17.598 7.938.21.208 31.315h7.73l3.836-15.628 6.65 8.039h8.06l6.65-8.039 3.836 15.628h7.73L36.97.21Zm53.17 48.107-6.25-.912c-1.562-.247-2.178-.747-2.178-1.617 0-1.41 1.52-2.032 4.647-2.032 3.62 0 6.868.747 10.283 2.364l-.862-6.094c-2.757-.995-5.922-1.491-9.212-1.491-7.688 0-11.886 2.696-11.886 7.547 0 3.776 2.303 5.889 7.196 6.636l6.335.954c1.603.248 2.261.87 2.261 1.865 0 1.41-1.478 2.074-4.481 2.074-3.948 0-8.225-.953-11.72-2.654l.7 6.094c3.003 1.122 6.91 1.785 10.57 1.785 7.896 0 12.007-2.78 12.007-7.715 0-3.94-2.303-6.057-7.4-6.8l-.01-.004ZM100.3 34.09v28.325h7.071V34.091H100.3Zm15.334 15.595 9.833-10.744h-8.8l-9.296 11.114 9.912 12.356h8.925l-10.574-12.73v.004Zm-16.321-25.09c0 4.56 3.66 7.13 10.074 7.13 1.52 0 2.961-.167 4.44-.495l3.66-5.225c-1.89.496-4.031.79-5.963.79-3.166 0-4.648-.664-4.648-2.239 0-1.079.783-1.659 2.549-1.864l8.058-.945v9.567h7.072v-13.81c0-6.635-4.236-10.075-12.461-10.075-3.744 0-7.442.705-10.691 2.075l-1.112 6.178c3.495-1.701 7.401-2.613 10.937-2.613 3.769 0 5.664 1.1 6.13 3.633l-8.637 1.013c-6.539.747-9.417 2.86-9.417 6.883l.009-.004Zm-19.779-1.492c0 5.725 3.29 8.627 9.787 8.627 2.59 0 4.732-.416 6.785-1.37l.903-6.261c-1.974 1.2-3.99 1.822-6.005 1.822-3.044 0-4.402-1.243-4.402-4.023v-8.295h10.732V7.84H86.601V2.948l-13.448 7.174v3.482h6.372V23.1l.008.004Zm-6.95-2.612v1.411H53.47c.862 2.873 3.423 4.187 7.97 4.187 3.62 0 6.993-.747 9.992-2.196l-.862 6.056c-2.757 1.16-6.251 1.785-9.829 1.785-9.5 0-14.68-4.23-14.68-12.066 0-7.838 5.264-12.235 13.406-12.235s13.119 4.771 13.119 13.062l-.005-.004ZM53.378 17.09h12.086c-.637-2.751-2.732-4.188-6.08-4.188-3.349 0-5.335 1.399-6.006 4.188Z"})),Yu=class e{static size(e,t){if("number"==typeof e&&(e={height:e,width:e}),!Number.isSafeInteger(e.height)&&e.height!==1/0)throw new Error(`Bitmap: wrong height=${e.height} (${typeof e.height})`);if(!Number.isSafeInteger(e.width)&&e.width!==1/0)throw new Error(`Bitmap: wrong width=${e.width} (${typeof e.width})`);return void 0!==t&&(e={width:Math.min(e.width,t.width),height:Math.min(e.height,t.height)}),e}static fromString(t){var n,r,i=(t=t.replace(/^\n+/g,"").replace(/\n+$/g,"")).split("\n"),o=i.length,a=new Array(o),s=l(i);try{for(s.s();!(r=s.n()).done;){var c=r.value.split("").map(e=>{if("X"===e)return!0;if(" "===e)return!1;if("?"!==e)throw new Error(`Bitmap.fromString: unknown symbol=${e}`)});if(n&&c.length!==n)throw new Error(`Bitmap.fromString different row sizes: width=${n} cur=${c.length}`);n=c.length,a.push(c)}}catch(fs){s.e(fs)}finally{s.f()}return n||(n=0),new e({height:o,width:n},a)}constructor(t,n){var r=e.size(t),i=r.height,o=r.width;this.data=n||Array.from({length:i},()=>Jm(o,void 0)),this.height=i,this.width=o}point(e){return this.data[e.y][e.x]}isInside(e){return 0<=e.x&&e.x<this.width&&0<=e.y&&e.y<this.height}size(e){if(!e)return{height:this.height,width:this.width};var t=this.xy(e),n=t.x,r=t.y;return{height:this.height-r,width:this.width-n}}xy(e){if("number"==typeof e&&(e={x:e,y:e}),!Number.isSafeInteger(e.x))throw new Error(`Bitmap: wrong x=${e.x}`);if(!Number.isSafeInteger(e.y))throw new Error(`Bitmap: wrong y=${e.y}`);return e.x=Zm(e.x,this.width),e.y=Zm(e.y,this.height),e}rect(t,n,r){for(var i=this.xy(t),o=i.x,a=i.y,s=e.size(n,this.size({x:o,y:a})),c=s.height,l=s.width,u=0;u<c;u++)for(var d=0;d<l;d++)this.data[a+u][o+d]="function"==typeof r?r({x:d,y:u},this.data[a+u][o+d]):r;return this}rectRead(e,t,n){return this.rect(e,t,(e,t)=>(n(e,t),t))}hLine(e,t,n){return this.rect(e,{width:t,height:1},n)}vLine(e,t,n){return this.rect(e,{width:1,height:t},n)}border(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,n=arguments.length>1?arguments[1]:void 0,r=this.height+2*t,i=this.width+2*t,o=Jm(t,n),a=Array.from({length:t},()=>Jm(i,n));return new e({height:r,width:i},[...a,...this.data.map(e=>[...o,...e,...o]),...a])}embed(e,t){return this.rect(e,t.size(),e=>{var n=e.x,r=e.y;return t.data[r][n]})}rectSlice(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size(),r=new e(e.size(n,this.size(this.xy(t))));return this.rect(t,n,(e,t)=>{var n=e.x,i=e.y;return r.data[i][n]=t}),r}inverse(){var t=this.height,n=this.width;return new e({height:n,width:t}).rect({x:0,y:0},1/0,e=>{var t=e.x,n=e.y;return this.data[t][n]})}scale(t){if(!Number.isSafeInteger(t)||t>1024)throw new Error(`Wrong scale factor: ${t}`);var n=this.height,r=this.width;return new e({height:t*n,width:t*r}).rect({x:0,y:0},1/0,e=>{var n=e.x,r=e.y;return this.data[Math.floor(r/t)][Math.floor(n/t)]})}clone(){return new e(this.size()).rect({x:0,y:0},this.size(),e=>{var t=e.x,n=e.y;return this.data[n][t]})}assertDrawn(){this.rectRead(0,1/0,(e,t)=>{if("boolean"!=typeof t)throw new Error("Invalid color type="+typeof t)})}toString(){return this.data.map(e=>e.map(e=>void 0===e?"?":e?"X":" ").join("")).join("\n")}toASCII(){for(var e=this.height,t=this.width,n=this.data,r="",i=0;i<e;i+=2){for(var o=0;o<t;o++){var a=n[i][o],s=i+1>=e||n[i+1][o];a||s?!a&&s?r+="":a&&!s?r+="":a&&s&&(r+=" "):r+=""}r+="\n"}return r}toTerm(){var e="[0m",t=`[1;47m  ${e}`,n=`[40m  ${e}`;return this.data.map(e=>e.map(e=>e?n:t).join("")).join("\n")}toSVG(){var e=`<svg xmlns:svg="http://www.w3.org/2000/svg" viewBox="0 0 ${this.width} ${this.height}" version="1.1" xmlns="http://www.w3.org/2000/svg">`;return this.rectRead(0,1/0,(t,n)=>{var r=t.x,i=t.y;n&&(e+=`<rect x="${r}" y="${i}" width="1" height="1" />`)}),e+="</svg>"}toGIF(){var e=e=>[255&e,e>>>8&255],t=[...e(this.width),...e(this.height)],n=[];this.rectRead(0,1/0,(e,t)=>n.push(+(!0===t)));for(var r=126,i=[71,73,70,56,55,97,...t,246,0,0,255,255,255,...Jm(381,0),44,0,0,0,0,...t,0,7],o=Math.floor(n.length/r),a=0;a<o;a++)i.push(127,128,...n.slice(r*a,r*(a+1)).map(e=>+e));return i.push(n.length%r+1,128,...n.slice(o*r).map(e=>+e)),i.push(1,129,0,59),new Uint8Array(i)}toImage(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.size(),n=t.height,r=t.width,i=new Uint8Array(n*r*(e?3:4)),o=0,a=0;a<n;a++)for(var s=0;s<r;s++){var c=this.data[a][s]?0:255;i[o++]=c,i[o++]=c,i[o++]=c,e||(i[o++]=255)}return{height:n,width:r,data:i}}},Zu=["low","medium","quartile","high"],Ju=["numeric","alphanumeric","byte","kanji","eci"],Xu=[26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706],Qu={low:[7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],medium:[10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],quartile:[13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],high:[17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]},ed={low:[1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],medium:[1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],quartile:[1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],high:[1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]},td={size:{encode:e=>21+4*(e-1),decode:e=>(e-17)/4},sizeType:e=>Math.floor((e+7)/17),alignmentPatterns(e){if(1===e)return[];var t=td.size.encode(e)-6-1,n=t-6,r=Math.ceil(n/28),i=Math.floor(n/r);i%2?i+=1:n%r*2>=r&&(i+=2);for(var o=[6],a=1;a<r;a++)o.push(t-(r-a)*i);return o.push(t),o},ECCode:{low:1,medium:0,quartile:3,high:2},formatMask:21522,formatBits(e,t){for(var n=td.ECCode[e]<<3|t,r=n,i=0;i<10;i++)r=r<<1^1335*(r>>9);return(n<<10|r)^td.formatMask},versionBits(e){for(var t=e,n=0;n<12;n++)t=t<<1^7973*(t>>11);return e<<12|t},alphabet:{numeric:eg("0123456789"),alphanumerc:eg("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:")},lengthBits:(e,t)=>({numeric:[10,12,14],alphanumeric:[9,11,13],byte:[8,16,16],kanji:[8,10,12],eci:[0,0,0]}[t][td.sizeType(e)]),modeBits:{numeric:"0001",alphanumeric:"0010",byte:"0100",kanji:"1000",eci:"0111"},capacity(e,t){var n=Xu[e-1],r=Qu[t][e-1],i=ed[t][e-1],o=Math.floor(n/i)-r,a=i-n%i;return{words:r,numBlocks:i,shortBlocks:a,blockLen:o,capacity:8*(n-r*i),total:(r+o)*i+i-a}}},nd=[(e,t)=>(e+t)%2==0,(e,t)=>t%2==0,(e,t)=>e%3==0,(e,t)=>(e+t)%3==0,(e,t)=>(Math.floor(t/2)+Math.floor(e/3))%2==0,(e,t)=>e*t%2+e*t%3==0,(e,t)=>(e*t%2+e*t%3)%2==0,(e,t)=>((e+t)%2+e*t%3)%2==0],rd={tables:(()=>{for(var e=Jm(256,0),t=Jm(256,0),n=0,r=1;n<256;n++)e[n]=r,t[r]=n,256&(r<<=1)&&(r^=285);return{exp:e,log:t}})(),exp:e=>rd.tables.exp[e],log(e){if(0===e)throw new Error(`GF.log: wrong arg=${e}`);return rd.tables.log[e]%255},mul:(e,t)=>0===e||0===t?0:rd.tables.exp[(rd.tables.log[e]+rd.tables.log[t])%255],add:(e,t)=>e^t,pow:(e,t)=>rd.tables.exp[rd.tables.log[e]*t%255],inv(e){if(0===e)throw new Error(`GF.inverse: wrong arg=${e}`);return rd.tables.exp[255-rd.tables.log[e]]},polynomial(e){if(0==e.length)throw new Error("GF.polymomial: wrong length");if(0!==e[0])return e;for(var t=0;t<e.length-1&&0==e[t];t++);return e.slice(t)},monomial(e,t){if(e<0)throw new Error(`GF.monomial: wrong degree=${e}`);if(0==t)return[0];var n=Jm(e+1,0);return n[0]=t,rd.polynomial(n)},degree:e=>e.length-1,coefficient:(e,t)=>e[rd.degree(e)-t],mulPoly(e,t){if(0===e[0]||0===t[0])return[0];for(var n=Jm(e.length+t.length-1,0),r=0;r<e.length;r++)for(var i=0;i<t.length;i++)n[r+i]=rd.add(n[r+i],rd.mul(e[r],t[i]));return rd.polynomial(n)},mulPolyScalar(e,t){if(0==t)return[0];if(1==t)return e;for(var n=Jm(e.length,0),r=0;r<e.length;r++)n[r]=rd.mul(e[r],t);return rd.polynomial(n)},mulPolyMonomial(e,t,n){if(t<0)throw new Error("GF.mulPolyMonomial: wrong degree");if(0==n)return[0];for(var r=Jm(e.length+t,0),i=0;i<e.length;i++)r[i]=rd.mul(e[i],n);return rd.polynomial(r)},addPoly(e,t){var n;if(0===e[0])return t;if(0===t[0])return e;var r=e,i=t;r.length>i.length&&(r=(n=[i,r])[0],i=n[1]);for(var o=Jm(i.length,0),a=i.length-r.length,s=i.slice(0,a),c=0;c<s.length;c++)o[c]=s[c];for(var l=a;l<i.length;l++)o[l]=rd.add(r[l-a],i[l]);return rd.polynomial(o)},remainderPoly(e,t){for(var n=Array.from(e),r=0;r<e.length-t.length+1;r++){var i=n[r];if(0!==i)for(var o=1;o<t.length;o++)0!==t[o]&&(n[r+o]=rd.add(n[r+o],rd.mul(t[o],i)))}return n.slice(e.length-t.length+1,n.length)},divisorPoly(e){for(var t=[1],n=0;n<e;n++)t=rd.mulPoly(t,[1,rd.pow(2,n)]);return t},evalPoly(e,t){if(0==t)return rd.coefficient(e,0);for(var n=e[0],r=1;r<e.length;r++)n=rd.add(rd.mul(t,n),e[r]);return n},euclidian(e,t,n){var r;rd.degree(e)<rd.degree(t)&&(e=(r=[t,e])[0],t=r[1]);for(var i=e,o=t,a=[0],s=[1];2*rd.degree(o)>=n;){var c=i,l=a;if(a=s,0===(i=o)[0])throw new Error("rLast[0] === 0");o=c;for(var u=[0],d=rd.inv(i[0]);rd.degree(o)>=rd.degree(i)&&0!==o[0];){var h=rd.degree(o)-rd.degree(i),f=rd.mul(o[0],d);u=rd.addPoly(u,rd.monomial(h,f)),o=rd.addPoly(o,rd.mulPolyMonomial(i,h,f))}if(u=rd.mulPoly(u,a),s=rd.addPoly(u,l),rd.degree(o)>=rd.degree(i))throw new Error(`Division failed r: ${o}, rLast: ${i}`)}var p=rd.coefficient(s,0);if(0==p)throw new Error("sigmaTilde(0) was zero");var v=rd.inv(p);return[rd.mulPolyScalar(s,v),rd.mulPolyScalar(o,v)]}},id={DESKTOP:"Desktop",MOBILE:"Mobile",META_MASK_MOBILE_APP:"MetaMask mobile app",SCAN_TO_CONNECT:"Scan to connect and sign with",CONNECT_WITH_EXTENSION:"Connect With MetaMask Extension",INSTALL_MODAL:{TRUSTED_BY_USERS:"Trusted by over 30 million users to buy, store, send and swap crypto securely",LEADING_CRYPTO_WALLET:"The leading crypto wallet & gateway to blockchain apps built on Ethereum Mainnet, Polygon, Optimism, and many other networks",CONTROL_DIGITAL_INTERACTIONS:"Puts you in control of your digital interactions by making power of cryptography more accessible",INSTALL_META_MASK_EXTENSION:"Install MetaMask Extension"},PENDING_MODAL:{OPEN_META_MASK_SELECT_CODE:"Please open the MetaMask wallet app and select the code on the screen OR disconnect",OPEN_META_MASK_CONTINUE:"Open the MetaMask app to continue with your session.",NUMBER_AFTER_OPEN_NOTICE:"If a number doesn't appear after opening MetaMask, please click disconnect and re-scan the QRCode.",DISCONNECT:"Disconnect"},SELECT_MODAL:{CRYPTO_TAKE_CONTROL_TEXT:"Take control of your crypto and explore the blockchain with the wallet trusted by over 30 million people worldwide"},META_MASK_MODAL:{ADDRESS_COPIED:"Address copied to clipboard!",DISCONNECT:"Disconnect",ACTIVE_NETWORK:"Active Network"}},od=class{constructor(e){var t;this.translations=id,this.supportedLocales=["es","fr","he","it","pt","tr"],this.baseUrl=null!==(t=null==e?void 0:e.baseUrl)&&void 0!==t?t:"https://raw.githubusercontent.com/MetaMask/metamask-sdk/refs/heads/gh-pages/locales"}getBrowserLanguage(){if((navigator.languages||[navigator.language]).some(e=>e.toLowerCase().startsWith("en")))return"en";var e=navigator.language.toLowerCase().split("-")[0];return this.supportedLocales.includes(e)?e:"en"}init(e){var t=this;return o(b().m(function n(){var r;return b().w(function(n){for(;;)switch(n.n){case 0:return r=t.getBrowserLanguage()||e.fallbackLng,n.n=1,t.loadTranslations(r);case 1:return n.a(2)}},n)}))()}loadTranslations(e){var t=this;return o(b().m(function n(){var r,i,o;return b().w(function(n){for(;;)switch(n.p=n.n){case 0:if("en"===(r=e.split("-")[0])||!t.supportedLocales.includes(r)){n.n=7;break}return n.p=1,i=`${t.baseUrl}/${r}.json`,n.n=2,fetch(i);case 2:if((o=n.v).ok){n.n=3;break}throw new Error(`HTTP error! status: ${o.status}`);case 3:return n.n=4,o.json();case 4:t.translations=n.v,n.n=6;break;case 5:n.p=5,n.v,t.translations=id;case 6:n.n=8;break;case 7:t.translations=id;case 8:return n.a(2)}},n,null,[[1,5]])}))()}t(e){return this.getNestedTranslation(e,this.translations)||e}getNestedTranslation(e,t){var n,r=t,i=l(e.split("."));try{for(i.s();!(n=i.n()).done;){var o=n.value;if("object"!=typeof r)return"";r=r[o]}}catch(fs){i.e(fs)}finally{i.f()}return"string"==typeof r?r:""}},function(e){e.SDK_MODAL_VIEWED="sdk_modal_viewed",e.SDK_MODAL_BUTTON_CLICKED="sdk_modal_button_clicked",e.SDK_MODAL_TOGGLE_CHANGED="sdk_modal_toggle_changed"}(ad||(ad={})),sd=class{constructor(e){Cl(this,e),this.close=ru(this,"close",7),this.startDesktopOnboarding=ru(this,"startDesktopOnboarding",7),this.trackAnalytics=ru(this,"trackAnalytics",7),this.link=void 0,this.sdkVersion=void 0,this.preferDesktop=void 0,this.tab=1,this.isDefaultTab=!0,this.translationsLoaded=!1,this.onClose=this.onClose.bind(this),this.onStartDesktopOnboardingHandler=this.onStartDesktopOnboardingHandler.bind(this),this.setTab=this.setTab.bind(this),this.render=this.render.bind(this),this.setTab(this.preferDesktop?1:2),this.i18nInstance=new od}componentDidLoad(){this.trackAnalytics.emit({event:ad.SDK_MODAL_VIEWED,params:{extensionInstalled:!1,tab:1===this.tab?"desktop":"mobile"}})}connectedCallback(){var e=this;return o(b().m(function t(){return b().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,e.i18nInstance.init({fallbackLng:"en"});case 1:e.translationsLoaded=!0;case 2:return t.a(2)}},t)}))()}updatePreferDesktop(e){e?this.setTab(1):this.setTab(2)}onClose(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.close.emit({shouldTerminate:e})}onStartDesktopOnboardingHandler(){this.trackAnalytics.emit({event:ad.SDK_MODAL_BUTTON_CLICKED,params:{button_type:"install_extension",tab:"desktop"}}),this.startDesktopOnboarding.emit()}setTab(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&this.trackAnalytics.emit({event:ad.SDK_MODAL_TOGGLE_CHANGED,params:{toggle:1===this.tab?"desktop_to_mobile":"mobile_to_desktop"}}),this.tab=e,this.isDefaultTab=!1}render(){if(!this.translationsLoaded)return null;var e=e=>this.i18nInstance.t(e),t=this.isDefaultTab?this.preferDesktop?1:2:this.tab,n=ig(this.link,"svg",{ecc:"medium",scale:2});return Zl(Uu,{className:"install-model"},Zl("div",{class:"backdrop",onClick:()=>this.onClose(!0)}),Zl("div",{class:"modal"},Zl("div",{class:"closeButtonContainer"},Zl("div",{class:"right"},Zl("span",{class:"closeButton",onClick:()=>this.onClose(!0)},Zl(Wu,null)))),Zl("div",{class:"logoContainer"},Zl(Gu,null)),Zl("div",null,Zl("div",{class:"tabcontainer"},Zl("div",{class:"flexContainer"},Zl("div",{onClick:()=>this.setTab(1,!0),class:"tab flexItem "+(1===t?"tabactive":"")},e("DESKTOP")),Zl("div",{onClick:()=>this.setTab(2,!0),class:"tab flexItem "+(2===t?"tabactive":"")},e("MOBILE")))),Zl("div",{style:{display:1===t?"none":"block"}},Zl("div",{class:"flexContainer"},Zl("div",{class:"flexItem",style:{textAlign:"center",marginTop:"4"}},n&&Zl("div",{id:"sdk-mm-qrcode",class:"center",innerHTML:n}),Zl("div",{class:"connectMobileText"},e("SCAN_TO_CONNECT")," ",Zl("br",null),Zl("span",{class:"blue"},Zl("b",null,e("META_MASK_MOBILE_APP"))))))),Zl("div",{style:{display:2===t?"none":"block"}},Zl("div",{class:"item"},Zl(Hu,{Icon:zu,text:e("INSTALL_MODAL.TRUSTED_BY_USERS")})),Zl("div",{class:"item"},Zl(Hu,{Icon:Fu,text:e("INSTALL_MODAL.LEADING_CRYPTO_WALLET")})),Zl("div",{class:"item"},Zl(Hu,{Icon:qu,text:e("INSTALL_MODAL.CONTROL_DIGITAL_INTERACTIONS")})),Zl("button",{class:"button",onClick:()=>this.onStartDesktopOnboardingHandler()},Zl(Vu,null),Zl("span",{class:"installExtensionText"},e("INSTALL_MODAL.INSTALL_META_MASK_EXTENSION"))))),Zl(Gm,{version:this.sdkVersion})))}get el(){return nu(this)}static get watchers(){return{preferDesktop:["updatePreferDesktop"]}}},sd.style=".flexContainer {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: row;\n}\n\n.flexItem {\n    flex: 1;\n    justify-content: center;\n    align-items: center;\n}\n\n.flexItem11 {\n    flex: 11;\n    justify-content: center;\n    align-items: center;\n}\n\n.flexItem1 {\n    flex: 1;\n    justify-content: center;\n    align-items: center;\n}\n\n.tab {\n    padding: 8px;\n    cursor: pointer;\n    background-color: #F2F4F6;\n    font-size: 12px;\n    text-align: center;\n    color: #24292E;\n}\n\n.tabcontainer {\n    padding: 4px;\n    background-color: #F2F4F6;\n    border-radius: 8px;\n    margin-bottom: 30px;\n    margin-top: 30px;\n}\n\n.tabactive {\n    background-color: white;\n    -webkit-transition: background-color 300ms linear;\n    -ms-transition: background-color 300ms linear;\n    transition: background-color 300ms linear;\n    border-radius: 8px;\n}\n\n.item {\n    font-size: 12px;\n    margin-bottom: 16px;\n    border-radius: 8px;\n    padding: 10px;\n    border: 2px #F2F4F6 solid;\n    color: #24292E;\n}\n\n.extensionLabel {\n    font-style: normal;\n    font-weight: bold;\n    font-size: 14px;\n    text-align: cetner;\n    color: #24272A;\n}\n\n.notice {\n    font-size: 12px;\n    margin-left: 10px;\n    margin-right: 10px;\n    color: grey;\n}\n\n.button {\n    margin-top: 41.5px;\n    margin-bottom: 20px;\n    width: 100%;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    padding: 12px 20px;\n    background: #037DD6;\n    border-radius: 32px;\n    color: white;\n    border: 0;\n    font-size: 14px;\n    cursor: pointer;\n}\n\n.backdrop {\n    visibility: visible;\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    width: 100%;\n    z-index: 99998;\n    background: rgba(0, 0, 0, 0.87);\n    opacity: 0.3;\n}\n\n.modal {\n    visibility: visible;\n    position: fixed;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    z-index: 99999;\n    background: white;\n    padding: 20px;\n    border-radius: 8px;\n    top: 50%;\n    max-width: 100%;\n    width: 460px;\n    min-width: 300px;\n    box-shadow: rgba(0, 0, 0, 0.2) 0px 11px 15px -7px, rgba(0, 0, 0, 0.14) 0px 24px 38px 3px, rgba(0, 0, 0, 0.12) 0px 9px 46px 8px;\n    -webkit-font-smoothing: antialiased;\n}\n\n.closeButton {\n    color: #BBC0C5;\n    cursor: pointer;\n}\n\n.logoContainer {\n    margin-left: 24px;\n    margin-right: 24px;\n    margin-top: 24px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.connectMobileText {\n    font-size: 14px;\n    color: black;\n    margin-top: 28px;\n    margin-bottom: 28px;\n    line-height: 2;\n}\n\n.blue {\n    color: #037DD6;\n    font-weight: 700;\n}\n\n.installExtensionText {\n    margin-left: 10px;\n}\n\n.center {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.right {\n    display: flex;\n    align-items: center;\n    justify-content: right;\n}\n\n#sdk-mm-qrcode {\n    svg {\n        width: 50%;\n    }\n}",cd=class{constructor(e){Cl(this,e),this.close=ru(this,"close",7),this.disconnect=ru(this,"disconnect",7),this.updateOTPValue=ru(this,"updateOTPValue",7),this.displayOTP=void 0,this.sdkVersion=void 0,this.otpCode=void 0,this.translationsLoaded=!1,this.i18nInstance=new od}connectedCallback(){var e=this;return o(b().m(function t(){return b().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,e.i18nInstance.init({fallbackLng:"en"});case 1:e.translationsLoaded=!0;case 2:return t.a(2)}},t)}))()}onClose(){this.close.emit()}onDisconnect(){this.disconnect.emit()}onUpdateOTPValueHandler(e){this.updateOTPValue.emit({otpValue:e})}disconnectedCallback(){this.onClose()}render(){var e;if(!this.translationsLoaded)return null;var t=null===(e=this.displayOTP)||void 0===e||e,n=this.sdkVersion,r=e=>this.i18nInstance.t(e);return Zl(Uu,{className:"pending-modal"},Zl("div",{class:"backdrop",onClick:()=>this.onClose()}),Zl("div",{class:"modal"},Zl("div",{class:"closeButtonContainer"},Zl("div",{class:"right"},Zl("span",{class:"closeButton",onClick:()=>this.onClose()},Zl(Wu,null)))),Zl("div",{class:"logoContainer"},Zl(Gu,null)),Zl("div",null,Zl("div",{class:"flexContainer",style:{flexDirection:"column",color:"black"}},Zl("div",{class:"flexItem",style:{textAlign:"center",marginTop:"30px",marginBottom:"30px",fontSize:"16px"}},r(t?"PENDING_MODAL.OPEN_META_MASK_SELECT_CODE":"PENDING_MODAL.OPEN_META_MASK_CONTINUE")),Zl("div",{id:"sdk-mm-otp-value",style:{padding:"10px",fontSize:"32px",display:this.otpCode?"block":"none"}},this.otpCode),t&&Zl("div",{class:"notice"},"* ",r("PENDING_MODAL.NUMBER_AFTER_OPEN_NOTICE"))),Zl("div",{style:{marginTop:"20px"}},Zl("button",{class:"button blue",style:{marginTop:"5px",color:"#0376C9",borderColor:"#0376C9",borderWidth:"1px",borderStyle:"solid",backgroundColor:"white"},onClick:()=>this.onDisconnect()},r("PENDING_MODAL.DISCONNECT")))),Zl(Gm,{version:n})))}get el(){return nu(this)}},cd.style=".flexContainer {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: row;\n}\n\n.flexItem {\n    flex: 1;\n    justify-content: center;\n    align-items: center;\n}\n\n.flexItem11 {\n    flex: 11;\n    justify-content: center;\n    align-items: center;\n}\n\n.flexItem1 {\n    flex: 1;\n    justify-content: center;\n    align-items: center;\n}\n\n.tab {\n    padding: 8px;\n    cursor: pointer;\n    background-color: #F2F4F6;\n    font-size: 12px;\n    text-align: center;\n    color: #24292E;\n}\n\n.tabcontainer {\n    padding: 4px;\n    background-color: #F2F4F6;\n    border-radius: 8px;\n    margin-bottom: 30px;\n    margin-top: 30px;\n}\n\n.tabactive {\n    background-color: white;\n    -webkit-transition: background-color 300ms linear;\n    -ms-transition: background-color 300ms linear;\n    transition: background-color 300ms linear;\n    border-radius: 8px;\n}\n\n.item {\n    font-size: 12px;\n    margin-bottom: 16px;\n    border-radius: 8px;\n    padding: 10px;\n    border: 2px #F2F4F6 solid;\n    color: #24292E;\n}\n\n.extensionLabel {\n    font-style: normal;\n    font-weight: bold;\n    font-size: 14px;\n    text-align: cetner;\n    color: #24272A;\n}\n\n.notice {\n    font-size: 12px;\n    margin-left: 10px;\n    margin-right: 10px;\n    color: grey;\n}\n\n.button {\n    margin-top: 41.5px;\n    margin-bottom: 20px;\n    width: 100%;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    padding: 12px 20px;\n    background: #037DD6;\n    border-radius: 32px;\n    color: white;\n    border: 0;\n    font-size: 14px;\n    cursor: pointer;\n}\n\n.backdrop {\n    visibility: visible;\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    width: 100%;\n    z-index: 99998;\n    background: rgba(0, 0, 0, 0.87);\n    opacity: 0.3;\n}\n\n.modal {\n    visibility: visible;\n    position: fixed;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    z-index: 99999;\n    background: white;\n    padding: 20px;\n    border-radius: 8px;\n    top: 50%;\n    max-width: 100%;\n    width: 460px;\n    min-width: 300px;\n    box-shadow: rgba(0, 0, 0, 0.2) 0px 11px 15px -7px, rgba(0, 0, 0, 0.14) 0px 24px 38px 3px, rgba(0, 0, 0, 0.12) 0px 9px 46px 8px;\n    -webkit-font-smoothing: antialiased;\n}\n\n.closeButton {\n    color: #BBC0C5;\n    cursor: pointer;\n}\n\n.logoContainer {\n    margin-left: 24px;\n    margin-right: 24px;\n    margin-top: 24px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.connectMobileText {\n    font-size: 14px;\n    color: black;\n    margin-top: 28px;\n    margin-bottom: 28px;\n    line-height: 2;\n}\n\n.blue {\n    color: #037DD6;\n    font-weight: 700;\n}\n\n.installExtensionText {\n    margin-left: 10px;\n}\n\n.center {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.right {\n    display: flex;\n    align-items: center;\n    justify-content: right;\n}\n\n#sdk-mm-qrcode {\n    svg {\n        width: 50%;\n    }\n}",ld=()=>Zl("svg",{width:"21",height:"15",viewBox:"0 0 21 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Zl("path",{d:"M14.1364 14.9851C13.5909 14.9851 13.2273 14.5851 13.2273 13.9851C13.2273 13.3851 13.5909 12.9851 14.1364 12.9851C16.6818 12.9851 18.6818 10.7851 18.6818 7.98508C18.6818 5.18508 16.6818 2.98508 14.1364 2.98508C11.5909 2.98508 9.59091 5.18508 9.59091 7.98508C9.59091 8.58508 9.22727 8.98508 8.68182 8.98508C8.13636 8.98508 7.77273 8.58508 7.77273 7.98508C7.77273 4.08508 10.5909 0.985077 14.1364 0.985077C17.6818 0.985077 20.5 4.08508 20.5 7.98508C20.5 11.8851 17.6818 14.9851 14.1364 14.9851ZM6.68182 14.7851C3.22727 14.7851 0.5 11.6851 0.5 7.98508C0.5 4.28508 3.22727 1.18508 6.68182 1.18508C7.22727 1.18508 7.59091 1.58508 7.59091 2.18508C7.59091 2.78508 7.22727 3.18508 6.68182 3.18508C4.22727 3.18508 2.31818 5.38508 2.31818 7.98508C2.31818 10.5851 4.22727 12.7851 6.68182 12.7851C9.13636 12.7851 11.0455 10.6851 11.0455 7.98508C11.0455 7.38508 11.4091 6.98508 11.9545 6.98508C12.5 6.98508 12.8636 7.38508 12.8636 7.98508C12.7727 11.6851 10.0455 14.7851 6.68182 14.7851Z",fill:"white"})),ud=()=>Zl("svg",{width:"400",height:"300",viewBox:"0 0 400 300",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Zl("rect",{width:"400",height:"300",fill:"white"}),Zl("path",{d:"M300.116 242.46L250.485 227.681L213.057 250.055L186.944 250.045L149.493 227.681L99.8843 242.46L84.7939 191.518L99.8843 134.979L84.7939 87.1777L99.8843 27.9336L177.402 74.2466H222.598L300.116 27.9336L315.206 87.1777L300.116 134.979L315.206 191.518L300.116 242.46Z",fill:"#FF5C16"}),Zl("path",{d:"M99.8955 27.9336L177.414 74.2792L174.331 106.085L99.8955 27.9336Z",fill:"#FF5C16"}),Zl("path",{d:"M149.505 191.539L183.612 217.521L149.505 227.681V191.539Z",fill:"#FF5C16"}),Zl("path",{d:"M180.886 148.585L174.33 106.107L132.369 134.991L132.348 134.98V135.001L132.477 164.732L149.493 148.585H149.504H180.886Z",fill:"#FF5C16"}),Zl("path",{d:"M300.116 27.9336L222.598 74.2792L225.67 106.085L300.116 27.9336Z",fill:"#FF5C16"}),Zl("path",{d:"M250.508 191.539L216.4 217.521L250.508 227.681V191.539Z",fill:"#FF5C16"}),Zl("path",{d:"M267.652 135.001H267.663H267.652V134.98L267.641 134.991L225.68 106.107L219.125 148.585H250.507L267.533 164.732L267.652 135.001Z",fill:"#FF5C16"}),Zl("path",{d:"M149.493 227.681L99.8843 242.46L84.7939 191.54H149.493V227.681Z",fill:"#E34807"}),Zl("path",{d:"M180.875 148.574L190.351 209.98L177.219 175.838L132.456 164.732L149.483 148.574H180.864H180.875Z",fill:"#E34807"}),Zl("path",{d:"M250.507 227.681L300.116 242.46L315.206 191.54H250.507V227.681Z",fill:"#E34807"}),Zl("path",{d:"M219.126 148.574L209.649 209.98L222.782 175.838L267.545 164.732L250.507 148.574H219.126Z",fill:"#E34807"}),Zl("path",{d:"M84.7939 191.517L99.8843 134.979H132.337L132.456 164.721L177.219 175.826L190.351 209.969L183.601 217.488L149.493 191.506H84.7939V191.517Z",fill:"#FF8D5D"}),Zl("path",{d:"M315.206 191.517L300.116 134.979H267.664L267.545 164.721L222.782 175.826L209.649 209.969L216.4 217.488L250.507 191.506H315.206V191.517Z",fill:"#FF8D5D"}),Zl("path",{d:"M222.598 74.2466H200H177.402L174.33 106.053L190.351 209.936H209.649L225.681 106.053L222.598 74.2466Z",fill:"#FF8D5D"}),Zl("path",{d:"M99.8843 27.9336L84.7939 87.1777L99.8843 134.979H132.337L174.319 106.085L99.8843 27.9336Z",fill:"#661800"}),Zl("path",{d:"M171.496 160.906H156.795L148.79 168.752L177.229 175.804L171.496 160.896V160.906Z",fill:"#661800"}),Zl("path",{d:"M300.116 27.9336L315.206 87.1777L300.116 134.979H267.663L225.681 106.085L300.116 27.9336Z",fill:"#661800"}),Zl("path",{d:"M228.525 160.906H243.248L251.253 168.763L222.781 175.826L228.525 160.896V160.906Z",fill:"#661800"}),Zl("path",{d:"M213.046 229.789L216.399 217.51L209.649 209.991H190.34L183.59 217.51L186.943 229.789",fill:"#661800"}),Zl("path",{d:"M213.047 229.789V250.066H186.944V229.789H213.047Z",fill:"#C0C4CD"}),Zl("path",{d:"M149.504 227.66L186.965 250.056V229.779L183.611 217.5L149.504 227.66Z",fill:"#E7EBF6"}),Zl("path",{d:"M250.506 227.66L213.045 250.056V229.779L216.398 217.5L250.506 227.66Z",fill:"#E7EBF6"})),dd=class{constructor(e){Cl(this,e),this.close=ru(this,"close",7),this.connectWithExtension=ru(this,"connectWithExtension",7),this.link=void 0,this.sdkVersion=void 0,this.preferDesktop=void 0,this.tab=1,this.isDefaultTab=!0,this.translationsLoaded=!1,this.i18nInstance=new od,this.setTab(this.preferDesktop?1:2)}connectedCallback(){var e=this;return o(b().m(function t(){return b().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,e.i18nInstance.init({fallbackLng:"en"});case 1:e.translationsLoaded=!0;case 2:return t.a(2)}},t)}))()}onClose(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.close.emit({shouldTerminate:e})}connectWithExtensionHandler(){this.connectWithExtension.emit()}setTab(e){this.tab=e,this.isDefaultTab=!1}disconnectedCallback(){this.onClose()}updatePreferDesktop(e){e?this.setTab(1):this.setTab(2)}render(){if(!this.translationsLoaded)return null;var e=e=>this.i18nInstance.t(e),t=this.sdkVersion,n=this.isDefaultTab?this.preferDesktop?1:2:this.tab,r=ig(this.link,"svg",{ecc:"medium",scale:2});return Zl(Uu,{className:"select-modal"},Zl("div",{class:"backdrop",onClick:()=>this.onClose(!0)}),Zl("div",{class:"modal"},Zl("div",{class:"closeButtonContainer"},Zl("div",{class:"right"},Zl("span",{class:"closeButton",onClick:()=>this.onClose(!0)},Zl(Wu,null)))),Zl("div",{class:"logoContainer"},Zl(Gu,null)),Zl("div",null,Zl("div",{class:"tabcontainer"},Zl("div",{class:"flexContainer"},Zl("div",{onClick:()=>this.setTab(1),class:"tab flexItem "+(1===n?"tabactive":"")},e("DESKTOP")),Zl("div",{onClick:()=>this.setTab(2),class:"tab flexItem "+(2===n?"tabactive":"")},e("MOBILE")))),Zl("div",{style:{display:1===n?"none":"block"}},Zl("div",{class:"flexContainer"},Zl("div",{class:"flexItem",style:{textAlign:"center",marginTop:"4"}},Zl("div",{class:"center",id:"sdk-mm-qrcode",innerHTML:r}),Zl("div",{class:"connectMobileText"},e("SCAN_TO_CONNECT"),Zl("br",null),Zl("span",{class:"blue"},Zl("b",null,e("META_MASK_MOBILE_APP"))))))),Zl("div",{style:{display:2===n?"none":"block"}},Zl("div",{style:{display:"flex",justifyContent:"center",height:"300",marginTop:"-20"}},Zl(ud,null)),Zl("div",{class:"extensionLabel"},e("SELECT_MODAL.CRYPTO_TAKE_CONTROL_TEXT")),Zl("button",{class:"button",onClick:()=>this.connectWithExtensionHandler()},Zl(ld,null),Zl("span",{class:"installExtensionText"},e("CONNECT_WITH_EXTENSION"))))),Zl(Gm,{version:t})))}get el(){return nu(this)}static get watchers(){return{preferDesktop:["updatePreferDesktop"]}}},dd.style=".flexContainer {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: row;\n}\n\n.flexItem {\n    flex: 1;\n    justify-content: center;\n    align-items: center;\n}\n\n.flexItem11 {\n    flex: 11;\n    justify-content: center;\n    align-items: center;\n}\n\n.flexItem1 {\n    flex: 1;\n    justify-content: center;\n    align-items: center;\n}\n\n.tab {\n    padding: 8px;\n    cursor: pointer;\n    background-color: #F2F4F6;\n    font-size: 12px;\n    text-align: center;\n    color: #24292E;\n}\n\n.tabcontainer {\n    padding: 4px;\n    background-color: #F2F4F6;\n    border-radius: 8px;\n    margin-bottom: 30px;\n    margin-top: 30px;\n}\n\n.tabactive {\n    background-color: white;\n    -webkit-transition: background-color 300ms linear;\n    -ms-transition: background-color 300ms linear;\n    transition: background-color 300ms linear;\n    border-radius: 8px;\n}\n\n.item {\n    font-size: 12px;\n    margin-bottom: 16px;\n    border-radius: 8px;\n    padding: 10px;\n    border: 2px #F2F4F6 solid;\n    color: #24292E;\n}\n\n.extensionLabel {\n    font-style: normal;\n    font-weight: bold;\n    font-size: 14px;\n    text-align: cetner;\n    color: #24272A;\n}\n\n.notice {\n    font-size: 12px;\n    margin-left: 10px;\n    margin-right: 10px;\n    color: grey;\n}\n\n.button {\n    margin-top: 41.5px;\n    margin-bottom: 20px;\n    width: 100%;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    padding: 12px 20px;\n    background: #037DD6;\n    border-radius: 32px;\n    color: white;\n    border: 0;\n    font-size: 14px;\n    cursor: pointer;\n}\n\n.backdrop {\n    visibility: visible;\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    width: 100%;\n    z-index: 99998;\n    background: rgba(0, 0, 0, 0.87);\n    opacity: 0.3;\n}\n\n.modal {\n    visibility: visible;\n    position: fixed;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    z-index: 99999;\n    background: white;\n    padding: 20px;\n    border-radius: 8px;\n    top: 50%;\n    max-width: 100%;\n    width: 460px;\n    min-width: 300px;\n    box-shadow: rgba(0, 0, 0, 0.2) 0px 11px 15px -7px, rgba(0, 0, 0, 0.14) 0px 24px 38px 3px, rgba(0, 0, 0, 0.12) 0px 9px 46px 8px;\n    -webkit-font-smoothing: antialiased;\n}\n\n.closeButton {\n    color: #BBC0C5;\n    cursor: pointer;\n}\n\n.logoContainer {\n    margin-left: 24px;\n    margin-right: 24px;\n    margin-top: 24px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.connectMobileText {\n    font-size: 14px;\n    color: black;\n    margin-top: 28px;\n    margin-bottom: 28px;\n    line-height: 2;\n}\n\n.blue {\n    color: #037DD6;\n    font-weight: 700;\n}\n\n.installExtensionText {\n    margin-left: 10px;\n}\n\n.center {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.right {\n    display: flex;\n    align-items: center;\n    justify-content: right;\n}\n\n#sdk-mm-qrcode {\n    svg {\n        width: 50%;\n    }\n}",hd=Object.freeze({__proto__:null,mm_install_modal:sd,mm_pending_modal:cd,mm_select_modal:dd})}}})}();