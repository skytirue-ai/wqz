!function(){var e=["baseUrl","Request","fetch","querySerializer","bodySerializer","headers","requestInitExt"],t=["baseUrl","fetch","Request","headers","params","parseAs","querySerializer","bodySerializer","body"],n=["message","explanation"];function r(e,t,n,r){var o=i(d(1&r?e.prototype:e),t,n);return 2&r&&"function"==typeof o?function(e){return o.apply(n,e)}:o}function i(){return i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},i.apply(null,arguments)}function o(e,t,n){return t=d(t),function(e,t){if(t&&("object"==D(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return a(e)}(e,u()?Reflect.construct(t,n||[],d(e).constructor):t.apply(e,n))}function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}function c(e){var t="function"==typeof Map?new Map:void 0;return c=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(u())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var i=new(e.bind.apply(e,r));return n&&l(i,n.prototype),i}(e,arguments,d(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),l(n,e)},c(e)}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,I(r.key),r)}}function h(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function m(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function g(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){m(o,r,i,a,s,"next",e)}function s(e){m(o,r,i,a,s,"throw",e)}a(void 0)})}}function y(e){return R(e)||k(e)||T(e)||M()}function b(e){var t=Object(e),n=[];for(var r in t)n.unshift(r);return function e(){for(;n.length;)if((r=n.pop())in t)return e.value=r,e.done=!1,e;return e.done=!0,e}}function w(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw new TypeError(D(e)+" is not iterable")}function E(e){return function(e){if(Array.isArray(e))return O(e)}(e)||k(e)||T(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return S(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach(function(t){P(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function x(e,t){return R(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||T(e,t)||M()}function M(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function T(e,t){if(e){if("string"==typeof e)return O(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function R(e){if(Array.isArray(e))return e}function P(e,t,n){return(t=I(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e){var t=function(e,t){if("object"!=D(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=D(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==D(t)?t:t+""}function L(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var c=r&&r.prototype instanceof s?r:s,u=Object.create(c.prototype);return N(u,"_invoke",function(n,r,i){var o,s,c,u=0,l=i||[],d=!1,f={p:0,n:0,v:e,a:h,f:h.bind(e,4),d:function(t,n){return o=t,s=0,c=e,f.n=n,a}};function h(n,r){for(s=n,c=r,t=0;!d&&u&&!i&&t<l.length;t++){var i,o=l[t],h=f.p,p=o[2];n>3?(i=p===r)&&(c=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=e):o[0]<=h&&((i=n<2&&h<o[1])?(s=0,f.v=r,f.n=o[1]):h<p&&(i=n<3||o[0]>r||r>p)&&(o[4]=n,o[5]=r,f.n=p,s=0))}if(i||n>1)return a;throw d=!0,r}return function(i,l,p){if(u>1)throw TypeError("Generator is already running");for(d&&1===l&&h(l,p),s=l,c=p;(t=s<2?e:c)||!d;){o||(s?s<3?(s>1&&(f.n=-1),h(s,c)):f.n=c:f.v=c);try{if(u=2,o){if(s||(i="next"),t=o[i]){if(!(t=t.call(o,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=o.return)&&t.call(o),s<2&&(c=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=e}else if((t=(d=f.n<0)?c:n.call(r,f))!==a)break}catch(t){o=e,s=1,c=t}finally{u=1}}return{value:t,done:d}}}(n,i,o),!0),u}var a={};function s(){}function c(){}function u(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(N(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(l);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,N(e,i,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=u,N(d,"constructor",u),N(u,"constructor",c),c.displayName="GeneratorFunction",N(u,i,"GeneratorFunction"),N(d),N(d,i,"Generator"),N(d,r,function(){return this}),N(d,"toString",function(){return"[object Generator]"}),(L=function(){return{w:o,m:f}})()}function N(e,t,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}N=function(e,t,n,r){function o(t,n){N(e,t,function(e){return this._invoke(t,n,e)})}t?i?i(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(o("next",0),o("throw",1),o("return",2))},N(e,t,n,r)}function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}System.register(["./rolldown-runtime-legacy-DPuTtRrT.js","./vendor-legacy-BtxBVL23.js","./index-legacy-CE64ilFR.js"],function(i,u){var l,d,f,m,k,S,C,M,T,O,R,I,N,B,j,K,U,H,F,z,q,$,W,V,G,Y,Z,J,Q,X,ee,te,ne,re,ie,oe,ae,se,ce,ue,le,de,fe,he,pe,ve,me,ge,ye,be,we,Ee,ke,_e,Se,Ce,Ae,xe,Me,Te,Oe,Re,Pe,Ie,Le,Ne,De,Be,je,Ke,Ue,He,Fe,ze,qe,$e,We,Ve,Ge,Ye,Ze,Je,Qe,Xe,et,tt,nt,rt,it,ot,at,st,ct,ut,lt,dt,ft,ht,pt,vt,mt,gt,yt,bt,wt,Et,kt,_t,St,Ct,At,xt,Mt,Tt,Ot,Rt,Pt,It,Lt,Nt,Dt,Bt,jt,Kt,Ut,Ht,Ft,zt,qt,$t,Wt,Vt,Gt,Yt,Zt,Jt,Qt,Xt,en,tn,nn,rn,on,an,sn,cn,un,ln,dn,fn,hn,pn,vn,mn,gn,yn,bn,wn,En,kn,_n,Sn,Cn,An,xn,Mn,Tn,On,Rn,Pn,In,Ln,Nn,Dn,Bn,jn,Kn,Un,Hn,Fn,zn,qn,$n,Wn,Vn,Gn,Yn,Zn,Jn,Qn,Xn,er,tr,nr,rr,ir,or,ar,sr,cr,ur,lr,dr,fr,hr,pr,vr,mr,gr,yr,br,wr,Er,kr,_r,Sr,Cr,Ar,xr,Mr,Tr,Or,Rr,Pr,Ir,Lr,Nr,Dr,Br,jr,Kr,Ur,Hr,Fr,zr,qr,$r,Wr,Vr,Gr,Yr,Zr,Jr,Qr,Xr,ei,ti,ni,ri,ii,oi,ai,si,ci,ui,li,di,fi,hi,pi,vi,mi,gi,yi,bi,wi,Ei,ki,_i,Si,Ci,Ai,xi,Mi,Ti,Oi,Ri,Pi,Ii,Li,Ni,Di,Bi,ji,Ki,Ui,Hi,Fi,zi,qi,$i,Wi,Vi,Gi,Yi,Zi,Ji,Qi,Xi,eo,to,no,ro,io,oo,ao,so,co,uo,lo,fo,ho,po,vo,mo,go,yo,bo,wo,Eo,ko,_o,So,Co,Ao,xo,Mo,To,Oo,Ro,Po,Io,Lo,No,Do,Bo,jo,Ko,Uo,Ho,Fo,zo,qo,$o,Wo,Vo,Go,Yo,Zo,Jo,Qo,Xo,ea,ta,na,ra,ia,oa,aa,sa,ca,ua,la,da,fa,ha,pa,va,ma,ga,ya,ba,wa,Ea,ka,_a,Sa,Ca,Aa,xa,Ma,Ta,Oa,Ra,Pa,Ia,La,Na,Da,Ba,ja,Ka,Ua,Ha,Fa,za,qa,$a,Wa,Va,Ga,Ya,Za,Ja,Qa,Xa,es,ts,ns,rs,is,os,as,ss,cs,us,ls,ds,fs,hs,ps,vs,ms,gs,ys,bs,ws,Es,ks,_s,Ss,Cs,As,xs,Ms,Ts,Os,Rs,Ps,Is,Ls,Ns,Ds,Bs,js,Ks,Us,Hs,Fs,zs,qs,$s,Ws,Vs,Gs,Ys,Zs,Js,Qs,Xs,ec,tc,nc,rc,ic,oc,ac,sc,cc,uc,lc,dc,fc,hc,pc,vc,mc,gc,yc,bc,wc,Ec,kc,_c,Sc,Cc,Ac,xc,Mc,Tc,Oc,Rc,Pc,Ic,Lc,Nc,Dc,Bc,jc,Kc,Uc,Hc,Fc,zc,qc,$c,Wc,Vc,Gc,Yc,Zc,Jc,Qc,Xc,eu,tu,nu,ru,iu,ou,au,su,cu,uu,lu,du,fu,hu,pu,vu,mu,gu,yu,bu,wu,Eu,ku,_u,Su,Cu,Au,xu,Mu,Tu,Ou,Ru,Pu,Iu,Lu,Nu,Du,Bu,ju,Ku,Uu,Hu,Fu,zu,qu,$u,Wu,Vu,Gu,Yu,Zu,Ju,Qu,Xu,el,tl,nl,rl,il,ol,al,sl,cl,ul,ll,dl,fl,hl,pl,vl,ml,gl,yl,bl,wl,El,kl,_l,Sl,Cl,Al,xl,Ml,Tl,Ol,Rl,Pl,Il,Ll,Nl,Dl,Bl,jl,Kl,Ul,Hl,Fl,zl,ql,$l,Wl,Vl,Gl,Yl,Zl,Jl,Ql,Xl,ed,td,nd,rd,id,od,ad,sd,cd,ud,ld,dd,fd,hd,pd,vd,md,gd,yd,bd,wd,Ed,kd,_d=L().m(bp);function Sd(){if(!N&&!(N="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return N(B)}function Cd(e){return"string"==typeof e&&j.test(e)}function Ad(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(U[e[t+0]]+U[e[t+1]]+U[e[t+2]]+U[e[t+3]]+"-"+U[e[t+4]]+U[e[t+5]]+"-"+U[e[t+6]]+U[e[t+7]]+"-"+U[e[t+8]]+U[e[t+9]]+"-"+U[e[t+10]]+U[e[t+11]]+U[e[t+12]]+U[e[t+13]]+U[e[t+14]]+U[e[t+15]]).toLowerCase();if(!K(n))throw TypeError("Stringified UUID is invalid");return n}function xd(e,t,n){var r=(e=e||{}).random||(e.rng||Sd)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return F(r)}function Md(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}function Td(){return new TransformStream({transform:function(e,t){!function(e,t){J&&e.data instanceof Blob?e.data.arrayBuffer().then(Md).then(t):Q&&(e.data instanceof ArrayBuffer||X(e.data))?t(Md(e.data)):ee(e,!1,function(e){ne||(ne=new TextEncoder),t(ne.encode(e))})}(e,function(n){var r,i=n.length;if(i<126)r=new Uint8Array(1),new DataView(r.buffer).setUint8(0,i);else if(i<65536){r=new Uint8Array(3);var o=new DataView(r.buffer);o.setUint8(0,126),o.setUint16(1,i)}else{r=new Uint8Array(9);var a=new DataView(r.buffer);a.setUint8(0,127),a.setBigUint64(1,BigInt(i))}e.data&&"string"!=typeof e.data&&(r[0]|=128),t.enqueue(r),t.enqueue(n)})}})}function Od(e){return e.reduce(function(e,t){return e+t.length},0)}function Rd(e,t){if(e[0].length===t)return e.shift();for(var n=new Uint8Array(t),r=0,i=0;i<t;i++)n[i]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function Pd(e){if(e)return function(e){for(var t in Pd.prototype)e[t]=Pd.prototype[t];return e}(e)}function Id(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce(function(t,n){return e.hasOwnProperty(n)&&(t[n]=e[n]),t},{})}function Ld(e,t){t.useNativeTimers?(e.setTimeoutFn=ve.bind(pe),e.clearTimeoutFn=me.bind(pe)):(e.setTimeoutFn=pe.setTimeout.bind(pe),e.clearTimeoutFn=pe.clearTimeout.bind(pe))}function Nd(e){return"string"==typeof e?function(e){for(var t=0,n=0,r=0,i=e.length;r<i;r++)(t=e.charCodeAt(r))<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}(e):Math.ceil((e.byteLength||e.size)*ge)}function Dd(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Bd(){}function jd(){for(var e in Se.requests)Se.requests.hasOwnProperty(e)&&Se.requests[e].abort()}function Kd(e){var t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||ke))return new XMLHttpRequest}catch(n){}if(!t)try{return new(pe[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(n){}}function Ud(e){if(e.length>8e3)throw"URI too long";var t=e,n=e.indexOf("["),r=e.indexOf("]");-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));for(var i,o,a=Ie.exec(e||""),s={},c=14;c--;)s[Le[c]]=a[c]||"";return-1!=n&&-1!=r&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=function(e,t){var n=t.replace(/\/{2,9}/g,"/").split("/");"/"!=t.slice(0,1)&&0!==t.length||n.splice(0,1);"/"==t.slice(-1)&&n.splice(n.length-1,1);return n}(0,s.path),s.queryKey=(i=s.query,o={},i.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,t,n){t&&(o[t]=n)}),o),s}function Hd(e){return Ue&&(e instanceof ArrayBuffer||He(e))||ze&&e instanceof Blob||qe&&e instanceof File}function Fd(e,t){if(!e||"object"!==D(e))return!1;if(Array.isArray(e)){for(var n=0,r=e.length;n<r;n++)if(Fd(e[n]))return!0;return!1}if(Hd(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return Fd(e.toJSON(),!0);for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&Fd(e[i]))return!0;return!1}function zd(e){var t=[],n=e.data,r=e;return r.data=qd(n,t),r.attachments=t.length,{packet:r,buffers:t}}function qd(e,t){if(!e)return e;if(Hd(e)){var n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){for(var r=new Array(e.length),i=0;i<e.length;i++)r[i]=qd(e[i],t);return r}if("object"===D(e)&&!(e instanceof Date)){var o={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(o[a]=qd(e[a],t));return o}return e}function $d(e,t){return e.data=Wd(e.data,t),delete e.attachments,e}function Wd(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"==typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(var n=0;n<e.length;n++)e[n]=Wd(e[n],t);else if("object"===D(e))for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=Wd(e[r],t));return e}function Vd(e){return"[object Object]"===Object.prototype.toString.call(e)}function Gd(e,t,n){return e.on(t,n),function(){e.off(t,n)}}function Yd(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}function Zd(e,t){"object"===D(e)&&(t=e,e=void 0);var n,r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=e;n=n||"undefined"!=typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==n?n.protocol+"//"+e:"https://"+e),r=Ud(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var i=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+t,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}(e,(t=t||{}).path||"/socket.io"),i=r.source,o=r.id,a=r.path,s=et[o]&&a in et[o].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||s?n=new Xe(i,t):(et[o]||(et[o]=new Xe(i,t)),n=et[o]),r.query&&!t.query&&(t.query=r.queryKey),n.socket(r.path,t)}function Jd(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(t){o(t)}}function s(e){try{c(r.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})}function Qd(){ot=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0;t<64;++t)nt[t]=e[t],rt[e.charCodeAt(t)]=t;rt["-".charCodeAt(0)]=62,rt["_".charCodeAt(0)]=63}function Xd(e,t,n){for(var r,i,o=[],a=t;a<n;a+=3)r=(e[a]<<16)+(e[a+1]<<8)+e[a+2],o.push(nt[(i=r)>>18&63]+nt[i>>12&63]+nt[i>>6&63]+nt[63&i]);return o.join("")}function ef(e){var t;ot||Qd();for(var n=e.length,r=n%3,i="",o=[],a=16383,s=0,c=n-r;s<c;s+=a)o.push(Xd(e,s,s+a>c?c:s+a));return 1===r?(t=e[n-1],i+=nt[t>>2],i+=nt[t<<4&63],i+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],i+=nt[t>>10],i+=nt[t>>4&63],i+=nt[t<<2&63],i+="="),o.push(i),o.join("")}function tf(e,t,n,r,i){var o,a,s=8*i-r-1,c=(1<<s)-1,u=c>>1,l=-7,d=n?i-1:0,f=n?-1:1,h=e[t+d];for(d+=f,o=h&(1<<-l)-1,h>>=-l,l+=s;l>0;o=256*o+e[t+d],d+=f,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+e[t+d],d+=f,l-=8);if(0===o)o=1-u;else{if(o===c)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=u}return(h?-1:1)*a*Math.pow(2,o-r)}function nf(e,t,n,r,i,o){var a,s,c,u=8*o-i-1,l=(1<<u)-1,d=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,p=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+d>=1?f/c:f*Math.pow(2,1-d))*c>=2&&(a++,c/=2),a+d>=l?(s=0,a=l):a+d>=1?(s=(t*c-1)*Math.pow(2,i),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[n+h]=255&s,h+=p,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[n+h]=255&a,h+=p,a/=256,u-=8);e[n+h-p]|=128*v}function rf(){return af.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function of(e,t){if(rf()<t)throw new RangeError("Invalid typed array length");return af.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=af.prototype:(null===e&&(e=new af(t)),e.length=t),e}function af(e,t,n){if(!(af.TYPED_ARRAY_SUPPORT||this instanceof af))return new af(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return uf(this,e)}return sf(this,e,t,n)}function sf(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),af.TYPED_ARRAY_SUPPORT?(e=t).__proto__=af.prototype:e=lf(e,t),e}(e,t,n,r):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!af.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|hf(t,n),i=(e=of(e,r)).write(t,n);return i!==r&&(e=e.slice(0,i)),e}(e,t,n):function(e,t){if(ff(t)){var n=0|df(t.length);return 0===(e=of(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?of(e,0):lf(e,t);if("Buffer"===t.type&&st(t.data))return lf(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function cf(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function uf(e,t){if(cf(t),e=of(e,t<0?0:0|df(t)),!af.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function lf(e,t){var n=t.length<0?0:0|df(t.length);e=of(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function df(e){if(e>=rf())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+rf().toString(16)+" bytes");return 0|e}function ff(e){return!(null==e||!e._isBuffer)}function hf(e,t){if(ff(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return jf(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Kf(e).length;default:if(r)return jf(e).length;t=(""+t).toLowerCase(),r=!0}}function pf(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return Mf(this,t,n);case"utf8":case"utf-8":return Cf(this,t,n);case"ascii":return Af(this,t,n);case"latin1":case"binary":return xf(this,t,n);case"base64":return Sf(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Tf(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function vf(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function mf(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=af.from(t,r)),ff(t))return 0===t.length?-1:gf(e,t,n,r,i);if("number"==typeof t)return t&=255,af.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):gf(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function gf(e,t,n,r,i){var o,a=1,s=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,n/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var l=-1;for(o=n;o<s;o++)if(u(e,o)===u(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===c)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+c>s&&(n=s-c),o=n;o>=0;o--){for(var d=!0,f=0;f<c;f++)if(u(e,o+f)!==u(t,f)){d=!1;break}if(d)return o}return-1}function yf(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function bf(e,t,n,r){return Uf(jf(t,e.length-n),e,n,r)}function wf(e,t,n,r){return Uf(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function Ef(e,t,n,r){return wf(e,t,n,r)}function kf(e,t,n,r){return Uf(Kf(t),e,n,r)}function _f(e,t,n,r){return Uf(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function Sf(e,t,n){return 0===t&&n===e.length?ef(e):ef(e.slice(t,n))}function Cf(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,c,u=e[i],l=null,d=u>239?4:u>223?3:u>191?2:1;if(i+d<=n)switch(d){case 1:u<128&&(l=u);break;case 2:128==(192&(o=e[i+1]))&&(c=(31&u)<<6|63&o)>127&&(l=c);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(c=(15&u)<<12|(63&o)<<6|63&a)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(c=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(l=c)}null===l?(l=65533,d=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=d}return function(e){var t=e.length;if(t<=ut)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=ut));return n}(r)}function Af(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function xf(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function Mf(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=Bf(e[o]);return i}function Tf(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function Of(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function Rf(e,t,n,r,i,o){if(!ff(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function Pf(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function If(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function Lf(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function Nf(e,t,n,r,i){return i||Lf(e,0,n,4),nf(e,t,n,r,23,4),n+4}function Df(e,t,n,r,i){return i||Lf(e,0,n,8),nf(e,t,n,r,52,8),n+8}function Bf(e){return e<16?"0"+e.toString(16):e.toString(16)}function jf(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function Kf(e){return function(e){var t,n,r,i,o,a;ot||Qd();var s=e.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o="="===e[s-2]?2:"="===e[s-1]?1:0,a=new it(3*s/4-o),r=o>0?s-4:s;var c=0;for(t=0,n=0;t<r;t+=4,n+=3)i=rt[e.charCodeAt(t)]<<18|rt[e.charCodeAt(t+1)]<<12|rt[e.charCodeAt(t+2)]<<6|rt[e.charCodeAt(t+3)],a[c++]=i>>16&255,a[c++]=i>>8&255,a[c++]=255&i;return 2===o?(i=rt[e.charCodeAt(t)]<<2|rt[e.charCodeAt(t+1)]>>4,a[c++]=255&i):1===o&&(i=rt[e.charCodeAt(t)]<<10|rt[e.charCodeAt(t+1)]<<4|rt[e.charCodeAt(t+2)]>>2,a[c++]=i>>8&255,a[c++]=255&i),a}(function(e){if((e=(t=e,t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(lt,"")).length<2)return"";for(var t;e.length%4!=0;)e+="=";return e}(e))}function Uf(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function Hf(e){return null!=e&&(!!e._isBuffer||Ff(e)||"function"==typeof(t=e).readFloatLE&&"function"==typeof t.slice&&Ff(t.slice(0,0)));var t}function Ff(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function zf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function qf(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})}),n}function $f(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, not ".concat(e))}function Wf(e){if("boolean"!=typeof e)throw new Error("boolean expected, not ".concat(e))}function Vf(e){return e instanceof Uint8Array||null!=e&&"object"==D(e)&&"Uint8Array"===e.constructor.name}function Gf(e){if(!Vf(e))throw new Error("Uint8Array expected");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(n.length>0&&!n.includes(e.length))throw new Error("Uint8Array expected of length ".concat(n,", not of length=").concat(e.length))}function Yf(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("hash must be wrapped by utils.wrapConstructor");$f(e.outputLen),$f(e.blockLen)}function Zf(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Jf(e,t){Gf(e);var n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least ".concat(n))}function Qf(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, not ".concat(e))}function Xf(e){if("boolean"!=typeof e)throw new Error("boolean expected, not ".concat(e))}function eh(e){return e instanceof Uint8Array||null!=e&&"object"==D(e)&&"Uint8Array"===e.constructor.name}function th(e){if(!eh(e))throw new Error("Uint8Array expected");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(n.length>0&&!n.includes(e.length))throw new Error("Uint8Array expected of length ".concat(n,", not of length=").concat(e.length))}function nh(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");Qf(e.outputLen),Qf(e.blockLen)}function rh(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function ih(e,t){th(e);var n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least ".concat(n))}function oh(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?{h:Number(e&It),l:Number(e>>Lt&It)}:{h:0|Number(e>>Lt&It),l:0|Number(e&It)}}function ah(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new Uint32Array(e.length),r=new Uint32Array(e.length),i=0;i<e.length;i++){var o,a=oh(e[i],t);o=[a.h,a.l],n[i]=o[0],r[i]=o[1]}return[n,r]}function sh(e,t,n,r){var i=(t>>>0)+(r>>>0);return{h:e+n+(i/Math.pow(2,32)|0)|0,l:0|i}}function ch(e){return e instanceof Uint8Array||null!=e&&"object"==D(e)&&"Uint8Array"===e.constructor.name}function uh(e){if(!ch(e))throw new Error("Uint8Array expected")}function lh(e){uh(e);for(var t="",n=0;n<e.length;n++)t+=bn[e[n]];return t}function dh(e){var t=e.toString(16);return 1&t.length?"0".concat(t):t}function fh(e){if("string"!=typeof e)throw new Error("hex string expected, got "+D(e));return BigInt(""===e?"0":"0x".concat(e))}function hh(e){return e>=wn._0&&e<=wn._9?e-wn._0:e>=wn._A&&e<=wn._F?e-(wn._A-10):e>=wn._a&&e<=wn._f?e-(wn._a-10):void 0}function ph(e){if("string"!=typeof e)throw new Error("hex string expected, got "+D(e));var t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);for(var r=new Uint8Array(n),i=0,o=0;i<n;i++,o+=2){var a=hh(e.charCodeAt(o)),s=hh(e.charCodeAt(o+1));if(void 0===a||void 0===s){var c=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+o)}r[i]=16*a+s}return r}function vh(e,t){return ph(e.toString(16).padStart(2*t,"0"))}function mh(){for(var e=0,t=0;t<arguments.length;t++){var n=t<0||arguments.length<=t?void 0:arguments[t];uh(n),e+=n.length}for(var r=new Uint8Array(e),i=0,o=0;i<arguments.length;i++){var a=i<0||arguments.length<=i?void 0:arguments[i];r.set(a,o),o+=a.length}return r}function gh(e,t,n){return En(e)&&En(t)&&En(n)&&t<=e&&e<n}function yh(e,t){var n=e%t;return n>=An?n:t+n}function bh(e,t,n){if(n<=An||t<An)throw new Error("Expected power/modulo > 0");if(n===xn)return An;for(var r=xn;t>An;)t&xn&&(r=r*e%n),e=e*e%n,t>>=xn;return r}function wh(e,t){if(e===An||t<=An)throw new Error("invert: expected positive integers, got n=".concat(e," mod=").concat(t));for(var n=yh(e,t),r=t,i=An,o=xn;n!==An;){var a=r%n,s=i-o*(r/n);r=n,n=a,i=o,o=s}if(r!==xn)throw new Error("invert: does not exist");return yh(i,t)}function Eh(e){var t,n,r,i=(e-xn)/Mn;for(t=e-xn,n=0;t%Mn===An;t/=Mn,n++);for(r=Mn;r<e&&bh(r,i,e)!==e-xn;r++);if(1===n){var o=(e+xn)/On;return function(e,t){var n=e.pow(t,o);if(!e.eql(e.sqr(n),t))throw new Error("Cannot find square root");return n}}var a=(t+xn)/Mn;return function(e,o){if(e.pow(o,i)===e.neg(e.ONE))throw new Error("Cannot find square root");for(var s=n,c=e.pow(e.mul(e.ONE,r),t),u=e.pow(o,a),l=e.pow(o,t);!e.eql(l,e.ONE);){if(e.eql(l,e.ZERO))return e.ZERO;for(var d=1,f=e.sqr(l);d<s&&!e.eql(f,e.ONE);d++)f=e.sqr(f);var h=e.pow(c,xn<<BigInt(s-d-1));c=e.sqr(h),u=e.mul(u,h),l=e.mul(l,c),s=d}return u}}function kh(e){if(e%On===Tn){var t=(e+xn)/On;return function(e,n){var r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}if(e%Pn===Rn){var n=(e-Rn)/Pn;return function(e,t){var r=e.mul(t,Mn),i=e.pow(r,n),o=e.mul(t,i),a=e.mul(e.mul(o,Mn),i),s=e.mul(o,e.sub(a,e.ONE));if(!e.eql(e.sqr(s),t))throw new Error("Cannot find square root");return s}}return Eh(e)}function _h(e,t,n){if(n<An)throw new Error("Expected power > 0");if(n===An)return e.ONE;if(n===xn)return t;for(var r=e.ONE,i=t;n>An;)n&xn&&(r=e.mul(r,i)),i=e.sqr(i),n>>=xn;return r}function Sh(e,t){var n=new Array(t.length),r=t.reduce(function(t,r,i){return e.is0(r)?t:(n[i]=t,e.mul(t,r))},e.ONE),i=e.inv(r);return t.reduceRight(function(t,r,i){return e.is0(r)?t:(n[i]=e.mul(t,n[i]),e.mul(t,r))},i),n}function Ch(e){var t=(e-xn)/Mn;return function(e,n){return e.pow(n,t)}}function Ah(e,t){var n=void 0!==t?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function xh(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");var t=e.toString(2).length;return Math.ceil(t/8)}function Mh(e){var t=xh(e);return t+Math.ceil(t/2)}function Th(e,t){if(Rh(e),Rh(t),e<0||e>=1<<8*t)throw new Error("bad I2OSP call: value=".concat(e," length=").concat(t));for(var n=Array.from({length:t}).fill(0),r=t-1;r>=0;r--)n[r]=255&e,e>>>=8;return new Uint8Array(n)}function Oh(e,t){for(var n=new Uint8Array(e.length),r=0;r<e.length;r++)n[r]=e[r]^t[r];return n}function Rh(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function Ph(e,t,n,r){(0,Jn.abytes)(e),(0,Jn.abytes)(t),Rh(n),t.length>255&&(t=r((0,Jn.concatBytes)((0,Jn.utf8ToBytes)("H2C-OVERSIZE-DST-"),t)));var i=r.outputLen,o=r.blockLen,a=Math.ceil(n/i);if(n>65535||a>255)throw new Error("expand_message_xmd: invalid lenInBytes");var s=(0,Jn.concatBytes)(t,Th(t.length,1)),c=Th(0,o),u=Th(n,2),l=new Array(a),d=r((0,Jn.concatBytes)(c,e,u,Th(0,1),s));l[0]=r((0,Jn.concatBytes)(d,Th(1,1),s));for(var f=1;f<=a;f++){var h=[Oh(d,l[f-1]),Th(f+1,1),s];l[f]=r(Jn.concatBytes.apply(void 0,h))}return Jn.concatBytes.apply(void 0,l).slice(0,n)}function Ih(e,t,n,r,i){if((0,Jn.abytes)(e),(0,Jn.abytes)(t),Rh(n),t.length>255){var o=Math.ceil(2*r/8);t=i.create({dkLen:o}).update((0,Jn.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(t).digest()}if(n>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:n}).update(e).update(Th(n,2)).update(t).update(Th(t.length,1)).digest()}function Lh(e,t,n){(0,Jn.validateObject)(n,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});var r=n.p,i=n.k,o=n.m,a=n.hash,s=n.expand,c=n.DST;(0,Jn.abytes)(e),Rh(t);var u,l="string"==typeof c?(0,Jn.utf8ToBytes)(c):c,d=r.toString(2).length,f=Math.ceil((d+i)/8),h=t*o*f;if("xmd"===s)u=Ph(e,l,h,a);else if("xof"===s)u=Ih(e,l,h,i,a);else{if("_internal_pass"!==s)throw new Error('expand must be "xmd" or "xof"');u=e}for(var p=new Array(t),v=0;v<t;v++){for(var m=new Array(o),g=0;g<o;g++){var y=f*(g+v*o),b=u.subarray(y,y+f);m[g]=(0,Zn.mod)(Qn(b),r)}p[v]=m}return p}function Nh(e){return{hash:e,hmac:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(0,mr.hmac)(e,t,gr.concatBytes.apply(void 0,r))},randomBytes:gr.randomBytes}}function Dh(e,t,n){return(0,kr.hash)(e),void 0===n&&(n=new Uint8Array(e.outputLen)),(0,Sr.hmac)(e,(0,_r.toBytes)(n),(0,_r.toBytes)(t))}function Bh(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32;if((0,kr.hash)(e),(0,kr.number)(r),r>255*e.outputLen)throw new Error("Length should be <= 255*HashLen");var i=Math.ceil(r/e.outputLen);void 0===n&&(n=Ar);for(var o=new Uint8Array(i*e.outputLen),a=Sr.hmac.create(e,t),s=a._cloneInto(),c=new Uint8Array(a.outputLen),u=0;u<i;u++)Cr[0]=u+1,s.update(0===u?Ar:c).update(n).update(Cr).digestInto(c),o.set(c,e.outputLen*u),a._cloneInto(s);return a.destroy(),s.destroy(),c.fill(0),Cr.fill(0),o.slice(0,r)}function jh(e){e.reverse();for(var t=1&e[15],n=0,r=0;r<e.length;r++){var i=e[r];e[r]=i>>>1|n,n=(1&i)<<7}return e[0]^=225&-t,e}function Kh(e){var t=function(t,n){return e(n,t.length).update((0,Pr.toBytes)(t)).digest()},n=e(new Uint8Array(16),0);return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=function(t,n){return e(t,n)},t}function Uh(e){return e<<1^qr&-(e>>7)}function Hh(e,t){for(var n=0;t>0;t>>=1)n^=e&-(1&t),e=Uh(e);return n}function Fh(e,t){if(256!==e.length)throw new Error("Wrong sbox length");for(var n=new Uint32Array(256).map(function(n,r){return t(e[r])}),r=n.map(Gr),i=r.map(Gr),o=i.map(Gr),a=new Uint32Array(65536),s=new Uint32Array(65536),c=new Uint16Array(65536),u=0;u<256;u++)for(var l=0;l<256;l++){var d=256*u+l;a[d]=n[u]^r[l],s[d]=i[u]^o[l],c[d]=e[u]<<8|e[l]}return{sbox:e,sbox2:c,T0:n,T1:r,T2:i,T3:o,T01:a,T23:s}}function zh(e){(0,Kr.bytes)(e);var t=e.length;if(![16,24,32].includes(t))throw new Error("aes: wrong key size: should be 16, 24 or 32, got: ".concat(t));var n=Zr.sbox2,r=[];(0,Hr.isAligned32)(e)||r.push(e=(0,Hr.copyBytes)(e));var i=(0,Hr.u32)(e),o=i.length,a=function(e){return Wh(n,e,e,e,e)},s=new Uint32Array(t+28);s.set(i);for(var c=o;c<s.length;c++){var u=s[c-1];c%o==0?u=a(Vr(u))^Qr[c/o-1]:o>6&&c%o==4&&(u=a(u)),s[c]=s[c-o]^u}return Hr.clean.apply(void 0,r),s}function qh(e){for(var t=zh(e),n=t.slice(),r=t.length,i=Zr.sbox2,o=Jr,a=o.T0,s=o.T1,c=o.T2,u=o.T3,l=0;l<r;l+=4)for(var d=0;d<4;d++)n[l+d]=t[r-l-4+d];(0,Hr.clean)(t);for(var f=4;f<r-4;f++){var h=n[f],p=Wh(i,h,h,h,h);n[f]=a[255&p]^s[p>>>8&255]^c[p>>>16&255]^u[p>>>24]}return n}function $h(e,t,n,r,i,o){return e[n<<8&65280|r>>>8&255]^t[i>>>8&65280|o>>>24&255]}function Wh(e,t,n,r,i){return e[255&t|65280&n]|e[r>>>16&255|i>>>16&65280]<<16}function Vh(e,t,n,r,i){var o=Zr,a=o.sbox2,s=o.T01,c=o.T23,u=0;t^=e[u++],n^=e[u++],r^=e[u++],i^=e[u++];for(var l=e.length/4-2,d=0;d<l;d++){var f=e[u++]^$h(s,c,t,n,r,i),h=e[u++]^$h(s,c,n,r,i,t),p=e[u++]^$h(s,c,r,i,t,n),v=e[u++]^$h(s,c,i,t,n,r);t=f,n=h,r=p,i=v}return{s0:e[u++]^Wh(a,t,n,r,i),s1:e[u++]^Wh(a,n,r,i,t),s2:e[u++]^Wh(a,r,i,t,n),s3:e[u++]^Wh(a,i,t,n,r)}}function Gh(e,t,n,r,i){var o=Jr,a=o.sbox2,s=o.T01,c=o.T23,u=0;t^=e[u++],n^=e[u++],r^=e[u++],i^=e[u++];for(var l=e.length/4-2,d=0;d<l;d++){var f=e[u++]^$h(s,c,t,i,r,n),h=e[u++]^$h(s,c,n,t,i,r),p=e[u++]^$h(s,c,r,n,t,i),v=e[u++]^$h(s,c,i,r,n,t);t=f,n=h,r=p,i=v}return{s0:e[u++]^Wh(a,t,i,r,n),s1:e[u++]^Wh(a,n,t,i,r),s2:e[u++]^Wh(a,r,n,t,i),s3:e[u++]^Wh(a,i,r,n,t)}}function Yh(e,t){if(void 0===t)return new Uint8Array(e);if((0,Kr.bytes)(t),t.length<e)throw new Error("aes: wrong destination length, expected at least ".concat(e,", got: ").concat(t.length));if(!(0,Hr.isAligned32)(t))throw new Error("unaligned dst");return t}function Zh(e,t,n,r){(0,Kr.bytes)(t,Fr),(0,Kr.bytes)(n);var i=n.length;r=Yh(i,r);for(var o=t,a=(0,Hr.u32)(o),s=Vh(e,a[0],a[1],a[2],a[3]),c=s.s0,u=s.s1,l=s.s2,d=s.s3,f=(0,Hr.u32)(n),h=(0,Hr.u32)(r),p=0;p+4<=f.length;p+=4){h[p+0]=f[p+0]^c,h[p+1]=f[p+1]^u,h[p+2]=f[p+2]^l,h[p+3]=f[p+3]^d;for(var v=1,m=o.length-1;m>=0;m--)v=v+(255&o[m])|0,o[m]=255&v,v>>>=8;var g=Vh(e,a[0],a[1],a[2],a[3]);c=g.s0,u=g.s1,l=g.s2,d=g.s3}var y=Fr*Math.floor(f.length/4);if(y<i){for(var b=new Uint32Array([c,u,l,d]),w=(0,Hr.u8)(b),E=y,k=0;E<i;E++,k++)r[E]=n[E]^w[k];(0,Hr.clean)(b)}return r}function Jh(e,t,n,r,i){(0,Kr.bytes)(n,Fr),(0,Kr.bytes)(r),i=Yh(r.length,i);for(var o=n,a=(0,Hr.u32)(o),s=(0,Hr.createView)(o),c=(0,Hr.u32)(r),u=(0,Hr.u32)(i),l=t?0:12,d=r.length,f=s.getUint32(l,t),h=Vh(e,a[0],a[1],a[2],a[3]),p=h.s0,v=h.s1,m=h.s2,g=h.s3,y=0;y+4<=c.length;y+=4){var b;u[y+0]=c[y+0]^p,u[y+1]=c[y+1]^v,u[y+2]=c[y+2]^m,u[y+3]=c[y+3]^g,f=f+1>>>0,s.setUint32(l,f,t),p=(b=Vh(e,a[0],a[1],a[2],a[3])).s0,v=b.s1,m=b.s2,g=b.s3}var w=Fr*Math.floor(c.length/4);if(w<d){for(var E=new Uint32Array([p,v,m,g]),k=(0,Hr.u8)(E),_=w,S=0;_<d;_++,S++)i[_]=r[_]^k[S];(0,Hr.clean)(E)}return i}function Qh(e){if((0,Kr.bytes)(e),e.length%Fr!=0)throw new Error("aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size 16")}function Xh(e,t,n){(0,Kr.bytes)(e);var r=e.length,i=r%Fr;if(!t&&0!==i)throw new Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");(0,Hr.isAligned32)(e)||(e=(0,Hr.copyBytes)(e));var o=(0,Hr.u32)(e);if(t){var a=Fr-i;a||(a=Fr),r+=a}var s=Yh(r,n);return{b:o,o:(0,Hr.u32)(s),out:s}}function ep(e,t){if(!t)return e;var n=e.length;if(!n)throw new Error("aes/pcks5: empty ciphertext not allowed");var r=e[n-1];if(r<=0||r>16)throw new Error("aes/pcks5: wrong padding");for(var i=e.subarray(0,-r),o=0;o<r;o++)if(e[n-o-1]!==r)throw new Error("aes/pcks5: wrong padding");return i}function tp(e){var t=new Uint8Array(16),n=(0,Hr.u32)(t);t.set(e);for(var r=Fr-e.length,i=Fr-r;i<Fr;i++)t[i]=r;return n}function np(e,t,n,r,i){var o=null==i?0:i.length,a=e.create(n,r.length+o);i&&a.update(i),a.update(r);var s=new Uint8Array(16),c=(0,Hr.createView)(s);i&&(0,Hr.setBigUint64)(c,0,BigInt(8*o),t),(0,Hr.setBigUint64)(c,8,BigInt(8*r.length),t),a.update(s);var u=a.digest();return(0,Hr.clean)(s),u}function rp(e){return null!=e&&"object"==D(e)&&(e instanceof Uint32Array||"Uint32Array"===e.constructor.name)}function ip(e,t){if((0,Kr.bytes)(t,16),!rp(e))throw new Error("_encryptBlock accepts result of expandKeyLE");var n=(0,Hr.u32)(t),r=Vh(e,n[0],n[1],n[2],n[3]),i=r.s0,o=r.s1,a=r.s2,s=r.s3;return n[0]=i,n[1]=o,n[2]=a,n[3]=s,t}function op(e,t){if((0,Kr.bytes)(t,16),!rp(e))throw new Error("_decryptBlock accepts result of expandKeyLE");var n=(0,Hr.u32)(t),r=Gh(e,n[0],n[1],n[2],n[3]),i=r.s0,o=r.s1,a=r.s2,s=r.s3;return n[0]=i,n[1]=o,n[2]=a,n[3]=s,t}function ap(e){return e.byteOffset%4==0}function sp(e){var t=function(t,n){return e(n).update((0,wi.toBytes)(t)).digest()},n=e(new Uint8Array(32));return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=function(t){return e(t)},t}function cp(e){return Gi.includes(e)}function up(e){var t=e.context;Bi.RemoteCommunication("[RemoteCommunication: clean()] context=".concat(t)),e.channelConfig=void 0,e.ready=!1,e.originatorConnectStarted=!1}function lp(e,t){return Jd(this,void 0,void 0,L().m(function n(){var r,i,o;return L().w(function(n){for(;;)if(0===n.n)return i=null===(r=e.state.keyExchange)||void 0===r?void 0:r.encryptMessage(JSON.stringify(t)),o={id:e.state.channelId,context:e.state.context,clientType:e.state.isOriginator?"dapp":"wallet",message:i,plaintext:e.state.hasPlaintext?JSON.stringify(t):void 0},n.a(2,(Bi.SocketService("[SocketService: encryptAndSendMessage()] context=".concat(e.state.context),o),t.type===Xi.TERMINATE&&(e.state.manualDisconnect=!0),new Promise(function(t,n){var r;null===(r=e.state.socket)||void 0===r||r.emit(Zi.MESSAGE,o,function(e,r){var i;e&&(Bi.SocketService("[SocketService: encryptAndSendMessage()] error=".concat(e)),n(e)),Bi.SocketService("[encryptAndSendMessage] response",r),t(null!==(i=null==r?void 0:r.success)&&void 0!==i&&i)})})))},n)}))}function dp(e,t){Bi.SocketService("[SocketService: setupChannelListener()] context=".concat(e.state.context," setting socket listeners for channel ").concat(t,"..."));var n=e.state.socket,r=e.state.keyExchange;n&&e.state.isOriginator&&(e.state.debug&&(null!=n&&n.io.on("error",function(t){Bi.SocketService("[SocketService: setupChannelListener()] context=".concat(e.state.context," socket event=error"),t)}),null!=n&&n.io.on("reconnect",function(t){Bi.SocketService("[SocketService: setupChannelListener()] context=".concat(e.state.context," socket event=reconnect"),t),ao(e).catch(function(e){})}),null!=n&&n.io.on("reconnect_error",function(t){Bi.SocketService("[SocketService: setupChannelListener()] context=".concat(e.state.context," socket event=reconnect_error"),t)}),null!=n&&n.io.on("reconnect_failed",function(){Bi.SocketService("[SocketService: setupChannelListener()] context=".concat(e.state.context," socket event=reconnect_failed"))})),null!=n&&n.on("disconnect",function(t){return Bi.SocketService("[SocketService: setupChannelListener()] on 'disconnect' -- MetaMaskSDK socket disconnected '".concat(t,"' begin recovery...")),(n=e,function(e){Bi.SocketService("[SocketService: handleDisconnect()] on 'disconnect' manualDisconnect=".concat(n.state.manualDisconnect),e),n.state.manualDisconnect||(n.emit(Zi.SOCKET_DISCONNECTED),ao(n).catch(function(e){}))})(t);var n})),uo.forEach(function(r){var i=r.event,o=r.handler;null==n||n.on("".concat(i,"-").concat(t),o(e,t))}),lo.forEach(function(t){var n=t.event,i=t.handler;null==r||r.on(n,i(e))}),e.state.setupChannelListeners=!0}function fp(e){var t,n,r,i,o,a,s,c,u,l,d,f,h=e.communicationLayerPreference,p=e.otherPublicKey,v=e.reconnect,m=e.ecies,g=e.communicationServerUrl,y=void 0===g?qi:g,b=e.instance,w=b.state;if(Bi.RemoteCommunication("[initCommunicationLayer()] ",JSON.stringify(w,null,2)),h!==ho.SOCKET)throw new Error("Invalid communication protocol");w.communicationLayer=new fo({communicationLayerPreference:h,otherPublicKey:p,reconnect:v,transports:w.transports,communicationServerUrl:y,context:w.context,ecies:m,logging:w.logging,remote:b});var E="undefined"!=typeof document&&document.URL||"",k="undefined"!=typeof document&&document.title||"";!(null===(n=w.dappMetadata)||void 0===n)&&n.url&&(E=w.dappMetadata.url),null!==(r=w.dappMetadata)&&void 0!==r&&r.name&&(k=w.dappMetadata.name);var _=null!==(s=null!==(o=null===(i=w.dappMetadata)||void 0===i?void 0:i.name)&&void 0!==o?o:null===(a=w.dappMetadata)||void 0===a?void 0:a.url)&&void 0!==s?s:"N/A",S="undefined"!=typeof window&&void 0!==window.location&&null!==(c=window.location.hostname)&&void 0!==c?c:_;w.originatorInfo={url:E,title:k,source:null===(u=w.dappMetadata)||void 0===u?void 0:u.source,dappId:S,anonId:w.anonId,icon:(null===(l=w.dappMetadata)||void 0===l?void 0:l.iconUrl)||(null===(d=w.dappMetadata)||void 0===d?void 0:d.base64Icon),platform:w.platformType,apiVersion:zi.version,connector:null===(f=w.dappMetadata)||void 0===f?void 0:f.connector};for(var C=(P(P(P(P(P(P(P(P(P(P(t={},Zi.AUTHORIZED,function(e){var t=this;return function(){return Jd(t,void 0,void 0,L().m(function t(){var n,r,i,o,a,s,c=this;return L().w(function(t){for(;;)switch(t.n){case 0:if(!(o=e.state).authorized){t.n=1;break}return t.a(2);case 1:return t.n=2,function(){return Jd(c,void 0,void 0,L().m(function e(){return L().w(function(e){for(;;)switch(e.n){case 0:if(o.walletInfo){e.n=2;break}return e.n=1,io(500);case 1:e.n=0;break;case 2:return e.a(2)}},e)}))}();case 2:if(a="7.3".localeCompare((null===(n=o.walletInfo)||void 0===n?void 0:n.version)||""),Bi.RemoteCommunication("[RemoteCommunication: handleAuthorizedEvent()] HACK 'authorized' version=".concat(null===(r=o.walletInfo)||void 0===r?void 0:r.version," compareValue=").concat(a)),1===a){t.n=3;break}return t.a(2);case 3:s=o.platformType===po.MobileWeb||o.platformType===po.ReactNative||o.platformType===po.MetaMaskMobileWebview,Bi.RemoteCommunication("[RemoteCommunication: handleAuthorizedEvent()] HACK 'authorized' platform=".concat(o.platformType," secure=").concat(s," channel=").concat(o.channelId," walletVersion=").concat(null===(i=o.walletInfo)||void 0===i?void 0:i.version)),s&&(o.authorized=!0,e.emit(Zi.AUTHORIZED));case 4:return t.a(2)}},t)}))}}(b)),Zi.MESSAGE,function(e){return function(t){var n=t;t.message&&(n=n.message),function(e,t){var n,r,i,o=t.state;if(Bi.RemoteCommunication("[RemoteCommunication: onCommunicationLayerMessage()] context=".concat(o.context," on 'message' typeof=").concat(D(e)),e),t.state.ready=!0,o.isOriginator||e.type!==Xi.ORIGINATOR_INFO)if(o.isOriginator&&e.type===Xi.WALLET_INFO)n=e,(r=t.state).walletInfo=n.walletInfo,r.paused=!1;else{if(o.isOriginator&&e.type===Xi.WALLET_INIT)(function(e,t){return Jd(this,void 0,void 0,L().m(function n(){var r,i,o,a,s,c,u,l,d,f;return L().w(function(n){for(;;)switch(n.p=n.n){case 0:if(!e.state.isOriginator){n.n=6;break}if(!("object"==D(a=t.data||{})&&"accounts"in a&&"chainId"in a&&"walletKey"in a)){n.n=6;break}if(n.p=1,s=e.state.channelConfig,Bi.RemoteCommunication("WALLET_INIT: channelConfig",JSON.stringify(s,null,2)),!s){n.n=4;break}return c=a.accounts,u=a.chainId,l=a.walletKey,f=!1,"deeplinkProtocol"in a&&(f=Boolean(a.deeplinkProtocol),e.state.deeplinkProtocolAvailable=f),"walletVersion"in a&&(d=a.walletVersion),n.n=2,null===(r=e.state.storageManager)||void 0===r?void 0:r.persistChannelConfig(Object.assign(Object.assign({},s),{otherKey:l,walletVersion:d,deeplinkProtocolAvailable:f,relayPersistence:!0}));case 2:return n.n=3,null===(i=e.state.storageManager)||void 0===i?void 0:i.persistAccounts(c);case 3:return n.n=4,null===(o=e.state.storageManager)||void 0===o?void 0:o.persistChainId(u);case 4:e.emit(Zi.WALLET_INIT,{accounts:a.accounts,chainId:a.chainId}),n.n=6;break;case 5:n.p=5,n.v;case 6:return n.a(2)}},n,null,[[1,5]])}))})(t,e).catch(function(e){Bi.RemoteCommunication("[RemoteCommunication: onCommunicationLayerMessage()] error=".concat(e))});else if(e.type===Xi.TERMINATE)(function(e){return Jd(this,void 0,void 0,L().m(function t(){return L().w(function(t){for(;;)switch(t.n){case 0:if(!e.state.isOriginator){t.n=2;break}return t.n=1,hp({options:{terminate:!0,sendMessage:!1},instance:e});case 1:e.emit(Zi.TERMINATE);case 2:return t.a(2)}},t)}))})(t).catch(function(e){Bi.RemoteCommunication("[RemoteCommunication: onCommunicationLayerMessage()] error=".concat(e))});else if(e.type===Xi.PAUSE)(i=t).state.paused=!0,i.setConnectionStatus(Yi.PAUSED);else if(e.type===Xi.READY&&o.isOriginator)!function(e){var t=e.state;e.setConnectionStatus(Yi.LINKED);var n=t.paused;t.paused=!1,e.emit(Zi.CLIENTS_READY,{isOriginator:t.isOriginator,walletInfo:t.walletInfo}),n&&(t.authorized=!0,e.emit(Zi.AUTHORIZED))}(t);else{if(e.type===Xi.OTP&&o.isOriginator)return void function(e,t){var n,r=e.state;e.emit(Zi.OTP,t.otpAnswer),1==="6.6".localeCompare((null===(n=r.walletInfo)||void 0===n?void 0:n.version)||"")&&e.emit(Zi.SDK_RPC_CALL,{method:Vi.ETH_REQUESTACCOUNTS,params:[]})}(t,e);e.type===Xi.AUTHORIZED&&o.isOriginator&&function(e){e.state.authorized=!0,e.emit(Zi.AUTHORIZED)}(t)}t.emit(Zi.MESSAGE,e)}else!function(e,t){var n,r=e.state;null===(n=r.communicationLayer)||void 0===n||n.sendMessage({type:Xi.WALLET_INFO,walletInfo:r.walletInfo}),r.originatorInfo=t.originatorInfo||t.originator,e.emit(Zi.CLIENTS_READY,{isOriginator:r.isOriginator,originatorInfo:r.originatorInfo}),r.paused=!1}(t,e)}(n,e)}}(b)),Zi.CHANNEL_PERSISTENCE,function(e){var t=this;return function(){return Jd(t,void 0,void 0,L().m(function t(){var n,r,i,o,a,s,c,u;return L().w(function(t){for(;;)switch(t.p=t.n){case 0:return u=e.state,Bi.RemoteCommunication("[RemoteCommunication: handleFullPersistenceEvent()] context=".concat(u.context)),e.state.ready=!0,e.state.clientsConnected=!0,e.state.authorized=!0,e.state.relayPersistence=!0,null===(n=e.state.communicationLayer)||void 0===n||n.getKeyExchange().setKeysExchanged(!0),e.emit(Zi.KEYS_EXCHANGED,{keysExchanged:!0,isOriginator:!0}),e.emit(Zi.AUTHORIZED),e.emit(Zi.CLIENTS_READY),e.emit(Zi.CHANNEL_PERSISTENCE),t.p=1,u.channelConfig=Object.assign(Object.assign({},u.channelConfig),{localKey:null===(r=u.communicationLayer)||void 0===r?void 0:r.getKeyExchange().getKeyInfo().ecies.private,otherKey:null===(i=u.communicationLayer)||void 0===i?void 0:i.getKeyExchange().getOtherPublicKey(),channelId:null!==(o=u.channelId)&&void 0!==o?o:"",validUntil:null!==(s=null===(a=u.channelConfig)||void 0===a?void 0:a.validUntil)&&void 0!==s?s:Wi,relayPersistence:!0}),t.n=2,null===(c=u.storageManager)||void 0===c?void 0:c.persistChannelConfig(u.channelConfig);case 2:t.n=4;break;case 3:t.p=3,t.v;case 4:return t.a(2)}},t,null,[[1,3]])}))}}(b)),Zi.CLIENTS_CONNECTED,function(e,t){return function(){var n,r,i,o,a=e.state;Bi.RemoteCommunication("[RemoteCommunication: handleClientsConnectedEvent()] on 'clients_connected' channel=".concat(a.channelId," keysExchanged=").concat(null===(r=null===(n=a.communicationLayer)||void 0===n?void 0:n.getKeyInfo())||void 0===r?void 0:r.keysExchanged)),a.analytics&&Hi(Object.assign(Object.assign({id:null!==(i=a.channelId)&&void 0!==i?i:"",event:a.reconnection?eo.RECONNECT:a.isOriginator?eo.REQUEST:eo.REQUEST_MOBILE},a.originatorInfo),{commLayer:t,sdkVersion:a.sdkVersion,walletVersion:null===(o=a.walletInfo)||void 0===o?void 0:o.version,commLayerVersion:zi.version}),a.communicationServerUrl).catch(function(e){}),a.isOriginator&&!a.reconnection&&$.analytics.track("sdk_connection_established",{transport_type:"websocket"}),a.clientsConnected=!0,a.originatorInfoSent=!1,e.emit(Zi.CLIENTS_CONNECTED)}}(b,h)),Zi.KEYS_EXCHANGED,function(e,t){return function(n){var r,i,o,a,s,c,u,l,d=e.state;if(Bi.RemoteCommunication("[RemoteCommunication: handleKeysExchangedEvent()] context=".concat(d.context," on commLayer.'keys_exchanged' channel=").concat(d.channelId),n),null===(i=null===(r=d.communicationLayer)||void 0===r?void 0:r.getKeyInfo())||void 0===i?void 0:i.keysExchanged){var f=Object.assign(Object.assign({},d.channelConfig),{channelId:null!==(o=d.channelId)&&void 0!==o?o:"",validUntil:(null===(a=d.channelConfig)||void 0===a?void 0:a.validUntil)||Wi,localKey:d.communicationLayer.getKeyInfo().ecies.private,otherKey:d.communicationLayer.getKeyInfo().ecies.otherPubKey});null===(s=d.storageManager)||void 0===s||s.persistChannelConfig(f).catch(function(e){}),e.setConnectionStatus(Yi.LINKED)}(function(e,t){var n,r,i,o,a,s,c,u,l=e.state;Bi.RemoteCommunication("[RemoteCommunication: setLastActiveDate()] channel=".concat(l.channelId),t);var d=Object.assign(Object.assign({},l.channelConfig),{channelId:null!==(n=l.channelId)&&void 0!==n?n:"",validUntil:null!==(i=null===(r=l.channelConfig)||void 0===r?void 0:r.validUntil)&&void 0!==i?i:0,relayPersistence:l.relayPersistence,localKey:null===(a=null===(o=l.communicationLayer)||void 0===o?void 0:o.state.keyExchange)||void 0===a?void 0:a.getKeyInfo().ecies.private,otherKey:null===(c=null===(s=l.communicationLayer)||void 0===s?void 0:s.state.keyExchange)||void 0===c?void 0:c.getKeyInfo().ecies.otherPubKey,lastActive:t.getTime()});null===(u=l.storageManager)||void 0===u||u.persistChannelConfig(d)})(e,new Date),d.analytics&&d.channelId&&Hi(Object.assign(Object.assign({id:d.channelId,event:n.isOriginator?eo.CONNECTED:eo.CONNECTED_MOBILE},d.originatorInfo),{sdkVersion:d.sdkVersion,commLayer:t,commLayerVersion:zi.version,walletVersion:null===(c=d.walletInfo)||void 0===c?void 0:c.version}),d.communicationServerUrl).catch(function(e){}),d.isOriginator=n.isOriginator,n.isOriginator||(null===(u=d.communicationLayer)||void 0===u||u.sendMessage({type:Xi.READY}),d.ready=!0,d.paused=!1),n.isOriginator&&!d.originatorInfoSent&&(null===(l=d.communicationLayer)||void 0===l||l.sendMessage({type:Xi.ORIGINATOR_INFO,originatorInfo:d.originatorInfo,originator:d.originatorInfo}),d.originatorInfoSent=!0)}}(b,h)),Zi.SOCKET_DISCONNECTED,function(e){return function(){var t=e.state;Bi.RemoteCommunication("[RemoteCommunication: handleSocketDisconnectedEvent()] on 'socket_Disconnected' set ready to false"),t.ready=!1}}(b)),Zi.SOCKET_RECONNECT,function(e){return function(){var t=e.state;Bi.RemoteCommunication("[RemoteCommunication: handleSocketReconnectEvent()] on 'socket_reconnect' -- reset key exchange status / set ready to false"),t.ready=!1,t.authorized=!1,up(t),e.emitServiceStatusEvent({context:"socket_reconnect"})}}(b)),Zi.CLIENTS_DISCONNECTED,function(e){return function(t){var n=e.state;Bi.RemoteCommunication("[RemoteCommunication: handleClientsDisconnectedEvent()] context=".concat(n.context," on 'clients_disconnected' channelId=").concat(t)),n.relayPersistence||(n.clientsConnected=!1,n.ready=!1,n.authorized=!1),e.emit(Zi.CLIENTS_DISCONNECTED,n.channelId),e.setConnectionStatus(Yi.DISCONNECTED)}}(b)),Zi.KEY_INFO,function(){}),Zi.CHANNEL_CREATED,function(e){return function(t){var n=e.state;Bi.RemoteCommunication("[RemoteCommunication: handleChannelCreatedEvent()] context=".concat(n.context," on 'channel_created' channelId=").concat(t)),e.emit(Zi.CHANNEL_CREATED,t)}}(b)),P(P(t,Zi.CLIENTS_WAITING,function(e){return function(t){var n,r=e.state;if(Bi.RemoteCommunication("[RemoteCommunication: handleClientsWaitingEvent()] context=".concat(r.context," on 'clients_waiting' numberUsers=").concat(t," ready=").concat(r.ready," autoStarted=").concat(r.originatorConnectStarted)),e.setConnectionStatus(Yi.WAITING),e.emit(Zi.CLIENTS_WAITING,t),r.originatorConnectStarted){Bi.RemoteCommunication("[RemoteCommunication: handleClientsWaitingEvent()] on 'clients_waiting' watch autoStarted=".concat(r.originatorConnectStarted," timeout"),r.autoConnectOptions);var i=(null===(n=r.autoConnectOptions)||void 0===n?void 0:n.timeout)||3e3,o=setTimeout(function(){Bi.RemoteCommunication("[RemoteCommunication: handleClientsWaitingEvent()] setTimeout(".concat(i,") terminate channelConfig"),r.autoConnectOptions),r.originatorConnectStarted=!1,r.ready||e.setConnectionStatus(Yi.TIMEOUT),clearTimeout(o)},i)}}}(b)),Zi.RPC_UPDATE,function(e){b.emit(Zi.RPC_UPDATE,e)})),A=0,M=Object.entries(C);A<M.length;A++){var T=x(M[A],2),O=T[0],R=T[1];try{w.communicationLayer.on(O,R)}catch(I){}}}function hp(e){return Jd(this,arguments,void 0,function(e){var t=e.options,n=e.instance;return L().m(function e(){var r;return L().w(function(e){for(;;)if(0===e.n)return r=n.state,e.a(2,(Bi.RemoteCommunication("[RemoteCommunication: disconnect()] channel=".concat(r.channelId),t),new Promise(function(e,i){var o,a,s,c,u,l;(null==t?void 0:t.terminate)?(n.state.ready&&Hi({id:null!==(o=n.state.channelId)&&void 0!==o?o:"",event:eo.TERMINATED},n.state.communicationServerUrl).catch(function(e){}),r.ready=!1,r.paused=!1,null===(a=r.storageManager)||void 0===a||a.terminate(null!==(s=r.channelId)&&void 0!==s?s:""),n.state.terminated=!0,t.sendMessage?!(null===(c=r.communicationLayer)||void 0===c)&&c.getKeyInfo().keysExchanged&&n.state.communicationLayer&&lp(n.state.communicationLayer,{type:Xi.TERMINATE}).then(function(){e(!0)}).catch(function(e){i(e)}):e(!0),r.authorized=!1,r.relayPersistence=!1,r.channelId=z(),t.channelId=r.channelId,r.channelConfig=void 0,r.originatorConnectStarted=!1,null===(u=r.communicationLayer)||void 0===u||u.disconnect(t),n.setConnectionStatus(Yi.TERMINATED)):(null===(l=r.communicationLayer)||void 0===l||l.disconnect(t),n.setConnectionStatus(Yi.DISCONNECTED),e(!0))})))},e)})()})}function pp(e){var t={ethDecryptDeprecation:!1,ethGetEncryptionPublicKeyDeprecation:!1,walletWatchAssetNFTExperimental:!1};return function(n,r,i){var o;t.ethDecryptDeprecation||"eth_decrypt"!==n.method?t.ethGetEncryptionPublicKeyDeprecation||"eth_getEncryptionPublicKey"!==n.method?!t.walletWatchAssetNFTExperimental&&"wallet_watchAsset"===n.method&&[go,yo].includes((null===(o=n.params)||void 0===o?void 0:o.type)||"")&&(e.warn(bo.warnings.rpc.walletWatchAssetNFTExperimental),t.walletWatchAssetNFTExperimental=!0):(e.warn(bo.warnings.rpc.ethGetEncryptionPublicKeyDeprecation),t.ethGetEncryptionPublicKeyDeprecation=!0):(e.warn(bo.warnings.rpc.ethDecryptDeprecation),t.ethDecryptDeprecation=!0),i()}}function vp(e){return Boolean(e)&&"object"==D(e)&&!Array.isArray(e)}function mp(e){return"object"==D(e)&&null!=e}function gp(e){return"symbol"==D(e)?e.toString():"string"==typeof e?JSON.stringify(e):"".concat(e)}function yp(e,t,n,r){if(!0!==e){!1===e?e={}:"string"==typeof e&&(e={message:e});var i=t.path,o=t.branch,a=n.type,s=e,c=s.refinement,u=s.message,l=void 0===u?"Expected a value of type `".concat(a,"`").concat(c?" with refinement `".concat(c,"`"):"",", but received: `").concat(gp(r),"`"):u;return A(A({value:r,type:a,refinement:c,key:i[i.length-1],path:i,branch:o},e),{},{message:l})}}function bp(e,t,n,r){var i,o,a,s,c;return L().w(function(u){for(;;)switch(u.p=u.n){case 0:(function(e){return mp(e)&&"function"==typeof e[Symbol.iterator]})(e)||(e=[e]),i=_(e),u.p=1,i.s();case 2:if((o=i.n()).done){u.n=4;break}if(a=o.value,s=yp(a,t,n,r),!s){u.n=3;break}return u.n=3,s;case 3:u.n=2;break;case 4:u.n=6;break;case 5:u.p=5,c=u.v,i.e(c);case 6:return u.p=6,i.f(),u.f(6);case 7:return u.a(2)}},_d,null,[[1,5,6,7]])}function wp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return L().m(function r(){var i,o,a,s,c,u,l,d,f,h,p,v,m,g,y,b,w,k,S,C,A,M,T,O,R,P,I,N,D,B,j;return L().w(function(r){for(;;)switch(r.p=r.n){case 0:if(i=n.path,o=void 0===i?[]:i,a=n.branch,s=void 0===a?[e]:a,c=n.coerce,u=void 0!==c&&c,l=n.mask,d=void 0!==l&&l,f={path:o,branch:s},u&&(e=t.coercer(e,f),d&&"type"!==t.type&&mp(t.schema)&&mp(e)&&!Array.isArray(e)))for(h in e)void 0===t.schema[h]&&delete e[h];p="valid",v=_(t.validator(e,f)),r.p=1,v.s();case 2:if((m=v.n()).done){r.n=4;break}return(g=m.value).explanation=n.message,p="not_valid",r.n=3,[g,void 0];case 3:r.n=2;break;case 4:r.n=6;break;case 5:r.p=5,N=r.v,v.e(N);case 6:return r.p=6,v.f(),r.f(6);case 7:y=_(t.entries(e,f)),r.p=8,y.s();case 9:if((b=y.n()).done){r.n=19;break}w=x(b.value,3),k=w[0],S=w[1],C=w[2],A=wp(S,C,{path:void 0===k?o:[].concat(E(o),[k]),branch:void 0===k?s:[].concat(E(s),[S]),coerce:u,mask:d,message:n.message}),M=_(A),r.p=10,M.s();case 11:if((T=M.n()).done){r.n=15;break}if(!(O=T.value)[0]){r.n=13;break}return p=null!=O[0].refinement?"not_refined":"not_valid",r.n=12,[O[0],void 0];case 12:r.n=14;break;case 13:u&&(S=O[1],void 0===k?e=S:e instanceof Map?e.set(k,S):e instanceof Set?e.add(S):mp(e)&&(void 0!==S||k in e)&&(e[k]=S));case 14:r.n=11;break;case 15:r.n=17;break;case 16:r.p=16,D=r.v,M.e(D);case 17:return r.p=17,M.f(),r.f(17);case 18:r.n=9;break;case 19:r.n=21;break;case 20:r.p=20,B=r.v,y.e(B);case 21:return r.p=21,y.f(),r.f(21);case 22:if("not_valid"===p){r.n=29;break}R=_(t.refiner(e,f)),r.p=23,R.s();case 24:if((P=R.n()).done){r.n=26;break}return(I=P.value).explanation=n.message,p="not_refined",r.n=25,[I,void 0];case 25:r.n=24;break;case 26:r.n=28;break;case 27:r.p=27,j=r.v,R.e(j);case 28:return r.p=28,R.f(),r.f(28);case 29:if(!("valid"===p)){r.n=30;break}return r.n=30,[void 0,e];case 30:return r.a(2)}},r,null,[[23,27,28,29],[10,16,17,18],[8,20,21,22],[1,5,6,7]])})()}function Ep(e,t,n){var r=Sp(e,t,{message:n});if(r[0])throw r[0]}function kp(e,t,n){var r=Sp(e,t,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function _p(e,t){return!Sp(e,t)[0]}function Sp(e,t){var n,r,i,o=wp(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),a=(n=o.next(),r=n.done,i=n.value,r?void 0:i);return a[0]?[new Oo(a[0],L().m(function e(){var t,n,r,i;return L().w(function(e){for(;;)switch(e.p=e.n){case 0:t=_(o),e.p=1,t.s();case 2:if((n=t.n()).done){e.n=4;break}if(r=n.value,!r[0]){e.n=3;break}return e.n=3,r[0];case 3:e.n=2;break;case 4:e.n=6;break;case 5:e.p=5,i=e.v,t.e(i);case 6:return e.p=6,t.f(),e.f(6);case 7:return e.a(2)}},e,null,[[1,5,6,7]])})),void 0]:[void 0,a[1]]}function Cp(e,t){return new Ro({type:e,schema:null,validator:t})}function Ap(e){var t;return new Ro({type:"lazy",schema:null,entries:L().m(function n(r,i){return L().w(function(n){for(;;)switch(n.n){case 0:return null!=t||(t=e()),n.d(w(t.entries(r,i)),1);case 1:return n.a(2)}},n)}),validator:function(n,r){return null!=t||(t=e()),t.validator(n,r)},coercer:function(n,r){return null!=t||(t=e()),t.coercer(n,r)},refiner:function(n,r){return null!=t||(t=e()),t.refiner(n,r)}})}function xp(e){return new Ro({type:"array",schema:e,entries:L().m(function t(n){var r,i,o,a,s,c;return L().w(function(t){for(;;)switch(t.p=t.n){case 0:if(!e||!Array.isArray(n)){t.n=7;break}r=_(n.entries()),t.p=1,r.s();case 2:if((i=r.n()).done){t.n=4;break}return o=x(i.value,2),a=o[0],s=o[1],t.n=3,[a,s,e];case 3:t.n=2;break;case 4:t.n=6;break;case 5:t.p=5,c=t.v,r.e(c);case 6:return t.p=6,r.f(),t.f(6);case 7:return t.a(2)}},t,null,[[1,5,6,7]])}),coercer:function(e){return Array.isArray(e)?e.slice():e},validator:function(e){return Array.isArray(e)||"Expected an array value, but received: ".concat(gp(e))}})}function Mp(e){var t=gp(e),n=D(e);return new Ro({type:"literal",schema:"string"===n||"number"===n||"boolean"===n?e:null,validator:function(n){return n===e||"Expected the literal `".concat(t,"`, but received: ").concat(gp(n))}})}function Tp(){return Cp("number",function(e){return"number"==typeof e&&!isNaN(e)||"Expected a number, but received: ".concat(gp(e))})}function Op(e){var t=e?Object.keys(e):[],n=Cp("never",function(){return!1});return new Ro({type:"object",schema:e||null,entries:L().m(function r(i){var o,a,s,c,u,l,d,f,h;return L().w(function(r){for(;;)switch(r.p=r.n){case 0:if(!e||!mp(i)){r.n=14;break}o=new Set(Object.keys(i)),a=_(t),r.p=1,a.s();case 2:if((s=a.n()).done){r.n=4;break}return c=s.value,o.delete(c),r.n=3,[c,i[c],e[c]];case 3:r.n=2;break;case 4:r.n=6;break;case 5:r.p=5,f=r.v,a.e(f);case 6:return r.p=6,a.f(),r.f(6);case 7:u=_(o),r.p=8,u.s();case 9:if((l=u.n()).done){r.n=11;break}return d=l.value,r.n=10,[d,i[d],n];case 10:r.n=9;break;case 11:r.n=13;break;case 12:r.p=12,h=r.v,u.e(h);case 13:return r.p=13,u.f(),r.f(13);case 14:return r.a(2)}},r,null,[[8,12,13,14],[1,5,6,7]])}),validator:function(e){return mp(e)||"Expected an object, but received: ".concat(gp(e))},coercer:function(e){return mp(e)?A({},e):e}})}function Rp(e){return new Ro(A(A({},e),{},{validator:function(t,n){return void 0===t||e.validator(t,n)},refiner:function(t,n){return void 0===t||e.refiner(t,n)}}))}function Pp(e,t){return new Ro({type:"record",schema:null,entries:L().m(function n(r){var i,o,a,s;return L().w(function(n){for(;;)switch(n.n){case 0:if(!mp(r)){n.n=4;break}a=b(r);case 1:if((s=a()).done){n.n=4;break}return i=s.value,o=r[i],n.n=2,[i,i,e];case 2:return n.n=3,[i,o,t];case 3:n.n=1;break;case 4:return n.a(2)}},n)}),validator:function(e){return mp(e)||"Expected an object, but received: ".concat(gp(e))}})}function Ip(){return Cp("string",function(e){return"string"==typeof e||"Expected a string, but received: ".concat(gp(e))})}function Lp(e){var t=e.map(function(e){return e.type}).join(" | ");return new Ro({type:"union",schema:null,coercer:function(t){var n,r=_(e);try{for(r.s();!(n=r.n()).done;){var i=x(n.value.validate(t,{coerce:!0}),2),o=i[0],a=i[1];if(!o)return a}}catch(s){r.e(s)}finally{r.f()}return t},validator:function(n,r){var i,o=[],a=_(e);try{for(a.s();!(i=a.n()).done;){var s=y(wp(n,i.value,r)).slice(0);if(!x(s,1)[0][0])return[];var c,u=_(s);try{for(u.s();!(c=u.n()).done;){var l=x(c.value,1)[0];l&&o.push(l)}}catch(d){u.e(d)}finally{u.f()}}}catch(d){a.e(d)}finally{a.f()}return["Expected the value to satisfy a union of `".concat(t,"`, but received: ").concat(gp(n))].concat(o)}})}function Np(){throw new Error("setTimeout has not been defined")}function Dp(){throw new Error("clearTimeout has not been defined")}function Bp(e){if(Io===setTimeout)return setTimeout(e,0);if((Io===Np||!Io)&&setTimeout)return Io=setTimeout,setTimeout(e,0);try{return Io(e,0)}catch(t){try{return Io.call(null,e,0)}catch(n){return Io.call(this,e,0)}}}function jp(){Bo&&No&&(Bo=!1,No.length?Do=No.concat(Do):jo=-1,Do.length&&Kp())}function Kp(){if(!Bo){var e=Bp(jp);Bo=!0;for(var t=Do.length;t;){for(No=Do,Do=[];++jo<t;)No&&No[jo].run();jo=-1,t=Do.length}No=null,Bo=!1,function(e){if(Lo===clearTimeout)return clearTimeout(e);if((Lo===Dp||!Lo)&&clearTimeout)return Lo=clearTimeout,clearTimeout(e);try{return Lo(e)}catch(t){try{return Lo.call(null,e)}catch(n){return Lo.call(this,e)}}}(e)}}function Up(e,t){this.fun=e,this.array=t}function Hp(){}function Fp(e){var t=e.path,n=e.branch,r=t[t.length-1];return To(n[n.length-2],r)}function zp(e){return new Ro(A(A({},e),{},{type:"optional ".concat(e.type),validator:function(t,n){return!Fp(n)||e.validator(t,n)},refiner:function(t,n){return!Fp(n)||e.refiner(t,n)}}))}function qp(e){try{return kp(e,ta),!0}catch(t){return!1}}function $p(e){return _p(e,aa)}function Wp(e){return _p(e,ia)}function Vp(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ua;if(t=e,Number.isInteger(t)){var r=e.toString();if(To(Mo,r))return Mo[r].message;if(function(e){return e>=-32099&&e<=-32e3}(e))return da}return n}function Gp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.fallbackError,r=void 0===n?la:n,i=t.shouldIncludeStack,o=void 0===i||i;if(!Wp(r))throw new Error("Must provide fallback error with integer number code and string message.");var a=function(e,t){if(e&&"object"==D(e)&&"serialize"in e&&"function"==typeof e.serialize)return e.serialize();if(Wp(e))return e;var n=Yp(e);return A(A({},t),{},{data:{cause:n}})}(e,r);return o||delete a.stack,a}function Yp(e){return Array.isArray(e)?e.map(function(e){return qp(e)?e:vp(e)?Zp(e):null}):vp(e)?Zp(e):qp(e)?e:null}function Zp(e){return Object.getOwnPropertyNames(e).reduce(function(t,n){var r=e[n];return qp(r)&&(t[n]=r),t},{})}function Jp(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function Qp(e,t,n,r){var i;void 0===r&&(r=Jp()),ev(e,"",0,[],void 0,0,r);try{i=0===ma.length?JSON.stringify(e,t,n):JSON.stringify(e,iv(t),n)}catch(a){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==va.length;){var o=va.pop();4===o.length?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return i}function Xp(e,t,n,r){var i=Object.getOwnPropertyDescriptor(r,n);void 0!==i.get?i.configurable?(Object.defineProperty(r,n,{value:e}),va.push([r,n,t,i])):ma.push([t,n,e]):(r[n]=e,va.push([r,n,t]))}function ev(e,t,n,r,i,o,a){var s;if(o+=1,"object"==D(e)&&null!==e){for(s=0;s<r.length;s++)if(r[s]===e)return void Xp(pa,e,t,i);if(void 0!==a.depthLimit&&o>a.depthLimit)return void Xp(ha,e,t,i);if(void 0!==a.edgesLimit&&n+1>a.edgesLimit)return void Xp(ha,e,t,i);if(r.push(e),Array.isArray(e))for(s=0;s<e.length;s++)ev(e[s],s,s,r,e,o,a);else{var c=Object.keys(e);for(s=0;s<c.length;s++){var u=c[s];ev(e[u],u,s,r,e,o,a)}}r.pop()}}function tv(e,t){return e<t?-1:e>t?1:0}function nv(e,t,n,r){void 0===r&&(r=Jp());var i,o=rv(e,"",0,[],void 0,0,r)||e;try{i=0===ma.length?JSON.stringify(o,t,n):JSON.stringify(o,iv(t),n)}catch(s){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==va.length;){var a=va.pop();4===a.length?Object.defineProperty(a[0],a[1],a[3]):a[0][a[1]]=a[2]}}return i}function rv(e,t,n,r,i,o,a){var s;if(o+=1,"object"==D(e)&&null!==e){for(s=0;s<r.length;s++)if(r[s]===e)return void Xp(pa,e,t,i);try{if("function"==typeof e.toJSON)return}catch(d){return}if(void 0!==a.depthLimit&&o>a.depthLimit)return void Xp(ha,e,t,i);if(void 0!==a.edgesLimit&&n+1>a.edgesLimit)return void Xp(ha,e,t,i);if(r.push(e),Array.isArray(e))for(s=0;s<e.length;s++)rv(e[s],s,s,r,e,o,a);else{var c={},u=Object.keys(e).sort(tv);for(s=0;s<u.length;s++){var l=u[s];rv(e[l],l,s,r,e,o,a),c[l]=e[l]}if(void 0===i)return c;va.push([i,t,e]),i[t]=c}r.pop()}}function iv(e){return e=void 0!==e?e:function(e,t){return t},function(t,n){if(ma.length>0)for(var r=0;r<ma.length;r++){var i=ma[r];if(i[1]===t&&i[0]===n){n=i[2],ma.splice(r,1);break}}return e.call(this,t,n)}}function ov(e,t){if("[Circular]"!==t)return t}function av(){}function sv(){sv.init.call(this)}function cv(e){return void 0===e._maxListeners?sv.defaultMaxListeners:e._maxListeners}function uv(e,t,n,r){var i,o,a,s;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((o=e._events)?(o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]):(o=e._events=new av,e._eventsCount=0),a){if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(i=cv(e))&&i>0&&a.length>i){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=a.length,s=c,"function"==typeof console.warn?console.warn(s):console.log(s)}}else a=o[t]=n,++e._eventsCount;return e}function lv(e,t,n){var r=!1;function i(){e.removeListener(t,i),r||(r=!0,n.apply(e,arguments))}return i.listener=n,i}function dv(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function fv(e,t){for(var n=new Array(t);t--;)n[t]=e[t];return n}function hv(e,t,n){try{Reflect.apply(e,t,n)}catch(r){setTimeout(function(){throw r})}}function pv(e){return JSON.stringify(e,null,2)}function vv(e){return function(t,n,r){"string"==typeof t.method&&t.method||(n.error=ba({message:"The request 'method' must be a non-empty string.",data:t})),r(function(t){var r=n.error;return r?(e.error("MetaMask - RPC Error: ".concat(r.message),r),t()):t()})}}function mv(e,t){return gv.apply(this,arguments)}function gv(){return(gv=g(L().m(function e(t,n){var r,i;return L().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,g(L().m(function e(){var t,n;return L().w(function(e){for(;;)switch(e.n){case 0:return t=yv(window),e.n=1,bv(window);case 1:return n=e.v,e.a(2,{name:t,icon:n})}},e)}))();case 1:r=e.v,t.handle({jsonrpc:"2.0",id:1,method:"metamask_sendDomainMetadata",params:r},Ya),e.n=3;break;case 2:e.p=2,i=e.v,n.error({message:bo.errors.sendSiteMetadata(),originalError:i});case 3:return e.a(2)}},e,null,[[0,2]])}))).apply(this,arguments)}function yv(e){var t=e.document,n=t.querySelector('head > meta[property="og:site_name"]');if(n)return n.content;var r=t.querySelector('head > meta[name="title"]');return r?r.content:t.title&&t.title.length>0?t.title:window.location.hostname}function bv(e){return wv.apply(this,arguments)}function wv(){return(wv=g(L().m(function e(t){var n,r,i,o,a,s;return L().w(function(e){for(;;)switch(e.n){case 0:n=t.document,r=n.querySelectorAll('head > link[rel~="icon"]'),i=0,o=Array.from(r);case 1:if(!(i<o.length)){e.n=5;break}if(a=o[i],!(s=a)){e.n=3;break}return e.n=2,Ev(a.href);case 2:s=e.v;case 3:if(!s){e.n=4;break}return e.a(2,a.href);case 4:i++,e.n=1;break;case 5:return e.a(2,null)}},e)}))).apply(this,arguments)}function Ev(e){return kv.apply(this,arguments)}function kv(){return(kv=g(L().m(function e(t){return L().w(function(e){for(;;)if(0===e.n)return e.a(2,new Promise(function(e,n){try{var r=document.createElement("img");r.onload=function(){return e(!0)},r.onerror=function(){return e(!1)},r.src=t}catch(i){n(i)}}))},e)}))).apply(this,arguments)}function _v(e,t,n){try{Reflect.apply(e,t,n)}catch(r){setTimeout(function(){throw r})}}function Sv(e){if(!jv(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(xv(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,i=r.length,o=String(e).replace(ds,function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}}),a=r[n];n<i;a=r[++n])Nv(a)||!Fv(a)?o+=" "+a:o+=" "+xv(a);return o}function Cv(e,t){if(Uv(tt.process))return function(){return Cv(e,t).apply(this,arguments)};if(!0===Yo.noDeprecation)return e;var n=!1;return function(){if(!n){if(Yo.throwDeprecation)throw new Error(t);Yo.traceDeprecation?console.trace(t):console.error(t),n=!0}return e.apply(this,arguments)}}function Av(e){return Uv(fs)&&(fs=Yo.env.NODE_DEBUG||""),e=e.toUpperCase(),hs[e]||(new RegExp("\\b"+e+"\\b","i").test(fs)?hs[e]=function(){var t=Sv.apply(null,arguments);console.error("%s %d: %s",e,0,t)}:hs[e]=function(){}),hs[e]}function xv(e,t){var n={seen:[],stylize:Tv};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),Lv(t)?n.showHidden=t:t&&Jv(n,t),Uv(n.showHidden)&&(n.showHidden=!1),Uv(n.depth)&&(n.depth=2),Uv(n.colors)&&(n.colors=!1),Uv(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=Mv),Ov(n,e,n.depth)}function Mv(e,t){var n=xv.styles[t];return n?"["+xv.colors[n][0]+"m"+e+"["+xv.colors[n][1]+"m":e}function Tv(e,t){return e}function Ov(e,t,n){if(e.customInspect&&t&&$v(t.inspect)&&t.inspect!==xv&&(!t.constructor||t.constructor.prototype!==t)){var r=t.inspect(n,e);return jv(r)||(r=Ov(e,r,n)),r}var i=function(e,t){if(Uv(t))return e.stylize("undefined","undefined");if(jv(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return Bv(t)?e.stylize(""+t,"number"):Lv(t)?e.stylize(""+t,"boolean"):Nv(t)?e.stylize("null","null"):void 0}(e,t);if(i)return i;var o,a=Object.keys(t),s=(o={},a.forEach(function(e,t){o[e]=!0}),o);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),qv(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return Rv(t);if(0===a.length){if($v(t)){var c=t.name?": "+t.name:"";return e.stylize("[Function"+c+"]","special")}if(Hv(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(zv(t))return e.stylize(Date.prototype.toString.call(t),"date");if(qv(t))return Rv(t)}var u,l="",d=!1,f=["{","}"];return Iv(t)&&(d=!0,f=["[","]"]),$v(t)&&(l=" [Function"+(t.name?": "+t.name:"")+"]"),Hv(t)&&(l=" "+RegExp.prototype.toString.call(t)),zv(t)&&(l=" "+Date.prototype.toUTCString.call(t)),qv(t)&&(l=" "+Rv(t)),0!==a.length||d&&0!=t.length?n<0?Hv(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),u=d?function(e,t,n,r,i){for(var o=[],a=0,s=t.length;a<s;++a)Qv(t,String(a))?o.push(Pv(e,t,n,r,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(Pv(e,t,n,r,i,!0))}),o}(e,t,n,s,a):a.map(function(r){return Pv(e,t,n,s,r,d)}),e.seen.pop(),function(e,t,n){return e.reduce(function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}(u,l,f)):f[0]+l+f[1]}function Rv(e){return"["+Error.prototype.toString.call(e)+"]"}function Pv(e,t,n,r,i,o){var a,s,c;if((c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),Qv(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(c.value)<0?(s=Nv(n)?Ov(e,c.value,null):Ov(e,c.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),Uv(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function Iv(e){return Array.isArray(e)}function Lv(e){return"boolean"==typeof e}function Nv(e){return null===e}function Dv(e){return null==e}function Bv(e){return"number"==typeof e}function jv(e){return"string"==typeof e}function Kv(e){return"symbol"==D(e)}function Uv(e){return void 0===e}function Hv(e){return Fv(e)&&"[object RegExp]"===Gv(e)}function Fv(e){return"object"==D(e)&&null!==e}function zv(e){return Fv(e)&&"[object Date]"===Gv(e)}function qv(e){return Fv(e)&&("[object Error]"===Gv(e)||e instanceof Error)}function $v(e){return"function"==typeof e}function Wv(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==D(e)||void 0===e}function Vv(e){return af.isBuffer(e)}function Gv(e){return Object.prototype.toString.call(e)}function Yv(e){return e<10?"0"+e.toString(10):e.toString(10)}function Zv(){var e,t;console.log("%s - %s",(t=[Yv((e=new Date).getHours()),Yv(e.getMinutes()),Yv(e.getSeconds())].join(":"),[e.getDate(),ps[e.getMonth()],t].join(" ")),Sv.apply(null,arguments))}function Jv(e,t){if(!t||!Fv(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}function Qv(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Xv(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(vs&&e[vs]){var t;if("function"!=typeof(t=e[vs]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,vs,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise(function(e,r){t=e,n=r}),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push(function(e,r){e?n(e):t(r)});try{e.apply(this,i)}catch(a){n(a)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),vs&&Object.defineProperty(t,vs,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,ls(e))}function em(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}function tm(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function t(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var r=t.pop();if("function"!=typeof r)throw new TypeError("The last argument must be of type Function");var i=this,o=function(){return r.apply(i,arguments)};e.apply(this,t).then(function(e){Yo.nextTick(o.bind(null,null,e))},function(e){Yo.nextTick(em.bind(null,e,o))})}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,ls(e)),t}function nm(){if(gs)return ms;function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function t(t){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?e(Object(i),!0).forEach(function(e){n(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function n(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e){var t=function(e){if("object"!=D(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==D(t)?t:String(t)}gs=1;var i=us.Buffer,o=bs.inspect,a=o&&o.custom||"inspect";return ms=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.head=null,this.tail=null,this.length=0}return function(e,t){t&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1})}(e,[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return i.alloc(0);for(var t,n,r,o=i.allocUnsafe(e>>>0),a=this.head,s=0;a;)t=a.data,n=o,r=s,i.prototype.copy.call(t,n,r),s+=a.data.length,a=a.next;return o}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?r+=i:r+=i.slice(0,e),0===(e-=o)){o===i.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=i.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var o=n.data,a=e>o.length?o.length:e;if(o.copy(t,t.length-e,0,a),0===(e-=a)){a===o.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(a));break}++r}return this.length-=r,t}},{key:a,value:function(e,n){return o(this,t(t({},n),{},{depth:0,customInspect:!1}))}}]),e}()}function rm(e,t){om(e,t),im(e)}function im(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function om(e,t){e.emit("error",t)}function am(e,t,n){n||(n=Error);var r=function(e){var n,r;function i(n,r,i){return e.call(this,(o=n,a=r,s=i,"string"==typeof t?t:t(o,a,s)))||this;var o,a,s}return r=e,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r,i}(n);r.prototype.name=n.name,r.prototype.code=e,ks[e]=r}function sm(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map(function(e){return String(e)}),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}function cm(e){try{if(!ft.localStorage)return!1}catch(n){return!1}var t=ft.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}function um(){if(Cs)return Ss;function e(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t){var n=e.entry;for(e.entry=null;n;){var r=n.callback;t.pendingcb--,r(undefined),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}var t;Cs=1,Ss=E,E.WritableState=w;var n,r={deprecate:Rs},i=cs,o=us.Buffer,a=(void 0!==ft?ft:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},s=ws,c=Ms.getHighWaterMark,u=Es.codes,l=u.ERR_INVALID_ARG_TYPE,d=u.ERR_METHOD_NOT_IMPLEMENTED,f=u.ERR_MULTIPLE_CALLBACK,h=u.ERR_STREAM_CANNOT_PIPE,p=u.ERR_STREAM_DESTROYED,v=u.ERR_STREAM_NULL_VALUES,m=u.ERR_STREAM_WRITE_AFTER_END,g=u.ERR_UNKNOWN_ENCODING,y=s.errorOrDestroy;function b(){}function w(n,r,i){t=t||lm(),n=n||{},"boolean"!=typeof i&&(i=r instanceof t),this.objectMode=!!n.objectMode,i&&(this.objectMode=this.objectMode||!!n.writableObjectMode),this.highWaterMark=c(this,n,"writableHighWaterMark",i),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===n.decodeStrings),this.defaultEncoding=n.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n,r=e._writableState,i=r.sync,o=r.writecb;if("function"!=typeof o)throw new f;if((n=r).writing=!1,n.writecb=null,n.length-=n.writelen,n.writelen=0,t)!function(e,t,n,r,i){--t.pendingcb,n?(Yo.nextTick(i,r),Yo.nextTick(x,e,t),e._writableState.errorEmitted=!0,y(e,r)):(i(r),e._writableState.errorEmitted=!0,y(e,r),x(e,t))}(e,r,i,t,o);else{var a=C(r)||e.destroyed;a||r.corked||r.bufferProcessing||!r.bufferedRequest||S(e,r),i?Yo.nextTick(_,e,r,a,o):_(e,r,a,o)}}(r,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==n.emitClose,this.autoDestroy=!!n.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}function E(e){var r=this instanceof(t=t||lm());if(!r&&!n.call(E,this))return new E(e);this._writableState=new w(e,this,r),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),i.call(this)}function k(e,t,n,r,i,o,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new p("write")):n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function _(e,t,n,r){var i,o;n||(i=e,0===(o=t).length&&o.needDrain&&(o.needDrain=!1,i.emit("drain"))),t.pendingcb--,r(),x(e,t)}function S(t,n){n.bufferProcessing=!0;var r=n.bufferedRequest;if(t._writev&&r&&r.next){var i=n.bufferedRequestCount,o=new Array(i),a=n.corkedRequestsFree;a.entry=r;for(var s=0,c=!0;r;)o[s]=r,r.isBuf||(c=!1),r=r.next,s+=1;o.allBuffers=c,k(t,n,!0,n.length,o,"",a.finish),n.pendingcb++,n.lastBufferedRequest=null,a.next?(n.corkedRequestsFree=a.next,a.next=null):n.corkedRequestsFree=new e(n),n.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,l=r.encoding,d=r.callback;if(k(t,n,!1,n.objectMode?1:u.length,u,l,d),r=r.next,n.bufferedRequestCount--,n.writing)break}null===r&&(n.lastBufferedRequest=null)}n.bufferedRequest=r,n.bufferProcessing=!1}function C(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function A(e,t){e._final(function(n){t.pendingcb--,n&&y(e,n),t.prefinished=!0,e.emit("prefinish"),x(e,t)})}function x(e,t){var n,r,i=C(t);if(i&&(n=e,(r=t).prefinished||r.finalCalled||("function"!=typeof n._final||r.destroyed?(r.prefinished=!0,n.emit("prefinish")):(r.pendingcb++,r.finalCalled=!0,Yo.nextTick(A,n,r))),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var o=e._readableState;(!o||o.autoDestroy&&o.endEmitted)&&e.destroy()}return i}return Os(E,i),w.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(w.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(n=Function.prototype[Symbol.hasInstance],Object.defineProperty(E,Symbol.hasInstance,{value:function(e){return!!n.call(this,e)||this===E&&e&&e._writableState instanceof w}})):n=function(e){return e instanceof this},E.prototype.pipe=function(){y(this,new h)},E.prototype.write=function(e,t,n){var r,i,s=this._writableState,c=!1,u=!s.objectMode&&(r=e,o.isBuffer(r)||r instanceof a);return u&&!o.isBuffer(e)&&(i=e,e=o.from(i)),"function"==typeof t&&(n=t,t=null),u?t="buffer":t||(t=s.defaultEncoding),"function"!=typeof n&&(n=b),s.ending?function(e,t){var n=new m;y(e,n),Yo.nextTick(t,n)}(this,n):(u||function(e,t,n,r){var i;return null===n?i=new v:"string"==typeof n||t.objectMode||(i=new l("chunk",["string","Buffer"],n)),!i||(y(e,i),Yo.nextTick(r,i),!1)}(this,s,e,n))&&(s.pendingcb++,c=function(e,t,n,r,i,a){if(!n){var s=(u=r,l=i,(c=t).objectMode||!1===c.decodeStrings||"string"!=typeof u||(u=o.from(u,l)),u);r!==s&&(n=!0,i="buffer",r=s)}var c,u,l,d=t.objectMode?1:r.length;t.length+=d;var f=t.length<t.highWaterMark;if(f||(t.needDrain=!0),t.writing||t.corked){var h=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:a,next:null},h?h.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else k(e,t,!1,d,r,i,a);return f}(this,s,u,e,t,n)),c},E.prototype.cork=function(){this._writableState.corked++},E.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||S(this,e))},E.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new g(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(E.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),E.prototype._write=function(e,t,n){n(new d("_write()"))},E.prototype._writev=null,E.prototype.end=function(e,t,n){var r,i,o,a=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),a.corked&&(a.corked=1,this.uncork()),a.ending||(r=this,o=n,(i=a).ending=!0,x(r,i),o&&(i.finished?Yo.nextTick(o):r.once("finish",o)),i.ended=!0,r.writable=!1),this},Object.defineProperty(E.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),E.prototype.destroy=s.destroy,E.prototype._undestroy=s.undestroy,E.prototype._destroy=function(e,t){t(e)},Ss}function lm(){if(xs)return As;xs=1;var e=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};As=a;var t=gm(),n=um();Os(a,t);for(var r=e(n.prototype),i=0;i<r.length;i++){var o=r[i];a.prototype[o]||(a.prototype[o]=n.prototype[o])}function a(e){if(!(this instanceof a))return new a(e);t.call(this,e),n.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",s)))}function s(){this._writableState.ended||Yo.nextTick(c,this)}function c(e){e.end()}return Object.defineProperty(a.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(a.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(a.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(a.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),As}function dm(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),function(e){if(e&&!Ps(e))throw new Error("Unknown encoding: "+e)}(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=hm;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=pm;break;default:return void(this.write=fm)}this.charBuffer=new af(6),this.charReceived=0,this.charLength=0}function fm(e){return e.toString(this.encoding)}function hm(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function pm(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}function vm(){}function mm(){if(Ds)return Ns;var e;function t(e,t,n){return r=function(e){if("object"!=D(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t),(t="symbol"==D(r)?r:String(r))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e;var r}Ds=1;var n=Hs,r=Symbol("lastResolve"),i=Symbol("lastReject"),o=Symbol("error"),a=Symbol("ended"),s=Symbol("lastPromise"),c=Symbol("handlePromise"),u=Symbol("stream");function l(e,t){return{value:e,done:t}}function d(e){var t=e[r];if(null!==t){var n=e[u].read();null!==n&&(e[s]=null,e[r]=null,e[i]=null,t(l(n,!1)))}}function f(e){Yo.nextTick(d,e)}var h=Object.getPrototypeOf(function(){}),p=Object.setPrototypeOf((t(e={get stream(){return this[u]},next:function(){var e=this,t=this[o];if(null!==t)return Promise.reject(t);if(this[a])return Promise.resolve(l(void 0,!0));if(this[u].destroyed)return new Promise(function(t,n){Yo.nextTick(function(){e[o]?n(e[o]):t(l(void 0,!0))})});var n,r,i,d=this[s];if(d)n=new Promise((r=d,i=this,function(e,t){r.then(function(){i[a]?e(l(void 0,!0)):i[c](e,t)},t)}));else{var f=this[u].read();if(null!==f)return Promise.resolve(l(f,!1));n=new Promise(this[c])}return this[s]=n,n}},Symbol.asyncIterator,function(){return this}),t(e,"return",function(){var e=this;return new Promise(function(t,n){e[u].destroy(null,function(e){e?n(e):t(l(void 0,!0))})})}),e),h);return Ns=function(e){var d,h=Object.create(p,(t(d={},u,{value:e,writable:!0}),t(d,r,{value:null,writable:!0}),t(d,i,{value:null,writable:!0}),t(d,o,{value:null,writable:!0}),t(d,a,{value:e._readableState.endEmitted,writable:!0}),t(d,c,{value:function(e,t){var n=h[u].read();n?(h[s]=null,h[r]=null,h[i]=null,e(l(n,!1))):(h[r]=e,h[i]=t)},writable:!0}),d));return h[s]=null,n(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=h[i];return null!==t&&(h[s]=null,h[r]=null,h[i]=null,t(e)),void(h[o]=e)}var n=h[r];null!==n&&(h[s]=null,h[r]=null,h[i]=null,n(l(void 0,!0))),h[a]=!0}),e.on("readable",f.bind(null,h)),h}}function gm(){if(Us)return Ks;var e;Us=1,Ks=E,E.ReadableState=w,Ea.EventEmitter;var t,n=function(e,t){return e.listeners(t).length},r=cs,i=us.Buffer,o=(void 0!==ft?ft:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},a=bs;t=a&&a.debuglog?a.debuglog("stream"):function(){};var s,c,u,l=nm(),d=ws,f=Ms.getHighWaterMark,h=Es.codes,p=h.ERR_INVALID_ARG_TYPE,v=h.ERR_STREAM_PUSH_AFTER_EOF,m=h.ERR_METHOD_NOT_IMPLEMENTED,g=h.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;Os(E,r);var y=d.errorOrDestroy,b=["error","close","destroy","pause","resume"];function w(t,n,r){e=e||lm(),t=t||{},"boolean"!=typeof r&&(r=n instanceof e),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=f(this,t,"readableHighWaterMark",r),this.buffer=new l,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(s||(s=Is.StringDecoder),this.decoder=new s(t.encoding),this.encoding=t.encoding)}function E(t){if(e=e||lm(),!(this instanceof E))return new E(t);var n=this instanceof e;this._readableState=new w(t,this,n),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),r.call(this)}function k(e,n,r,a,s){t("readableAddChunk",n);var c,u,l,d,f,h=e._readableState;if(null===n)h.reading=!1,function(e,n){if(t("onEofChunk"),!n.ended){if(n.decoder){var r=n.decoder.end();r&&r.length&&(n.buffer.push(r),n.length+=n.objectMode?1:r.length)}n.ended=!0,n.sync?A(e):(n.needReadable=!1,n.emittedReadable||(n.emittedReadable=!0,x(e)))}}(e,h);else if(s||(u=h,f=l=n,i.isBuffer(f)||f instanceof o||"string"==typeof l||void 0===l||u.objectMode||(d=new p("chunk",["string","Buffer","Uint8Array"],l)),c=d),c)y(e,c);else if(h.objectMode||n&&n.length>0)if("string"==typeof n||h.objectMode||Object.getPrototypeOf(n)===i.prototype||(n=function(e){return i.from(e)}(n)),a)h.endEmitted?y(e,new g):_(e,h,n,!0);else if(h.ended)y(e,new v);else{if(h.destroyed)return!1;h.reading=!1,h.decoder&&!r?(n=h.decoder.write(n),h.objectMode||0!==n.length?_(e,h,n,!1):M(e,h)):_(e,h,n,!1)}else a||(h.reading=!1,M(e,h));return!h.ended&&(h.length<h.highWaterMark||0===h.length)}function _(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&A(e)),M(e,t)}Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),E.prototype.destroy=d.destroy,E.prototype._undestroy=d.undestroy,E.prototype._destroy=function(e,t){t(e)},E.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=i.from(e,t),t=""),n=!0),k(this,e,t,!1,n)},E.prototype.unshift=function(e){return k(this,e,null,!0,!1)},E.prototype.isPaused=function(){return!1===this._readableState.flowing},E.prototype.setEncoding=function(e){s||(s=Is.StringDecoder);var t=new s(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,r="";null!==n;)r+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==r&&this._readableState.buffer.push(r),this._readableState.length=r.length,this};var S=1073741824;function C(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=((n=e)>=S?n=S:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0));var n}function A(e){var n=e._readableState;t("emitReadable",n.needReadable,n.emittedReadable),n.needReadable=!1,n.emittedReadable||(t("emitReadable",n.flowing),n.emittedReadable=!0,Yo.nextTick(x,e))}function x(e){var n=e._readableState;t("emitReadable_",n.destroyed,n.length,n.ended),n.destroyed||!n.length&&!n.ended||(e.emit("readable"),n.emittedReadable=!1),n.needReadable=!n.flowing&&!n.ended&&n.length<=n.highWaterMark,I(e)}function M(e,t){t.readingMore||(t.readingMore=!0,Yo.nextTick(T,e,t))}function T(e,n){for(;!n.reading&&!n.ended&&(n.length<n.highWaterMark||n.flowing&&0===n.length);){var r=n.length;if(t("maybeReadMore read 0"),e.read(0),r===n.length)break}n.readingMore=!1}function O(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function R(e){t("readable nexttick read 0"),e.read(0)}function P(e,n){t("resume",n.reading),n.reading||e.read(0),n.resumeScheduled=!1,e.emit("resume"),I(e),n.flowing&&!n.reading&&e.read(0)}function I(e){var n=e._readableState;for(t("flow",n.flowing);n.flowing&&null!==e.read(););}function L(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function N(e){var n=e._readableState;t("endReadable",n.endEmitted),n.endEmitted||(n.ended=!0,Yo.nextTick(D,n,e))}function D(e,n){if(t("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,n.readable=!1,n.emit("end"),e.autoDestroy)){var r=n._writableState;(!r||r.autoDestroy&&r.finished)&&n.destroy()}}function B(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}return E.prototype.read=function(e){t("read",e),e=parseInt(e,10);var n=this._readableState,r=e;if(0!==e&&(n.emittedReadable=!1),0===e&&n.needReadable&&((0!==n.highWaterMark?n.length>=n.highWaterMark:n.length>0)||n.ended))return t("read: emitReadable",n.length,n.ended),0===n.length&&n.ended?N(this):A(this),null;if(0===(e=C(e,n))&&n.ended)return 0===n.length&&N(this),null;var i,o=n.needReadable;return t("need readable",o),(0===n.length||n.length-e<n.highWaterMark)&&t("length less than watermark",o=!0),n.ended||n.reading?t("reading or ended",o=!1):o&&(t("do read"),n.reading=!0,n.sync=!0,0===n.length&&(n.needReadable=!0),this._read(n.highWaterMark),n.sync=!1,n.reading||(e=C(r,n))),null===(i=e>0?L(e,n):null)?(n.needReadable=n.length<=n.highWaterMark,e=0):(n.length-=e,n.awaitDrain=0),0===n.length&&(n.ended||(n.needReadable=!0),r!==e&&n.ended&&N(this)),null!==i&&this.emit("data",i),i},E.prototype._read=function(e){y(this,new m("_read()"))},E.prototype.pipe=function(e,r){var i=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,t("pipe count=%d opts=%j",o.pipesCount,r);var a=r&&!1===r.end||e===Yo.stdout||e===Yo.stderr?v:s;function s(){t("onend"),e.end()}o.endEmitted?Yo.nextTick(a):i.once("end",a),e.on("unpipe",function n(r,a){t("onunpipe"),r===i&&a&&!1===a.hasUnpiped&&(a.hasUnpiped=!0,t("cleanup"),e.removeListener("close",h),e.removeListener("finish",p),e.removeListener("drain",u),e.removeListener("error",f),e.removeListener("unpipe",n),i.removeListener("end",s),i.removeListener("end",v),i.removeListener("data",d),l=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||u())});var c,u=(c=i,function(){var e=c._readableState;t("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&n(c,"data")&&(e.flowing=!0,I(c))});e.on("drain",u);var l=!1;function d(n){t("ondata");var r=e.write(n);t("dest.write",r),!1===r&&((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==B(o.pipes,e))&&!l&&(t("false write response, pause",o.awaitDrain),o.awaitDrain++),i.pause())}function f(r){t("onerror",r),v(),e.removeListener("error",f),0===n(e,"error")&&y(e,r)}function h(){e.removeListener("finish",p),v()}function p(){t("onfinish"),e.removeListener("close",h),v()}function v(){t("unpipe"),i.unpipe(e)}return i.on("data",d),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",f),e.once("close",h),e.once("finish",p),e.emit("pipe",i),o.flowing||(t("pipe resume"),i.resume()),e},E.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=B(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},E.prototype.on=function(e,n){var i=r.prototype.on.call(this,e,n),o=this._readableState;return"data"===e?(o.readableListening=this.listenerCount("readable")>0,!1!==o.flowing&&this.resume()):"readable"===e&&(o.endEmitted||o.readableListening||(o.readableListening=o.needReadable=!0,o.flowing=!1,o.emittedReadable=!1,t("on readable",o.length,o.reading),o.length?A(this):o.reading||Yo.nextTick(R,this))),i},E.prototype.addListener=E.prototype.on,E.prototype.removeListener=function(e,t){var n=r.prototype.removeListener.call(this,e,t);return"readable"===e&&Yo.nextTick(O,this),n},E.prototype.removeAllListeners=function(e){var t=r.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||Yo.nextTick(O,this),t},E.prototype.resume=function(){var e,n,r=this._readableState;return r.flowing||(t("resume"),r.flowing=!r.readableListening,e=this,(n=r).resumeScheduled||(n.resumeScheduled=!0,Yo.nextTick(P,e,n))),r.paused=!1,this},E.prototype.pause=function(){return t("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(t("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},E.prototype.wrap=function(e){var n=this,r=this._readableState,i=!1;for(var o in e.on("end",function(){if(t("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&n.push(e)}n.push(null)}),e.on("data",function(o){t("wrapped data"),r.decoder&&(o=r.decoder.write(o)),r.objectMode&&null==o||(r.objectMode||o&&o.length)&&(n.push(o)||(i=!0,e.pause()))}),e)void 0===this[o]&&"function"==typeof e[o]&&(this[o]=function(t){return function(){return e[t].apply(e,arguments)}}(o));for(var a=0;a<b.length;a++)e.on(b[a],this.emit.bind(this,b[a]));return this._read=function(n){t("wrapped _read",n),i&&(i=!1,e.resume())},this},"function"==typeof Symbol&&(E.prototype[Symbol.asyncIterator]=function(){return void 0===c&&(c=mm()),c(this)}),Object.defineProperty(E.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(E.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(E.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),E._fromList=L,Object.defineProperty(E.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(E.from=function(e,t){return void 0===u&&(u=js?Bs:(js=1,Bs=function(){throw new Error("Readable.from is not available in the browser")})),u(E,e,t)}),Ks}function ym(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new $s);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function bm(e){if(!(this instanceof bm))return new bm(e);Gs.call(this,e),this._transformState={afterTransform:ym.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",wm)}function wm(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?Em(this,null,null):this._flush(function(t,n){Em(e,t,n)})}function Em(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Vs;if(e._transformState.transforming)throw new Ws;return e.push(null)}function km(e){if(!(this instanceof km))return new km(e);Js.call(this,e)}function _m(e){if(e)throw e}function Sm(e){e()}function Cm(e,t){return e.pipe(t)}function Am(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function xm(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)};return t.onceError=(e.name||"Function wrapped with `once`")+" shouldn't be called more than once",t.called=!1,t}function Mm(e,t){if("[Circular]"!==t)return t}function Tm(e,t){var n=x(Rm(t),2),r=n[0],i=n[1];return new Oc.EthereumRpcError(e,r||Rc.getMessageFromCode(e),i)}function Om(e,t){var n=x(Rm(t),2),r=n[0],i=n[1];return new Oc.EthereumProviderError(e,r||Rc.getMessageFromCode(e),i)}function Rm(e){if(e){if("string"==typeof e)return[e];if("object"==D(e)&&!Array.isArray(e)){var t=e.message,n=e.data;if(t&&"string"!=typeof t)throw new Error("Must specify string message.");return[t||void 0,n]}}return[]}function Pm(e){var t=e.instance,n=e.msg;return Jd(this,void 0,void 0,L().m(function e(){var r;return L().w(function(e){for(;;)switch(e.n){case 0:if(t._initialized){e.n=1;break}return Ec("[MetaMaskSDK: connectAndSign()] provider not ready -- wait for init()"),e.n=1,t.init();case 1:if(Ec("[MetaMaskSDK: connectAndSign()] activeProvider=".concat(t.activeProvider)),t.activeProvider){e.n=2;break}throw new Error("SDK state invalid -- undefined provider");case 2:return r=/^0x([0-9A-Fa-f]{2})*$/.test(n)?n:function(e){var t;if(void 0!==af)t=af.from(e,"utf8").toString("hex");else if("undefined"!=typeof TextEncoder){var n=(new TextEncoder).encode(e);t=Array.from(n).map(function(e){return e.toString(16).padStart(2,"0")}).join("")}else{if("object"!=D(tt)||!("Buffer"in tt))throw new Error("Unable to convert string to hex: No available method.");t=tt.Buffer.from(e,"utf8").toString("hex")}return"0x".concat(t)}(n),e.a(2,t.activeProvider.request({method:Vc.METAMASK_CONNECTWITH,params:[{method:Vc.PERSONAL_SIGN,params:[r]}]}))}},e)}))}function Im(e){var t,n;return Jd(this,void 0,void 0,L().m(function r(){var i,o;return L().w(function(r){for(;;)switch(r.p=r.n){case 0:return Ec("[MetaMaskSDK: connectWithExtensionProvider()] ",e),e.sdkProvider=e.activeProvider,e.activeProvider=window.extension,window.ethereum=window.extension,r.p=1,r.n=2,null===(t=window.extension)||void 0===t?void 0:t.request({method:"eth_requestAccounts"});case 2:i=r.v,Ec("[MetaMaskSDK: connectWithExtensionProvider()] accounts=".concat(i)),r.n=4;break;case 3:return r.p=3,o=r.v,console.warn("[MetaMaskSDK: connectWithExtensionProvider()] can't request accounts error",o),r.a(2);case 4:localStorage.setItem(Qc,"extension"),e.extensionActive=!0,e.emit(Nc.ProviderUpdate,ru.EXTENSION),e.options.enableAnalytics&&(null===(n=e.analytics)||void 0===n||n.send({event:eo.SDK_USE_EXTENSION}));case 5:return r.a(2)}},r,null,[[1,3]])}))}function Lm(e){var t;if(void 0!==af)t=af.from(e,"utf8").toString("base64");else if("function"==typeof btoa)t=btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode(parseInt(t,16))}));else{if("object"!=D(tt)||!("Buffer"in tt))throw new Error("Unable to base64 encode: No available method.");t=tt.Buffer.from(e,"utf8").toString("base64")}return t}function Nm(e,t,n,r){var i,o,a,s,c,u,l,d,f,h,p,v,m,g,y,b,w,E,k,_;return Jd(this,void 0,void 0,L().m(function n(){var S,C,A,x,M,T,O,R,P,I,N,B,j,K,U,H,F,z,q,$;return L().w(function(n){for(;;)switch(n.p=n.n){case 0:if(S=null===(i=e.state.remote)||void 0===i?void 0:i.isReady(),C=null===(o=e.state.remote)||void 0===o?void 0:o.isConnected(),A=null===(a=e.state.remote)||void 0===a?void 0:a.isPaused(),x=Dc.getProvider(),M=null===(s=e.state.remote)||void 0===s?void 0:s.getChannelId(),T=null===(c=e.state.remote)||void 0===c?void 0:c.isAuthorized(),O=e.state.deeplinkProtocol,R=function(e){var t,n,r,i,o;af.isBuffer(e)?(o=e.toJSON())._isBuffer=!0:o=e;var a=null===(t=null==o?void 0:o.data)||void 0===t?void 0:t.method,s=!1;return"object"==D(null===(n=null==o?void 0:o.data)||void 0===n?void 0:n.params)&&!0===(null===(i=null===(r=null==o?void 0:o.data)||void 0===r?void 0:r.params)||void 0===i?void 0:i.__triggeredInstaller)&&(s=!0,o.data.params=o.data.params.wrappedParams),{method:a,data:o,triggeredInstaller:s}}(t),P=R.method,I=R.data,N=R.triggeredInstaller,Ec("[RCPMS: write()] method='".concat(P,"' isRemoteReady=").concat(S," channelId=").concat(M," isSocketConnected=").concat(C," isRemotePaused=").concat(A," providerConnected=").concat(x.isConnected()),t),M){n.n=1;break}return n.a(2,(P!==Vc.METAMASK_GETPROVIDERSTATE&&Ec("[RCPMS: write()] ".concat(P," --\x3e channelId is undefined")),r(new Error("disconnected"))));case 1:if(Ec("[RCPMS: write()] remote.isPaused()=".concat(null===(u=e.state.remote)||void 0===u?void 0:u.isPaused()," authorized=").concat(T," ready=").concat(S," socketConnected=").concat(C),t),B=null===(l=e.state.platformManager)||void 0===l?void 0:l.isSecure(),j=null!==(f=null===(d=e.state.platformManager)||void 0===d?void 0:d.isMobileWeb())&&void 0!==f&&f,K=null!==(p=null===(h=e.state.remote)||void 0===h?void 0:h.hasDeeplinkProtocol())&&void 0!==p&&p&&j&&T,n.p=2,N){n.n=4;break}if(!((U=JSON.stringify(null==I?void 0:I.data)).length>nu)){n.n=3;break}return n.a(2,r(new Error("Message size ".concat(U.length," exceeds maximum allowed size of 1000000 bytes"))));case 3:null===(v=e.state.remote)||void 0===v||v.sendMessage(null==I?void 0:I.data).then(function(){Ec("[RCPMS: _write()] ".concat(P," sent successfully"))}).catch(function(e){Ec("[RCPMS: _write()] error sending message",e)});case 4:if(B){n.n=5;break}return n.a(2,(Ec("[RCPMS: _write()] unsecure platform for method ".concat(P," -- return callback")),r()));case 5:if(!N){n.n=6;break}return n.a(2,(Ec("[RCPMS: _write()] prevent deeplink -- installation completed separately."),r()));case 6:if(H=null!==(y=null===(g=null===(m=e.state.remote)||void 0===m?void 0:m.getKeyInfo())||void 0===g?void 0:g.ecies.public)&&void 0!==y?y:"",F=encodeURI("channelId=".concat(M,"&pubkey=").concat(H,"&comm=socket&t=d&v=2")),!K){n.n=8;break}if(z=JSON.stringify(null==I?void 0:I.data),q=null===(b=e.state.remote)||void 0===b?void 0:b.encrypt(z)){n.n=7;break}return n.a(2,(Ec("[RCPMS: _write()] error encrypting message"),r(new Error("RemoteCommunicationPostMessageStream - disconnected"))));case 7:F+="&scheme=".concat(O,"&rpc=").concat(Lm(q));case 8:if(null===(w=e.state.platformManager)||void 0===w?void 0:w.isMetaMaskInstalled()){n.n=9;break}return n.a(2,(Ec("[RCPMS: _write()] prevent deeplink until installation is completed."),r()));case 9:Gc[P]?(Ec("[RCPMS: _write()] redirect link for '".concat(P,"' socketConnected=").concat(C," connect?").concat(F)),null===(E=e.state.platformManager)||void 0===E||E.openDeeplink("".concat(zc,"?").concat(F),"".concat(qc,"?").concat(F),"_self")):(null===(k=e.state.remote)||void 0===k?void 0:k.isPaused())?(Ec("[RCPMS: _write()] MM is PAUSED! deeplink with connect! targetMethod=".concat(P)),null===(_=e.state.platformManager)||void 0===_||_.openDeeplink("".concat(zc,"?redirect=true&").concat(F),"".concat(qc,"?redirect=true&").concat(F),"_self")):Ec("[RCPMS: _write()] method ".concat(P," doesn't need redirect.")),n.n=11;break;case 10:return n.p=10,$=n.v,n.a(2,(Ec("[RCPMS: _write()] error sending message",$),r(new Error("RemoteCommunicationPostMessageStream - disconnected"))));case 11:return n.a(2,r())}},n,null,[[2,10]])}))}function Dm(e){var t,n,r,i;return Jd(this,void 0,void 0,L().m(function o(){var a,s;return L().w(function(o){for(;;)switch(o.n){case 0:return a=e.options,s={communicationLayerPreference:null!==(t=a.communicationLayerPreference)&&void 0!==t?t:ho.SOCKET,platformManager:e.platformManager,sdk:e,checkInstallationOnAllCalls:a.checkInstallationOnAllCalls,injectProvider:null===(n=a.injectProvider)||void 0===n||n,shouldShimWeb3:null===(r=a.shouldShimWeb3)||void 0===r||r,extensionOnly:null===(i=a.extensionOnly)||void 0===i||i,installer:e.installer,remoteConnection:e.remoteConnection,debug:e.debug},o.n=1,cu(s);case 1:e.activeProvider=o.v,function(e){var t,n,r,i;null===(n=null===(t=e.remoteConnection)||void 0===t?void 0:t.getConnector())||void 0===n||n.on(Nc.ConnectionStatus,function(t){e.emit(Nc.ConnectionStatus,t)}),null===(i=null===(r=e.remoteConnection)||void 0===r?void 0:r.getConnector())||void 0===i||i.on(Nc.ServiceStatus,function(t){e.emit(Nc.ServiceStatus,t)})}(e);case 2:return o.a(2)}},o)}))}function Bm(e){var t,n,r,i=e.dappMetadata,o=function(e){var t,n=Lm(e.url+e.name);if(!localStorage)return"";var r=null!==(t=localStorage.getItem(n))&&void 0!==t?t:"";if(!r){r=z();try{localStorage.setItem(n,r)}catch(i){return""}}return r}({url:null!==(t=null==i?void 0:i.url)&&void 0!==t?t:"no_url",name:null!==(n=null==i?void 0:i.name)&&void 0!==n?n:"no_name"}),a=null===(r=e.platformManager)||void 0===r?void 0:r.getPlatformType(),s=a===po.DesktopWeb,c=a===po.MetaMaskMobileWebview,u="N/A";return s?u="extension":c&&(u="mobile"),{id:o,from:u}}function jm(e){var t=e.mustBeMetaMask,n=e.sdkInstance;return Jd(this,void 0,void 0,L().m(function e(){var r;return L().w(function(e){for(;;)switch(e.p=e.n){case 0:if("undefined"!=typeof window){e.n=1;break}throw new Error("window not available");case 1:return e.p=1,e.n=2,new Promise(function(e,t){var n=setTimeout(function(){t(new Error("eip6963RequestProvider timed out"))},500);window.addEventListener(pu.Announce,function(t){var r=t.detail,i=void 0===r?{}:r,o=i.info,a=i.provider,s=null!=o?o:{},c=s.name,u=s.rdns,l=s.uuid;Wc.test(l)&&c.startsWith($c.NAME)&&$c.RDNS.includes(u)&&(clearTimeout(n),e(a))}),window.dispatchEvent(new Event(pu.Request))});case 2:return r=e.v,e.a(2,hu({provider:r,sdkInstance:n}));case 3:if(e.p=3,e.v,t||!window.ethereum){e.n=4;break}return e.a(2,hu({provider:window.ethereum,sdkInstance:n}));case 4:throw new Error("Provider not found");case 5:return e.a(2)}},e,null,[[1,3]])}))}function Km(e,t){var n=t.wait,r=void 0!==n&&n;return Jd(this,void 0,void 0,L().m(function t(){return L().w(function(t){for(;;)switch(t.n){case 0:if(Ec("[MetamaskInstaller: startInstaller()] wait=".concat(r)),!r){t.n=1;break}return t.n=1,su(1e3);case 1:return t.n=2,e.checkInstallation();case 2:return t.a(2,t.v)}},t)}))}function Um(e,t){var n,r,i,o;e.connector||(Ec("[RemoteConnection: initializeConnector()] initialize connector"),e.connector=new mo({anonId:t.anonId,platformType:t.platformManager.getPlatformType(),communicationLayerPreference:t.communicationLayerPreference,transports:t.transports,dappMetadata:Object.assign(Object.assign({},t.dappMetadata),{source:t._source}),analytics:t.enableAnalytics,communicationServerUrl:t.communicationServerUrl,sdkVersion:Hc.version,context:"dapp",ecies:t.ecies,storage:t.storage,logging:t.logging}),t.timer&&(Ec("[RemoteConnection: initializeConnector()] reset background timer",t.timer),null===(r=null===(n=t.timer)||void 0===n?void 0:n.stopBackgroundTimer)||void 0===r||r.call(n),null===(o=null===(i=t.timer)||void 0===i?void 0:i.runBackgroundTimer)||void 0===o||o.call(i,function(){return!1},1e4)))}function Hm(e){e.listeners.forEach(function(t){var n,r=t.event,i=t.handler;null===(n=e.connector)||void 0===n||n.off(r,i)}),e.listeners=[]}function Fm(e,t,n){return Jd(this,void 0,void 0,L().m(function r(){var i,o=this;return L().w(function(r){for(;;)if(0===r.n)return i=setTimeout(function(){$.analytics.track("sdk_connection_failed",{transport_type:"websocket"})},6e4),r.a(2,new Promise(function(r,a){if(e.connector){Ec("[RemoteConnection: connectWithModalInstaller()]",{state:e,options:t,linkParams:n});var s,c,u,l,d,f,h,p="".concat(e.useDeeplink?qc:zc,"?").concat(n);c=t,u=p,(s=e).installModal=null===(d=(l=c.modals).install)||void 0===d?void 0:d.call(l,{link:u,preferDesktop:s.preferDesktop,installer:c.getMetaMaskInstaller(),terminate:function(){Ec("[RemoteConnection: showInstallModal() => terminate()] terminate connection"),c.sdk.terminate().catch(function(e){console.warn("[MMSDK] failed to terminate connection",e)})},debug:s.developerMode,connectWithExtension:function(){var e;return null===(e=c.connectWithExtensionProvider)||void 0===e||e.call(c),!1},onAnalyticsEvent:function(e){var t,n,r,i=e.event,o=e.params,a=Object.assign(Object.assign({},o),{sdkVersion:c.sdk.getVersion(),dappId:null===(t=c.dappMetadata)||void 0===t?void 0:t.name,source:c._source,url:null===(n=c.dappMetadata)||void 0===n?void 0:n.url});null===(r=s.analytics)||void 0===r||r.send({event:i,params:a})}}),null===(h=null===(f=s.installModal)||void 0===f?void 0:f.mount)||void 0===h||h.call(f,u),t.sdk.once(Zi.PROVIDER_UPDATE,function(e){return Jd(o,void 0,void 0,L().m(function t(){return L().w(function(t){for(;;)switch(t.n){case 0:if(Ec("[RemoteConnection: connectWithModalInstaller()] once provider_update -- resolving startConnection promise"),e!==ru.TERMINATE){t.n=1;break}return clearTimeout(i),a({code:4001,message:"User rejected the request."}),t.a(2);case 1:a(e);case 2:return t.a(2)}},t)}))}),e.connector.once(Zi.AUTHORIZED,function(){clearTimeout(i),r()}),e.connector.once(Zi.REJECTED,function(){clearTimeout(i),a(Zi.REJECTED)}),e.connector.once(Zi.CLIENTS_READY,function(){return Jd(o,void 0,void 0,L().m(function e(){return L().w(function(e){for(;;)switch(e.n){case 0:Ec("[RemoteConnection: connectWithModalInstaller()] once clients_ready -- resolving startConnection promise"),clearTimeout(i),r();case 1:return e.a(2)}},e)}))})}else a(new Error("No connector available"))}))},r)}))}function zm(e,t){var n=this;function r(t,n){var r;null===(r=e.connector)||void 0===r||r.on(t,n),e.listeners.push({event:t,handler:n})}e.connector&&(Hm(e),r(Zi.WALLET_INIT,function(e){var t=e.accounts,r=e.chainId;return Jd(n,void 0,void 0,L().m(function e(){var n,i;return L().w(function(e){for(;;)switch(e.n){case 0:Ec("[RemoteConnection: setupListeners() => EventType.WALLET_INIT] 'wallet_init' accounts=".concat(t," chainId=").concat(r)),(n=Dc.getProvider())._setConnected(),i={accounts:t,chainId:r,isUnlocked:!1},n._initializeState(i),n.emit("chainChanged",r),n.emit("accountsChanged",t);case 1:return e.a(2)}},e)}))}),r(Zi.AUTHORIZED,function(){return Jd(n,void 0,void 0,L().m(function t(){var n,r,i,o,a;return L().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,Ec("[RemoteConnection: setupListeners() => EventType.AUTHORIZED] 'authorized' closing modals",e.pendingModal,e.installModal),(a=Dc.getProvider())._setConnected(),null===(r=null===(n=e.pendingModal)||void 0===n?void 0:n.unmount)||void 0===r||r.call(n),null===(o=null===(i=e.installModal)||void 0===i?void 0:i.unmount)||void 0===o||o.call(i,!1),e.otpAnswer=void 0,e.authorized=!0,Ec("[RemoteConnection: setupListeners() => EventType.AUTHORIZED] 'authorized' provider.state",a.getState()),t.n=1,a.forceInitializeState();case 1:t.n=3;break;case 2:t.p=2,t.v;case 3:return t.a(2)}},t,null,[[0,2]])}))}),r(Zi.TERMINATE,function(){var t,n,r,i,o;null===(n=null===(t=e.pendingModal)||void 0===t?void 0:t.unmount)||void 0===n||n.call(t),null===(i=null===(r=e.installModal)||void 0===r?void 0:r.unmount)||void 0===i||i.call(r,!0),e.pendingModal=void 0,e.installModal=void 0,e.otpAnswer=void 0,null===(o=e.connector)||void 0===o||o.disconnect({terminate:!0}),e.authorized=!1,Dc.getProvider().handleDisconnect({terminate:!0}),Hm(e),Ec("[RemoteConnection: setupListeners()] All listeners cleaned up")}))}function qm(e,t){var n,r,i,o,a,s,c,u,l,d,f,h,p,v,m,g,y,b,w,E=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},k=E.initialCheck,_=E.connectWith;return Jd(this,void 0,void 0,L().m(function E(){var S,C,A,x,M,T,O,R,P,I,N,D,B,j,K,U,H,F,z,q,W,V,G,Y;return L().w(function(E){for(;;)switch(E.p=E.n){case 0:if(E.p=0,Um(e,t),e.connector){E.n=1;break}throw new Error("no connector defined");case 1:return zm(e),S=Dc.getProvider(),e.authorized=!1,S.emit("connecting"),E.n=2,null===(n=e.connector)||void 0===n?void 0:n.originatorSessionConnect();case 2:if(C=E.v,Ec("[RemoteConnection: startConnection()] after originatorSessionConnect initialCheck=".concat(k),C),A=null!==(r=null==C?void 0:C.channelId)&&void 0!==r?r:"",x=null!==(o=null===(i=e.connector.getKeyInfo())||void 0===i?void 0:i.ecies.public)&&void 0!==o?o:"",M=null!==(s=null===(a=e.connector.getKeyInfo())||void 0===a?void 0:a.ecies.private)&&void 0!==s?s:"",!k||C){E.n=3;break}return E.a(2,Promise.resolve());case 3:if(C||k){E.n=5;break}return E.n=4,e.connector.generateChannelIdConnect();case 4:T=E.v,A=null!==(c=T.channelId)&&void 0!==c?c:"",x=null!==(u=T.pubKey)&&void 0!==u?u:"",M=null!==(l=T.privKey)&&void 0!==l?l:"",O=Date.now(),null===(d=e.connector.state.storageManager)||void 0===d||d.persistChannelConfig({channelId:A,localKey:M,lastActive:O,validUntil:O+Wi});case 5:if(!k||!(null==C?void 0:C.channelId)){E.n=7;break}if(!(null===(f=e.connector)||void 0===f)&&f.isConnected()){E.n=6;break}return Ec("[RemoteConnection: startConnection()] reconnecting to channel initialCheck=".concat(k),C),E.n=6,null===(h=e.connector)||void 0===h?void 0:h.connectToChannel({channelId:A});case 6:return E.a(2,Promise.resolve());case 7:if(!(C&&!(null===(p=e.connector)||void 0===p?void 0:p.isConnected()))){E.n=8;break}return Ec("[RemoteConnection: startConnection()] reconnecting to channel",C),E.n=8,null===(v=e.connector)||void 0===v?void 0:v.connectToChannel({channelId:A});case 8:if(R=(null===(m=e.platformManager)||void 0===m?void 0:m.isSecure())?"":"&t=q",P=Hc.version,I=t.dappMetadata||{},N=I.iconUrl,D=I.name,B=I.url,j=I.scheme,K=null===(g=e.platformManager)||void 0===g?void 0:g.getPlatformType(),U="N/A","undefined"!=typeof window&&window.location&&window.location.hostname?U=window.location.hostname:void 0!==D?U=D:void 0!==B&&(U=B),H={url:null!=B?B:"",title:null!=D?D:"",icon:N,scheme:null!=j?j:"",apiVersion:P,dappId:U||B||"N/A",anonId:t.anonId,platform:null!=K?K:"",source:null!==(y=t._source)&&void 0!==y?y:""},F=Lm(JSON.stringify(H)),z="channelId=".concat(A,"&v=2&comm=").concat(null!==(b=e.communicationLayerPreference)&&void 0!==b?b:"","&pubkey=").concat(x).concat(R,"&originatorInfo=").concat(F),_&&(z+="&rpc=".concat(Lm(JSON.stringify(_))),(q=e.connector.getRPCMethodTracker())&&(q["".concat(_.id)]=Object.assign(Object.assign({},_),{id:"".concat(_.id),timestamp:Date.now()}))),W=encodeURI(z),V="".concat(e.useDeeplink?qc:zc,"?").concat(z),e.qrcodeLink=V,e.developerMode&&Ec("[RemoteConnection: startConnection()] qrcodeLink=".concat(W)),S.emit("display_uri",V),$.analytics.track("sdk_connection_initiated",{transport_type:"websocket"}),!(null===(w=e.platformManager)||void 0===w?void 0:w.isSecure())){E.n=10;break}return G=setTimeout(function(){$.analytics.track("sdk_connection_failed",{transport_type:"websocket"})},6e4),E.n=9,function(e,t){var n,r;return Jd(this,void 0,void 0,L().m(function i(){var o,a;return L().w(function(i){for(;;)switch(i.n){case 0:o="".concat(zc,"?").concat(t),a="".concat(qc,"?").concat(t),null===(r=null===(n=e.platformManager)||void 0===n?void 0:n.openDeeplink)||void 0===r||r.call(n,o,a,"_self");case 1:return i.a(2)}},i)}))}(e,W);case 9:return E.a(2,new Promise(function(t,n){var r,i,o;if(null===(r=e.connector)||void 0===r?void 0:r.isAuthorized())return clearTimeout(G),void t();null===(i=e.connector)||void 0===i||i.once(Zi.AUTHORIZED,function(){clearTimeout(G),t()}),null===(o=e.connector)||void 0===o||o.once(Zi.REJECTED,function(){clearTimeout(G),n(Zi.REJECTED)})}));case 10:return E.a(2,Fm(e,t,W));case 11:throw E.p=11,Y=E.v,console.error("[startConnection] error",Y),Y;case 12:return E.a(2)}},E,null,[[0,11]])}))}function $m(e){var t,n,r,i,o,a,s,c,u,l,d;return Jd(this,void 0,void 0,L().m(function f(){var h,p,v,m,g,y,b,w,E,k;return L().w(function(f){for(;;)switch(f.p=f.n){case 0:return(h=e.options).logging=null!==(t=h.logging)&&void 0!==t?t:{},h.communicationLayerPreference=null!==(n=h.communicationLayerPreference)&&void 0!==n?n:ho.SOCKET,void 0!==h.enableDebug&&(W.default.enable("MM_SDK"),console.warn("enableDebug is removed. Please use enableAnalytics instead.")),h.enableAnalytics=null===(r=h.enableAnalytics)||void 0===r||r,h.injectProvider=null===(i=h.injectProvider)||void 0===i||i,h.shouldShimWeb3=null===(o=h.shouldShimWeb3)||void 0===o||o,h.extensionOnly=null===(a=h.extensionOnly)||void 0===a||a,h.useDeeplink=null===(s=h.useDeeplink)||void 0===s||s,h.storage=null!==(c=h.storage)&&void 0!==c?c:{enabled:!0},h.headless&&((0,W.default)("[MetaMaskSDK: performSDKInitialization()] headless mode enabled"),v={install:function(){return{mount:p,unmount:p}}},m={installer:p=function(){}},h.modals=v,h.ui=m),g=!0===(null===(u=h.logging)||void 0===u?void 0:u.developerMode),e.debug=(null===(l=h.logging)||void 0===l?void 0:l.sdk)||g,Ec("[MetaMaskSDK: performSDKInitialization()] options",e.options),y=Object.assign({},h.logging),g&&(y.sdk=!0,y.eciesLayer=!0,y.keyExchangeLayer=!0,y.remoteLayer=!0,y.serviceLayer=!0,y.plaintext=!0),f.n=1,function(e){var t;return Jd(this,void 0,void 0,L().m(function n(){var r;return L().w(function(n){for(;;)switch(n.n){case 0:r=e.options,e.platformManager=new Bc({useDeepLink:null!==(t=r.useDeeplink)&&void 0!==t&&t,preferredOpenLink:r.openDeeplink,debug:e.debug});case 1:return n.a(2)}},n)}))}(e);case 1:return f.n=2,function(e){var t,n,r,i,o;return Jd(this,void 0,void 0,L().m(function a(){var s,c;return L().w(function(a){for(;;)switch(a.n){case 0:s=e.options,c=null===(t=e.platformManager)||void 0===t?void 0:t.getPlatformType(),e.analytics=new uu({serverUrl:null!==(n=s.communicationServerUrl)&&void 0!==n?n:qi,enabled:s.enableAnalytics,originatorInfo:{url:null!==(r=s.dappMetadata.url)&&void 0!==r?r:"",title:null!==(i=s.dappMetadata.name)&&void 0!==i?i:"",dappId:e.getDappId(),platform:null!=c?c:"",source:null!==(o=s._source)&&void 0!==o?o:"",anonId:""}});case 1:return a.a(2)}},a)}))}(e);case 2:return f.n=3,function(e){var t,n,r;return Jd(this,void 0,void 0,L().m(function i(){var o,a,s,c,u;return L().w(function(i){for(;;)switch(i.n){case 0:if(e.options.enableAnalytics){i.n=1;break}return i.a(2);case 1:if((null===(t=e.platformManager)||void 0===t?void 0:t.isBrowser())||(null===(n=e.platformManager)||void 0===n?void 0:n.isReactNative())){i.n=2;break}return i.a(2);case 2:return o=e.getVersion(),a=e.getDappId(),i.n=3,e.getAnonId();case 3:s=i.v,c=null===(r=e.platformManager)||void 0===r?void 0:r.getPlatformType(),u=e.options._source,$.analytics.setGlobalProperty("sdk_version",o),$.analytics.setGlobalProperty("dapp_id",a),$.analytics.setGlobalProperty("anon_id",s),$.analytics.setGlobalProperty("platform",c),$.analytics.setGlobalProperty("integration_type",u),$.analytics.enable(),$.analytics.track("sdk_initialized",{});case 4:return i.a(2)}},i)}))}(e);case 3:return f.n=4,function(e){var t;return Jd(this,void 0,void 0,L().m(function n(){var r;return L().w(function(n){for(;;)switch(n.n){case 0:if(r=e.options,!0!==(null===(t=r.storage)||void 0===t?void 0:t.enabled)||r.storage.storageManager){n.n=2;break}return n.n=1,jc(r.storage);case 1:r.storage.storageManager=n.v;case 2:return n.a(2)}},n)}))}(e);case 4:return f.n=5,function(e){return Jd(this,void 0,void 0,L().m(function t(){var n,r,i,o;return L().w(function(t){for(;;)switch(t.n){case 0:n=e.options,r=/^(http|https):\/\/[^\s]*$/,n.dappMetadata&&(n.dappMetadata.iconUrl&&!r.test(n.dappMetadata.iconUrl)&&(console.warn("Invalid dappMetadata.iconUrl: URL must start with http:// or https://"),n.dappMetadata.iconUrl=void 0),n.dappMetadata.base64Icon&&n.dappMetadata.base64Icon.length>du&&(console.warn("Invalid dappMetadata.base64Icon: Base64-encoded icon string length must be less than 163400 characters"),n.dappMetadata.base64Icon=void 0),n.dappMetadata.url&&!r.test(n.dappMetadata.url)&&console.warn("Invalid dappMetadata.url: URL must start with http:// or https://"),!(i=lu())||n.dappMetadata.iconUrl||n.dappMetadata.base64Icon||(o="".concat(window.location.protocol,"//").concat(window.location.host).concat(i),n.dappMetadata.iconUrl=o)),e.dappMetadata=n.dappMetadata;case 1:return t.a(2)}},t)}))}(e);case 5:return f.n=6,vu(e);case 6:return f.n=7,mu(e);case 7:return f.n=8,function(e){var t,n,r,i;return Jd(this,void 0,void 0,L().m(function o(){var a,s,c,u,l=this;return L().w(function(o){for(;;)switch(o.p=o.n){case 0:if(a=e.options,c=!1,u=!1,"undefined"==typeof window||!window.ethereum||(null===(t=e.platformManager)||void 0===t?void 0:t.isMetaMaskMobileWebView())){o.n=5;break}return c="extension"===localStorage.getItem(Qc),o.p=1,o.n=2,jm({mustBeMetaMask:!0,sdkInstance:e});case 2:s=o.v,window.extension=s,s.on(tu.CHAIN_CHANGED,function(t){Ec("[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE chainChanged chainId=".concat(t)),Boolean(e.sdkProvider)&&e.getMobileProvider().emit(tu.CHAIN_CHANGED,t)}),s.on(tu.ACCOUNTS_CHANGED,function(t){return Jd(l,void 0,void 0,L().m(function n(){var r,i,o,a,s,c;return L().w(function(n){for(;;)switch(n.p=n.n){case 0:if(Ec("[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE accountsChanged accounts=".concat(t)),i=Boolean(e.sdkProvider),o=Boolean(e.extensionActive),i&&e.getMobileProvider().emit(tu.ACCOUNTS_CHANGED,t),!(a=o&&0===(null==t?void 0:t.length))){n.n=2;break}return n.n=1,null===(r=e.getProvider())||void 0===r?void 0:r.request({method:Vc.WALLET_GETPERMISSIONS,params:[]});case 1:s=n.v.length,a=0===s;case 2:if(!a){n.n=6;break}return n.p=3,n.n=4,e.terminate();case 4:n.n=6;break;case 5:n.p=5,c=n.v,Ec("[MetaMaskSDK: setupExtensionPreferences()] error terminating on permissions revoked",c);case 6:return n.a(2)}},n,null,[[3,5]])}))}),s.on(tu.DISCONNECT,function(t){Ec("[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE disconnect error=".concat(t)),Boolean(e.sdkProvider)&&e.getMobileProvider().emit(tu.DISCONNECT,t)}),s.on(tu.CONNECT,function(t){Ec("[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE connect args=".concat(t)),Boolean(e.sdkProvider)&&e.getMobileProvider().emit(tu.CONNECT,t)}),s.on(tu.CONNECTED,function(t){Ec("[MetaMaskSDK: setupExtensionPreferences()] PROPAGATE connected",t),Boolean(e.sdkProvider)&&e.getMobileProvider().emit(tu.CONNECTED,t)}),o.n=4;break;case 3:o.p=3,o.v,window.extension=void 0;case 4:o.n=6;break;case 5:null!==(n=e.platformManager)&&void 0!==n&&n.isMetaMaskMobileWebView()&&(null===(r=e.analytics)||void 0===r||r.send({event:eo.SDK_USE_INAPP_BROWSER}),e.activeProvider=hu({provider:window.ethereum,sdkInstance:e}),e._initialized=!0,u=!0);case 6:return o.a(2,(s&&a.extensionOnly&&(Ec("[MetaMaskSDK: setupExtensionPreferences()] EXTENSION ONLY --- prevent sdk initialization"),null===(i=e.analytics)||void 0===i||i.send({event:eo.SDK_USE_EXTENSION}),e.activeProvider=s,e.extensionActive=!0,e.extension=s,e._initialized=!0,u=!0),{preferExtension:c,shouldReturn:u,metamaskBrowserExtension:s}))}},o,null,[[1,3]])}))}(e);case 8:if(b=f.v,w=b.metamaskBrowserExtension,E=b.preferExtension,!b.shouldReturn){f.n=9;break}Ec("[MetaMaskSDK: performSDKInitialization()] shouldReturn=true --- prevent sdk initialization"),f.n=16;break;case 9:return f.n=10,function(e,t){var n,r,i,o,a;return Jd(this,void 0,void 0,L().m(function s(){var c,u,l,d,f,h,p,v,m,g,y,b,w,E,k,_,S,C,A,x,M;return L().w(function(s){for(;;)switch(s.n){case 0:return c=e.options,u=Object.assign({},c.logging),l=Ou,s.n=1,e.getAnonId();case 1:return d=s.v,f=null!==(n=c.preferDesktop)&&void 0!==n&&n,h=null!==(r=c.communicationLayerPreference)&&void 0!==r?r:ho.SOCKET,p=e.analytics,v=c.dappMetadata,m=c._source,g=null===(i=c.enableAnalytics)||void 0===i||i,y=c.timer,b=e,w=e.platformManager,E=c.transports,k=c.communicationServerUrl,_=null!==(o=c.storage)&&void 0!==o?o:{enabled:!0},S=function(){if(!e.installer)throw new Error("Invalid SDK status -- installer not initialized");return e.installer},C=u,A=void 0===t?void 0:function(){return Im(e)},x=Object.assign(Object.assign({},c.modals),{onPendingModalDisconnect:e.terminate.bind(e)}),M={anonId:d,preferDesktop:f,communicationLayerPreference:h,analytics:p,dappMetadata:v,_source:m,enableAnalytics:g,timer:y,sdk:b,platformManager:w,transports:E,communicationServerUrl:k,storage:_,getMetaMaskInstaller:S,logging:C,connectWithExtensionProvider:A,modals:x},e.remoteConnection=new l(M),s.n=2,e.remoteConnection.initRemoteCommunication({sdkInstance:e});case 2:e.installer=new Au({remote:e.remoteConnection,preferDesktop:null!==(a=c.preferDesktop)&&void 0!==a&&a,platformManager:e.platformManager,debug:e.debug});case 3:return s.a(2)}},s)}))}(e,w);case 10:return f.n=11,Dm(e);case 11:return f.n=12,function(e,t){var n,r;return Jd(this,void 0,void 0,L().m(function i(){var o;return L().w(function(i){for(;;)switch(i.n){case 0:o=e.options,t?(Ec("[MetaMaskSDK: handleAutoAndExtensionConnections()] preferExtension is detected -- connect with it."),null===(n=e.analytics)||void 0===n||n.send({event:eo.SDK_EXTENSION_UTILIZED}),Im(e).catch(function(e){console.warn("Can't connect with MetaMask extension...",e),localStorage.removeItem(Qc)})):o.checkInstallationImmediately&&((null===(r=e.platformManager)||void 0===r?void 0:r.isDesktopWeb())?(Ec("[MetaMaskSDK: handleAutoAndExtensionConnections()] checkInstallationImmediately"),e.connect().catch(function(e){Ec("[MetaMaskSDK: handleAutoAndExtensionConnections()] checkInstallationImmediately --- IGNORED --- error on autoconnect _err=".concat(e))})):console.warn("[handleAutoAndExtensionConnections()] checkInstallationImmediately --- IGNORED --- only for web desktop")),e._initialized=!0;case 1:return i.a(2)}},i)}))}(e,E);case 12:return f.p=12,f.n=13,null===(d=e.remoteConnection)||void 0===d?void 0:d.startConnection({initialCheck:!0});case 13:f.n=15;break;case 14:f.p=14,k=f.v,console.error("[MetaMaskSDK: setupRemoteConnectionAndInstaller()] Error while checking installation",k);case 15:e.emit(Nc.ProviderUpdate,ru.INITIALIZED);case 16:return f.a(2)}},f,null,[[12,14]])}))}function Wm(e){var t,n,r;return null!=(r=null==(n=null==(t=e.head)?void 0:t.querySelector('meta[name="csp-nonce"]'))?void 0:n.getAttribute("content"))?r:void 0}function Vm(e,t){if(e.isOk){var n=t(e.value);return n instanceof Promise?n.then(function(e){return tl(e)}):tl(n)}if(e.isErr){var r=e.value;return nl(r)}throw"should never get here"}function Gm(e){return e.includes("ref")?[].concat(E(e.filter(function(e){return"ref"!==e})),["ref"]):e}function Ym(e){var t=e.version;return al("div",{style:{textAlign:"center",color:"#BBC0C5",fontSize:"12"}},"SDK Version ",t?"v".concat(t):"unknown")}function Zm(e,t){return e.toString(2).padStart(t,"0")}function Jm(e,t){var n=e%t;return n>=0?n:t+n}function Qm(e,t){return new Array(e).fill(t)}function Xm(){for(var e=0,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];e=Math.max(e,a.length)}for(var s=[],c=0;c<e;c++){var u,l=_(n);try{for(l.s();!(u=l.n()).done;){var d=u.value;c>=d.length||s.push(d[c])}}catch(f){l.e(f)}finally{l.f()}}return new Uint8Array(s)}function eg(e,t,n){if(n<0||n+t.length>e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[n+r])return!1;return!0}function tg(e){return{has:function(t){return e.includes(t)},decode:function(t){if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("alphabet.decode input should be array of strings");return t.map(function(t){if("string"!=typeof t)throw new Error("alphabet.decode: not string element=".concat(t));var n=e.indexOf(t);if(-1===n)throw new Error('Unknown letter: "'.concat(t,'". Allowed: ').concat(e));return n})},encode:function(t){if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("alphabet.encode input should be an array of numbers");return t.map(function(t){if(function(e){if(!Number.isSafeInteger(e))throw new Error("Wrong integer: ".concat(e))}(t),t<0||t>=e.length)throw new Error("Digit index outside alphabet: ".concat(t," (alphabet: ").concat(e.length,")"));return e[t]})}}}function ng(e,t,n,r){var i="",o=n.length;if("numeric"===r){for(var a=dd.alphabet.numeric.decode(n.split("")),s=a.length,c=0;c<s-2;c+=3)i+=Zm(100*a[c]+10*a[c+1]+a[c+2],10);s%3==1?i+=Zm(a[s-1],4):s%3==2&&(i+=Zm(10*a[s-2]+a[s-1],7))}else if("alphanumeric"===r){for(var u=dd.alphabet.alphanumerc.decode(n.split("")),l=u.length,d=0;d<l-1;d+=2)i+=Zm(45*u[d]+u[d+1],11);l%2==1&&(i+=Zm(u[l-1],6))}else{if("byte"!==r)throw new Error("encode: unsupported type");var f=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+D(e));return new Uint8Array((new TextEncoder).encode(e))}(n);o=f.length,i=Array.from(f).map(function(e){return Zm(e,8)}).join("")}var h=dd.capacity(e,t).capacity,p=Zm(o,dd.lengthBits(e,r)),v=dd.modeBits[r]+p+i;if(v.length>h)throw new Error("Capacity overflow");(v+="0".repeat(Math.min(4,Math.max(0,h-v.length)))).length%8&&(v+="0".repeat(8-v.length%8));for(var m=0;v.length!==h;m++)v+="1110110000010001"[m%16];var g=Uint8Array.from(v.match(/(.{8})/g).map(function(e){return Number("0b".concat(e))}));return function(e,t){var n,r=dd.capacity(e,t),i=r.words,o=r.shortBlocks,a=r.numBlocks,s=r.blockLen,c=r.total,u=(n=i,{encode:function(e){var t=hd.divisorPoly(n),r=Array.from(e);return r.push.apply(r,E(t.slice(0,-1).fill(0))),Uint8Array.from(hd.remainderPoly(r,t))},decode:function(e){for(var t=e.slice(),r=hd.polynomial(Array.from(e)),i=Qm(n,0),o=!1,a=0;a<n;a++){var s=hd.evalPoly(r,hd.exp(a));i[i.length-1-a]=s,0!==s&&(o=!0)}if(!o)return t;i=hd.polynomial(i);for(var c=hd.monomial(n,1),u=x(hd.euclidian(c,i,n),2),l=u[0],d=u[1],f=Qm(hd.degree(l),0),h=0,p=1;p<256&&h<f.length;p++)0===hd.evalPoly(l,p)&&(f[h++]=hd.inv(p));if(h!==f.length)throw new Error("RS.decode: wrong errors number");for(var v=0;v<f.length;v++){var m=t.length-1-hd.log(f[v]);if(m<0)throw new Error("RS.decode: wrong error location");for(var g=hd.inv(f[v]),y=1,b=0;b<f.length;b++)v!==b&&(y=hd.mul(y,hd.add(1,hd.mul(f[b],g))));t[m]=hd.add(t[m],hd.mul(hd.evalPoly(d,g),hd.inv(y)))}return t}});return{encode:function(e){for(var t=[],n=[],r=0;r<a;r++){var i=s+(r<o?0:1);t.push(e.subarray(0,i)),n.push(u.encode(e.subarray(0,i))),e=e.subarray(i)}var c=Xm.apply(void 0,t),l=Xm.apply(void 0,n),d=new Uint8Array(c.length+l.length);return d.set(c),d.set(l,c.length),d},decode:function(e){if(e.length!==c)throw new Error("interleave.decode: len(data)=".concat(e.length,", total=").concat(c));for(var t=[],n=0;n<a;n++){var r=n<o;t.push(new Uint8Array(i+s+(r?0:1)))}for(var l=0,d=0;d<s;d++)for(var f=0;f<a;f++)t[f][d]=e[l++];for(var h=o;h<a;h++)t[h][s]=e[l++];for(var p=s;p<s+i;p++)for(var v=0;v<a;v++){var m=v<o;t[v][p+(m?0:1)]=e[l++]}for(var g=[],y=0,b=t;y<b.length;y++){var w=b[y];g.push.apply(g,E(Array.from(u.decode(w)).slice(0,-i)))}return Uint8Array.from(g)}}}(e,t).encode(g)}function rg(e,t,n,r){var i=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=dd.size.encode(e),o=new od(i+2),a=new od(3).rect(0,3,!0).border(1,!1).border(1,!0).border(1,!1);o=(o=o.embed(0,a).embed({x:-a.width,y:0},a).embed({x:0,y:-a.height},a)).rectSlice(1,i);var s,c=new od(1).rect(0,1,!0).border(1,!1).border(1,!0),u=dd.alignmentPatterns(e),l=_(u);try{for(l.s();!(s=l.n()).done;){var d,f=s.value,h=_(u);try{for(h.s();!(d=h.n()).done;){var p=d.value;void 0===o.data[f][p]&&o.embed({x:p-2,y:f-2},c)}}catch(T){h.e(T)}finally{h.f()}}}catch(T){l.e(T)}finally{l.f()}o=o.hLine({x:0,y:6},1/0,function(e,t){var n=e.x;return void 0===t?n%2==0:t}).vLine({x:6,y:0},1/0,function(e,t){var n=e.y;return void 0===t?n%2==0:t});for(var v=dd.formatBits(t,n),m=function(e){return!r&&1==(v>>e&1)},g=0;g<6;g++)o.data[g][8]=m(g);for(var y=6;y<8;y++)o.data[y+1][8]=m(y);for(var b=8;b<15;b++)o.data[i-15+b][8]=m(b);for(var w=0;w<8;w++)o.data[8][i-w-1]=m(w);for(var E=8;E<9;E++)o.data[8][15-E-1+1]=m(E);for(var k=9;k<15;k++)o.data[8][15-k-1]=m(k);if(o.data[i-8][8]=!r,e>=7)for(var S=dd.versionBits(e),C=0;C<18;C+=1){var A=!r&&1==(S>>C&1),x=Math.floor(C/3),M=C%3+i-8-3;o.data[x][M]=A,o.data[M][x]=A}return o}(e,t,r,arguments.length>4&&void 0!==arguments[4]&&arguments[4]),o=0,a=8*n.length;if(function(e,t,n){for(var r=e.height,i=fd[t],o=-1,a=r-1,s=r-1;s>0;s-=2){for(6==s&&(s=5);;a+=o){for(var c=0;c<2;c+=1){var u=s-c;void 0===e.data[a][u]&&n(u,a,i(u,a))}if(a+o<0||a+o>=r)break}o=-o}}(i,r,function(e,t,r){var s=!1;o<a&&(s=!!(n[o>>>3]>>(7-o&7)&1),o++),i.data[t][e]=s!==r}),o!==a)throw new Error("QR: bytes left after draw");return i}function ig(e){var t=e.inverse(),n=function(e){for(var t,n=0,r=0,i=1;r<e.length;r++)t===e[r]&&(i++,r!==e.length-1)||(i>=5&&(n+=i-5+3),t=e[r],i=1);return n},r=0;e.data.forEach(function(e){return r+=n(e)}),t.data.forEach(function(e){return r+=n(e)});for(var i=0,o=e.data,a=e.width-1,s=e.height-1,c=0;c<a;c++)for(var u=0;u<s;u++){var l=c+1,d=u+1;o[c][u]===o[l][u]&&o[l][u]===o[c][d]&&o[l][u]===o[l][d]&&(i+=3)}var f,h=function(e){for(var t=[!0,!1,!0,!0,!0,!1,!0],n=[!1,!1,!1,!1],r=[].concat(t,n),i=[].concat(n,t),o=0,a=0;a<e.length;a++)eg(e,r,a)&&(o+=40),eg(e,i,a)&&(o+=40);return o},p=0,v=_(e.data);try{for(v.s();!(f=v.n()).done;){p+=h(f.value)}}catch(E){v.e(E)}finally{v.f()}var m,g=_(t.data);try{for(g.s();!(m=g.n()).done;){p+=h(m.value)}}catch(E){g.e(E)}finally{g.f()}var y=0;e.rectRead(0,1/0,function(e,t){return y+=t?1:0});var b=y/(e.height*e.width)*100,w=10*Math.floor(Math.abs(b-50)/5);return r+i+p+w}function og(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"raw",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=void 0!==n.ecc?n.ecc:"medium";!function(e){if(!ad.includes(e))throw new Error("Invalid error correction mode=".concat(e,". Expected: ").concat(ad))}(r);var i=void 0!==n.encoding?n.encoding:function(e){var t,n="numeric",r=_(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(!dd.alphabet.numeric.has(i)&&(n="alphanumeric",!dd.alphabet.alphanumerc.has(i)))return"byte"}}catch(o){r.e(o)}finally{r.f()}return n}(e);(function(e){if(!sd.includes(e))throw new Error("Encoding: invalid mode=".concat(e,". Expected: ").concat(sd));if("kanji"===e||"eci"===e)throw new Error("Encoding: ".concat(e," is not supported (yet?)."))})(i),void 0!==n.mask&&function(e){if(![0,1,2,3,4,5,6,7].includes(e)||!fd[e])throw new Error("Invalid mask=".concat(e,". Expected number [0..7]"))}(n.mask);var o,a=n.version,s=new Error("Unknown error");if(void 0!==a)(function(e){if(!Number.isSafeInteger(e)||e<1||e>40)throw new Error("Invalid version=".concat(e,". Expected number [1..40]"))})(a),o=ng(a,r,e,i);else for(var c=1;c<=40;c++)try{o=ng(c,r,e,i),a=c;break}catch(d){s=d}if(!a||!o)throw s;var u=function(e,t,n,r){if(void 0===r){for(var i=(s=1/0,{add:function(e,t){e>=s||(a=t,s=e)},get:function(){return a},score:function(){return s}}),o=0;o<fd.length;o++)i.add(ig(rg(e,t,n,o,!0)),o);r=i.get()}var a,s;if(void 0===r)throw new Error("Cannot find mask");return rg(e,t,n,r)}(a,r,o,n.mask);u.assertDrawn();var l=void 0===n.border?2:n.border;if(!Number.isSafeInteger(l))throw new Error("Wrong border type="+D(l));if(u=u.border(l,!1),void 0!==n.scale&&(u=u.scale(n.scale)),"raw"===t)return u.data;if("ascii"===t)return u.toASCII();if("svg"===t)return u.toSVG();if("gif"===t)return u.toGIF();if("term"===t)return u.toTerm();throw new Error("Unknown output: ".concat(t))}return i({ConnectionStatus:void 0,EventType:void 0,MessageType:void 0,CommunicationLayerPreference:void 0,PlatformType:void 0,PROVIDER_UPDATE_TYPE:void 0}),{setters:[function(e){l=e.i,d=e.o,f=e.r,m=e.t},function(e){k=e.H},function(e){S=e.t}],execute:function(){var y,b,N,ne,No,fs,ms,gs;for(C=m({"node_modules/.pnpm/ms@2.1.2/node_modules/ms/index.js":function(e,t){var n=1e3,r=60*n,i=60*r,o=24*i,a=7*o,s=365.25*o;function c(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}t.exports=function(e,t){t=t||{};var u,l,d=D(e);if("string"===d&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var c=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*s;case"weeks":case"week":case"w":return c*a;case"days":case"day":case"d":return c*o;case"hours":case"hour":case"hrs":case"hr":case"h":return c*i;case"minutes":case"minute":case"mins":case"min":case"m":return c*r;case"seconds":case"second":case"secs":case"sec":case"s":return c*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(e);if("number"===d&&isFinite(e))return t.long?(u=e,(l=Math.abs(u))>=o?c(u,l,o,"day"):l>=i?c(u,l,i,"hour"):l>=r?c(u,l,r,"minute"):l>=n?c(u,l,n,"second"):u+" ms"):function(e){var t=Math.abs(e);return t>=o?Math.round(e/o)+"d":t>=i?Math.round(e/i)+"h":t>=r?Math.round(e/r)+"m":t>=n?Math.round(e/n)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}}}),M=m({"node_modules/.pnpm/debug@4.3.4/node_modules/debug/src/common.js":function(e,t){t.exports=function(e){function t(e){var r,i,o,a=null;function s(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if(s.enabled){var o=s,a=Number(new Date);o.diff=a-(r||a),o.prev=r,o.curr=a,r=a,n[0]=t.coerce(n[0]),"string"!=typeof n[0]&&n.unshift("%O");var c=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,function(e,r){if("%%"===e)return"%";c++;var i=t.formatters[r];if("function"==typeof i){var a=n[c];e=i.call(o,a),n.splice(c,1),c--}return e}),t.formatArgs.call(o,n),(o.log||t.log).apply(o,n)}}return s.namespace=e,s.useColors=t.useColors(),s.color=t.selectColor(e),s.extend=n,s.destroy=t.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:function(){return null!==a?a:(i!==t.namespaces&&(i=t.namespaces,o=t.enabled(e)),o)},set:function(e){a=e}}),"function"==typeof t.init&&t.init(s),s}function n(e,n){var r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){var e=[].concat(E(t.names.map(r)),E(t.skips.map(r).map(function(e){return"-"+e}))).join(",");return t.enable(""),e},t.enable=function(e){var n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=C(),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(function(n){t[n]=e[n]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){for(var n=0,r=0;r<e.length;r++)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t}}}),T=m({"node_modules/.pnpm/debug@4.3.4/node_modules/debug/src/browser.js":function(e,t){var n;e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(r++,"%c"===e&&(i=r))}),e.splice(i,0,n)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(n){}},e.load=function(){var t;try{t=e.storage.getItem("debug")}catch(n){}!t&&"undefined"!=typeof process&&"env"in process&&(t={}.DEBUG);return t},e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage=function(){try{return localStorage}catch(e){}}(),e.destroy=(n=!1,function(){n||(n=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||function(){},t.exports=M()(e),t.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}}),O=m({"node_modules/.pnpm/openapi-fetch@0.13.8/node_modules/openapi-fetch/dist/cjs/index.cjs":function(n,r){var i,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,c=Object.prototype.hasOwnProperty,u={};!function(e,t){for(var n in t)o(e,n,{get:t[n],enumerable:!0})}(u,{createFinalURL:function(){return R},createPathBasedClient:function(){return E},createQuerySerializer:function(){return M},default:function(){return m},defaultBodySerializer:function(){return O},defaultPathSerializer:function(){return T},mergeHeaders:function(){return I},randomID:function(){return f},removeTrailingSlash:function(){return N},serializeArrayParam:function(){return C},serializeObjectParam:function(){return S},serializePrimitiveParam:function(){return k},wrapAsPathBasedClient:function(){return w}}),r.exports=(i=u,function(e,t,n,r){if(t&&"object"===D(t)||"function"==typeof t){var i,u=_(s(t));try{var l=function(){var s=i.value;c.call(e,s)||s===n||o(e,s,{get:function(){return t[s]},enumerable:!(r=a(t,s))||r.enumerable})};for(u.s();!(i=u.n()).done;)l()}catch(d){u.e(d)}finally{u.f()}}return e}(o({},"__esModule",{value:!0}),i));var l=/\{[^{}]+\}/g,d=function(){var e;return"object"===("undefined"==typeof process?"undefined":D(process))&&Number.parseInt(null===(e=process)||void 0===e||null===(e=e.versions)||void 0===e||null===(e=e.node)||void 0===e?void 0:e.substring(0,2))>=18&&process.versions.undici};function f(){return Math.random().toString(36).slice(2,11)}function m(n){var r=A({},n),i=r.baseUrl,o=void 0===i?"":i,a=r.Request,s=void 0===a?globalThis.Request:a,c=r.fetch,u=void 0===c?globalThis.fetch:c,l=r.querySerializer,h=r.bodySerializer,p=r.headers,m=r.requestInitExt,y=void 0===m?void 0:m,b=v(r,e);y=d()?y:void 0,o=N(o);var w=[];function E(e,t){return k.apply(this,arguments)}function k(){return k=g(L().m(function e(n,r){var i,a,c,d,m,g,E,k,S,C,x,T,P,B,j,K,U,H,F,z,q,$,W,V,G,Y,Z,J,Q,X,ee,te,ne,re,ie,oe,ae,se,ce,ue,le,de;return L().w(function(e){for(;;)switch(e.p=e.n){case 0:for(Y in c=(a=r||{}).baseUrl,d=a.fetch,m=void 0===d?u:d,g=a.Request,E=a.headers,k=a.params,S=void 0===k?{}:k,C=a.parseAs,x=void 0===C?"json":C,T=a.querySerializer,P=a.bodySerializer,B=void 0===P?null!=h?h:O:P,j=a.body,K=v(a,t),U=o,c&&(U=null!==(i=N(c))&&void 0!==i?i:o),H="function"==typeof l?l:M(l),T&&(H="function"==typeof T?T:M(A(A({},"object"===D(l)?l:{}),T))),F=void 0===j?void 0:B(j,I(p,E,S.header)),z=I(void 0===F||F instanceof FormData?{}:{"Content-Type":"application/json"},p,E,S.header),q=A(A(A({redirect:"follow"},b),K),{},{body:F,headers:z}),V=new s(R(n,{baseUrl:U,params:S,querySerializer:H}),q),K)Y in V||(V[Y]=K[Y]);if(!w.length){e.n=10;break}$=f(),W=Object.freeze({baseUrl:U,fetch:m,parseAs:x,querySerializer:H,bodySerializer:B}),Z=_(w),e.p=1,Z.s();case 2:if((J=Z.n()).done){e.n=7;break}if(!(Q=J.value)||"object"!==D(Q)||"function"!=typeof Q.onRequest){e.n=6;break}return e.n=3,Q.onRequest({request:V,schemaPath:n,params:S,options:W,id:$});case 3:if(!(X=e.v)){e.n=6;break}if(!(X instanceof s)){e.n=4;break}V=X,e.n=6;break;case 4:if(!(X instanceof Response)){e.n=5;break}return G=X,e.a(3,7);case 5:throw new Error("onRequest: must return new Request() or Response() when modifying the request");case 6:e.n=2;break;case 7:e.n=9;break;case 8:e.p=8,ce=e.v,Z.e(ce);case 9:return e.p=9,Z.f(),e.f(9);case 10:if(G){e.n=25;break}return e.p=11,e.n=12,m(V,y);case 12:G=e.v,e.n=20;break;case 13:if(e.p=13,ue=e.v,ee=ue,!w.length){e.n=19;break}te=w.length-1;case 14:if(!(te>=0)){e.n=19;break}if(!(ne=w[te])||"object"!==D(ne)||"function"!=typeof ne.onError){e.n=18;break}return e.n=15,ne.onError({request:V,error:ee,schemaPath:n,params:S,options:W,id:$});case 15:if(!(re=e.v)){e.n=18;break}if(!(re instanceof Response)){e.n=16;break}return ee=void 0,G=re,e.a(3,19);case 16:if(!(re instanceof Error)){e.n=17;break}return ee=re,e.a(3,18);case 17:throw new Error("onError: must return new Response() or instance of Error");case 18:te--,e.n=14;break;case 19:if(!ee){e.n=20;break}throw ee;case 20:if(!w.length){e.n=25;break}ie=w.length-1;case 21:if(!(ie>=0)){e.n=25;break}if(!(oe=w[ie])||"object"!==D(oe)||"function"!=typeof oe.onResponse){e.n=24;break}return e.n=22,oe.onResponse({request:V,response:G,schemaPath:n,params:S,options:W,id:$});case 22:if(!(ae=e.v)){e.n=24;break}if(ae instanceof Response){e.n=23;break}throw new Error("onResponse: must return new Response() when modifying the response");case 23:G=ae;case 24:ie--,e.n=21;break;case 25:if(204!==G.status&&"HEAD"!==V.method&&"0"!==G.headers.get("Content-Length")){e.n=26;break}return e.a(2,G.ok?{data:void 0,response:G}:{error:void 0,response:G});case 26:if(!G.ok){e.n=29;break}if("stream"!==x){e.n=27;break}return e.a(2,{data:G.body,response:G});case 27:return e.n=28,G[x]();case 28:return le=e.v,de=G,e.a(2,{data:le,response:de});case 29:return e.n=30,G.text();case 30:se=e.v;try{se=JSON.parse(se)}catch(L){}return e.a(2,{error:se,response:G})}},e,null,[[11,13],[1,8,9,10]])})),k.apply(this,arguments)}return{request:function(e,t,n){return E(t,A(A({},n),{},{method:e.toUpperCase()}))},GET:function(e,t){return E(e,A(A({},t),{},{method:"GET"}))},PUT:function(e,t){return E(e,A(A({},t),{},{method:"PUT"}))},POST:function(e,t){return E(e,A(A({},t),{},{method:"POST"}))},DELETE:function(e,t){return E(e,A(A({},t),{},{method:"DELETE"}))},OPTIONS:function(e,t){return E(e,A(A({},t),{},{method:"OPTIONS"}))},HEAD:function(e,t){return E(e,A(A({},t),{},{method:"HEAD"}))},PATCH:function(e,t){return E(e,A(A({},t),{},{method:"PATCH"}))},TRACE:function(e,t){return E(e,A(A({},t),{},{method:"TRACE"}))},use:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o){if("object"!==D(o)||!("onRequest"in o||"onResponse"in o||"onError"in o))throw new Error("Middleware must be an object with one of `onRequest()`, `onResponse() or `onError()`");w.push(o)}}},eject:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o=i[r],a=w.indexOf(o);-1!==a&&w.splice(a,1)}}}}var y=h(function e(t,n){var r=this;p(this,e),P(this,"GET",function(e){return r.client.GET(r.url,e)}),P(this,"PUT",function(e){return r.client.PUT(r.url,e)}),P(this,"POST",function(e){return r.client.POST(r.url,e)}),P(this,"DELETE",function(e){return r.client.DELETE(r.url,e)}),P(this,"OPTIONS",function(e){return r.client.OPTIONS(r.url,e)}),P(this,"HEAD",function(e){return r.client.HEAD(r.url,e)}),P(this,"PATCH",function(e){return r.client.PATCH(r.url,e)}),P(this,"TRACE",function(e){return r.client.TRACE(r.url,e)}),this.client=t,this.url=n}),b=function(){return h(function e(){p(this,e),this.client=null},[{key:"get",value:function(e,t){var n=new y(e,t);return this.client[t]=n,n}}])}();function w(e){var t=new b,n=new Proxy(e,t);function r(){}r.prototype=n;var i=new r;return t.client=i,i}function E(e){return w(m(e))}function k(e,t,n){if(null==t)return"";if("object"===D(t))throw new Error("Deeply-nested arrays/objects arent supported. Provide your own `querySerializer()` to handle these.");return"".concat(e,"=").concat(!0===(null==n?void 0:n.allowReserved)?t:encodeURIComponent(t))}function S(e,t,n){if(!t||"object"!==D(t))return"";var r=[],i={simple:",",label:".",matrix:";"}[n.style]||"&";if("deepObject"!==n.style&&!1===n.explode){for(var o in t)r.push(o,!0===n.allowReserved?t[o]:encodeURIComponent(t[o]));var a=r.join(",");switch(n.style){case"form":return"".concat(e,"=").concat(a);case"label":return".".concat(a);case"matrix":return";".concat(e,"=").concat(a);default:return a}}for(var s in t){var c="deepObject"===n.style?"".concat(e,"[").concat(s,"]"):s;r.push(k(c,t[s],n))}var u=r.join(i);return"label"===n.style||"matrix"===n.style?"".concat(i).concat(u):u}function C(e,t,n){if(!Array.isArray(t))return"";if(!1===n.explode){var r={form:",",spaceDelimited:"%20",pipeDelimited:"|"}[n.style]||",",i=(!0===n.allowReserved?t:t.map(function(e){return encodeURIComponent(e)})).join(r);switch(n.style){case"simple":return i;case"label":return".".concat(i);case"matrix":return";".concat(e,"=").concat(i);default:return"".concat(e,"=").concat(i)}}var o,a={simple:",",label:".",matrix:";"}[n.style]||"&",s=[],c=_(t);try{for(c.s();!(o=c.n()).done;){var u=o.value;"simple"===n.style||"label"===n.style?s.push(!0===n.allowReserved?u:encodeURIComponent(u)):s.push(k(e,u,n))}}catch(l){c.e(l)}finally{c.f()}return"label"===n.style||"matrix"===n.style?"".concat(a).concat(s.join(a)):s.join(a)}function M(e){return function(t){var n=[];if(t&&"object"===D(t))for(var r in t){var i=t[r];if(null!=i)if(Array.isArray(i)){if(0===i.length)continue;n.push(C(r,i,A(A({style:"form",explode:!0},null==e?void 0:e.array),{},{allowReserved:(null==e?void 0:e.allowReserved)||!1})))}else"object"!==D(i)?n.push(k(r,i,e)):n.push(S(r,i,A(A({style:"deepObject",explode:!0},null==e?void 0:e.object),{},{allowReserved:(null==e?void 0:e.allowReserved)||!1})))}return n.join("&")}}function T(e,t){var n,r,i=e,o=_(null!==(n=e.match(l))&&void 0!==n?n:[]);try{for(o.s();!(r=o.n()).done;){var a=r.value,s=a.substring(1,a.length-1),c=!1,u="simple";if(s.endsWith("*")&&(c=!0,s=s.substring(0,s.length-1)),s.startsWith(".")?(u="label",s=s.substring(1)):s.startsWith(";")&&(u="matrix",s=s.substring(1)),t&&void 0!==t[s]&&null!==t[s]){var d=t[s];i=Array.isArray(d)?i.replace(a,C(s,d,{style:u,explode:c})):"object"!==D(d)?"matrix"!==u?i.replace(a,"label"===u?".".concat(encodeURIComponent(d)):encodeURIComponent(d)):i.replace(a,";".concat(k(s,d))):i.replace(a,S(s,d,{style:u,explode:c}))}}}catch(f){o.e(f)}finally{o.f()}return i}function O(e,t){if(e instanceof FormData)return e;var n,r;if(t&&"application/x-www-form-urlencoded"===(t.get instanceof Function?null!==(n=t.get("Content-Type"))&&void 0!==n?n:t.get("content-type"):null!==(r=t["Content-Type"])&&void 0!==r?r:t["content-type"]))return new URLSearchParams(e).toString();return JSON.stringify(e)}function R(e,t){var n,r,i="".concat(t.baseUrl).concat(e);null!==(n=t.params)&&void 0!==n&&n.path&&(i=T(i,t.params.path));var o=t.querySerializer(null!==(r=t.params.query)&&void 0!==r?r:{});return o.startsWith("?")&&(o=o.substring(1)),o&&(i+="?".concat(o)),i}function I(){for(var e=new Headers,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];if(a&&"object"===D(a)){var s,c=_(a instanceof Headers?a.entries():Object.entries(a));try{for(c.s();!(s=c.n()).done;){var u=x(s.value,2),l=u[0],d=u[1];if(null===d)e.delete(l);else if(Array.isArray(d)){var f,h=_(d);try{for(h.s();!(f=h.n()).done;){var p=f.value;e.append(l,p)}}catch(v){h.e(v)}finally{h.f()}}else void 0!==d&&e.set(l,d)}}catch(v){c.e(v)}finally{c.f()}}}return e}function N(e){return e.endsWith("/")?e.substring(0,e.length-1):e}}}),R=m({"node_modules/.pnpm/@metamask+sdk-analytics@0.0.5/node_modules/@metamask/sdk-analytics/dist/index.js":function(e,t){var n,r=Object.create,i=Object.defineProperty,o=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,s=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty,u=function(e,t,n,r){if(t&&"object"===D(t)||"function"==typeof t){var s,u=_(a(t));try{var l=function(){var a=s.value;c.call(e,a)||a===n||i(e,a,{get:function(){return t[a]},enumerable:!(r=o(t,a))||r.enumerable})};for(u.s();!(s=u.n()).done;)l()}catch(d){u.e(d)}finally{u.f()}}return e},l={};!function(e,t){for(var n in t)i(e,n,{get:t[n],enumerable:!0})}(l,{analytics:function(){return w}}),t.exports=(n=l,u(i({},"__esModule",{value:!0}),n));var d,f,v=function(e,t,n){return n=null!=e?r(s(e)):{},u(!t&&e&&e.__esModule?n:i(n,"default",{value:e,enumerable:!0}),e)}(O()),m=function(){return h(function e(t){p(this,e),this.batch=[],this.maxTimeoutMs=3e4,this.timeoutId=null,this.isSending=!1,this.batchSize=t.batchSize,this.baseTimeoutMs=t.baseTimeoutMs,this.currentTimeoutMs=t.baseTimeoutMs,this.sendFn=t.sendFn},[{key:"enqueue",value:function(e){this.batch.push(e),this.schedule()}},{key:"schedule",value:function(){var e=this;this.batch.length>0&&!this.timeoutId&&(this.timeoutId=setTimeout(function(){e.timeoutId=null,e.flush()},this.currentTimeoutMs))}},{key:"flush",value:(e=g(L().m(function e(){var t,n;return L().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!this.isSending&&0!==this.batch.length){e.n=1;break}return e.a(2);case 1:return this.isSending=!0,t=E(this.batch.slice(0,this.batchSize)),this.batch=this.batch.slice(this.batchSize),e.p=2,e.n=3,this.sendFn(t);case 3:this.currentTimeoutMs=this.baseTimeoutMs,e.n=5;break;case 4:e.p=4,n=e.v,console.error("Sender: Failed to send batch",n),this.batch=[].concat(E(t),E(this.batch)),this.currentTimeoutMs=Math.min(2*this.currentTimeoutMs,this.maxTimeoutMs);case 5:return e.p=5,this.isSending=!1,this.schedule(),e.f(5);case 6:return e.a(2)}},e,this,[[2,4,5,6]])})),function(){return e.apply(this,arguments)})}]);var e}(),y=m,b=function(){return h(function e(t){p(this,e),this.enabled=!1,this.properties={};var n=(0,v.default)({baseUrl:t}),r=function(){var e=g(L().m(function e(t){var r;return L().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,n.POST("/v1/events",{body:t});case 1:if(200===(r=e.v).response.status){e.n=2;break}throw new Error(r.error);case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}();this.sender=new y({batchSize:100,baseTimeoutMs:200,sendFn:r})},[{key:"enable",value:function(){this.enabled=!0}},{key:"setGlobalProperty",value:function(e,t){this.properties[e]=t}},{key:"track",value:function(e,t){if(this.enabled){var n=A(A({name:e},this.properties),t);this.sender.enqueue(n)}}}])}();"undefined"!=typeof process&&(d=null!=(f={}.METAMASK_ANALYTICS_ENDPOINT)?f:{}.NEXT_PUBLIC_METAMASK_ANALYTICS_ENDPOINT);var w=new b(null!=d?d:"https://mm-sdk-analytics.api.cx.metamask.io/")}}),I=m({"node_modules/.pnpm/eventemitter2@6.4.9/node_modules/eventemitter2/lib/eventemitter2.js":function(e,t){!function(n){var r=Object.hasOwnProperty,i=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},o="object"==("undefined"==typeof process?"undefined":D(process))&&"function"==typeof process.nextTick,a="function"==typeof Symbol,s="object"===("undefined"==typeof Reflect?"undefined":D(Reflect)),c="function"==typeof setImmediate?setImmediate:setTimeout,u=a?s&&"function"==typeof Reflect.ownKeys?Reflect.ownKeys:function(e){var t=Object.getOwnPropertyNames(e);return t.push.apply(t,Object.getOwnPropertySymbols(e)),t}:Object.keys;function l(){this._events={},this._conf&&d.call(this,this._conf)}function d(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),e.maxListeners!==n&&(this._maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),e.ignoreErrors&&(this.ignoreErrors=e.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function f(e,t){var n="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(n+=" Event name: "+t+"."),"undefined"!=typeof process&&process.emitWarning){var r=new Error(n);r.name="MaxListenersExceededWarning",r.emitter=this,r.count=e,process.emitWarning(r)}else console.error(n),console.trace&&console.trace()}var h=function(e,t,n){var r=arguments.length;switch(r){case 0:return[];case 1:return[e];case 2:return[e,t];case 3:return[e,t,n];default:for(var i=new Array(r);r--;)i[r]=arguments[r];return i}};function p(e,t){for(var r={},i=e.length,o=t?t.length:0,a=0;a<i;a++)r[e[a]]=a<o?t[a]:n;return r}function v(e,t,n){var r,i;if(this._emitter=e,this._target=t,this._listeners={},this._listenersCount=0,(n.on||n.off)&&(r=n.on,i=n.off),t.addEventListener?(r=t.addEventListener,i=t.removeEventListener):t.addListener?(r=t.addListener,i=t.removeListener):t.on&&(r=t.on,i=t.off),!r&&!i)throw Error("target does not implement any known event API");if("function"!=typeof r)throw TypeError("on method must be a function");if("function"!=typeof i)throw TypeError("off method must be a function");this._on=r,this._off=i;var o=e._observers;o?o.push(this):e._observers=[this]}function m(e,t,i,o){var a=Object.assign({},t);if(!e)return a;if("object"!==D(e))throw TypeError("options must be an object");var s,c,u,l=Object.keys(e),d=l.length;function f(e){throw Error('Invalid "'+s+'" option value'+(e?". Reason: "+e:""))}for(var h=0;h<d;h++){if(s=l[h],!o&&!r.call(t,s))throw Error('Unknown "'+s+'" option');(c=e[s])!==n&&(u=i[s],a[s]=u?u(c,f):c)}return a}function g(e,t){return"function"==typeof e&&e.hasOwnProperty("prototype")||t("value must be a constructor"),e}function y(e){var t="value must be type of "+e.join("|"),n=e.length,r=e[0],i=e[1];return 1===n?function(e,n){if(D(e)===r)return e;n(t)}:2===n?function(e,n){var o=D(e);if(o===r||o===i)return e;n(t)}:function(r,i){for(var o=D(r),a=n;a-- >0;)if(o===e[a])return r;i(t)}}Object.assign(v.prototype,{subscribe:function(e,t,n){var r=this,i=this._target,o=this._emitter,a=this._listeners,s=function(){var r=h.apply(null,arguments),a={data:r,name:t,original:e};n?!1!==n.call(i,a)&&o.emit.apply(o,[a.name].concat(r)):o.emit.apply(o,[t].concat(r))};if(a[e])throw Error("Event '"+e+"' is already listening");this._listenersCount++,o._newListener&&o._removeListener&&!r._onNewListener?(this._onNewListener=function(n){n===t&&null===a[e]&&(a[e]=s,r._on.call(i,e,s))},o.on("newListener",this._onNewListener),this._onRemoveListener=function(n){n===t&&!o.hasListeners(n)&&a[e]&&(a[e]=null,r._off.call(i,e,s))},a[e]=null,o.on("removeListener",this._onRemoveListener)):(a[e]=s,r._on.call(i,e,s))},unsubscribe:function(e){var t,n,r,i=this,o=this._listeners,a=this._emitter,s=this._off,c=this._target;if(e&&"string"!=typeof e)throw TypeError("event must be a string");function l(){i._onNewListener&&(a.off("newListener",i._onNewListener),a.off("removeListener",i._onRemoveListener),i._onNewListener=null,i._onRemoveListener=null);var e=k.call(a,i);a._observers.splice(e,1)}if(e){if(!(t=o[e]))return;s.call(c,e,t),delete o[e],--this._listenersCount||l()}else{for(r=(n=u(o)).length;r-- >0;)e=n[r],s.call(c,e,o[e]);this._listeners={},this._listenersCount=0,l()}}});var b=y(["function"]),w=y(["object","function"]);function E(e,t,n){var r,i,o,a=0,s=new e(function(c,u,l){function d(){i&&(i=null),a&&(clearTimeout(a),a=0)}n=m(n,{timeout:0,overload:!1},{timeout:function(e,t){return("number"!=typeof(e*=1)||e<0||!Number.isFinite(e))&&t("timeout must be a positive number"),e}}),r=!n.overload&&"function"==typeof e.prototype.cancel&&"function"==typeof l;var f=function(e){d(),c(e)},h=function(e){d(),u(e)};r?t(f,h,l):(i=[function(e){h(e||Error("canceled"))}],t(f,h,function(e){if(o)throw Error("Unable to subscribe on cancel event asynchronously");if("function"!=typeof e)throw TypeError("onCancel callback must be a function");i.push(e)}),o=!0),n.timeout>0&&(a=setTimeout(function(){var e=Error("timeout");e.code="ETIMEDOUT",a=0,s.cancel(e),u(e)},n.timeout))});return r||(s.cancel=function(e){if(i){for(var t=i.length,n=1;n<t;n++)i[n](e);i[0](e),i=null}}),s}function k(e){var t=this._observers;if(!t)return-1;for(var n=t.length,r=0;r<n;r++)if(t[r]._target===e)return r;return-1}function _(e,t,n,r,i){if(!n)return null;if(0===r){var o=D(t);if("string"===o){var a,s,c=0,l=0,d=this.delimiter,f=d.length;if(-1!==(s=t.indexOf(d))){a=new Array(5);do{a[c++]=t.slice(l,s),l=s+f}while(-1!==(s=t.indexOf(d,l)));a[c++]=t.slice(l),t=a,i=c}else t=[t],i=1}else"object"===o?i=t.length:(t=[t],i=1)}var h,p,v,m,g,y,b,w=null,E=t[r],k=t[r+1];if(r===i)n._listeners&&("function"==typeof n._listeners?(e&&e.push(n._listeners),w=[n]):(e&&e.push.apply(e,n._listeners),w=[n]));else{if("*"===E){for(s=(y=u(n)).length;s-- >0;)"_listeners"!==(h=y[s])&&(b=_(e,t,n[h],r+1,i))&&(w?w.push.apply(w,b):w=b);return w}if("**"===E){for((g=r+1===i||r+2===i&&"*"===k)&&n._listeners&&(w=_(e,t,n,i,i)),s=(y=u(n)).length;s-- >0;)"_listeners"!==(h=y[s])&&("*"===h||"**"===h?(n[h]._listeners&&!g&&(b=_(e,t,n[h],i,i))&&(w?w.push.apply(w,b):w=b),b=_(e,t,n[h],r,i)):b=_(e,t,n[h],h===k?r+2:r,i),b&&(w?w.push.apply(w,b):w=b));return w}n[E]&&(w=_(e,t,n[E],r+1,i))}if((p=n["*"])&&_(e,t,p,r+1,i),v=n["**"])if(r<i)for(v._listeners&&_(e,t,v,i,i),s=(y=u(v)).length;s-- >0;)"_listeners"!==(h=y[s])&&(h===k?_(e,t,v[h],r+2,i):h===E?_(e,t,v[h],r+1,i):((m={})[h]=v[h],_(e,t,{"**":m},r+1,i)));else v._listeners?_(e,t,v,i,i):v["*"]&&v["*"]._listeners&&_(e,t,v["*"],i,i);return w}function S(e,t,n){var r,i,o=0,a=0,s=this.delimiter,c=s.length;if("string"==typeof e)if(-1!==(r=e.indexOf(s))){i=new Array(5);do{i[o++]=e.slice(a,r),a=r+c}while(-1!==(r=e.indexOf(s,a)));i[o++]=e.slice(a)}else i=[e],o=1;else i=e,o=e.length;if(o>1)for(r=0;r+1<o;r++)if("**"===i[r]&&"**"===i[r+1])return;var u,l=this.listenerTree;for(r=0;r<o;r++)if(l=l[u=i[r]]||(l[u]={}),r===o-1)return l._listeners?("function"==typeof l._listeners&&(l._listeners=[l._listeners]),n?l._listeners.unshift(t):l._listeners.push(t),!l._listeners.warned&&this._maxListeners>0&&l._listeners.length>this._maxListeners&&(l._listeners.warned=!0,f.call(this,l._listeners.length,u))):l._listeners=t,!0;return!0}function C(e,t,n,r){for(var i,o,a,s,c=u(e),l=c.length,d=e._listeners;l-- >0;)i=e[o=c[l]],a="_listeners"===o?n:n?n.concat(o):[o],s=r||"symbol"===D(o),d&&t.push(s?a:a.join(this.delimiter)),"object"===D(i)&&C.call(this,i,t,a,s);return t}function A(e){for(var t,n,r,i=u(e),o=i.length;o-- >0;)(t=e[n=i[o]])&&(r=!0,"_listeners"===n||A(t)||delete e[n]);return r}function x(e,t,n){this.emitter=e,this.event=t,this.listener=n}function M(e,t,r){if(!0===r)a=!0;else if(!1===r)i=!0;else{if(!r||"object"!==D(r))throw TypeError("options should be an object or true");var i=r.async,a=r.promisify,s=r.nextTick,u=r.objectify}if(i||s||a){var l=t,d=t._origin||t;if(s&&!o)throw Error("process.nextTick is not supported");a===n&&(a="AsyncFunction"===t.constructor.name),t=function(){var e=arguments,t=this,n=this.event;return a?s?Promise.resolve():new Promise(function(e){c(e)}).then(function(){return t.event=n,l.apply(t,e)}):(s?process.nextTick:c)(function(){t.event=n,l.apply(t,e)})},t._async=!0,t._origin=d}return[t,u?new x(this,e,t):this]}function T(e){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,d.call(this,e)}x.prototype.off=function(){return this.emitter.off(this.event,this.listener),this},T.EventEmitter2=T,T.prototype.listenTo=function(e,t,r){if("object"!==D(e))throw TypeError("target musts be an object");var o=this;function a(t){if("object"!==D(t))throw TypeError("events must be an object");var n,i=r.reducers,a=k.call(o,e);n=-1===a?new v(o,e,r):o._observers[a];for(var s,c=u(t),l=c.length,d="function"==typeof i,f=0;f<l;f++)s=c[f],n.subscribe(s,t[s]||s,d?i:i&&i[s])}return r=m(r,{on:n,off:n,reducers:n},{on:b,off:b,reducers:w}),i(t)?a(p(t)):a("string"==typeof t?p(t.split(/\s+/)):t),this},T.prototype.stopListeningTo=function(e,t){var n=this._observers;if(!n)return!1;var r,i=n.length,o=!1;if(e&&"object"!==D(e))throw TypeError("target should be an object");for(;i-- >0;)r=n[i],e&&r._target!==e||(r.unsubscribe(t),o=!0);return o},T.prototype.delimiter=".",T.prototype.setMaxListeners=function(e){e!==n&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},T.prototype.getMaxListeners=function(){return this._maxListeners},T.prototype.event="",T.prototype.once=function(e,t,n){return this._once(e,t,!1,n)},T.prototype.prependOnceListener=function(e,t,n){return this._once(e,t,!0,n)},T.prototype._once=function(e,t,n,r){return this._many(e,1,t,n,r)},T.prototype.many=function(e,t,n,r){return this._many(e,t,n,!1,r)},T.prototype.prependMany=function(e,t,n,r){return this._many(e,t,n,!0,r)},T.prototype._many=function(e,t,n,r,i){var o=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");function a(){return 0===--t&&o.off(e,a),n.apply(this,arguments)}return a._origin=n,this._on(e,a,r,i)},T.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||l.call(this);var e,t,n,r,i,o,s=arguments[0],c=this.wildcard;if("newListener"===s&&!this._newListener&&!this._events.newListener)return!1;if(c&&(e=s,"newListener"!==s&&"removeListener"!==s&&"object"===D(s))){if(n=s.length,a)for(r=0;r<n;r++)if("symbol"===D(s[r])){o=!0;break}o||(s=s.join(this.delimiter))}var u,d=arguments.length;if(this._all&&this._all.length)for(r=0,n=(u=this._all.slice()).length;r<n;r++)switch(this.event=s,d){case 1:u[r].call(this,s);break;case 2:u[r].call(this,s,arguments[1]);break;case 3:u[r].call(this,s,arguments[1],arguments[2]);break;default:u[r].apply(this,arguments)}if(c)u=[],_.call(this,u,e,this.listenerTree,0,n);else{if("function"==typeof(u=this._events[s])){switch(this.event=s,d){case 1:u.call(this);break;case 2:u.call(this,arguments[1]);break;case 3:u.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(d-1),i=1;i<d;i++)t[i-1]=arguments[i];u.apply(this,t)}return!0}u&&(u=u.slice())}if(u&&u.length){if(d>3)for(t=new Array(d-1),i=1;i<d;i++)t[i-1]=arguments[i];for(r=0,n=u.length;r<n;r++)switch(this.event=s,d){case 1:u[r].call(this);break;case 2:u[r].call(this,arguments[1]);break;case 3:u[r].call(this,arguments[1],arguments[2]);break;default:u[r].apply(this,t)}return!0}if(!this.ignoreErrors&&!this._all&&"error"===s)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},T.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||l.call(this);var e,t,n,r,i,o,s=arguments[0],c=this.wildcard;if("newListener"===s&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(c&&(e=s,"newListener"!==s&&"removeListener"!==s&&"object"===D(s))){if(r=s.length,a)for(i=0;i<r;i++)if("symbol"===D(s[i])){t=!0;break}t||(s=s.join(this.delimiter))}var u,d=[],f=arguments.length;if(this._all)for(i=0,r=this._all.length;i<r;i++)switch(this.event=s,f){case 1:d.push(this._all[i].call(this,s));break;case 2:d.push(this._all[i].call(this,s,arguments[1]));break;case 3:d.push(this._all[i].call(this,s,arguments[1],arguments[2]));break;default:d.push(this._all[i].apply(this,arguments))}if(c?(u=[],_.call(this,u,e,this.listenerTree,0)):u=this._events[s],"function"==typeof u)switch(this.event=s,f){case 1:d.push(u.call(this));break;case 2:d.push(u.call(this,arguments[1]));break;case 3:d.push(u.call(this,arguments[1],arguments[2]));break;default:for(n=new Array(f-1),o=1;o<f;o++)n[o-1]=arguments[o];d.push(u.apply(this,n))}else if(u&&u.length){if(u=u.slice(),f>3)for(n=new Array(f-1),o=1;o<f;o++)n[o-1]=arguments[o];for(i=0,r=u.length;i<r;i++)switch(this.event=s,f){case 1:d.push(u[i].call(this));break;case 2:d.push(u[i].call(this,arguments[1]));break;case 3:d.push(u[i].call(this,arguments[1],arguments[2]));break;default:d.push(u[i].apply(this,n))}}else if(!this.ignoreErrors&&!this._all&&"error"===s)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(d)},T.prototype.on=function(e,t,n){return this._on(e,t,!1,n)},T.prototype.prependListener=function(e,t,n){return this._on(e,t,!0,n)},T.prototype.onAny=function(e){return this._onAny(e,!1)},T.prototype.prependAny=function(e){return this._onAny(e,!0)},T.prototype.addListener=T.prototype.on,T.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},T.prototype._on=function(e,t,r,i){if("function"==typeof e)return this._onAny(e,t),this;if("function"!=typeof t)throw new Error("on only accepts instances of Function");this._events||l.call(this);var o,a=this;return i!==n&&(t=(o=M.call(this,e,t,i))[0],a=o[1]),this._newListener&&this.emit("newListener",e,t),this.wildcard?(S.call(this,e,t,r),a):(this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),r?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,f.call(this,this._events[e].length,e))):this._events[e]=t,a)},T.prototype.off=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var n,r=[];if(this.wildcard){var o="string"==typeof e?e.split(this.delimiter):e.slice();if(!(r=_.call(this,null,o,this.listenerTree,0)))return this}else{if(!this._events[e])return this;n=this._events[e],r.push({_listeners:n})}for(var a=0;a<r.length;a++){var s=r[a];if(n=s._listeners,i(n)){for(var c=-1,u=0,l=n.length;u<l;u++)if(n[u]===t||n[u].listener&&n[u].listener===t||n[u]._origin&&n[u]._origin===t){c=u;break}if(c<0)continue;return this.wildcard?s._listeners.splice(c,1):this._events[e].splice(c,1),0===n.length&&(this.wildcard?delete s._listeners:delete this._events[e]),this._removeListener&&this.emit("removeListener",e,t),this}(n===t||n.listener&&n.listener===t||n._origin&&n._origin===t)&&(this.wildcard?delete s._listeners:delete this._events[e],this._removeListener&&this.emit("removeListener",e,t))}return this.listenerTree&&A(this.listenerTree),this},T.prototype.offAny=function(e){var t,n=0,r=0;if(e&&this._all&&this._all.length>0){for(n=0,r=(t=this._all).length;n<r;n++)if(e===t[n])return t.splice(n,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(t=this._all,this._removeListener)for(n=0,r=t.length;n<r;n++)this.emit("removeListenerAny",t[n]);this._all=[]}return this},T.prototype.removeListener=T.prototype.off,T.prototype.removeAllListeners=function(e){if(e===n)return!this._events||l.call(this),this;if(this.wildcard){var t,r=_.call(this,null,e,this.listenerTree,0);if(!r)return this;for(t=0;t<r.length;t++)r[t]._listeners=null;this.listenerTree&&A(this.listenerTree)}else this._events&&(this._events[e]=null);return this},T.prototype.listeners=function(e){var t,r,i,o,a,s=this._events;if(e===n){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!s)return[];for(o=(t=u(s)).length,i=[];o-- >0;)"function"==typeof(r=s[t[o]])?i.push(r):i.push.apply(i,r);return i}if(this.wildcard){if(!(a=this.listenerTree))return[];var c=[],l="string"==typeof e?e.split(this.delimiter):e.slice();return _.call(this,c,l,a,0),c}return s&&(r=s[e])?"function"==typeof r?[r]:r:[]},T.prototype.eventNames=function(e){var t=this._events;return this.wildcard?C.call(this,this.listenerTree,[],null,e):t?u(t):[]},T.prototype.listenerCount=function(e){return this.listeners(e).length},T.prototype.hasListeners=function(e){if(this.wildcard){var t=[],r="string"==typeof e?e.split(this.delimiter):e.slice();return _.call(this,t,r,this.listenerTree,0),t.length>0}var i=this._events,o=this._all;return!!(o&&o.length||i&&(e===n?u(i).length:i[e]))},T.prototype.listenersAny=function(){return this._all?this._all:[]},T.prototype.waitFor=function(e,t){var r=this,i=D(t);return"number"===i?t={timeout:t}:"function"===i&&(t={filter:t}),E((t=m(t,{timeout:0,filter:n,handleError:!1,Promise:Promise,overload:!1},{filter:b,Promise:g})).Promise,function(n,i,o){function a(){var o=t.filter;if(!o||o.apply(r,arguments))if(r.off(e,a),t.handleError){var s=arguments[0];s?i(s):n(h.apply(null,arguments).slice(1))}else n(h.apply(null,arguments))}o(function(){r.off(e,a)}),r._on(e,a,!1)},{timeout:t.timeout,overload:t.overload})};var O=T.prototype;if(Object.defineProperties(T,{defaultMaxListeners:{get:function(){return O._maxListeners},set:function(e){if("number"!=typeof e||e<0||Number.isNaN(e))throw TypeError("n must be a non-negative number");O._maxListeners=e},enumerable:!0},once:{value:function(e,t,n){return E((n=m(n,{Promise:Promise,timeout:0,overload:!1},{Promise:g})).Promise,function(n,r,i){var o;if("function"==typeof e.addEventListener)return o=function(){n(h.apply(null,arguments))},i(function(){e.removeEventListener(t,o)}),void e.addEventListener(t,o,{once:!0});var a,s=function(){a&&e.removeListener("error",a),n(h.apply(null,arguments))};"error"!==t&&(a=function(n){e.removeListener(t,s),r(n)},e.once("error",a)),i(function(){a&&e.removeListener("error",a),e.removeListener(t,s)}),e.once(t,s)},{timeout:n.timeout,overload:n.overload})},writable:!0,configurable:!0}}),Object.defineProperties(O,{_maxListeners:{value:10,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),"function"==typeof define&&define.amd)define(function(){return T});else if("object"===D(e))t.exports=T;else{new Function("","return this")().EventEmitter2=T}}()}}),B=new Uint8Array(16),j=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,K=Cd,U=[],H=0;H<256;++H)U.push((H+256).toString(16).substr(1));F=Ad,z=xd,q=d(I()),$=d(R()),W=d(T()),V=d(S()),(G=Object.create(null)).open="0",G.close="1",G.ping="2",G.pong="3",G.message="4",G.upgrade="5",G.noop="6",Y=Object.create(null),Object.keys(G).forEach(function(e){Y[G[e]]=e}),Z={type:"error",data:"parser error"},J="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),Q="function"==typeof ArrayBuffer,X=function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},ee=function(e,t,n){var r=e.type,i=e.data;return J&&i instanceof Blob?t?n(i):te(i,n):Q&&(i instanceof ArrayBuffer||X(i))?t?n(i):te(new Blob([i]),n):n(G[r]+(i||""))},te=function(e,t){var n=new FileReader;return n.onload=function(){var e=n.result.split(",")[1];t("b"+(e||""))},n.readAsDataURL(e)},re="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(var Ss=0;Ss<64;Ss++)re["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(Ss)]=Ss;ie=function(e){var t,n,r,i,o,a=.75*e.length,s=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var u=new ArrayBuffer(a),l=new Uint8Array(u);for(t=0;t<s;t+=4)n=re[e.charCodeAt(t)],r=re[e.charCodeAt(t+1)],i=re[e.charCodeAt(t+2)],o=re[e.charCodeAt(t+3)],l[c++]=n<<2|r>>4,l[c++]=(15&r)<<4|i>>2,l[c++]=(3&i)<<6|63&o;return u},oe="function"==typeof ArrayBuffer,ae=function(e,t){if("string"!=typeof e)return{type:"message",data:ce(e,t)};var n=e.charAt(0);return"b"===n?{type:"message",data:se(e.substring(1),t)}:Y[n]?e.length>1?{type:Y[n],data:e.substring(1)}:{type:Y[n]}:Z},se=function(e,t){if(oe){var n=ie(e);return ce(n,t)}return{base64:!0,data:e}},ce=function(e,t){return"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer},ue=String.fromCharCode(30),le=function(e,t){var n=e.length,r=new Array(n),i=0;e.forEach(function(e,o){ee(e,!1,function(e){r[o]=e,++i===n&&t(r.join(ue))})})},de=function(e,t){for(var n=e.split(ue),r=[],i=0;i<n.length;i++){var o=ae(n[i],t);if(r.push(o),"error"===o.type)break}return r},Pd.prototype.on=Pd.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},Pd.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},Pd.prototype.off=Pd.prototype.removeListener=Pd.prototype.removeAllListeners=Pd.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},Pd.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t)}return this},Pd.prototype.emitReserved=Pd.prototype.emit,Pd.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},Pd.prototype.hasListeners=function(e){return!!this.listeners(e).length},he="function"==typeof Promise&&"function"==typeof Promise.resolve?function(e){return Promise.resolve().then(e)}:function(e,t){return t(e,0)},pe="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")(),ve=pe.setTimeout,me=pe.clearTimeout,ge=1.33,ye=function(e){function t(e,n,r){var i;return p(this,t),(i=o(this,t,[e])).description=n,i.context=r,i.type="TransportError",i}return s(t,e),h(t)}(c(Error)),be=function(e){function t(e){var n;return p(this,t),(n=o(this,t)).writable=!1,Ld(n,e),n.opts=e,n.query=e.query,n.socket=e.socket,n.supportsBinary=!e.forceBase64,n}return s(t,e),h(t,[{key:"onError",value:function(e,n,i){return r(t,"emitReserved",this,3)(["error",new ye(e,n,i)]),this}},{key:"open",value:function(){return this.readyState="opening",this.doOpen(),this}},{key:"close",value:function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}},{key:"send",value:function(e){"open"===this.readyState&&this.write(e)}},{key:"onOpen",value:function(){this.readyState="open",this.writable=!0,r(t,"emitReserved",this,3)(["open"])}},{key:"onData",value:function(e){var t=ae(e,this.socket.binaryType);this.onPacket(t)}},{key:"onPacket",value:function(e){r(t,"emitReserved",this,3)(["packet",e])}},{key:"onClose",value:function(e){this.readyState="closed",r(t,"emitReserved",this,3)(["close",e])}},{key:"pause",value:function(e){}},{key:"createUri",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}},{key:"_hostname",value:function(){var e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}},{key:"_port",value:function(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}},{key:"_query",value:function(e){var t=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}(e);return t.length?"?"+t:""}}])}(Pd),we=function(e){function t(){var e;return p(this,t),(e=o(this,t,arguments))._polling=!1,e}return s(t,e),h(t,[{key:"name",get:function(){return"polling"}},{key:"doOpen",value:function(){this._poll()}},{key:"pause",value:function(e){var t=this;this.readyState="pausing";var n=function(){t.readyState="paused",e()};if(this._polling||!this.writable){var r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}},{key:"_poll",value:function(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}},{key:"onData",value:function(e){var t=this;de(e,this.socket.binaryType).forEach(function(e){if("opening"===t.readyState&&"open"===e.type&&t.onOpen(),"close"===e.type)return t.onClose({description:"transport closed by the server"}),!1;t.onPacket(e)}),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}},{key:"doClose",value:function(){var e=this,t=function(){e.write([{type:"close"}])};"open"===this.readyState?t():this.once("open",t)}},{key:"write",value:function(e){var t=this;this.writable=!1,le(e,function(e){t.doWrite(e,function(){t.writable=!0,t.emitReserved("drain")})})}},{key:"uri",value:function(){var e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=Dd()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}])}(be),Ee=!1;try{Ee="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(Cs){}if(ke=Ee,_e=function(e){function t(e){var n;if(p(this,t),n=o(this,t,[e]),"undefined"!=typeof location){var r="https:"===location.protocol,i=location.port;i||(i=r?"443":"80"),n.xd="undefined"!=typeof location&&e.hostname!==location.hostname||i!==e.port}return n}return s(t,e),h(t,[{key:"doWrite",value:function(e,t){var n=this,r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",function(e,t){n.onError("xhr post error",e,t)})}},{key:"doPoll",value:function(){var e=this,t=this.request();t.on("data",this.onData.bind(this)),t.on("error",function(t,n){e.onError("xhr poll error",t,n)}),this.pollXhr=t}}])}(we),Se=function(e){function t(e,n,r){var i;return p(this,t),(i=o(this,t)).createRequest=e,Ld(i,r),i._opts=r,i._method=r.method||"GET",i._uri=n,i._data=void 0!==r.data?r.data:null,i._create(),i}return s(t,e),h(t,[{key:"_create",value:function(){var e,n=this,r=Id(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;var i=this._xhr=this.createRequest(r);try{i.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders)for(var o in i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0),this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(o)&&i.setRequestHeader(o,this._opts.extraHeaders[o])}catch(fs){}if("POST"===this._method)try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(fs){}try{i.setRequestHeader("Accept","*/*")}catch(fs){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(i),"withCredentials"in i&&(i.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(i.timeout=this._opts.requestTimeout),i.onreadystatechange=function(){var e;3===i.readyState&&(null===(e=n._opts.cookieJar)||void 0===e||e.parseCookies(i.getResponseHeader("set-cookie"))),4===i.readyState&&(200===i.status||1223===i.status?n._onLoad():n.setTimeoutFn(function(){n._onError("number"==typeof i.status?i.status:0)},0))},i.send(this._data)}catch(fs){return void this.setTimeoutFn(function(){n._onError(fs)},0)}"undefined"!=typeof document&&(this._index=t.requestsCount++,t.requests[this._index]=this)}},{key:"_onError",value:function(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}},{key:"_cleanup",value:function(e){if(void 0!==this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=Bd,e)try{this._xhr.abort()}catch(fs){}"undefined"!=typeof document&&delete t.requests[this._index],this._xhr=null}}},{key:"_onLoad",value:function(){var e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}},{key:"abort",value:function(){this._cleanup()}}])}(Pd),Se.requestsCount=0,Se.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",jd);else if("function"==typeof addEventListener){addEventListener("onpagehide"in pe?"pagehide":"unload",jd,!1)}ne=Kd({xdomain:!1}),Ce=ne&&null!==ne.responseType,Ae=function(e){function t(e){var n;p(this,t),n=o(this,t,[e]);var r=e&&e.forceBase64;return n.supportsBinary=Ce&&!r,n}return s(t,e),h(t,[{key:"request",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(e,{xd:this.xd},this.opts),new Se(Kd,this.uri(),e)}}])}(_e),xe="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),Me=function(e){function t(){return p(this,t),o(this,t,arguments)}return s(t,e),h(t,[{key:"name",get:function(){return"websocket"}},{key:"doOpen",value:function(){var e=this.uri(),t=this.opts.protocols,n=xe?{}:Id(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(Cs){return this.emitReserved("error",Cs)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}},{key:"addEventListeners",value:function(){var e=this;this.ws.onopen=function(){e.opts.autoUnref&&e.ws._socket.unref(),e.onOpen()},this.ws.onclose=function(t){return e.onClose({description:"websocket connection closed",context:t})},this.ws.onmessage=function(t){return e.onData(t.data)},this.ws.onerror=function(t){return e.onError("websocket error",t)}}},{key:"write",value:function(e){var t=this;this.writable=!1;for(var n=function(){var n=e[r],i=r===e.length-1;ee(n,t.supportsBinary,function(e){try{t.doWrite(n,e)}catch(fs){}i&&he(function(){t.writable=!0,t.emitReserved("drain")},t.setTimeoutFn)})},r=0;r<e.length;r++)n()}},{key:"doClose",value:function(){void 0!==this.ws&&(this.ws.onerror=function(){},this.ws.close(),this.ws=null)}},{key:"uri",value:function(){var e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=Dd()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}])}(be),Te=pe.WebSocket||pe.MozWebSocket,Oe=function(e){function t(){return p(this,t),o(this,t,arguments)}return s(t,e),h(t,[{key:"createSocket",value:function(e,t,n){return xe?new Te(e,t,n):t?new Te(e,t):new Te(e)}},{key:"doWrite",value:function(e,t){this.ws.send(t)}}])}(Me),Re=function(e){function t(){return p(this,t),o(this,t,arguments)}return s(t,e),h(t,[{key:"name",get:function(){return"webtransport"}},{key:"doOpen",value:function(){var e=this;try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(Cs){return this.emitReserved("error",Cs)}this._transport.closed.then(function(){e.onClose()}).catch(function(t){e.onError("webtransport error",t)}),this._transport.ready.then(function(){e._transport.createBidirectionalStream().then(function(t){var n=function(e,t){fe||(fe=new TextDecoder);var n=[],r=0,i=-1,o=!1;return new TransformStream({transform:function(a,s){for(n.push(a);;){if(0===r){if(Od(n)<1)break;var c=Rd(n,1);o=!(128&~c[0]),i=127&c[0],r=i<126?3:126===i?1:2}else if(1===r){if(Od(n)<2)break;var u=Rd(n,2);i=new DataView(u.buffer,u.byteOffset,u.length).getUint16(0),r=3}else if(2===r){if(Od(n)<8)break;var l=Rd(n,8),d=new DataView(l.buffer,l.byteOffset,l.length),f=d.getUint32(0);if(f>Math.pow(2,21)-1){s.enqueue(Z);break}i=f*Math.pow(2,32)+d.getUint32(4),r=3}else{if(Od(n)<i)break;var h=Rd(n,i);s.enqueue(ae(o?h:fe.decode(h),t)),r=0}if(0===i||i>e){s.enqueue(Z);break}}}})}(Number.MAX_SAFE_INTEGER,e.socket.binaryType),r=t.readable.pipeThrough(n).getReader(),i=Td();i.readable.pipeTo(t.writable),e._writer=i.writable.getWriter();var o=function(){r.read().then(function(t){var n=t.done,r=t.value;n||(e.onPacket(r),o())}).catch(function(e){})};o();var a={type:"open"};e.query.sid&&(a.data='{"sid":"'.concat(e.query.sid,'"}')),e._writer.write(a).then(function(){return e.onOpen()})})})}},{key:"write",value:function(e){var t=this;this.writable=!1;for(var n=function(){var n=e[r],i=r===e.length-1;t._writer.write(n).then(function(){i&&he(function(){t.writable=!0,t.emitReserved("drain")},t.setTimeoutFn)})},r=0;r<e.length;r++)n()}},{key:"doClose",value:function(){var e;null===(e=this._transport)||void 0===e||e.close()}}])}(be),Pe={websocket:Oe,webtransport:Re,polling:Ae},Ie=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Le=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],Ne="function"==typeof addEventListener&&"function"==typeof removeEventListener,De=[],Ne&&addEventListener("offline",function(){De.forEach(function(e){return e()})},!1),Be=function(e){function t(e,n){var r;if(p(this,t),(r=o(this,t)).binaryType="arraybuffer",r.writeBuffer=[],r._prevBufferLen=0,r._pingInterval=-1,r._pingTimeout=-1,r._maxPayload=-1,r._pingTimeoutTime=1/0,e&&"object"===D(e)&&(n=e,e=null),e){var i=Ud(e);n.hostname=i.host,n.secure="https"===i.protocol||"wss"===i.protocol,n.port=i.port,i.query&&(n.query=i.query)}else n.host&&(n.hostname=Ud(n.host).host);return Ld(r,n),r.secure=null!=n.secure?n.secure:"undefined"!=typeof location&&"https:"===location.protocol,n.hostname&&!n.port&&(n.port=r.secure?"443":"80"),r.hostname=n.hostname||("undefined"!=typeof location?location.hostname:"localhost"),r.port=n.port||("undefined"!=typeof location&&location.port?location.port:r.secure?"443":"80"),r.transports=[],r._transportsByName={},n.transports.forEach(function(e){var t=e.prototype.name;r.transports.push(t),r._transportsByName[t]=e}),r.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),r.opts.path=r.opts.path.replace(/\/$/,"")+(r.opts.addTrailingSlash?"/":""),"string"==typeof r.opts.query&&(r.opts.query=function(e){for(var t={},n=e.split("&"),r=0,i=n.length;r<i;r++){var o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}(r.opts.query)),Ne&&(r.opts.closeOnBeforeunload&&(r._beforeunloadEventListener=function(){r.transport&&(r.transport.removeAllListeners(),r.transport.close())},addEventListener("beforeunload",r._beforeunloadEventListener,!1)),"localhost"!==r.hostname&&(r._offlineEventListener=function(){r._onClose("transport close",{description:"network connection lost"})},De.push(r._offlineEventListener))),r.opts.withCredentials&&(r._cookieJar=void 0),r._open(),r}return s(t,e),h(t,[{key:"createTransport",value:function(e){var t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);var n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}},{key:"_open",value:function(){var e=this;if(0!==this.transports.length){var n=this.opts.rememberUpgrade&&t.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";var r=this.createTransport(n);r.open(),this.setTransport(r)}else this.setTimeoutFn(function(){e.emitReserved("error","No transports available")},0)}},{key:"setTransport",value:function(e){var t=this;this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",function(e){return t._onClose("transport close",e)})}},{key:"onOpen",value:function(){this.readyState="open",t.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}},{key:"_onPacket",value:function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":var t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}},{key:"onHandshake",value:function(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}},{key:"_resetPingTimeout",value:function(){var e=this;this.clearTimeoutFn(this._pingTimeoutTimer);var t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(function(){e._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}},{key:"_onDrain",value:function(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}},{key:"flush",value:function(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){var e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}},{key:"_getWritablePackets",value:function(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;for(var e=1,t=0;t<this.writeBuffer.length;t++){var n=this.writeBuffer[t].data;if(n&&(e+=Nd(n)),t>0&&e>this._maxPayload)return this.writeBuffer.slice(0,t);e+=2}return this.writeBuffer}},{key:"_hasPingExpired",value:function(){var e=this;if(!this._pingTimeoutTime)return!0;var t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,he(function(){e._onClose("ping timeout")},this.setTimeoutFn)),t}},{key:"write",value:function(e,t,n){return this._sendPacket("message",e,t,n),this}},{key:"send",value:function(e,t,n){return this._sendPacket("message",e,t,n),this}},{key:"_sendPacket",value:function(e,t,n,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var i={type:e,data:t,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}}},{key:"close",value:function(){var e=this,t=function(){e._onClose("forced close"),e.transport.close()},n=function(){e.off("upgrade",n),e.off("upgradeError",n),t()},r=function(){e.once("upgrade",n),e.once("upgradeError",n)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",function(){e.upgrading?r():t()}):this.upgrading?r():t()),this}},{key:"_onError",value:function(e){if(t.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}},{key:"_onClose",value:function(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Ne&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){var n=De.indexOf(this._offlineEventListener);-1!==n&&De.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}])}(Pd),Be.protocol=4,je=function(e){function t(){var e;return p(this,t),(e=o(this,t,arguments))._upgrades=[],e}return s(t,e),h(t,[{key:"onOpen",value:function(){if(r(t,"onOpen",this,3)([]),"open"===this.readyState&&this.opts.upgrade)for(var e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}},{key:"_probe",value:function(e){var t=this,n=this.createTransport(e),r=!1;Be.priorWebsocketSuccess=!1;var i=function(){r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",function(e){if(!r)if("pong"===e.type&&"probe"===e.data){if(t.upgrading=!0,t.emitReserved("upgrading",n),!n)return;Be.priorWebsocketSuccess="websocket"===n.name,t.transport.pause(function(){r||"closed"!==t.readyState&&(l(),t.setTransport(n),n.send([{type:"upgrade"}]),t.emitReserved("upgrade",n),n=null,t.upgrading=!1,t.flush())})}else{var i=new Error("probe error");i.transport=n.name,t.emitReserved("upgradeError",i)}}))};function o(){r||(r=!0,l(),n.close(),n=null)}var a=function(e){var r=new Error("probe error: "+e);r.transport=n.name,o(),t.emitReserved("upgradeError",r)};function s(){a("transport closed")}function c(){a("socket closed")}function u(e){n&&e.name!==n.name&&o()}var l=function(){n.removeListener("open",i),n.removeListener("error",a),n.removeListener("close",s),t.off("close",c),t.off("upgrading",u)};n.once("open",i),n.once("error",a),n.once("close",s),this.once("close",c),this.once("upgrading",u),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn(function(){r||n.open()},200):n.open()}},{key:"onHandshake",value:function(e){this._upgrades=this._filterUpgrades(e.upgrades),r(t,"onHandshake",this,3)([e])}},{key:"_filterUpgrades",value:function(e){for(var t=[],n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}])}(Be),Ke=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p(this,t);var r="object"===D(e)?e:n;return(!r.transports||r.transports&&"string"==typeof r.transports[0])&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(function(e){return Pe[e]}).filter(function(e){return!!e})),o(this,t,[e,r])}return s(t,e),h(t)}(je),Ke.protocol,Ue="function"==typeof ArrayBuffer,He=function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer},Fe=Object.prototype.toString,ze="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Fe.call(Blob),qe="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===Fe.call(File),$e=f({Decoder:function(){return Ye},Encoder:function(){return Ge},PacketType:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return Ve}),protocol:function(){return 5}}),We=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],(No=Ve||(Ve={}))[No.CONNECT=0]="CONNECT",No[No.DISCONNECT=1]="DISCONNECT",No[No.EVENT=2]="EVENT",No[No.ACK=3]="ACK",No[No.CONNECT_ERROR=4]="CONNECT_ERROR",No[No.BINARY_EVENT=5]="BINARY_EVENT",No[No.BINARY_ACK=6]="BINARY_ACK",Ge=function(){return h(function e(t){p(this,e),this.replacer=t},[{key:"encode",value:function(e){return e.type!==Ve.EVENT&&e.type!==Ve.ACK||!Fd(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===Ve.EVENT?Ve.BINARY_EVENT:Ve.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}},{key:"encodeAsString",value:function(e){var t=""+e.type;return e.type!==Ve.BINARY_EVENT&&e.type!==Ve.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}},{key:"encodeAsBinary",value:function(e){var t=zd(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}}])}(),Ye=function(e){function t(e){var n;return p(this,t),(n=o(this,t)).reviver=e,n}return s(t,e),h(t,[{key:"add",value:function(e){var n;if("string"==typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");var i=(n=this.decodeString(e)).type===Ve.BINARY_EVENT;i||n.type===Ve.BINARY_ACK?(n.type=i?Ve.EVENT:Ve.ACK,this.reconstructor=new Ze(n),0===n.attachments&&r(t,"emitReserved",this,3)(["decoded",n])):r(t,"emitReserved",this,3)(["decoded",n])}else{if(!Hd(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,r(t,"emitReserved",this,3)(["decoded",n]))}}},{key:"decodeString",value:function(e){var n=0,r={type:Number(e.charAt(0))};if(void 0===Ve[r.type])throw new Error("unknown packet type "+r.type);if(r.type===Ve.BINARY_EVENT||r.type===Ve.BINARY_ACK){for(var i=n+1;"-"!==e.charAt(++n)&&n!=e.length;);var o=e.substring(i,n);if(o!=Number(o)||"-"!==e.charAt(n))throw new Error("Illegal attachments");r.attachments=Number(o)}if("/"===e.charAt(n+1)){for(var a=n+1;++n&&","!==e.charAt(n)&&n!==e.length;);r.nsp=e.substring(a,n)}else r.nsp="/";var s=e.charAt(n+1);if(""!==s&&Number(s)==s){for(var c=n+1;++n;){var u=e.charAt(n);if(null==u||Number(u)!=u){--n;break}if(n===e.length)break}r.id=Number(e.substring(c,n+1))}if(e.charAt(++n)){var l=this.tryParse(e.substr(n));if(!t.isPayloadValid(r.type,l))throw new Error("invalid payload");r.data=l}return r}},{key:"tryParse",value:function(e){try{return JSON.parse(e,this.reviver)}catch(fs){return!1}}},{key:"destroy",value:function(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}],[{key:"isPayloadValid",value:function(e,t){switch(e){case Ve.CONNECT:return Vd(t);case Ve.DISCONNECT:return void 0===t;case Ve.CONNECT_ERROR:return"string"==typeof t||Vd(t);case Ve.EVENT:case Ve.BINARY_EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===We.indexOf(t[0]));case Ve.ACK:case Ve.BINARY_ACK:return Array.isArray(t)}}}])}(Pd),Ze=function(){return h(function e(t){p(this,e),this.packet=t,this.buffers=[],this.reconPack=t},[{key:"takeBinaryData",value:function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=$d(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}},{key:"finishedReconstruction",value:function(){this.reconPack=null,this.buffers=[]}}])}(),Je=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),Qe=function(e){function t(e,n,r){var i;return p(this,t),(i=o(this,t)).connected=!1,i.recovered=!1,i.receiveBuffer=[],i.sendBuffer=[],i._queue=[],i._queueSeq=0,i.ids=0,i.acks={},i.flags={},i.io=e,i.nsp=n,r&&r.auth&&(i.auth=r.auth),i._opts=Object.assign({},r),i.io._autoConnect&&i.open(),i}return s(t,e),h(t,[{key:"disconnected",get:function(){return!this.connected}},{key:"subEvents",value:function(){if(!this.subs){var e=this.io;this.subs=[Gd(e,"open",this.onopen.bind(this)),Gd(e,"packet",this.onpacket.bind(this)),Gd(e,"error",this.onerror.bind(this)),Gd(e,"close",this.onclose.bind(this))]}}},{key:"active",get:function(){return!!this.subs}},{key:"connect",value:function(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}},{key:"open",value:function(){return this.connect()}},{key:"send",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift("message"),this.emit.apply(this,t),this}},{key:"emit",value:function(e){var t,n,r;if(Je.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];if(o.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(o),this;var s={type:Ve.EVENT,data:o,options:{}};if(s.options.compress=!1!==this.flags.compress,"function"==typeof o[o.length-1]){var c=this.ids++,u=o.pop();this._registerAckCallback(c,u),s.id=c}var l=null===(n=null===(t=this.io.engine)||void 0===t?void 0:t.transport)||void 0===n?void 0:n.writable,d=this.connected&&!(null===(r=this.io.engine)||void 0===r?void 0:r._hasPingExpired());return this.flags.volatile&&!l||(d?(this.notifyOutgoingListeners(s),this.packet(s)):this.sendBuffer.push(s)),this.flags={},this}},{key:"_registerAckCallback",value:function(e,t){var n,r=this,i=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0!==i){var o=this.io.setTimeoutFn(function(){delete r.acks[e];for(var n=0;n<r.sendBuffer.length;n++)r.sendBuffer[n].id===e&&r.sendBuffer.splice(n,1);t.call(r,new Error("operation has timed out"))},i),a=function(){r.io.clearTimeoutFn(o);for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t.apply(r,n)};a.withError=!0,this.acks[e]=a}else this.acks[e]=t}},{key:"emitWithAck",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return new Promise(function(n,i){var o=function(e,t){return e?i(e):n(t)};o.withError=!0,r.push(o),t.emit.apply(t,[e].concat(r))})}},{key:"_addToQueue",value:function(e){var t,n=this;"function"==typeof e[e.length-1]&&(t=e.pop());var r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push(function(e){if(r===n._queue[0]){if(null!==e)r.tryCount>n._opts.retries&&(n._queue.shift(),t&&t(e));else{n._queue.shift();for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];t&&t.apply(void 0,[null].concat(o))}return r.pending=!1,n._drainQueue()}}),this._queue.push(r),this._drainQueue()}},{key:"_drainQueue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.connected&&0!==this._queue.length){var t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}}},{key:"packet",value:function(e){e.nsp=this.nsp,this.io._packet(e)}},{key:"onopen",value:function(){var e=this;"function"==typeof this.auth?this.auth(function(t){e._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}},{key:"_sendConnectPacket",value:function(e){this.packet({type:Ve.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}},{key:"onerror",value:function(e){this.connected||this.emitReserved("connect_error",e)}},{key:"onclose",value:function(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}},{key:"_clearAcks",value:function(){var e=this;Object.keys(this.acks).forEach(function(t){if(!e.sendBuffer.some(function(e){return String(e.id)===t})){var n=e.acks[t];delete e.acks[t],n.withError&&n.call(e,new Error("socket has been disconnected"))}})}},{key:"onpacket",value:function(e){if(e.nsp===this.nsp)switch(e.type){case Ve.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Ve.EVENT:case Ve.BINARY_EVENT:this.onevent(e);break;case Ve.ACK:case Ve.BINARY_ACK:this.onack(e);break;case Ve.DISCONNECT:this.ondisconnect();break;case Ve.CONNECT_ERROR:this.destroy();var t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}},{key:"onevent",value:function(e){var t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}},{key:"emitEvent",value:function(e){if(this._anyListeners&&this._anyListeners.length){var n,i=_(this._anyListeners.slice());try{for(i.s();!(n=i.n()).done;){n.value.apply(this,e)}}catch(Cs){i.e(Cs)}finally{i.f()}}r(t,"emit",this,1).apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}},{key:"ack",value:function(e){var t=this,n=!1;return function(){if(!n){n=!0;for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];t.packet({type:Ve.ACK,id:e,data:i})}}}},{key:"onack",value:function(e){var t=this.acks[e.id];"function"==typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}},{key:"onconnect",value:function(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}},{key:"emitBuffered",value:function(){var e=this;this.receiveBuffer.forEach(function(t){return e.emitEvent(t)}),this.receiveBuffer=[],this.sendBuffer.forEach(function(t){e.notifyOutgoingListeners(t),e.packet(t)}),this.sendBuffer=[]}},{key:"ondisconnect",value:function(){this.destroy(),this.onclose("io server disconnect")}},{key:"destroy",value:function(){this.subs&&(this.subs.forEach(function(e){return e()}),this.subs=void 0),this.io._destroy(this)}},{key:"disconnect",value:function(){return this.connected&&this.packet({type:Ve.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{key:"close",value:function(){return this.disconnect()}},{key:"compress",value:function(e){return this.flags.compress=e,this}},{key:"volatile",get:function(){return this.flags.volatile=!0,this}},{key:"timeout",value:function(e){return this.flags.timeout=e,this}},{key:"onAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}},{key:"prependAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}},{key:"offAny",value:function(e){if(!this._anyListeners)return this;if(e){for(var t=this._anyListeners,n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}},{key:"listenersAny",value:function(){return this._anyListeners||[]}},{key:"onAnyOutgoing",value:function(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}},{key:"prependAnyOutgoing",value:function(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}},{key:"offAnyOutgoing",value:function(e){if(!this._anyOutgoingListeners)return this;if(e){for(var t=this._anyOutgoingListeners,n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}},{key:"listenersAnyOutgoing",value:function(){return this._anyOutgoingListeners||[]}},{key:"notifyOutgoingListeners",value:function(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){var t,n=_(this._anyOutgoingListeners.slice());try{for(n.s();!(t=n.n()).done;){t.value.apply(this,e.data)}}catch(Cs){n.e(Cs)}finally{n.f()}}}}])}(Pd),Yd.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=1&Math.floor(10*t)?e+n:e-n}return 0|Math.min(e,this.max)},Yd.prototype.reset=function(){this.attempts=0},Yd.prototype.setMin=function(e){this.ms=e},Yd.prototype.setMax=function(e){this.max=e},Yd.prototype.setJitter=function(e){this.jitter=e},Xe=function(e){function t(e,n){var r,i;p(this,t),(r=o(this,t)).nsps={},r.subs=[],e&&"object"===D(e)&&(n=e,e=void 0),(n=n||{}).path=n.path||"/socket.io",r.opts=n,Ld(r,n),r.reconnection(!1!==n.reconnection),r.reconnectionAttempts(n.reconnectionAttempts||1/0),r.reconnectionDelay(n.reconnectionDelay||1e3),r.reconnectionDelayMax(n.reconnectionDelayMax||5e3),r.randomizationFactor(null!==(i=n.randomizationFactor)&&void 0!==i?i:.5),r.backoff=new Yd({min:r.reconnectionDelay(),max:r.reconnectionDelayMax(),jitter:r.randomizationFactor()}),r.timeout(null==n.timeout?2e4:n.timeout),r._readyState="closed",r.uri=e;var a=n.parser||$e;return r.encoder=new a.Encoder,r.decoder=new a.Decoder,r._autoConnect=!1!==n.autoConnect,r._autoConnect&&r.open(),r}return s(t,e),h(t,[{key:"reconnection",value:function(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}},{key:"reconnectionAttempts",value:function(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}},{key:"reconnectionDelay",value:function(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}},{key:"randomizationFactor",value:function(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}},{key:"reconnectionDelayMax",value:function(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}},{key:"timeout",value:function(e){return arguments.length?(this._timeout=e,this):this._timeout}},{key:"maybeReconnectOnOpen",value:function(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}},{key:"open",value:function(e){var t=this;if(~this._readyState.indexOf("open"))return this;this.engine=new Ke(this.uri,this.opts);var n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;var i=Gd(n,"open",function(){r.onopen(),e&&e()}),o=function(n){t.cleanup(),t._readyState="closed",t.emitReserved("error",n),e?e(n):t.maybeReconnectOnOpen()},a=Gd(n,"error",o);if(!1!==this._timeout){var s=this._timeout,c=this.setTimeoutFn(function(){i(),o(new Error("timeout")),n.close()},s);this.opts.autoUnref&&c.unref(),this.subs.push(function(){t.clearTimeoutFn(c)})}return this.subs.push(i),this.subs.push(a),this}},{key:"connect",value:function(e){return this.open(e)}},{key:"onopen",value:function(){this.cleanup(),this._readyState="open",this.emitReserved("open");var e=this.engine;this.subs.push(Gd(e,"ping",this.onping.bind(this)),Gd(e,"data",this.ondata.bind(this)),Gd(e,"error",this.onerror.bind(this)),Gd(e,"close",this.onclose.bind(this)),Gd(this.decoder,"decoded",this.ondecoded.bind(this)))}},{key:"onping",value:function(){this.emitReserved("ping")}},{key:"ondata",value:function(e){try{this.decoder.add(e)}catch(fs){this.onclose("parse error",fs)}}},{key:"ondecoded",value:function(e){var t=this;he(function(){t.emitReserved("packet",e)},this.setTimeoutFn)}},{key:"onerror",value:function(e){this.emitReserved("error",e)}},{key:"socket",value:function(e,t){var n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new Qe(this,e,t),this.nsps[e]=n),n}},{key:"_destroy",value:function(e){for(var t=0,n=Object.keys(this.nsps);t<n.length;t++){var r=n[t];if(this.nsps[r].active)return}this._close()}},{key:"_packet",value:function(e){for(var t=this.encoder.encode(e),n=0;n<t.length;n++)this.engine.write(t[n],e.options)}},{key:"cleanup",value:function(){this.subs.forEach(function(e){return e()}),this.subs.length=0,this.decoder.destroy()}},{key:"_close",value:function(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}},{key:"disconnect",value:function(){return this._close()}},{key:"onclose",value:function(e,t){var n;this.cleanup(),null===(n=this.engine)||void 0===n||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}},{key:"reconnect",value:function(){var e=this;if(this._reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var n=this.backoff.duration();this._reconnecting=!0;var r=this.setTimeoutFn(function(){t.skipReconnect||(e.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open(function(n){n?(t._reconnecting=!1,t.reconnect(),e.emitReserved("reconnect_error",n)):t.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(function(){e.clearTimeoutFn(r)})}}},{key:"onreconnect",value:function(){var e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}])}(Pd),et={},Object.assign(Zd,{Manager:Xe,Socket:Qe,io:Zd,connect:Zd}),tt="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},nt=[],rt=[],it="undefined"!=typeof Uint8Array?Uint8Array:Array,ot=!1,at={}.toString,st=Array.isArray||function(e){return"[object Array]"==at.call(e)},af.TYPED_ARRAY_SUPPORT=void 0===tt.TYPED_ARRAY_SUPPORT||tt.TYPED_ARRAY_SUPPORT,ct=rf(),af.poolSize=8192,af._augment=function(e){return e.__proto__=af.prototype,e},af.from=function(e,t,n){return sf(null,e,t,n)},af.TYPED_ARRAY_SUPPORT&&(af.prototype.__proto__=Uint8Array.prototype,af.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&af[Symbol.species]),af.alloc=function(e,t,n){return r=null,o=t,a=n,cf(i=e),i<=0?of(r,i):void 0!==o?"string"==typeof a?of(r,i).fill(o,a):of(r,i).fill(o):of(r,i);var r,i,o,a},af.allocUnsafe=function(e){return uf(null,e)},af.allocUnsafeSlow=function(e){return uf(null,e)},af.isBuffer=Hf,af.compare=function(e,t){if(!ff(e)||!ff(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},af.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},af.concat=function(e,t){if(!st(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return af.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=af.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!ff(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},af.byteLength=hf,af.prototype._isBuffer=!0,af.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)vf(this,t,t+1);return this},af.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)vf(this,t,t+3),vf(this,t+1,t+2);return this},af.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)vf(this,t,t+7),vf(this,t+1,t+6),vf(this,t+2,t+5),vf(this,t+3,t+4);return this},af.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?Cf(this,0,e):pf.apply(this,arguments)},af.prototype.equals=function(e){if(!ff(e))throw new TypeError("Argument must be a Buffer");return this===e||0===af.compare(this,e)},af.prototype.inspect=function(){var e="";return this.length>0&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(e+=" ... ")),"<Buffer "+e+">"},af.prototype.compare=function(e,t,n,r,i){if(!ff(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),c=this.slice(r,i),u=e.slice(t,n),l=0;l<s;++l)if(c[l]!==u[l]){o=c[l],a=u[l];break}return o<a?-1:a<o?1:0},af.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},af.prototype.indexOf=function(e,t,n){return mf(this,e,t,n,!0)},af.prototype.lastIndexOf=function(e,t,n){return mf(this,e,t,n,!1)},af.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return yf(this,e,t,n);case"utf8":case"utf-8":return bf(this,e,t,n);case"ascii":return wf(this,e,t,n);case"latin1":case"binary":return Ef(this,e,t,n);case"base64":return kf(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _f(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},af.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},ut=4096,af.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),af.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=af.prototype;else{var i=t-e;n=new af(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},af.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||Of(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},af.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||Of(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},af.prototype.readUInt8=function(e,t){return t||Of(e,1,this.length),this[e]},af.prototype.readUInt16LE=function(e,t){return t||Of(e,2,this.length),this[e]|this[e+1]<<8},af.prototype.readUInt16BE=function(e,t){return t||Of(e,2,this.length),this[e]<<8|this[e+1]},af.prototype.readUInt32LE=function(e,t){return t||Of(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},af.prototype.readUInt32BE=function(e,t){return t||Of(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},af.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||Of(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},af.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||Of(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},af.prototype.readInt8=function(e,t){return t||Of(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},af.prototype.readInt16LE=function(e,t){t||Of(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},af.prototype.readInt16BE=function(e,t){t||Of(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},af.prototype.readInt32LE=function(e,t){return t||Of(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},af.prototype.readInt32BE=function(e,t){return t||Of(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},af.prototype.readFloatLE=function(e,t){return t||Of(e,4,this.length),tf(this,e,!0,23,4)},af.prototype.readFloatBE=function(e,t){return t||Of(e,4,this.length),tf(this,e,!1,23,4)},af.prototype.readDoubleLE=function(e,t){return t||Of(e,8,this.length),tf(this,e,!0,52,8)},af.prototype.readDoubleBE=function(e,t){return t||Of(e,8,this.length),tf(this,e,!1,52,8)},af.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||Rf(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},af.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||Rf(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},af.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||Rf(this,e,t,1,255,0),af.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},af.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||Rf(this,e,t,2,65535,0),af.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):Pf(this,e,t,!0),t+2},af.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||Rf(this,e,t,2,65535,0),af.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):Pf(this,e,t,!1),t+2},af.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||Rf(this,e,t,4,4294967295,0),af.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):If(this,e,t,!0),t+4},af.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||Rf(this,e,t,4,4294967295,0),af.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):If(this,e,t,!1),t+4},af.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);Rf(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a|0)-s&255;return t+n},af.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);Rf(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a|0)-s&255;return t+n},af.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||Rf(this,e,t,1,127,-128),af.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},af.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||Rf(this,e,t,2,32767,-32768),af.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):Pf(this,e,t,!0),t+2},af.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||Rf(this,e,t,2,32767,-32768),af.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):Pf(this,e,t,!1),t+2},af.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||Rf(this,e,t,4,2147483647,-2147483648),af.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):If(this,e,t,!0),t+4},af.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||Rf(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),af.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):If(this,e,t,!1),t+4},af.prototype.writeFloatLE=function(e,t,n){return Nf(this,e,t,!0,n)},af.prototype.writeFloatBE=function(e,t,n){return Nf(this,e,t,!1,n)},af.prototype.writeDoubleLE=function(e,t,n){return Df(this,e,t,!0,n)},af.prototype.writeDoubleBE=function(e,t,n){return Df(this,e,t,!1,n)},af.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!af.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},af.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!af.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=ff(e)?e:jf(new af(e,r).toString()),s=a.length;for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this},lt=/[^+\/0-9A-Za-z-_]/g,dt=Object.freeze({__proto__:null,Buffer:af,INSPECT_MAX_BYTES:50,SlowBuffer:function(e){return+e!=e&&(e=0),af.alloc(+e)},isBuffer:Hf,kMaxLength:ct}),ft="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ht={},pt={},vt={},Object.defineProperty(vt,"__esModule",{value:!0}),vt.isBytes=Vf,vt.number=$f,vt.bool=Wf,vt.bytes=Gf,vt.hash=Yf,vt.exists=Zf,vt.output=Jf,vt.default={number:$f,bool:Wf,bytes:Gf,hash:Yf,exists:Zf,output:Jf},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.wrapCipher=e.Hash=e.nextTick=e.isLE=e.createView=e.u32=e.u16=e.u8=void 0,e.bytesToHex=r,e.hexToBytes=a,e.hexToNumber=s,e.bytesToNumberBE=function(e){return s(r(e))},e.numberToBytesBE=function(e,t){return a(e.toString(16).padStart(2*t,"0"))},e.asyncLoop=function(){var t=g(L().m(function t(n,r,i){var o,a,s;return L().w(function(t){for(;;)switch(t.n){case 0:o=Date.now(),a=0;case 1:if(!(a<n)){t.n=4;break}if(i(a),s=Date.now()-o,s>=0&&s<r){t.n=3;break}return t.n=2,(0,e.nextTick)();case 2:o+=s;case 3:a++,t.n=1;break;case 4:return t.a(2)}},t)}));return function(e,n,r){return t.apply(this,arguments)}}(),e.utf8ToBytes=c,e.bytesToUtf8=function(e){return(new TextDecoder).decode(e)},e.toBytes=function(e){if("string"==typeof e)e=c(e);else{if(!(0,t.isBytes)(e))throw new Error("Uint8Array expected, got "+D(e));e=l(e)}return e},e.concatBytes=function(){for(var e=0,n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];(0,t.bytes)(r),e+=r.length}for(var i=new Uint8Array(e),o=0,a=0;o<arguments.length;o++){var s=o<0||arguments.length<=o?void 0:arguments[o];i.set(s,a),a+=s.length}return i},e.checkOpts=function(e,t){if(null==t||"object"!=D(t))throw new Error("options must be defined");return Object.assign(e,t)},e.equalBytes=function(e,t){if(e.length!==t.length)return!1;for(var n=0,r=0;r<e.length;r++)n|=e[r]^t[r];return 0===n},e.setBigUint64=u,e.u64Lengths=function(t,n){var r=new Uint8Array(16),i=(0,e.createView)(r);return u(i,0,BigInt(n?n.length:0),!0),u(i,8,BigInt(t.length),!0),r},e.isAligned32=function(e){return e.byteOffset%4==0},e.copyBytes=l,e.clean=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0;r<t.length;r++)t[r].fill(0)};var t=vt;if(e.u8=function(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)},e.u16=function(e){return new Uint16Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/2))},e.u32=function(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))},e.createView=function(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)},e.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!e.isLE)throw new Error("Non little-endian hardware is not supported");var n=Array.from({length:256},function(e,t){return t.toString(16).padStart(2,"0")});function r(e){(0,t.bytes)(e);for(var r="",i=0;i<e.length;i++)r+=n[e[i]];return r}var i={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function o(e){return e>=i._0&&e<=i._9?e-i._0:e>=i._A&&e<=i._F?e-(i._A-10):e>=i._a&&e<=i._f?e-(i._a-10):void 0}function a(e){if("string"!=typeof e)throw new Error("hex string expected, got "+D(e));var t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);for(var r=new Uint8Array(n),i=0,a=0;i<n;i++,a+=2){var s=o(e.charCodeAt(a)),c=o(e.charCodeAt(a+1));if(void 0===s||void 0===c){var u=e[a]+e[a+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+a)}r[i]=16*s+c}return r}function s(e){if("string"!=typeof e)throw new Error("hex string expected, got "+D(e));return BigInt(""===e?"0":"0x".concat(e))}function c(e){if("string"!=typeof e)throw new Error("string expected, got "+D(e));return new Uint8Array((new TextEncoder).encode(e))}function u(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);var i=BigInt(32),o=BigInt(4294967295),a=Number(n>>i&o),s=Number(n&o),c=r?4:0,u=r?0:4;e.setUint32(t+c,a,r),e.setUint32(t+u,s,r)}function l(e){return Uint8Array.from(e)}e.nextTick=g(L().m(function e(){return L().w(function(e){for(;;)if(0===e.n)return e.a(2)},e)})),e.Hash=h(function e(){p(this,e)}),e.wrapCipher=function(e,t){return Object.assign(t,e),t}}(pt),mt={},gt={},Object.defineProperty(gt,"__esModule",{value:!0}),gt.AEAD_TAG_LENGTH=gt.XCHACHA20_NONCE_LENGTH=gt.CURVE25519_PUBLIC_KEY_SIZE=gt.ETH_PUBLIC_KEY_SIZE=gt.UNCOMPRESSED_PUBLIC_KEY_SIZE=gt.COMPRESSED_PUBLIC_KEY_SIZE=gt.SECRET_KEY_LENGTH=void 0,gt.SECRET_KEY_LENGTH=32,gt.COMPRESSED_PUBLIC_KEY_SIZE=33,gt.UNCOMPRESSED_PUBLIC_KEY_SIZE=65,gt.ETH_PUBLIC_KEY_SIZE=64,gt.CURVE25519_PUBLIC_KEY_SIZE=32,gt.XCHACHA20_NONCE_LENGTH=24,gt.AEAD_TAG_LENGTH=16,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ephemeralKeySize=e.symmetricNonceLength=e.symmetricAlgorithm=e.isHkdfKeyCompressed=e.isEphemeralKeyCompressed=e.ellipticCurve=e.ECIES_CONFIG=void 0;var t=gt;e.ECIES_CONFIG=new function(){this.ellipticCurve="secp256k1",this.isEphemeralKeyCompressed=!1,this.isHkdfKeyCompressed=!1,this.symmetricAlgorithm="aes-256-gcm",this.symmetricNonceLength=16},e.ellipticCurve=function(){return e.ECIES_CONFIG.ellipticCurve},e.isEphemeralKeyCompressed=function(){return e.ECIES_CONFIG.isEphemeralKeyCompressed},e.isHkdfKeyCompressed=function(){return e.ECIES_CONFIG.isHkdfKeyCompressed},e.symmetricAlgorithm=function(){return e.ECIES_CONFIG.symmetricAlgorithm},e.symmetricNonceLength=function(){return e.ECIES_CONFIG.symmetricNonceLength},e.ephemeralKeySize=function(){var n={secp256k1:e.ECIES_CONFIG.isEphemeralKeyCompressed?t.COMPRESSED_PUBLIC_KEY_SIZE:t.UNCOMPRESSED_PUBLIC_KEY_SIZE,x25519:t.CURVE25519_PUBLIC_KEY_SIZE,ed25519:t.CURVE25519_PUBLIC_KEY_SIZE};if(e.ECIES_CONFIG.ellipticCurve in n)return n[e.ECIES_CONFIG.ellipticCurve];throw new Error("Not implemented")}}(mt),yt={},bt={},wt={},Et={},kt={},_t={},Object.defineProperty(_t,"__esModule",{value:!0}),_t.crypto=void 0,_t.crypto="object"==("undefined"==typeof globalThis?"undefined":D(globalThis))&&"crypto"in globalThis?globalThis.crypto:void 0,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.gcm=e.ctr=e.cbc=e.utils=void 0,e.randomBytes=i,e.getWebcryptoSubtle=o,e.managedNonce=function(e){return(0,n.number)(e.nonceLength),function(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];return{encrypt:function(n){for(var a,s=arguments.length,c=new Array(s>1?s-1:0),u=1;u<s;u++)c[u-1]=arguments[u];var l=i(e.nonceLength),d=(a=e.apply(void 0,[t,l].concat(o))).encrypt.apply(a,[n].concat(c)),f=(0,r.concatBytes)(l,d);return d.fill(0),f},decrypt:function(n){for(var r,i=e.nonceLength,a=n.subarray(0,i),s=n.subarray(i),c=arguments.length,u=new Array(c>1?c-1:0),l=1;l<c;l++)u[l-1]=arguments[l];return(r=e.apply(void 0,[t,a].concat(o))).decrypt.apply(r,[s].concat(u))}}}};var t=_t,n=vt,r=pt;function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(t.crypto&&"function"==typeof t.crypto.getRandomValues)return t.crypto.getRandomValues(new Uint8Array(e));if(t.crypto&&"function"==typeof t.crypto.randomBytes)return t.crypto.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}function o(){if(t.crypto&&"object"==D(t.crypto.subtle)&&null!=t.crypto.subtle)return t.crypto.subtle;throw new Error("crypto.subtle must be defined")}e.utils={encrypt:function(e,t,n,r){return g(L().m(function i(){var a,s,c;return L().w(function(i){for(;;)switch(i.n){case 0:return a=o(),i.n=1,a.importKey("raw",e,t,!0,["encrypt"]);case 1:return s=i.v,i.n=2,a.encrypt(n,s,r);case 2:return c=i.v,i.a(2,new Uint8Array(c))}},i)}))()},decrypt:function(e,t,n,r){return g(L().m(function i(){var a,s,c;return L().w(function(i){for(;;)switch(i.n){case 0:return a=o(),i.n=1,a.importKey("raw",e,t,!0,["decrypt"]);case 1:return s=i.v,i.n=2,a.decrypt(n,s,r);case 2:return c=i.v,i.a(2,new Uint8Array(c))}},i)}))()}};var a="AES-CBC",s="AES-CTR",c="AES-GCM";function u(t){return function(r,i,o){(0,n.bytes)(r),(0,n.bytes)(i);var u={name:t,length:8*r.length},l=function(e,t,n){if(e===a)return{name:a,iv:t};if(e===s)return{name:s,counter:t,length:64};if(e===c)return n?{name:c,iv:t,additionalData:n}:{name:c,iv:t};throw new Error("unknown aes block mode")}(t,i,o);return{encrypt:function(t){return(0,n.bytes)(t),e.utils.encrypt(r,u,l,t)},decrypt:function(t){return(0,n.bytes)(t),e.utils.decrypt(r,u,l,t)}}}}e.cbc=u(a),e.ctr=u(s),e.gcm=u(c)}(kt),St={},Ct={},At={},xt={},Object.defineProperty(xt,"__esModule",{value:!0}),xt.isBytes=eh,xt.number=Qf,xt.bool=Xf,xt.bytes=th,xt.hash=nh,xt.exists=rh,xt.output=ih,xt.default={number:Qf,bool:Xf,bytes:th,hash:nh,exists:rh,output:ih},Mt={},Tt={},Object.defineProperty(Tt,"__esModule",{value:!0}),Tt.crypto=void 0,Tt.crypto="object"==("undefined"==typeof globalThis?"undefined":D(globalThis))&&"crypto"in globalThis?globalThis.crypto:void 0,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Hash=e.nextTick=e.byteSwapIfBE=e.byteSwap=e.isLE=e.rotl=e.rotr=e.createView=e.u32=e.u8=void 0,e.isBytes=function(e){return e instanceof Uint8Array||null!=e&&"object"==D(e)&&"Uint8Array"===e.constructor.name},e.byteSwap32=function(t){for(var n=0;n<t.length;n++)t[n]=(0,e.byteSwap)(t[n])},e.bytesToHex=function(e){(0,n.bytes)(e);for(var t="",i=0;i<e.length;i++)t+=r[e[i]];return t},e.hexToBytes=function(e){if("string"!=typeof e)throw new Error("hex string expected, got "+D(e));var t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);for(var r=new Uint8Array(n),i=0,a=0;i<n;i++,a+=2){var s=o(e.charCodeAt(a)),c=o(e.charCodeAt(a+1));if(void 0===s||void 0===c){var u=e[a]+e[a+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+a)}r[i]=16*s+c}return r},e.asyncLoop=function(){var t=g(L().m(function t(n,r,i){var o,a,s;return L().w(function(t){for(;;)switch(t.n){case 0:o=Date.now(),a=0;case 1:if(!(a<n)){t.n=4;break}if(i(a),s=Date.now()-o,s>=0&&s<r){t.n=3;break}return t.n=2,(0,e.nextTick)();case 2:o+=s;case 3:a++,t.n=1;break;case 4:return t.a(2)}},t)}));return function(e,n,r){return t.apply(this,arguments)}}(),e.utf8ToBytes=a,e.toBytes=s,e.concatBytes=function(){for(var e=0,t=0;t<arguments.length;t++){var r=t<0||arguments.length<=t?void 0:arguments[t];(0,n.bytes)(r),e+=r.length}for(var i=new Uint8Array(e),o=0,a=0;o<arguments.length;o++){var s=o<0||arguments.length<=o?void 0:arguments[o];i.set(s,a),a+=s.length}return i},e.checkOpts=function(e,t){if(void 0!==t&&"[object Object]"!==c.call(t))throw new Error("Options should be object or undefined");return Object.assign(e,t)},e.wrapConstructor=function(e){var t=function(t){return e().update(s(t)).digest()},n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=function(){return e()},t},e.wrapConstructorWithOpts=function(e){var t=function(t,n){return e(n).update(s(t)).digest()},n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=function(t){return e(t)},t},e.wrapXOFConstructorWithOpts=function(e){var t=function(t,n){return e(n).update(s(t)).digest()},n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=function(t){return e(t)},t},e.randomBytes=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(t.crypto&&"function"==typeof t.crypto.getRandomValues)return t.crypto.getRandomValues(new Uint8Array(e));if(t.crypto&&"function"==typeof t.crypto.randomBytes)return t.crypto.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")};var t=Tt,n=xt;e.u8=function(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)},e.u32=function(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))},e.createView=function(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)},e.rotr=function(e,t){return e<<32-t|e>>>t},e.rotl=function(e,t){return e<<t|e>>>32-t>>>0},e.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],e.byteSwap=function(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255},e.byteSwapIfBE=e.isLE?function(e){return e}:function(t){return(0,e.byteSwap)(t)};var r=Array.from({length:256},function(e,t){return t.toString(16).padStart(2,"0")}),i={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function o(e){return e>=i._0&&e<=i._9?e-i._0:e>=i._A&&e<=i._F?e-(i._A-10):e>=i._a&&e<=i._f?e-(i._a-10):void 0}function a(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+D(e));return new Uint8Array((new TextEncoder).encode(e))}function s(e){return"string"==typeof e&&(e=a(e)),(0,n.bytes)(e),e}e.nextTick=g(L().m(function e(){return L().w(function(e){for(;;)if(0===e.n)return e.a(2)},e)})),e.Hash=function(){return h(function e(){p(this,e)},[{key:"clone",value:function(){return this._cloneInto()}}])}();var c={}.toString}(Mt),Object.defineProperty(At,"__esModule",{value:!0}),At.HashMD=At.Maj=At.Chi=void 0,Ot=xt,Rt=Mt,At.Chi=function(e,t,n){return e&t^~e&n},At.Maj=function(e,t,n){return e&t^e&n^t&n},At.HashMD=function(e){function t(e,n,r,i){var a;return p(this,t),(a=o(this,t)).blockLen=e,a.outputLen=n,a.padOffset=r,a.isLE=i,a.finished=!1,a.length=0,a.pos=0,a.destroyed=!1,a.buffer=new Uint8Array(e),a.view=(0,Rt.createView)(a.buffer),a}return s(t,e),h(t,[{key:"update",value:function(e){(0,Ot.exists)(this);for(var t=this.view,n=this.buffer,r=this.blockLen,i=(e=(0,Rt.toBytes)(e)).length,o=0;o<i;){var a=Math.min(r-this.pos,i-o);if(a!==r)n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===r&&(this.process(t,0),this.pos=0);else for(var s=(0,Rt.createView)(e);r<=i-o;o+=r)this.process(s,o)}return this.length+=e.length,this.roundClean(),this}},{key:"digestInto",value:function(e){(0,Ot.exists)(this),(0,Ot.output)(e,this),this.finished=!0;var t=this.buffer,n=this.view,r=this.blockLen,i=this.isLE,o=this.pos;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>r-o&&(this.process(n,0),o=0);for(var a=o;a<r;a++)t[a]=0;(function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);var i=BigInt(32),o=BigInt(4294967295),a=Number(n>>i&o),s=Number(n&o),c=r?4:0,u=r?0:4;e.setUint32(t+c,a,r),e.setUint32(t+u,s,r)})(n,r-8,BigInt(8*this.length),i),this.process(n,0);var s=(0,Rt.createView)(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");var u=c/4,l=this.get();if(u>l.length)throw new Error("_sha2: outputLen bigger than state");for(var d=0;d<u;d++)s.setUint32(4*d,l[d],i)}},{key:"digest",value:function(){var e=this.buffer,t=this.outputLen;this.digestInto(e);var n=e.slice(0,t);return this.destroy(),n}},{key:"_cloneInto",value:function(e){var t;e||(e=new this.constructor),(t=e).set.apply(t,E(this.get()));var n=this.blockLen,r=this.buffer,i=this.length,o=this.finished,a=this.destroyed,s=this.pos;return e.length=i,e.pos=s,e.finished=o,e.destroyed=a,i%n&&e.buffer.set(r),e}}])}(Rt.Hash),Pt={},Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.add5L=Pt.add5H=Pt.add4H=Pt.add4L=Pt.add3H=Pt.add3L=Pt.rotlBL=Pt.rotlBH=Pt.rotlSL=Pt.rotlSH=Pt.rotr32L=Pt.rotr32H=Pt.rotrBL=Pt.rotrBH=Pt.rotrSL=Pt.rotrSH=Pt.shrSL=Pt.shrSH=Pt.toBig=void 0,Pt.fromBig=oh,Pt.split=ah,Pt.add=sh,It=BigInt(Math.pow(2,32)-1),Lt=BigInt(32),Nt=function(e,t){return BigInt(e>>>0)<<Lt|BigInt(t>>>0)},Pt.toBig=Nt,Dt=function(e,t,n){return e>>>n},Pt.shrSH=Dt,Bt=function(e,t,n){return e<<32-n|t>>>n},Pt.shrSL=Bt,jt=function(e,t,n){return e>>>n|t<<32-n},Pt.rotrSH=jt,Kt=function(e,t,n){return e<<32-n|t>>>n},Pt.rotrSL=Kt,Ut=function(e,t,n){return e<<64-n|t>>>n-32},Pt.rotrBH=Ut,Ht=function(e,t,n){return e>>>n-32|t<<64-n},Pt.rotrBL=Ht,Ft=function(e,t){return t},Pt.rotr32H=Ft,zt=function(e,t){return e},Pt.rotr32L=zt,qt=function(e,t,n){return e<<n|t>>>32-n},Pt.rotlSH=qt,$t=function(e,t,n){return t<<n|e>>>32-n},Pt.rotlSL=$t,Wt=function(e,t,n){return t<<n-32|e>>>64-n},Pt.rotlBH=Wt,Vt=function(e,t,n){return e<<n-32|t>>>64-n},Pt.rotlBL=Vt,Gt=function(e,t,n){return(e>>>0)+(t>>>0)+(n>>>0)},Pt.add3L=Gt,Yt=function(e,t,n,r){return t+n+r+(e/Math.pow(2,32)|0)|0},Pt.add3H=Yt,Zt=function(e,t,n,r){return(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)},Pt.add4L=Zt,Jt=function(e,t,n,r,i){return t+n+r+i+(e/Math.pow(2,32)|0)|0},Pt.add4H=Jt,Qt=function(e,t,n,r,i){return(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0)},Pt.add5L=Qt,Xt=function(e,t,n,r,i,o){return t+n+r+i+o+(e/Math.pow(2,32)|0)|0},Pt.add5H=Xt,Pt.default={fromBig:oh,split:ah,toBig:Nt,shrSH:Dt,shrSL:Bt,rotrSH:jt,rotrSL:Kt,rotrBH:Ut,rotrBL:Ht,rotr32H:Ft,rotr32L:zt,rotlSH:qt,rotlSL:$t,rotlBH:Wt,rotlBL:Vt,add:sh,add3L:Gt,add3H:Yt,add4L:Zt,add4H:Jt,add5H:Xt,add5L:Qt},Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.sha384=Ct.sha512_256=Ct.sha512_224=Ct.sha512=Ct.SHA384=Ct.SHA512_256=Ct.SHA512_224=Ct.SHA512=void 0,en=At,nn=Mt,y=(tn=Pt).default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(function(e){return BigInt(e)})),b=x(y,2),rn=b[0],on=b[1],an=new Uint32Array(80),sn=new Uint32Array(80),cn=function(e){function t(){var e;return p(this,t),(e=o(this,t,[128,64,16,!1])).Ah=1779033703,e.Al=-205731576,e.Bh=-1150833019,e.Bl=-2067093701,e.Ch=1013904242,e.Cl=-23791573,e.Dh=-1521486534,e.Dl=1595750129,e.Eh=1359893119,e.El=-1377402159,e.Fh=-1694144372,e.Fl=725511199,e.Gh=528734635,e.Gl=-79577749,e.Hh=1541459225,e.Hl=327033209,e}return s(t,e),h(t,[{key:"get",value:function(){return[this.Ah,this.Al,this.Bh,this.Bl,this.Ch,this.Cl,this.Dh,this.Dl,this.Eh,this.El,this.Fh,this.Fl,this.Gh,this.Gl,this.Hh,this.Hl]}},{key:"set",value:function(e,t,n,r,i,o,a,s,c,u,l,d,f,h,p,v){this.Ah=0|e,this.Al=0|t,this.Bh=0|n,this.Bl=0|r,this.Ch=0|i,this.Cl=0|o,this.Dh=0|a,this.Dl=0|s,this.Eh=0|c,this.El=0|u,this.Fh=0|l,this.Fl=0|d,this.Gh=0|f,this.Gl=0|h,this.Hh=0|p,this.Hl=0|v}},{key:"process",value:function(e,t){for(var n,r,i,o,a,s,c,u,l=0;l<16;l++,t+=4)an[l]=e.getUint32(t),sn[l]=e.getUint32(t+=4);for(var d=16;d<80;d++){var f=0|an[d-15],h=0|sn[d-15],p=tn.default.rotrSH(f,h,1)^tn.default.rotrSH(f,h,8)^tn.default.shrSH(f,h,7),v=tn.default.rotrSL(f,h,1)^tn.default.rotrSL(f,h,8)^tn.default.shrSL(f,h,7),m=0|an[d-2],g=0|sn[d-2],y=tn.default.rotrSH(m,g,19)^tn.default.rotrBH(m,g,61)^tn.default.shrSH(m,g,6),b=tn.default.rotrSL(m,g,19)^tn.default.rotrBL(m,g,61)^tn.default.shrSL(m,g,6),w=tn.default.add4L(v,b,sn[d-7],sn[d-16]);an[d]=0|tn.default.add4H(w,p,y,an[d-7],an[d-16]),sn[d]=0|w}for(var E=this.Ah,k=this.Al,_=this.Bh,S=this.Bl,C=this.Ch,A=this.Cl,x=this.Dh,M=this.Dl,T=this.Eh,O=this.El,R=this.Fh,P=this.Fl,I=this.Gh,L=this.Gl,N=this.Hh,D=this.Hl,B=0;B<80;B++){var j,K=tn.default.rotrSH(T,O,14)^tn.default.rotrSH(T,O,18)^tn.default.rotrBH(T,O,41),U=tn.default.rotrSL(T,O,14)^tn.default.rotrSL(T,O,18)^tn.default.rotrBL(T,O,41),H=T&R^~T&I,F=O&P^~O&L,z=tn.default.add5L(D,U,F,on[B],sn[B]),q=tn.default.add5H(z,N,K,H,rn[B],an[B]),$=0|z,W=tn.default.rotrSH(E,k,28)^tn.default.rotrBH(E,k,34)^tn.default.rotrBH(E,k,39),V=tn.default.rotrSL(E,k,28)^tn.default.rotrBL(E,k,34)^tn.default.rotrBL(E,k,39),G=E&_^E&C^_&C,Y=k&S^k&A^S&A;N=0|I,D=0|L,I=0|R,L=0|P,R=0|T,P=0|O,T=(j=tn.default.add(0|x,0|M,0|q,0|$)).h,O=j.l,x=0|C,M=0|A,C=0|_,A=0|S,_=0|E,S=0|k;var Z=tn.default.add3L($,V,Y);E=tn.default.add3H(Z,q,W,G),k=0|Z}E=(n=tn.default.add(0|this.Ah,0|this.Al,0|E,0|k)).h,k=n.l,_=(r=tn.default.add(0|this.Bh,0|this.Bl,0|_,0|S)).h,S=r.l,C=(i=tn.default.add(0|this.Ch,0|this.Cl,0|C,0|A)).h,A=i.l,x=(o=tn.default.add(0|this.Dh,0|this.Dl,0|x,0|M)).h,M=o.l,T=(a=tn.default.add(0|this.Eh,0|this.El,0|T,0|O)).h,O=a.l,R=(s=tn.default.add(0|this.Fh,0|this.Fl,0|R,0|P)).h,P=s.l,I=(c=tn.default.add(0|this.Gh,0|this.Gl,0|I,0|L)).h,L=c.l,N=(u=tn.default.add(0|this.Hh,0|this.Hl,0|N,0|D)).h,D=u.l,this.set(E,k,_,S,C,A,x,M,T,O,R,P,I,L,N,D)}},{key:"roundClean",value:function(){an.fill(0),sn.fill(0)}},{key:"destroy",value:function(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}])}(en.HashMD),Ct.SHA512=cn,un=function(e){function t(){var e;return p(this,t),(e=o(this,t)).Ah=-1942145080,e.Al=424955298,e.Bh=1944164710,e.Bl=-1982016298,e.Ch=502970286,e.Cl=855612546,e.Dh=1738396948,e.Dl=1479516111,e.Eh=258812777,e.El=2077511080,e.Fh=2011393907,e.Fl=79989058,e.Gh=1067287976,e.Gl=1780299464,e.Hh=286451373,e.Hl=-1848208735,e.outputLen=28,e}return s(t,e),h(t)}(cn),Ct.SHA512_224=un,ln=function(e){function t(){var e;return p(this,t),(e=o(this,t)).Ah=573645204,e.Al=-64227540,e.Bh=-1621794909,e.Bl=-934517566,e.Ch=596883563,e.Cl=1867755857,e.Dh=-1774684391,e.Dl=1497426621,e.Eh=-1775747358,e.El=-1467023389,e.Fh=-1101128155,e.Fl=1401305490,e.Gh=721525244,e.Gl=746961066,e.Hh=246885852,e.Hl=-2117784414,e.outputLen=32,e}return s(t,e),h(t)}(cn),Ct.SHA512_256=ln,dn=function(e){function t(){var e;return p(this,t),(e=o(this,t)).Ah=-876896931,e.Al=-1056596264,e.Bh=1654270250,e.Bl=914150663,e.Ch=-1856437926,e.Cl=812702999,e.Dh=355462360,e.Dl=-150054599,e.Eh=1731405415,e.El=-4191439,e.Fh=-1900787065,e.Fl=1750603025,e.Gh=-619958771,e.Gl=1694076839,e.Hh=1203062813,e.Hl=-1090891868,e.outputLen=48,e}return s(t,e),h(t)}(cn),Ct.SHA384=dn,Ct.sha512=(0,nn.wrapConstructor)(function(){return new cn}),Ct.sha512_224=(0,nn.wrapConstructor)(function(){return new un}),Ct.sha512_256=(0,nn.wrapConstructor)(function(){return new ln}),Ct.sha384=(0,nn.wrapConstructor)(function(){return new dn}),fn={},hn={},pn={},vn={},Object.defineProperty(vn,"__esModule",{value:!0}),vn.notImplemented=vn.bitMask=void 0,vn.isBytes=ch,vn.abytes=uh,vn.abool=function(e,t){if("boolean"!=typeof t)throw new Error("".concat(e,' must be valid boolean, got "').concat(t,'".'))},vn.bytesToHex=lh,vn.numberToHexUnpadded=dh,vn.hexToNumber=fh,vn.hexToBytes=ph,vn.bytesToNumberBE=function(e){return fh(lh(e))},vn.bytesToNumberLE=function(e){return uh(e),fh(lh(Uint8Array.from(e).reverse()))},vn.numberToBytesBE=vh,vn.numberToBytesLE=function(e,t){return vh(e,t).reverse()},vn.numberToVarBytesBE=function(e){return ph(dh(e))},vn.ensureBytes=function(e,t,n){var r;if("string"==typeof t)try{r=ph(t)}catch(o){throw new Error("".concat(e,' must be valid hex string, got "').concat(t,'". Cause: ').concat(o))}else{if(!ch(t))throw new Error("".concat(e," must be hex string or Uint8Array"));r=Uint8Array.from(t)}var i=r.length;if("number"==typeof n&&i!==n)throw new Error("".concat(e," expected ").concat(n," bytes, got ").concat(i));return r},vn.concatBytes=mh,vn.equalBytes=function(e,t){if(e.length!==t.length)return!1;for(var n=0,r=0;r<e.length;r++)n|=e[r]^t[r];return 0===n},vn.utf8ToBytes=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+D(e));return new Uint8Array((new TextEncoder).encode(e))},vn.inRange=gh,vn.aInRange=function(e,t,n,r){if(!gh(t,n,r))throw new Error("expected valid ".concat(e,": ").concat(n," <= n < ").concat(r,", got ").concat(D(t)," ").concat(t))},vn.bitLen=function(e){var t;for(t=0;e>mn;e>>=gn,t+=1);return t},vn.bitGet=function(e,t){return e>>BigInt(t)&gn},vn.bitSet=function(e,t,n){return e|(n?gn:mn)<<BigInt(t)},vn.createHmacDrbg=function(e,t,n){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");var r=kn(e),i=kn(e),o=0,a=function(){r.fill(1),i.fill(0),o=0},s=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return n.apply(void 0,[i,r].concat(t))},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kn();i=s(_n([0]),e),r=s(),0!==e.length&&(i=s(_n([1]),e),r=s())},u=function(){if(o++>=1e3)throw new Error("drbg: tried 1000 values");for(var e=0,n=[];e<t;){var i=(r=s()).slice();n.push(i),e+=r.length}return mh.apply(void 0,n)};return function(e,t){var n;for(a(),c(e);!(n=t(u()));)c();return a(),n}},vn.validateObject=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=function(t,n,r){var i=Sn[n];if("function"!=typeof i)throw new Error('Invalid validator "'.concat(n,'", expected function'));var o=e[t];if(!(r&&void 0===o||i(o,e)))throw new Error("Invalid param ".concat(String(t),"=").concat(o," (").concat(D(o),"), expected ").concat(n))},i=0,o=Object.entries(t);i<o.length;i++){var a=x(o[i],2);r(a[0],a[1],!1)}for(var s=0,c=Object.entries(n);s<c.length;s++){var u=x(c[s],2);r(u[0],u[1],!0)}return e},vn.memoized=function(e){var t=new WeakMap;return function(n){var r=t.get(n);if(void 0!==r)return r;for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];var s=e.apply(void 0,[n].concat(o));return t.set(n,s),s}},mn=BigInt(0),gn=BigInt(1),yn=BigInt(2),bn=Array.from({length:256},function(e,t){return t.toString(16).padStart(2,"0")}),wn={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102},En=function(e){return"bigint"==typeof e&&mn<=e},vn.bitMask=function(e){return(yn<<BigInt(e-1))-gn},kn=function(e){return new Uint8Array(e)},_n=function(e){return Uint8Array.from(e)},Sn={bigint:function(e){return"bigint"==typeof e},function:function(e){return"function"==typeof e},boolean:function(e){return"boolean"==typeof e},string:function(e){return"string"==typeof e},stringOrUint8Array:function(e){return"string"==typeof e||ch(e)},isSafeInteger:function(e){return Number.isSafeInteger(e)},array:function(e){return Array.isArray(e)},field:function(e,t){return t.Fp.isValid(e)},hash:function(e){return"function"==typeof e&&Number.isSafeInteger(e.outputLen)}},vn.notImplemented=function(){throw new Error("not implemented")},Object.defineProperty(pn,"__esModule",{value:!0}),pn.isNegativeLE=void 0,pn.mod=yh,pn.pow=bh,pn.pow2=function(e,t,n){for(var r=e;t-- >An;)r*=r,r%=n;return r},pn.invert=wh,pn.tonelliShanks=Eh,pn.FpSqrt=kh,pn.validateField=function(e){var t=In.reduce(function(e,t){return e[t]="function",e},{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,Cn.validateObject)(e,t)},pn.FpPow=_h,pn.FpInvertBatch=Sh,pn.FpDiv=function(e,t,n){return e.mul(t,"bigint"==typeof n?wh(n,e.ORDER):e.inv(n))},pn.FpLegendre=Ch,pn.FpIsSquare=function(e){var t=Ch(e.ORDER);return function(n){var r=t(e,n);return e.eql(r,e.ZERO)||e.eql(r,e.ONE)}},pn.nLength=Ah,pn.Field=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(e<=An)throw new Error("Expected Field ORDER > 0, got ".concat(e));var i=Ah(e,t),o=i.nBitLength,a=i.nByteLength;if(a>2048)throw new Error("Field lengths over 2048 bytes are not supported");var s=kh(e),c=Object.freeze({ORDER:e,BITS:o,BYTES:a,MASK:(0,Cn.bitMask)(o),ZERO:An,ONE:xn,create:function(t){return yh(t,e)},isValid:function(t){if("bigint"!=typeof t)throw new Error("Invalid field element: expected bigint, got "+D(t));return An<=t&&t<e},is0:function(e){return e===An},isOdd:function(e){return(e&xn)===xn},neg:function(t){return yh(-t,e)},eql:function(e,t){return e===t},sqr:function(t){return yh(t*t,e)},add:function(t,n){return yh(t+n,e)},sub:function(t,n){return yh(t-n,e)},mul:function(t,n){return yh(t*n,e)},pow:function(e,t){return _h(c,e,t)},div:function(t,n){return yh(t*wh(n,e),e)},sqrN:function(e){return e*e},addN:function(e,t){return e+t},subN:function(e,t){return e-t},mulN:function(e,t){return e*t},inv:function(t){return wh(t,e)},sqrt:r.sqrt||function(e){return s(c,e)},invertBatch:function(e){return Sh(c,e)},cmov:function(e,t,n){return n?t:e},toBytes:function(e){return n?(0,Cn.numberToBytesLE)(e,a):(0,Cn.numberToBytesBE)(e,a)},fromBytes:function(e){if(e.length!==a)throw new Error("Fp.fromBytes: expected ".concat(a,", got ").concat(e.length));return n?(0,Cn.bytesToNumberLE)(e):(0,Cn.bytesToNumberBE)(e)}});return Object.freeze(c)},pn.FpSqrtOdd=function(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");var n=e.sqrt(t);return e.isOdd(n)?n:e.neg(n)},pn.FpSqrtEven=function(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");var n=e.sqrt(t);return e.isOdd(n)?e.neg(n):n},pn.hashToPrivateScalar=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=(e=(0,Cn.ensureBytes)("privateHash",e)).length,i=Ah(t).nByteLength+8;if(i<24||r<i||r>1024)throw new Error("hashToPrivateScalar: expected ".concat(i,"-1024 bytes of input, got ").concat(r));return yh(n?(0,Cn.bytesToNumberLE)(e):(0,Cn.bytesToNumberBE)(e),t-xn)+xn},pn.getFieldBytesLength=xh,pn.getMinHashLength=Mh,pn.mapHashToField=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.length,i=xh(t),o=Mh(t);if(r<16||r<o||r>1024)throw new Error("expected ".concat(o,"-1024 bytes of input, got ").concat(r));var a=yh(n?(0,Cn.bytesToNumberBE)(e):(0,Cn.bytesToNumberLE)(e),t-xn)+xn;return n?(0,Cn.numberToBytesLE)(a,i):(0,Cn.numberToBytesBE)(a,i)},Cn=vn,An=BigInt(0),xn=BigInt(1),Mn=BigInt(2),Tn=BigInt(3),On=BigInt(4),Rn=BigInt(5),Pn=BigInt(8),BigInt(9),BigInt(16),pn.isNegativeLE=function(e,t){return(yh(e,t)&xn)===xn},In=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"],Object.defineProperty(hn,"__esModule",{value:!0}),hn.wNAF=function(e,t){var n=function(e,t){var n=t.negate();return e?n:t},r=function(e){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("Wrong window size=".concat(e,", should be [1..").concat(t,"]"))},i=function(e){return r(e),{windows:Math.ceil(t/e)+1,windowSize:Math.pow(2,e-1)}};return{constTimeNegate:n,unsafeLadder:function(t,n){for(var r=e.ZERO,i=t;n>Dn;)n&Bn&&(r=r.add(i)),i=i.double(),n>>=Bn;return r},precomputeWindow:function(e,t){for(var n=i(t),r=n.windows,o=n.windowSize,a=[],s=e,c=s,u=0;u<r;u++){c=s,a.push(c);for(var l=1;l<o;l++)c=c.add(s),a.push(c);s=c.double()}return a},wNAF:function(t,r,o){for(var a=i(t),s=a.windows,c=a.windowSize,u=e.ZERO,l=e.BASE,d=BigInt(Math.pow(2,t)-1),f=Math.pow(2,t),h=BigInt(t),p=0;p<s;p++){var v=p*c,m=Number(o&d);o>>=h,m>c&&(m-=f,o+=Bn);var g=v,y=v+Math.abs(m)-1,b=p%2!=0,w=m<0;0===m?l=l.add(n(b,r[g])):u=u.add(n(w,r[y]))}return{p:u,f:l}},wNAFCached:function(e,t,n){var r=Kn.get(e)||1,i=jn.get(e);return i||(i=this.precomputeWindow(e,r),1!==r&&jn.set(e,n(i))),this.wNAF(r,i,t)},setWindowSize:function(e,t){r(t),Kn.set(e,t),jn.delete(e)}}},hn.pippenger=function(e,t,n,r){if(!Array.isArray(n)||!Array.isArray(r)||r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");r.forEach(function(e,n){if(!t.isValid(e))throw new Error("wrong scalar at index ".concat(n))}),n.forEach(function(t,n){if(!(t instanceof e))throw new Error("wrong point at index ".concat(n))});for(var i=(0,Nn.bitLen)(BigInt(n.length)),o=i>12?i-3:i>4?i-2:i?2:1,a=(1<<o)-1,s=new Array(a+1).fill(e.ZERO),c=Math.floor((t.BITS-1)/o)*o,u=e.ZERO,l=c;l>=0;l-=o){s.fill(e.ZERO);for(var d=0;d<r.length;d++){var f=r[d],h=Number(f>>BigInt(l)&BigInt(a));s[h]=s[h].add(n[d])}for(var p=e.ZERO,v=s.length-1,m=e.ZERO;v>0;v--)m=m.add(s[v]),p=p.add(m);if(u=u.add(p),0!==l)for(var g=0;g<o;g++)u=u.double()}return u},hn.validateBasic=function(e){return(0,Ln.validateField)(e.Fp),(0,Nn.validateObject)(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze(A(A(A({},(0,Ln.nLength)(e.n,e.nBitLength)),e),{},{p:e.Fp.ORDER}))},Ln=pn,Nn=vn,Dn=BigInt(0),Bn=BigInt(1),jn=new WeakMap,Kn=new WeakMap,Object.defineProperty(fn,"__esModule",{value:!0}),fn.twistedEdwards=function(e){var t,n,r=(t=e,n=(0,Un.validateBasic)(t),Fn.validateObject(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze(A({},n))),i=r.Fp,o=r.n,a=r.prehash,s=r.hash,c=r.randomBytes,u=r.nByteLength,l=r.h,d=Wn<<BigInt(8*u)-$n,f=i.create,v=(0,Hn.Field)(r.n,r.nBitLength),m=r.uvRatio||function(e,t){try{return{isValid:!0,value:i.sqrt(e*i.inv(t))}}catch(n){return{isValid:!1,value:qn}}},g=r.adjustScalarBytes||function(e){return e},y=r.domain||function(e,t,n){if((0,zn.abool)("phflag",n),t.length||n)throw new Error("Contexts/pre-hash are not supported");return e};function b(e,t){Fn.aInRange("coordinate "+e,t,qn,d)}function w(e){if(!(e instanceof _))throw new Error("ExtendedPoint expected")}var E=(0,zn.memoized)(function(e,t){var n=e.ex,r=e.ey,o=e.ez,a=e.is0();null!=t||(t=a?Vn:i.inv(o));var s=f(n*t),c=f(r*t),u=f(o*t);if(a)return{x:qn,y:$n};if(u!==$n)throw new Error("invZ was invalid");return{x:s,y:c}}),k=(0,zn.memoized)(function(e){var t=r.a,n=r.d;if(e.is0())throw new Error("bad point: ZERO");var i=e.ex,o=e.ey,a=e.ez,s=e.et,c=f(i*i),u=f(o*o),l=f(a*a),d=f(l*l),h=f(c*t);if(f(l*f(h+u))!==f(d+f(n*f(c*u))))throw new Error("bad point: equation left != right (1)");if(f(i*o)!==f(a*s))throw new Error("bad point: equation left != right (2)");return!0}),_=function(){function e(t,n,r,i){p(this,e),this.ex=t,this.ey=n,this.ez=r,this.et=i,b("x",t),b("y",n),b("z",r),b("t",i),Object.freeze(this)}return h(e,[{key:"x",get:function(){return this.toAffine().x}},{key:"y",get:function(){return this.toAffine().y}},{key:"_setWindowSize",value:function(e){x.setWindowSize(this,e)}},{key:"assertValidity",value:function(){k(this)}},{key:"equals",value:function(e){w(e);var t=this.ex,n=this.ey,r=this.ez,i=e.ex,o=e.ey,a=e.ez,s=f(t*a),c=f(i*r),u=f(n*a),l=f(o*r);return s===c&&u===l}},{key:"is0",value:function(){return this.equals(e.ZERO)}},{key:"negate",value:function(){return new e(f(-this.ex),this.ey,this.ez,f(-this.et))}},{key:"double",value:function(){var t=r.a,n=this.ex,i=this.ey,o=this.ez,a=f(n*n),s=f(i*i),c=f(Wn*f(o*o)),u=f(t*a),l=n+i,d=f(f(l*l)-a-s),h=u+s,p=h-c,v=u-s,m=f(d*p),g=f(h*v),y=f(d*v);return new e(m,g,f(p*h),y)}},{key:"add",value:function(t){w(t);var n=r.a,i=r.d,o=this.ex,a=this.ey,s=this.ez,c=this.et,u=t.ex,l=t.ey,d=t.ez,h=t.et;if(n===BigInt(-1)){var p=f((a-o)*(l+u)),v=f((a+o)*(l-u)),m=f(v-p);if(m===qn)return this.double();var g=f(s*Wn*h),y=f(c*Wn*d),b=y+g,E=v+p,k=y-g,_=f(b*m),S=f(E*k),C=f(b*k);return new e(_,S,f(m*E),C)}var A=f(o*u),x=f(a*l),M=f(c*i*h),T=f(s*d),O=f((o+a)*(u+l)-A-x),R=T-M,P=T+M,I=f(x-n*A),L=f(O*R),N=f(P*I),D=f(O*I);return new e(L,N,f(R*P),D)}},{key:"subtract",value:function(e){return this.add(e.negate())}},{key:"wNAF",value:function(t){return x.wNAFCached(this,t,e.normalizeZ)}},{key:"multiply",value:function(t){var n=t;Fn.aInRange("scalar",n,$n,o);var r=this.wNAF(n),i=r.p,a=r.f;return e.normalizeZ([i,a])[0]}},{key:"multiplyUnsafe",value:function(e){var t=e;return Fn.aInRange("scalar",t,qn,o),t===qn?C:this.equals(C)||t===$n?this:this.equals(S)?this.wNAF(t).p:x.unsafeLadder(this,t)}},{key:"isSmallOrder",value:function(){return this.multiplyUnsafe(l).is0()}},{key:"isTorsionFree",value:function(){return x.unsafeLadder(this,o).is0()}},{key:"toAffine",value:function(e){return E(this,e)}},{key:"clearCofactor",value:function(){var e=r.h;return e===$n?this:this.multiplyUnsafe(e)}},{key:"toRawBytes",value:function(){var e=this.toAffine(),t=e.x,n=e.y,r=Fn.numberToBytesLE(n,i.BYTES);return r[r.length-1]|=t&$n?128:0,r}},{key:"toHex",value:function(){return Fn.bytesToHex(this.toRawBytes())}}],[{key:"fromAffine",value:function(t){if(t instanceof e)throw new Error("extended point not allowed");var n=t||{},r=n.x,i=n.y;return b("x",r),b("y",i),new e(r,i,$n,f(r*i))}},{key:"normalizeZ",value:function(t){var n=i.invertBatch(t.map(function(e){return e.ez}));return t.map(function(e,t){return e.toAffine(n[t])}).map(e.fromAffine)}},{key:"msm",value:function(t,n){return(0,Un.pippenger)(e,v,t,n)}},{key:"fromHex",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=r.d,a=r.a,s=i.BYTES;t=(0,zn.ensureBytes)("pointHex",t,s),(0,zn.abool)("zip215",n);var c=t.slice(),u=t[s-1];c[s-1]=-129&u;var l=Fn.bytesToNumberLE(c),h=n?d:i.ORDER;Fn.aInRange("pointHex.y",l,qn,h);var p=f(l*l),v=f(p-$n),g=f(o*p-a),y=m(v,g),b=y.isValid,w=y.value;if(!b)throw new Error("Point.fromHex: invalid y coordinate");var E=(w&$n)===$n,k=!!(128&u);if(!n&&w===qn&&k)throw new Error("Point.fromHex: x=0 and x_0=1");return k!==E&&(w=f(-w)),e.fromAffine({x:w,y:l})}},{key:"fromPrivateKey",value:function(e){return O(e).point}}])}();_.BASE=new _(r.Gx,r.Gy,$n,f(r.Gx*r.Gy)),_.ZERO=new _(qn,$n,$n,qn);var S=_.BASE,C=_.ZERO,x=(0,Un.wNAF)(_,8*u);function M(e){return(0,Hn.mod)(e,o)}function T(e){return M(Fn.bytesToNumberLE(e))}function O(e){var t=u;e=(0,zn.ensureBytes)("private key",e,t);var n=(0,zn.ensureBytes)("hashed private key",s(e),2*t),r=g(n.slice(0,t)),i=n.slice(t,2*t),o=T(r),a=S.multiply(o),c=a.toRawBytes();return{head:r,prefix:i,scalar:o,point:a,pointBytes:c}}function R(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Uint8Array,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=(e=Fn).concatBytes.apply(e,r);return T(s(y(o,(0,zn.ensureBytes)("context",t),!!a)))}var P=Gn;return S._setWindowSize(8),{CURVE:r,getPublicKey:function(e){return O(e).pointBytes},sign:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e=(0,zn.ensureBytes)("message",e),a&&(e=a(e));var r=O(t),s=r.prefix,c=r.scalar,l=r.pointBytes,d=R(n.context,s,e),f=S.multiply(d).toRawBytes(),h=M(d+R(n.context,f,l,e)*c);Fn.aInRange("signature.s",h,qn,o);var p=Fn.concatBytes(f,Fn.numberToBytesLE(h,i.BYTES));return(0,zn.ensureBytes)("result",p,2*u)},verify:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:P,o=r.context,s=r.zip215,c=i.BYTES;e=(0,zn.ensureBytes)("signature",e,2*c),t=(0,zn.ensureBytes)("message",t),void 0!==s&&(0,zn.abool)("zip215",s),a&&(t=a(t));var u,l,d,f=Fn.bytesToNumberLE(e.slice(c,2*c));try{u=_.fromHex(n,s),l=_.fromHex(e.slice(0,c),s),d=S.multiplyUnsafe(f)}catch(p){return!1}if(!s&&u.isSmallOrder())return!1;var h=R(o,l.toRawBytes(),u.toRawBytes(),t);return l.add(u.multiplyUnsafe(h)).subtract(d).clearCofactor().equals(_.ZERO)},ExtendedPoint:_,utils:{getExtendedPublicKey:O,randomPrivateKey:function(){return c(i.BYTES)},precompute:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_.BASE;return t._setWindowSize(e),t.multiply(BigInt(3)),t}}}},Un=hn,Hn=pn,Fn=vn,zn=vn,qn=BigInt(0),$n=BigInt(1),Wn=BigInt(2),Vn=BigInt(8),Gn={zip215:!0},Yn={},Object.defineProperty(Yn,"__esModule",{value:!0}),Yn.expand_message_xmd=Ph,Yn.expand_message_xof=Ih,Yn.hash_to_field=Lh,Yn.isogenyMap=function(e,t){var n=t.map(function(e){return Array.from(e).reverse()});return function(t,r){var i=x(n.map(function(n){return n.reduce(function(n,r){return e.add(e.mul(n,t),r)})}),4),o=i[0],a=i[1],s=i[2],c=i[3];return t=e.div(o,a),r=e.mul(r,e.div(s,c)),{x:t,y:r}}},Yn.createHasher=function(e,t,n){if("function"!=typeof t)throw new Error("mapToCurve() must be defined");return{hashToCurve:function(r,i){var o=Lh(r,2,A(A({},n),{},{DST:n.DST},i)),a=e.fromAffine(t(o[0])),s=e.fromAffine(t(o[1])),c=a.add(s).clearCofactor();return c.assertValidity(),c},encodeToCurve:function(r,i){var o=Lh(r,1,A(A({},n),{},{DST:n.encodeDST},i)),a=e.fromAffine(t(o[0])).clearCofactor();return a.assertValidity(),a},mapToCurve:function(n){if(!Array.isArray(n))throw new Error("mapToCurve: expected array of bigints");var r,i=_(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;if("bigint"!=typeof o)throw new Error("mapToCurve: expected array of bigints, got ".concat(o," in array"))}}catch(Cs){i.e(Cs)}finally{i.f()}var a=e.fromAffine(t(n)).clearCofactor();return a.assertValidity(),a}}},Zn=pn,Qn=(Jn=vn).bytesToNumberBE,Xn={},Object.defineProperty(Xn,"__esModule",{value:!0}),Xn.montgomery=function(e){var t,n=(t=e,(0,tr.validateObject)(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze(A({},t))),r=n.P,i=function(e){return(0,er.mod)(e,r)},o=n.montgomeryBits,a=Math.ceil(o/8),s=n.nByteLength,c=n.adjustScalarBytes||function(e){return e},u=n.powPminus2||function(e){return(0,er.pow)(e,r-BigInt(2),r)};function l(e,t,n){var r=i(e*(t-n));return[t=i(t-r),n=i(n+r)]}var d=(n.a-BigInt(2))/BigInt(4);function f(e){return(0,tr.numberToBytesLE)(i(e),a)}function h(e,t){var n,h,p=(n=t,h=(0,tr.ensureBytes)("u coordinate",n,a),32===s&&(h[31]&=127),(0,tr.bytesToNumberLE)(h)),v=function(e){var t=(0,tr.ensureBytes)("scalar",e),n=t.length;if(n!==a&&n!==s)throw new Error("Expected ".concat(a," or ").concat(s," bytes, got ").concat(n));return(0,tr.bytesToNumberLE)(c(t))}(e),m=function(e,t){(0,tr.aInRange)("u",e,nr,r),(0,tr.aInRange)("scalar",t,nr,r);for(var n,a=t,s=e,c=rr,f=nr,h=e,p=rr,v=nr,m=BigInt(o-1);m>=nr;m--){var g=a>>m&rr;c=(n=l(v^=g,c,h))[0],h=n[1],f=(n=l(v,f,p))[0],p=n[1],v=g;var y=c+f,b=i(y*y),w=c-f,E=i(w*w),k=b-E,_=h+p,S=i((h-p)*y),C=i(_*w),A=S+C,x=S-C;h=i(A*A),p=i(s*i(x*x)),c=i(b*E),f=i(k*(b+i(d*k)))}c=(n=l(v,c,h))[0],h=n[1],f=(n=l(v,f,p))[0],p=n[1];var M=u(f);return i(c*M)}(p,v);if(m===nr)throw new Error("Invalid private or public key received");return f(m)}var p=f(n.Gu);function v(e){return h(e,p)}return{scalarMult:h,scalarMultBase:v,getSharedSecret:function(e,t){return h(e,t)},getPublicKey:function(e){return v(e)},utils:{randomPrivateKey:function(){return n.randomBytes(n.nByteLength)}},GuBytes:p}},er=pn,tr=vn,nr=BigInt(0),rr=BigInt(1),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hash_to_ristretto255=e.hashToRistretto255=e.RistrettoPoint=e.encodeToCurve=e.hashToCurve=e.edwardsToMontgomery=e.x25519=e.ed25519ph=e.ed25519ctx=e.ed25519=e.ED25519_TORSION_SUBGROUP=void 0,e.edwardsToMontgomeryPub=S,e.edwardsToMontgomeryPriv=function(e){var t=k.hash(e.subarray(0,32));return k.adjustScalarBytes(t).subarray(0,32)};var t=Ct,n=Mt,r=fn,i=Yn,o=pn,a=Xn,s=vn,c=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),u=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),l=BigInt(0),d=BigInt(1),f=BigInt(2),v=BigInt(3),m=BigInt(5),g=BigInt(8);function y(e){var t=BigInt(10),n=BigInt(20),r=BigInt(40),i=BigInt(80),a=c,s=e*e%a*e%a,u=(0,o.pow2)(s,f,a)*s%a,l=(0,o.pow2)(u,d,a)*e%a,h=(0,o.pow2)(l,m,a)*l%a,p=(0,o.pow2)(h,t,a)*h%a,v=(0,o.pow2)(p,n,a)*p%a,g=(0,o.pow2)(v,r,a)*v%a,y=(0,o.pow2)(g,i,a)*g%a,b=(0,o.pow2)(y,i,a)*g%a,w=(0,o.pow2)(b,t,a)*h%a;return{pow_p_5_8:(0,o.pow2)(w,f,a)*e%a,b2:s}}function b(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function w(e,t){var n=c,r=(0,o.mod)(t*t*t,n),i=y(e*(0,o.mod)(r*r*t,n)).pow_p_5_8,a=(0,o.mod)(e*r*i,n),s=(0,o.mod)(t*a*a,n),l=a,d=(0,o.mod)(a*u,n),f=s===e,h=s===(0,o.mod)(-e,n),p=s===(0,o.mod)(-e*u,n);return f&&(a=l),(h||p)&&(a=d),(0,o.isNegativeLE)(a,n)&&(a=(0,o.mod)(-a,n)),{isValid:f||h,value:a}}e.ED25519_TORSION_SUBGROUP=["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"];var E=(0,o.Field)(c,void 0,!0),k={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:E,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:g,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:t.sha512,randomBytes:n.randomBytes,adjustScalarBytes:b,uvRatio:w};function _(e,t,r){if(t.length>255)throw new Error("Context is too big");return(0,n.concatBytes)((0,n.utf8ToBytes)("SigEd25519 no Ed25519 collisions"),new Uint8Array([r?1:0,t.length]),t,e)}function S(t){var n=e.ed25519.ExtendedPoint.fromHex(t).y,r=BigInt(1);return E.toBytes(E.create((r+n)*E.inv(r-n)))}e.ed25519=(0,r.twistedEdwards)(k),e.ed25519ctx=(0,r.twistedEdwards)(A(A({},k),{},{domain:_})),e.ed25519ph=(0,r.twistedEdwards)(Object.assign({},k,{domain:_,prehash:t.sha512})),e.x25519=(0,a.montgomery)({P:c,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:function(e){var t=c,n=y(e),r=n.pow_p_5_8,i=n.b2;return(0,o.mod)((0,o.pow2)(r,v,t)*i,t)},adjustScalarBytes:b,randomBytes:n.randomBytes}),e.edwardsToMontgomery=S;var C=(E.ORDER+v)/g,x=E.pow(f,C),M=E.sqrt(E.neg(E.ONE)),T=(0,o.FpSqrtEven)(E,E.neg(BigInt(486664)));var O=(0,i.createHasher)(e.ed25519.ExtendedPoint,function(e){return function(e){var t=function(e){var t=(E.ORDER-m)/g,n=BigInt(486662),r=E.sqr(e);r=E.mul(r,f);var i=E.add(r,E.ONE),o=E.neg(n),a=E.sqr(i),s=E.mul(a,i),c=E.mul(r,n);c=E.mul(c,o),c=E.add(c,a),c=E.mul(c,o);var u=E.sqr(s);a=E.sqr(u),u=E.mul(u,s),u=E.mul(u,c),a=E.mul(a,u);var l=E.pow(a,t);l=E.mul(l,u);var h=E.mul(l,M);a=E.sqr(l),a=E.mul(a,s);var p=E.eql(a,c),v=E.cmov(h,l,p),y=E.mul(o,r),b=E.mul(l,e);b=E.mul(b,x);var w=E.mul(b,M),k=E.mul(c,r);a=E.sqr(b),a=E.mul(a,s);var _=E.eql(a,k),S=E.cmov(w,b,_);a=E.sqr(v),a=E.mul(a,s);var C=E.eql(a,c),A=E.cmov(y,o,C),T=E.cmov(S,v,C),O=E.isOdd(T);return{xMn:A,xMd:i,yMn:T=E.cmov(T,E.neg(T),C!==O),yMd:d}}(e),n=t.xMn,r=t.xMd,i=t.yMn,o=t.yMd,a=E.mul(n,o);a=E.mul(a,T);var s=E.mul(r,i),c=E.sub(n,r),u=E.add(n,r),l=E.mul(s,u),h=E.eql(l,E.ZERO);a=E.cmov(a,E.ZERO,h),s=E.cmov(s,E.ONE,h),c=E.cmov(c,E.ONE,h),u=E.cmov(u,E.ONE,h);var p=E.invertBatch([s,u]);return{x:E.mul(a,p[0]),y:E.mul(c,p[1])}}(e[0])},{DST:"edwards25519_XMD:SHA-512_ELL2_RO_",encodeDST:"edwards25519_XMD:SHA-512_ELL2_NU_",p:E.ORDER,m:1,k:128,expand:"xmd",hash:t.sha512});function R(e){if(!(e instanceof H))throw new Error("RistrettoPoint expected")}e.hashToCurve=O.hashToCurve,e.encodeToCurve=O.encodeToCurve;var P=u,I=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),L=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),N=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),D=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),B=function(e){return w(d,e)},j=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),K=function(t){return e.ed25519.CURVE.Fp.create((0,s.bytesToNumberLE)(t)&j)};function U(t){var n=e.ed25519.CURVE.d,r=e.ed25519.CURVE.Fp.ORDER,i=e.ed25519.CURVE.Fp.create,a=i(P*t*t),s=i((a+d)*N),c=BigInt(-1),u=i((c-n*a)*i(a+n)),l=w(s,u),f=l.isValid,h=l.value,p=i(h*t);(0,o.isNegativeLE)(p,r)||(p=i(-p)),f||(h=p),f||(c=a);var v=i(c*(a-d)*D-u),m=h*h,g=i((h+h)*u),y=i(v*I),b=i(d-m),E=i(d+m);return new e.ed25519.ExtendedPoint(i(g*E),i(b*y),i(y*E),i(g*b))}var H=function(){function t(e){p(this,t),this.ep=e}return h(t,[{key:"toRawBytes",value:function(){var t,n=this.ep,r=n.ex,i=n.ey,a=n.ez,c=n.et,u=e.ed25519.CURVE.Fp.ORDER,l=e.ed25519.CURVE.Fp.create,d=l(l(a+i)*l(a-i)),f=l(r*i),h=l(f*f),p=B(l(d*h)).value,v=l(p*d),m=l(p*f),g=l(v*m*c);if((0,o.isNegativeLE)(c*g,u)){var y=l(i*P),b=l(r*P);r=y,i=b,t=l(v*L)}else t=m;(0,o.isNegativeLE)(r*g,u)&&(i=l(-i));var w=l((a-i)*t);return(0,o.isNegativeLE)(w,u)&&(w=l(-w)),(0,s.numberToBytesLE)(w,32)}},{key:"toHex",value:function(){return(0,s.bytesToHex)(this.toRawBytes())}},{key:"toString",value:function(){return this.toHex()}},{key:"equals",value:function(t){R(t);var n=this.ep,r=n.ex,i=n.ey,o=t.ep,a=o.ex,s=o.ey,c=e.ed25519.CURVE.Fp.create,u=c(r*s)===c(i*a),l=c(i*s)===c(r*a);return u||l}},{key:"add",value:function(e){return R(e),new t(this.ep.add(e.ep))}},{key:"subtract",value:function(e){return R(e),new t(this.ep.subtract(e.ep))}},{key:"multiply",value:function(e){return new t(this.ep.multiply(e))}},{key:"multiplyUnsafe",value:function(e){return new t(this.ep.multiplyUnsafe(e))}},{key:"double",value:function(){return new t(this.ep.double())}},{key:"negate",value:function(){return new t(this.ep.negate())}}],[{key:"fromAffine",value:function(n){return new t(e.ed25519.ExtendedPoint.fromAffine(n))}},{key:"hashToCurve",value:function(e){e=(0,s.ensureBytes)("ristrettoHash",e,64);var n=U(K(e.slice(0,32))),r=U(K(e.slice(32,64)));return new t(n.add(r))}},{key:"fromHex",value:function(n){n=(0,s.ensureBytes)("ristrettoHex",n,32);var r=e.ed25519.CURVE,i=r.a,a=r.d,c=e.ed25519.CURVE.Fp.ORDER,u=e.ed25519.CURVE.Fp.create,f="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",h=K(n);if(!(0,s.equalBytes)((0,s.numberToBytesLE)(h,32),n)||(0,o.isNegativeLE)(h,c))throw new Error(f);var p=u(h*h),v=u(d+i*p),m=u(d-i*p),g=u(v*v),y=u(m*m),b=u(i*a*g-y),w=B(u(b*y)),E=w.isValid,k=w.value,_=u(k*m),S=u(k*_*b),C=u((h+h)*_);(0,o.isNegativeLE)(C,c)&&(C=u(-C));var A=u(v*S),x=u(C*A);if(!E||(0,o.isNegativeLE)(x,c)||A===l)throw new Error(f);return new t(new e.ed25519.ExtendedPoint(C,A,d,x))}}])}();e.RistrettoPoint=(H.BASE||(H.BASE=new H(e.ed25519.ExtendedPoint.BASE)),H.ZERO||(H.ZERO=new H(e.ed25519.ExtendedPoint.ZERO)),H),e.hashToRistretto255=function(e,r){var o=r.DST,a="string"==typeof o?(0,n.utf8ToBytes)(o):o,s=(0,i.expand_message_xmd)(e,a,64,t.sha512);return H.hashToCurve(s)},e.hash_to_ristretto255=e.hashToRistretto255}(St),ir={},or={},Object.defineProperty(or,"__esModule",{value:!0}),or.sha224=or.sha256=or.SHA256=void 0,ar=At,sr=Mt,cr=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ur=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),lr=new Uint32Array(64),dr=function(e){function t(){var e;return p(this,t),(e=o(this,t,[64,32,8,!1])).A=0|ur[0],e.B=0|ur[1],e.C=0|ur[2],e.D=0|ur[3],e.E=0|ur[4],e.F=0|ur[5],e.G=0|ur[6],e.H=0|ur[7],e}return s(t,e),h(t,[{key:"get",value:function(){return[this.A,this.B,this.C,this.D,this.E,this.F,this.G,this.H]}},{key:"set",value:function(e,t,n,r,i,o,a,s){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|o,this.G=0|a,this.H=0|s}},{key:"process",value:function(e,t){for(var n=0;n<16;n++,t+=4)lr[n]=e.getUint32(t,!1);for(var r=16;r<64;r++){var i=lr[r-15],o=lr[r-2],a=(0,sr.rotr)(i,7)^(0,sr.rotr)(i,18)^i>>>3;lr[r]=((0,sr.rotr)(o,17)^(0,sr.rotr)(o,19)^o>>>10)+lr[r-7]+a+lr[r-16]|0}for(var s=this.A,c=this.B,u=this.C,l=this.D,d=this.E,f=this.F,h=this.G,p=this.H,v=0;v<64;v++){var m=p+((0,sr.rotr)(d,6)^(0,sr.rotr)(d,11)^(0,sr.rotr)(d,25))+(0,ar.Chi)(d,f,h)+cr[v]+lr[v]|0,g=((0,sr.rotr)(s,2)^(0,sr.rotr)(s,13)^(0,sr.rotr)(s,22))+(0,ar.Maj)(s,c,u)|0;p=h,h=f,f=d,d=l+m|0,l=u,u=c,c=s,s=m+g|0}s=s+this.A|0,c=c+this.B|0,u=u+this.C|0,l=l+this.D|0,d=d+this.E|0,f=f+this.F|0,h=h+this.G|0,p=p+this.H|0,this.set(s,c,u,l,d,f,h,p)}},{key:"roundClean",value:function(){lr.fill(0)}},{key:"destroy",value:function(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}])}(ar.HashMD),or.SHA256=dr,fr=function(e){function t(){var e;return p(this,t),(e=o(this,t)).A=-1056596264,e.B=914150663,e.C=812702999,e.D=-150054599,e.E=-4191439,e.F=1750603025,e.G=1694076839,e.H=-1090891868,e.outputLen=28,e}return s(t,e),h(t)}(dr),or.sha256=(0,sr.wrapConstructor)(function(){return new dr}),or.sha224=(0,sr.wrapConstructor)(function(){return new fr}),hr={},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hmac=e.HMAC=void 0;var t=xt,n=Mt,r=function(e){function r(e,i){var a;p(this,r),(a=o(this,r)).finished=!1,a.destroyed=!1,(0,t.hash)(e);var s=(0,n.toBytes)(i);if(a.iHash=e.create(),"function"!=typeof a.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");a.blockLen=a.iHash.blockLen,a.outputLen=a.iHash.outputLen;var c=a.blockLen,u=new Uint8Array(c);u.set(s.length>c?e.create().update(s).digest():s);for(var l=0;l<u.length;l++)u[l]^=54;a.iHash.update(u),a.oHash=e.create();for(var d=0;d<u.length;d++)u[d]^=106;return a.oHash.update(u),u.fill(0),a}return s(r,e),h(r,[{key:"update",value:function(e){return(0,t.exists)(this),this.iHash.update(e),this}},{key:"digestInto",value:function(e){(0,t.exists)(this),(0,t.bytes)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}},{key:"digest",value:function(){var e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}},{key:"_cloneInto",value:function(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));var t=this.oHash,n=this.iHash,r=this.finished,i=this.destroyed,o=this.blockLen,a=this.outputLen;return e.finished=r,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}},{key:"destroy",value:function(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}])}(n.Hash);e.HMAC=r,e.hmac=function(e,t,n){return new r(e,t).update(n).digest()},e.hmac.create=function(e,t){return new r(e,t)}}(pr={}),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DER=void 0,e.weierstrassPoints=y,e.weierstrass=function(o){var s,c,u=(s=o,c=(0,t.validateBasic)(s),r.validateObject(c,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze(A({lowS:!0},c))),l=u.Fp,v=u.n,m=l.BYTES+1,g=2*l.BYTES+1;function b(e){return n.mod(e,v)}function w(e){return n.invert(e,v)}var E=y(A(A({},u),{},{toBytes:function(e,t,n){var o=t.toAffine(),a=l.toBytes(o.x),s=r.concatBytes;return(0,i.abool)("isCompressed",n),n?s(Uint8Array.from([t.hasEvenY()?2:3]),a):s(Uint8Array.from([4]),a,l.toBytes(o.y))},fromBytes:function(e){var t=e.length,n=e[0],i=e.subarray(1);if(t!==m||2!==n&&3!==n){if(t===g&&4===n)return{x:l.fromBytes(i.subarray(0,l.BYTES)),y:l.fromBytes(i.subarray(l.BYTES,2*l.BYTES))};throw new Error("Point of length ".concat(t," was invalid. Expected ").concat(m," compressed bytes or ").concat(g," uncompressed bytes"))}var o=r.bytesToNumberBE(i);if(!r.inRange(o,f,l.ORDER))throw new Error("Point is not on curve");var a,s=S(o);try{a=l.sqrt(s)}catch(u){var c=u instanceof Error?": "+u.message:"";throw new Error("Point is not on curve"+c)}return!(1&~n)!=((a&f)===f)&&(a=l.neg(a)),{x:o,y:a}}})),k=E.ProjectivePoint,_=E.normPrivateKeyToScalar,S=E.weierstrassEquation,C=E.isWithinCurveOrder,x=function(e){return r.bytesToHex(r.numberToBytesBE(e,u.nByteLength))};function M(e){return e>v>>f}var T=function(e,t,n){return r.bytesToNumberBE(e.slice(t,n))},O=function(){function t(e,n,r){p(this,t),this.r=e,this.s=n,this.recovery=r,this.assertValidity()}return h(t,[{key:"assertValidity",value:function(){r.aInRange("r",this.r,f,v),r.aInRange("s",this.s,f,v)}},{key:"addRecoveryBit",value:function(e){return new t(this.r,this.s,e)}},{key:"recoverPublicKey",value:function(e){var t=this.r,n=this.s,r=this.recovery,o=L((0,i.ensureBytes)("msgHash",e));if(null==r||![0,1,2,3].includes(r))throw new Error("recovery id invalid");var a=2===r||3===r?t+u.n:t;if(a>=l.ORDER)throw new Error("recovery id 2 or 3 invalid");var s=1&r?"03":"02",c=k.fromHex(s+x(a)),d=w(a),f=b(-o*d),h=b(n*d),p=k.BASE.multiplyAndAddUnsafe(c,f,h);if(!p)throw new Error("point at infinify");return p.assertValidity(),p}},{key:"hasHighS",value:function(){return M(this.s)}},{key:"normalizeS",value:function(){return this.hasHighS()?new t(this.r,b(-this.s),this.recovery):this}},{key:"toDERRawBytes",value:function(){return r.hexToBytes(this.toDERHex())}},{key:"toDERHex",value:function(){return e.DER.hexFromSig({r:this.r,s:this.s})}},{key:"toCompactRawBytes",value:function(){return r.hexToBytes(this.toCompactHex())}},{key:"toCompactHex",value:function(){return x(this.r)+x(this.s)}}],[{key:"fromCompact",value:function(e){var n=u.nByteLength;return e=(0,i.ensureBytes)("compactSignature",e,2*n),new t(T(e,0,n),T(e,n,2*n))}},{key:"fromDER",value:function(n){var r=e.DER.toSig((0,i.ensureBytes)("DER",n));return new t(r.r,r.s)}}])}(),R={isValidPrivateKey:function(e){try{return _(e),!0}catch(t){return!1}},normPrivateKeyToScalar:_,randomPrivateKey:function(){var e=n.getMinHashLength(u.n);return n.mapHashToField(u.randomBytes(e),u.n)},precompute:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k.BASE;return t._setWindowSize(e),t.multiply(BigInt(3)),t}};function P(e){var t=r.isBytes(e),n="string"==typeof e,i=(t||n)&&e.length;return t?i===m||i===g:n?i===2*m||i===2*g:e instanceof k}var I=u.bits2int||function(e){var t=r.bytesToNumberBE(e),n=8*e.length-u.nBitLength;return n>0?t>>BigInt(n):t},L=u.bits2int_modN||function(e){return b(I(e))},N=r.bitMask(u.nBitLength);function B(e){return r.aInRange("num < 2^".concat(u.nBitLength),e,d,N),r.numberToBytesBE(e,u.nByteLength)}var j={lowS:u.lowS,prehash:!1},K={lowS:u.lowS,prehash:!1};return k.BASE._setWindowSize(8),{CURVE:u,getPublicKey:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return k.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(P(e))throw new Error("first arg must be private key");if(!P(t))throw new Error("second arg must be public key");return k.fromHex(t).multiply(_(e)).toRawBytes(n)},sign:function(e,t){var n=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:j;if(["recovered","canonical"].some(function(e){return e in n}))throw new Error("sign() legacy options not supported");var o=u.hash,s=u.randomBytes,c=n.lowS,h=n.prehash,p=n.extraEntropy;null!=c||(c=!0),e=(0,i.ensureBytes)("msgHash",e),a(n),h&&(e=(0,i.ensureBytes)("prehashed msgHash",o(e)));var v=L(e),m=_(t),g=[B(m),B(v)];if(null!=p&&!1!==p){var y=!0===p?s(l.BYTES):p;g.push((0,i.ensureBytes)("extraEntropy",y))}var E=r.concatBytes.apply(r,g),S=v;return{seed:E,k2sig:function(e){var t=I(e);if(C(t)){var n=w(t),r=k.BASE.multiply(t).toAffine(),i=b(r.x);if(i!==d){var o=b(n*b(S+i*m));if(o!==d){var a,s=(r.x===i?0:2)|Number(r.y&f),u=o;return c&&M(o)&&(u=M(a=o)?b(-a):a,s^=1),new O(i,u,s)}}}}}}(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:j),o=n.seed,s=n.k2sig,c=u;return r.createHmacDrbg(c.hash.outputLen,c.nByteLength,c.hmac)(o,s)},verify:function(t,n,o){var s,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:K,l=t;if(n=(0,i.ensureBytes)("msgHash",n),o=(0,i.ensureBytes)("publicKey",o),"strict"in c)throw new Error("options.strict was renamed to lowS");a(c);var d,f,h=c.lowS,p=c.prehash;try{if("string"==typeof l||r.isBytes(l))try{d=O.fromDER(l)}catch(m){if(!(m instanceof e.DER.Err))throw m;d=O.fromCompact(l)}else{if("object"!=D(l)||"bigint"!=typeof l.r||"bigint"!=typeof l.s)throw new Error("PARSE");var v=l.r,m=l.s;d=new O(v,m)}f=k.fromHex(o)}catch(v){if("PARSE"===v.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(h&&d.hasHighS())return!1;p&&(n=u.hash(n));var g=d,y=g.r,E=g.s,_=L(n),S=w(E),C=b(_*S),A=b(y*S),x=null===(s=k.BASE.multiplyAndAddUnsafe(f,C,A))||void 0===s?void 0:s.toAffine();return!!x&&b(x.x)===y},ProjectivePoint:k,Signature:O,utils:R}},e.SWUFpSqrtRatio=b,e.mapToCurveSimpleSWU=function(e,t){if(n.validateField(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");var r=b(e,t.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return function(n){var i,o,a,s,c,u,l,d;i=e.sqr(n),i=e.mul(i,t.Z),o=e.sqr(i),o=e.add(o,i),a=e.add(o,e.ONE),a=e.mul(a,t.B),s=e.cmov(t.Z,e.neg(o),!e.eql(o,e.ZERO)),s=e.mul(s,t.A),o=e.sqr(a),u=e.sqr(s),c=e.mul(u,t.A),o=e.add(o,c),o=e.mul(o,a),u=e.mul(u,s),c=e.mul(u,t.B),o=e.add(o,c),l=e.mul(i,a);var f=r(o,u),h=f.isValid,p=f.value;d=e.mul(i,n),d=e.mul(d,p),l=e.cmov(l,a,h),d=e.cmov(d,p,h);var v=e.isOdd(n)===e.isOdd(d);return d=e.cmov(e.neg(d),d,v),{x:l=e.div(l,s),y:d}}};var t=hn,n=pn,r=vn,i=vn;function a(e){void 0!==e.lowS&&(0,i.abool)("lowS",e.lowS),void 0!==e.prehash&&(0,i.abool)("prehash",e.prehash)}var u=r.bytesToNumberBE,l=r.hexToBytes;e.DER={Err:function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return p(this,t),o(this,t,[e])}return s(t,e),h(t)}(c(Error)),_tlv:{encode:function(t,n){var i=e.DER.Err;if(t<0||t>256)throw new i("tlv.encode: wrong tag");if(1&n.length)throw new i("tlv.encode: unpadded data");var o=n.length/2,a=r.numberToHexUnpadded(o);if(a.length/2&128)throw new i("tlv.encode: long form length too big");var s=o>127?r.numberToHexUnpadded(a.length/2|128):"";return"".concat(r.numberToHexUnpadded(t)).concat(s).concat(a).concat(n)},decode:function(t,n){var r=e.DER.Err,i=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(n.length<2||n[i++]!==t)throw new r("tlv.decode: wrong tlv");var o=n[i++],a=0;if(128&o){var s=127&o;if(!s)throw new r("tlv.decode(long): indefinite length not supported");if(s>4)throw new r("tlv.decode(long): byte length is too big");var c=n.subarray(i,i+s);if(c.length!==s)throw new r("tlv.decode: length bytes not complete");if(0===c[0])throw new r("tlv.decode(long): zero leftmost byte");var u,l=_(c);try{for(l.s();!(u=l.n()).done;){a=a<<8|u.value}}catch(Cs){l.e(Cs)}finally{l.f()}if(i+=s,a<128)throw new r("tlv.decode(long): not minimal encoding")}else a=o;var d=n.subarray(i,i+a);if(d.length!==a)throw new r("tlv.decode: wrong value length");return{v:d,l:n.subarray(i+a)}}},_int:{encode:function(t){var n=e.DER.Err;if(t<d)throw new n("integer: negative integers are not allowed");var i=r.numberToHexUnpadded(t);if(8&Number.parseInt(i[0],16)&&(i="00"+i),1&i.length)throw new n("unexpected assertion");return i},decode:function(t){var n=e.DER.Err;if(128&t[0])throw new n("Invalid signature integer: negative");if(0===t[0]&&!(128&t[1]))throw new n("Invalid signature integer: unnecessary leading zero");return u(t)}},toSig:function(t){var n=e.DER,i=n.Err,o=n._int,a=n._tlv,s="string"==typeof t?l(t):t;r.abytes(s);var c=a.decode(48,s),u=c.v;if(c.l.length)throw new i("Invalid signature: left bytes after parsing");var d=a.decode(2,u),f=d.v,h=d.l,p=a.decode(2,h),v=p.v;if(p.l.length)throw new i("Invalid signature: left bytes after parsing");return{r:o.decode(f),s:o.decode(v)}},hexFromSig:function(t){var n=e.DER,r=n._tlv,i=n._int,o="".concat(r.encode(2,i.encode(t.r))).concat(r.encode(2,i.encode(t.s)));return r.encode(48,o)}};var d=BigInt(0),f=BigInt(1),v=BigInt(2),m=BigInt(3),g=BigInt(4);function y(e){var o=function(e){var n=(0,t.validateBasic)(e);r.validateObject(n,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});var i=n.endo,o=n.Fp,a=n.a;if(i){if(!o.eql(a,o.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=D(i)||"bigint"!=typeof i.beta||"function"!=typeof i.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze(A({},n))}(e),a=o.Fp,s=n.Field(o.n,o.nBitLength),c=o.toBytes||function(e,t,n){var i=t.toAffine();return r.concatBytes(Uint8Array.from([4]),a.toBytes(i.x),a.toBytes(i.y))},u=o.fromBytes||function(e){var t=e.subarray(1);return{x:a.fromBytes(t.subarray(0,a.BYTES)),y:a.fromBytes(t.subarray(a.BYTES,2*a.BYTES))}};function l(e){var t=o.a,n=o.b,r=a.sqr(e),i=a.mul(r,e);return a.add(a.add(i,a.mul(e,t)),n)}if(!a.eql(a.sqr(o.Gy),l(o.Gx)))throw new Error("bad generator point: equation left != right");function v(e){var t,a=o.allowedPrivateKeyLengths,s=o.nByteLength,c=o.wrapPrivateKey,u=o.n;if(a&&"bigint"!=typeof e){if(r.isBytes(e)&&(e=r.bytesToHex(e)),"string"!=typeof e||!a.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*s,"0")}try{t="bigint"==typeof e?e:r.bytesToNumberBE((0,i.ensureBytes)("private key",e,s))}catch(l){throw new Error("private key must be ".concat(s," bytes, hex or bigint, not ").concat(D(e)))}return c&&(t=n.mod(t,u)),r.aInRange("private key",t,f,u),t}function g(e){if(!(e instanceof w))throw new Error("ProjectivePoint expected")}var y=(0,i.memoized)(function(e,t){var n=e.px,r=e.py,i=e.pz;if(a.eql(i,a.ONE))return{x:n,y:r};var o=e.is0();null!=t||(t=o?a.ONE:a.inv(i));var s=a.mul(n,t),c=a.mul(r,t),u=a.mul(i,t);if(o)return{x:a.ZERO,y:a.ZERO};if(!a.eql(u,a.ONE))throw new Error("invZ was invalid");return{x:s,y:c}}),b=(0,i.memoized)(function(e){if(e.is0()){if(o.allowInfinityPoint&&!a.is0(e.py))return;throw new Error("bad point: ZERO")}var t=e.toAffine(),n=t.x,r=t.y;if(!a.isValid(n)||!a.isValid(r))throw new Error("bad point: x or y not FE");var i=a.sqr(r),s=l(n);if(!a.eql(i,s))throw new Error("bad point: equation left != right");if(!e.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0}),w=function(){function e(t,n,r){if(p(this,e),this.px=t,this.py=n,this.pz=r,null==t||!a.isValid(t))throw new Error("x required");if(null==n||!a.isValid(n))throw new Error("y required");if(null==r||!a.isValid(r))throw new Error("z required");Object.freeze(this)}return h(e,[{key:"x",get:function(){return this.toAffine().x}},{key:"y",get:function(){return this.toAffine().y}},{key:"_setWindowSize",value:function(e){k.setWindowSize(this,e)}},{key:"assertValidity",value:function(){b(this)}},{key:"hasEvenY",value:function(){var e=this.toAffine().y;if(a.isOdd)return!a.isOdd(e);throw new Error("Field doesn't support isOdd")}},{key:"equals",value:function(e){g(e);var t=this.px,n=this.py,r=this.pz,i=e.px,o=e.py,s=e.pz,c=a.eql(a.mul(t,s),a.mul(i,r)),u=a.eql(a.mul(n,s),a.mul(o,r));return c&&u}},{key:"negate",value:function(){return new e(this.px,a.neg(this.py),this.pz)}},{key:"double",value:function(){var t=o.a,n=o.b,r=a.mul(n,m),i=this.px,s=this.py,c=this.pz,u=a.ZERO,l=a.ZERO,d=a.ZERO,f=a.mul(i,i),h=a.mul(s,s),p=a.mul(c,c),v=a.mul(i,s);return v=a.add(v,v),d=a.mul(i,c),d=a.add(d,d),u=a.mul(t,d),l=a.mul(r,p),l=a.add(u,l),u=a.sub(h,l),l=a.add(h,l),l=a.mul(u,l),u=a.mul(v,u),d=a.mul(r,d),p=a.mul(t,p),v=a.sub(f,p),v=a.mul(t,v),v=a.add(v,d),d=a.add(f,f),f=a.add(d,f),f=a.add(f,p),f=a.mul(f,v),l=a.add(l,f),p=a.mul(s,c),p=a.add(p,p),f=a.mul(p,v),u=a.sub(u,f),d=a.mul(p,h),d=a.add(d,d),new e(u,l,d=a.add(d,d))}},{key:"add",value:function(t){g(t);var n=this.px,r=this.py,i=this.pz,s=t.px,c=t.py,u=t.pz,l=a.ZERO,d=a.ZERO,f=a.ZERO,h=o.a,p=a.mul(o.b,m),v=a.mul(n,s),y=a.mul(r,c),b=a.mul(i,u),w=a.add(n,r),E=a.add(s,c);w=a.mul(w,E),E=a.add(v,y),w=a.sub(w,E),E=a.add(n,i);var k=a.add(s,u);return E=a.mul(E,k),k=a.add(v,b),E=a.sub(E,k),k=a.add(r,i),l=a.add(c,u),k=a.mul(k,l),l=a.add(y,b),k=a.sub(k,l),f=a.mul(h,E),l=a.mul(p,b),f=a.add(l,f),l=a.sub(y,f),f=a.add(y,f),d=a.mul(l,f),y=a.add(v,v),y=a.add(y,v),b=a.mul(h,b),E=a.mul(p,E),y=a.add(y,b),b=a.sub(v,b),b=a.mul(h,b),E=a.add(E,b),v=a.mul(y,E),d=a.add(d,v),v=a.mul(k,E),l=a.mul(w,l),l=a.sub(l,v),v=a.mul(w,y),f=a.mul(k,f),new e(l,d,f=a.add(f,v))}},{key:"subtract",value:function(e){return this.add(e.negate())}},{key:"is0",value:function(){return this.equals(e.ZERO)}},{key:"wNAF",value:function(t){return k.wNAFCached(this,t,e.normalizeZ)}},{key:"multiplyUnsafe",value:function(t){r.aInRange("scalar",t,d,o.n);var n=e.ZERO;if(t===d)return n;if(t===f)return this;var i=o.endo;if(!i)return k.unsafeLadder(this,t);for(var s=i.splitScalar(t),c=s.k1neg,u=s.k1,l=s.k2neg,h=s.k2,p=n,v=n,m=this;u>d||h>d;)u&f&&(p=p.add(m)),h&f&&(v=v.add(m)),m=m.double(),u>>=f,h>>=f;return c&&(p=p.negate()),l&&(v=v.negate()),v=new e(a.mul(v.px,i.beta),v.py,v.pz),p.add(v)}},{key:"multiply",value:function(t){var n,i,s=o.endo,c=o.n;if(r.aInRange("scalar",t,f,c),s){var u=s.splitScalar(t),l=u.k1neg,d=u.k1,h=u.k2neg,p=u.k2,v=this.wNAF(d),m=v.p,g=v.f,y=this.wNAF(p),b=y.p,w=y.f;m=k.constTimeNegate(l,m),b=k.constTimeNegate(h,b),b=new e(a.mul(b.px,s.beta),b.py,b.pz),n=m.add(b),i=g.add(w)}else{var E=this.wNAF(t);n=E.p,i=E.f}return e.normalizeZ([n,i])[0]}},{key:"multiplyAndAddUnsafe",value:function(t,n,r){var i=e.BASE,o=function(e,t){return t!==d&&t!==f&&e.equals(i)?e.multiply(t):e.multiplyUnsafe(t)},a=o(this,n).add(o(t,r));return a.is0()?void 0:a}},{key:"toAffine",value:function(e){return y(this,e)}},{key:"isTorsionFree",value:function(){var t=o.h,n=o.isTorsionFree;if(t===f)return!0;if(n)return n(e,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}},{key:"clearCofactor",value:function(){var t=o.h,n=o.clearCofactor;return t===f?this:n?n(e,this):this.multiplyUnsafe(o.h)}},{key:"toRawBytes",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return(0,i.abool)("isCompressed",t),this.assertValidity(),c(e,this,t)}},{key:"toHex",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return(0,i.abool)("isCompressed",e),r.bytesToHex(this.toRawBytes(e))}}],[{key:"fromAffine",value:function(t){var n=t||{},r=n.x,i=n.y;if(!t||!a.isValid(r)||!a.isValid(i))throw new Error("invalid affine point");if(t instanceof e)throw new Error("projective point not allowed");var o=function(e){return a.eql(e,a.ZERO)};return o(r)&&o(i)?e.ZERO:new e(r,i,a.ONE)}},{key:"normalizeZ",value:function(t){var n=a.invertBatch(t.map(function(e){return e.pz}));return t.map(function(e,t){return e.toAffine(n[t])}).map(e.fromAffine)}},{key:"fromHex",value:function(t){var n=e.fromAffine(u((0,i.ensureBytes)("pointHex",t)));return n.assertValidity(),n}},{key:"fromPrivateKey",value:function(t){return e.BASE.multiply(v(t))}},{key:"msm",value:function(n,r){return(0,t.pippenger)(e,s,n,r)}}])}();w.BASE=new w(o.Gx,o.Gy,a.ONE),w.ZERO=new w(a.ZERO,a.ONE,a.ZERO);var E=o.nBitLength,k=(0,t.wNAF)(w,o.endo?Math.ceil(E/2):E);return{CURVE:o,ProjectivePoint:w,normPrivateKeyToScalar:v,weierstrassEquation:l,isWithinCurveOrder:function(e){return r.inRange(e,f,o.n)}}}function b(e,t){for(var n=e.ORDER,r=d,i=n-f;i%v===d;i/=v)r+=f;var o=r,a=v<<o-f-f,s=a*v,c=(n-f)/s,u=(c-f)/v,l=s-f,h=a,p=e.pow(t,c),y=e.pow(t,(c+f)/v),b=function(t,n){var r=p,i=e.pow(n,l),a=e.sqr(i);a=e.mul(a,n);var s=e.mul(t,a);s=e.pow(s,u),s=e.mul(s,i),i=e.mul(s,n),a=e.mul(s,t);var c=e.mul(a,i);s=e.pow(c,h);var d=e.eql(s,e.ONE);i=e.mul(a,y),s=e.mul(c,r),a=e.cmov(i,a,d),c=e.cmov(s,c,d);for(var m=o;m>f;m--){var g=m-v;g=v<<g-f;var b=e.pow(c,g),w=e.eql(b,e.ONE);i=e.mul(a,r),r=e.mul(r,r),b=e.mul(c,r),a=e.cmov(i,a,w),c=e.cmov(b,c,w)}return{isValid:d,value:a}};if(e.ORDER%g===m){var w=(e.ORDER-m)/g,E=e.sqrt(e.neg(t));b=function(t,n){var r=e.sqr(n),i=e.mul(t,n);r=e.mul(r,i);var o=e.pow(r,w);o=e.mul(o,i);var a=e.mul(o,E),s=e.mul(e.sqr(o),n),c=e.eql(s,t);return{isValid:c,value:e.cmov(a,o,c)}}}return b}}(vr={}),Object.defineProperty(hr,"__esModule",{value:!0}),hr.getHash=Nh,hr.createCurve=function(e,t){var n=function(t){return(0,yr.weierstrass)(A(A({},e),Nh(t)))};return Object.freeze(A(A({},n(t)),{},{create:n}))},mr=pr,gr=Mt,yr=vr,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.encodeToCurve=e.hashToCurve=e.schnorr=e.secp256k1=void 0;var t=or,n=Mt,r=hr,i=Yn,o=pn,a=vn,s=vr,c=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),u=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),l=BigInt(1),d=BigInt(2),f=function(e,t){return(e+t/d)/t};function h(e){var t=c,n=BigInt(3),r=BigInt(6),i=BigInt(11),a=BigInt(22),s=BigInt(23),u=BigInt(44),l=BigInt(88),f=e*e*e%t,h=f*f*e%t,v=(0,o.pow2)(h,n,t)*h%t,m=(0,o.pow2)(v,n,t)*h%t,g=(0,o.pow2)(m,d,t)*f%t,y=(0,o.pow2)(g,i,t)*g%t,b=(0,o.pow2)(y,a,t)*y%t,w=(0,o.pow2)(b,u,t)*b%t,E=(0,o.pow2)(w,l,t)*w%t,k=(0,o.pow2)(E,u,t)*b%t,_=(0,o.pow2)(k,n,t)*h%t,S=(0,o.pow2)(_,s,t)*y%t,C=(0,o.pow2)(S,r,t)*f%t,A=(0,o.pow2)(C,d,t);if(!p.eql(p.sqr(A),e))throw new Error("Cannot find square root");return A}var p=(0,o.Field)(c,void 0,void 0,{sqrt:h});e.secp256k1=(0,r.createCurve)({a:BigInt(0),b:BigInt(7),Fp:p,n:u,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:function(e){var t=u,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-l*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),a=n,s=BigInt("0x100000000000000000000000000000000"),c=f(a*e,t),d=f(-r*e,t),h=(0,o.mod)(e-c*n-d*i,t),p=(0,o.mod)(-c*r-d*a,t),v=h>s,m=p>s;if(v&&(h=t-h),m&&(p=t-p),h>s||p>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:v,k1:h,k2neg:m,k2:p}}}},t.sha256);var v=BigInt(0),m={};function g(e){var n=m[e];if(void 0===n){var r=(0,t.sha256)(Uint8Array.from(e,function(e){return e.charCodeAt(0)}));n=(0,a.concatBytes)(r,r),m[e]=n}for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];return(0,t.sha256)(a.concatBytes.apply(void 0,[n].concat(o)))}var y=function(e){return e.toRawBytes(!0).slice(1)},b=function(e){return(0,a.numberToBytesBE)(e,32)},w=function(e){return(0,o.mod)(e,c)},E=function(e){return(0,o.mod)(e,u)},k=e.secp256k1.ProjectivePoint;function _(t){var n=e.secp256k1.utils.normPrivateKeyToScalar(t),r=k.fromPrivateKey(n);return{scalar:r.hasEvenY()?n:E(-n),bytes:y(r)}}function S(e){(0,a.aInRange)("x",e,l,c);var t=w(e*e),n=h(w(t*e+BigInt(7)));n%d!==v&&(n=w(-n));var r=new k(e,n,l);return r.assertValidity(),r}var C=a.bytesToNumberBE;function A(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return E(C(g.apply(void 0,["BIP0340/challenge"].concat(t))))}function x(e,t,n){var r=(0,a.ensureBytes)("signature",e,64),i=(0,a.ensureBytes)("message",t),o=(0,a.ensureBytes)("publicKey",n,32);try{var s=S(C(o)),d=C(r.subarray(0,32));if(!(0,a.inRange)(d,l,c))return!1;var f=C(r.subarray(32,64));if(!(0,a.inRange)(f,l,u))return!1;var h=A(b(d),y(s),i),p=function(e,t,n){return k.BASE.multiplyAndAddUnsafe(e,t,n)}(s,f,E(-h));return!(!p||!p.hasEvenY()||p.toAffine().x!==d)}catch(s){return!1}}e.schnorr={getPublicKey:function(e){return _(e).bytes},sign:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,n.randomBytes)(32),i=(0,a.ensureBytes)("message",e),o=_(t),s=o.bytes,c=o.scalar,u=(0,a.ensureBytes)("auxRand",r,32),l=b(c^C(g("BIP0340/aux",u))),d=g("BIP0340/nonce",l,s,i),f=E(C(d));if(f===v)throw new Error("sign failed: k is zero");var h=_(f),p=h.bytes,m=h.scalar,y=A(p,s,i),w=new Uint8Array(64);if(w.set(p,0),w.set(b(E(m+y*c)),32),!x(w,i,s))throw new Error("sign: Invalid signature produced");return w},verify:x,utils:{randomPrivateKey:e.secp256k1.utils.randomPrivateKey,lift_x:S,pointToBytes:y,numberToBytesBE:a.numberToBytesBE,bytesToNumberBE:a.bytesToNumberBE,taggedHash:g,mod:o.mod}};var M=(0,i.isogenyMap)(p,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(function(e){return e.map(function(e){return BigInt(e)})})),T=(0,s.mapToCurveSimpleSWU)(p,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:p.create(BigInt("-11"))}),O=(0,i.createHasher)(e.secp256k1.ProjectivePoint,function(e){var t=T(p.create(e[0])),n=t.x,r=t.y;return M(n,r)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:p.ORDER,m:1,k:128,expand:"xmd",hash:t.sha256});e.hashToCurve=O.hashToCurve,e.encodeToCurve=O.encodeToCurve}(ir),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.decodeHex=e.remove0x=void 0;var t=pt;e.remove0x=function(e){return e.startsWith("0x")||e.startsWith("0X")?e.slice(2):e},e.decodeHex=function(n){return(0,t.hexToBytes)((0,e.remove0x)(n))}}(br={}),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hexToPublicKey=e.convertPublicKeyFormat=e.getSharedPoint=e.getPublicKey=e.isValidPrivateKey=e.getValidSecret=void 0;var t=kt,n=St,r=ir,i=mt,o=gt,a=br;function s(e,t,i,o){if("secp256k1"===e)return t(r.secp256k1);if("x25519"===e)return i(n.x25519);if("ed25519"===e)return o(n.ed25519);throw new Error("Not implemented")}e.getValidSecret=function(){var n;do{n=(0,t.randomBytes)(o.SECRET_KEY_LENGTH)}while(!(0,e.isValidPrivateKey)(n));return n},e.isValidPrivateKey=function(e){return s((0,i.ellipticCurve)(),function(t){return t.utils.isValidPrivateKey(e)},function(){return!0},function(){return!0})},e.getPublicKey=function(e){return s((0,i.ellipticCurve)(),function(t){return t.getPublicKey(e)},function(t){return t.getPublicKey(e)},function(t){return t.getPublicKey(e)})},e.getSharedPoint=function(e,t,n){return s((0,i.ellipticCurve)(),function(r){return r.getSharedSecret(e,t,n)},function(n){return n.getSharedSecret(e,t)},function(n){return u(n,e,t)})},e.convertPublicKeyFormat=function(e,t){return s((0,i.ellipticCurve)(),function(n){return n.getSharedSecret(BigInt(1),e,t)},function(){return e},function(){return e})},e.hexToPublicKey=function(e){var t=(0,a.decodeHex)(e);return s((0,i.ellipticCurve)(),function(){return c(t)},function(){return t},function(){return t})};var c=function(e){if(e.length===o.ETH_PUBLIC_KEY_SIZE){var t=new Uint8Array(1+e.length);return t.set([4]),t.set(e,1),t}return e},u=function(e,t,n){var r=e.utils.getExtendedPublicKey(t).scalar;return e.ExtendedPoint.fromHex(n).multiply(r).toRawBytes()}}(Et),wr={},Er={},Object.defineProperty(Er,"__esModule",{value:!0}),Er.hkdf=void 0,Er.extract=Dh,Er.expand=Bh,kr=xt,_r=Mt,Sr=pr,Cr=new Uint8Array([0]),Ar=new Uint8Array,Er.hkdf=function(e,t,n,r,i){return Bh(e,Dh(e,t,n),r,i)},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getSharedKey=e.deriveKey=void 0;var t=pt,n=Er,r=or;e.deriveKey=function(e,t,i){return(0,n.hkdf)(r.sha256,e,t,i,32)},e.getSharedKey=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return(0,e.deriveKey)(t.concatBytes.apply(void 0,n))}}(wr),xr={},Mr={},Tr={},Or={},Object.defineProperty(Or,"__esModule",{value:!0}),Or.polyval=Or.ghash=void 0,Or._toGHASHKey=jh,Rr=vt,Pr=pt,Ir=16,Lr=new Uint8Array(16),Nr=(0,Pr.u32)(Lr),Dr=function(e){return(e>>>0&255)<<24|(e>>>8&255)<<16|(e>>>16&255)<<8|e>>>24&255},Br=function(){return h(function e(t,n){p(this,e),this.blockLen=Ir,this.outputLen=Ir,this.s0=0,this.s1=0,this.s2=0,this.s3=0,this.finished=!1,t=(0,Pr.toBytes)(t),(0,Rr.bytes)(t,16);for(var r,i,o,a,s=(0,Pr.createView)(t),c=s.getUint32(0,!1),u=s.getUint32(4,!1),l=s.getUint32(8,!1),d=s.getUint32(12,!1),f=[],h=0;h<128;h++){var v;f.push({s0:Dr(c),s1:Dr(u),s2:Dr(l),s3:Dr(d)}),c=(v={s3:(o=l)<<31|(a=d)>>>1,s2:(i=u)<<31|o>>>1,s1:(r=c)<<31|i>>>1,s0:r>>>1^225<<24&-(1&a)}).s0,u=v.s1,l=v.s2,d=v.s3}var m=function(e){return e>65536?8:e>1024?4:2}(n||1024);if(![1,2,4,8].includes(m))throw new Error("ghash: wrong window size=".concat(m,", should be 2, 4 or 8"));this.W=m;for(var g=128/m,y=this.windowSize=Math.pow(2,m),b=[],w=0;w<g;w++)for(var E=0;E<y;E++){for(var k=0,_=0,S=0,C=0,A=0;A<m;A++)if(E>>>m-A-1&1){var x=f[m*w+A];k^=x.s0,_^=x.s1,S^=x.s2,C^=x.s3}b.push({s0:k,s1:_,s2:S,s3:C})}this.t=b},[{key:"_updateBlock",value:function(e,t,n,r){e^=this.s0,t^=this.s1,n^=this.s2,r^=this.s3;for(var i=this.W,o=this.t,a=this.windowSize,s=0,c=0,u=0,l=0,d=(1<<i)-1,f=0,h=0,p=[e,t,n,r];h<p.length;h++)for(var v=p[h],m=0;m<4;m++)for(var g=v>>>8*m&255,y=8/i-1;y>=0;y--){var b=o[f*a+(g>>>i*y&d)];s^=b.s0,c^=b.s1,u^=b.s2,l^=b.s3,f+=1}this.s0=s,this.s1=c,this.s2=u,this.s3=l}},{key:"update",value:function(e){e=(0,Pr.toBytes)(e),(0,Rr.exists)(this);for(var t=(0,Pr.u32)(e),n=Math.floor(e.length/Ir),r=e.length%Ir,i=0;i<n;i++)this._updateBlock(t[4*i+0],t[4*i+1],t[4*i+2],t[4*i+3]);return r&&(Lr.set(e.subarray(n*Ir)),this._updateBlock(Nr[0],Nr[1],Nr[2],Nr[3]),(0,Pr.clean)(Nr)),this}},{key:"destroy",value:function(){var e,t=_(this.t);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.s0=0,n.s1=0,n.s2=0,n.s3=0}}catch(Cs){t.e(Cs)}finally{t.f()}}},{key:"digestInto",value:function(e){(0,Rr.exists)(this),(0,Rr.output)(e,this),this.finished=!0;var t=this.s0,n=this.s1,r=this.s2,i=this.s3,o=(0,Pr.u32)(e);return o[0]=t,o[1]=n,o[2]=r,o[3]=i,e}},{key:"digest",value:function(){var e=new Uint8Array(Ir);return this.digestInto(e),this.destroy(),e}}])}(),jr=function(e){function t(e,n){var r;p(this,t),e=(0,Pr.toBytes)(e);var i=jh((0,Pr.copyBytes)(e));return r=o(this,t,[i,n]),(0,Pr.clean)(i),r}return s(t,e),h(t,[{key:"update",value:function(e){e=(0,Pr.toBytes)(e),(0,Rr.exists)(this);for(var t=(0,Pr.u32)(e),n=e.length%Ir,r=Math.floor(e.length/Ir),i=0;i<r;i++)this._updateBlock(Dr(t[4*i+3]),Dr(t[4*i+2]),Dr(t[4*i+1]),Dr(t[4*i+0]));return n&&(Lr.set(e.subarray(r*Ir)),this._updateBlock(Dr(Nr[3]),Dr(Nr[2]),Dr(Nr[1]),Dr(Nr[0])),(0,Pr.clean)(Nr)),this}},{key:"digestInto",value:function(e){(0,Rr.exists)(this),(0,Rr.output)(e,this),this.finished=!0;var t=this.s0,n=this.s1,r=this.s2,i=this.s3,o=(0,Pr.u32)(e);return o[0]=t,o[1]=n,o[2]=r,o[3]=i,e.reverse()}}])}(Br),Or.ghash=Kh(function(e,t){return new Br(e,t)}),Or.polyval=Kh(function(e,t){return new jr(e,t)}),Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.unsafe=Tr.aeskwp=Tr.aeskw=Tr.siv=Tr.gcm=Tr.cfb=Tr.cbc=Tr.ecb=Tr.ctr=void 0,Tr.expandKeyLE=zh,Tr.expandKeyDecLE=qh,Kr=vt,Ur=Or,Hr=pt,Fr=16,zr=new Uint8Array(Fr),qr=283,$r=function(){for(var e=new Uint8Array(256),t=0,n=1;t<256;t++,n^=Uh(n))e[t]=n;var r=new Uint8Array(256);r[0]=99;for(var i=0;i<255;i++){var o=e[255-i];o|=o<<8,r[e[i]]=255&(o^o>>4^o>>5^o>>6^o>>7^99)}return(0,Hr.clean)(e),r}(),Wr=$r.map(function(e,t){return $r.indexOf(t)}),Vr=function(e){return e<<24|e>>>8},Gr=function(e){return e<<8|e>>>24},Yr=function(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255},Zr=Fh($r,function(e){return Hh(e,3)<<24|e<<16|e<<8|Hh(e,2)}),Jr=Fh(Wr,function(e){return Hh(e,11)<<24|Hh(e,13)<<16|Hh(e,9)<<8|Hh(e,14)}),Qr=function(){for(var e=new Uint8Array(16),t=0,n=1;t<16;t++,n=Uh(n))e[t]=n;return e}(),Tr.ctr=(0,Hr.wrapCipher)({blockSize:16,nonceLength:16},function(e,t){function n(n,r){if((0,Kr.bytes)(n),void 0!==r&&((0,Kr.bytes)(r),!(0,Hr.isAligned32)(r)))throw new Error("unaligned destination");var i=zh(e),o=(0,Hr.copyBytes)(t),a=[i,o];(0,Hr.isAligned32)(n)||a.push(n=(0,Hr.copyBytes)(n));var s=Zh(i,o,n,r);return Hr.clean.apply(void 0,a),s}return(0,Kr.bytes)(e),(0,Kr.bytes)(t,Fr),{encrypt:function(e,t){return n(e,t)},decrypt:function(e,t){return n(e,t)}}}),Tr.ecb=(0,Hr.wrapCipher)({blockSize:16},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,Kr.bytes)(e);var n=!t.disablePadding;return{encrypt:function(t,r){for(var i=Xh(t,n,r),o=i.b,a=i.o,s=i.out,c=zh(e),u=0;u+4<=o.length;){var l=Vh(c,o[u+0],o[u+1],o[u+2],o[u+3]),d=l.s0,f=l.s1,h=l.s2,p=l.s3;a[u++]=d,a[u++]=f,a[u++]=h,a[u++]=p}if(n){var v=tp(t.subarray(4*u)),m=Vh(c,v[0],v[1],v[2],v[3]),g=m.s0,y=m.s1,b=m.s2,w=m.s3;a[u++]=g,a[u++]=y,a[u++]=b,a[u++]=w}return(0,Hr.clean)(c),s},decrypt:function(t,r){Qh(t);var i=qh(e),o=Yh(t.length,r),a=[i];(0,Hr.isAligned32)(t)||a.push(t=(0,Hr.copyBytes)(t));for(var s=(0,Hr.u32)(t),c=(0,Hr.u32)(o),u=0;u+4<=s.length;){var l=Gh(i,s[u+0],s[u+1],s[u+2],s[u+3]),d=l.s0,f=l.s1,h=l.s2,p=l.s3;c[u++]=d,c[u++]=f,c[u++]=h,c[u++]=p}return Hr.clean.apply(void 0,a),ep(o,n)}}}),Tr.cbc=(0,Hr.wrapCipher)({blockSize:16,nonceLength:16},function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,Kr.bytes)(e),(0,Kr.bytes)(t,16);var r=!n.disablePadding;return{encrypt:function(n,i){var o=zh(e),a=Xh(n,r,i),s=a.b,c=a.o,u=a.out,l=t,d=[o];(0,Hr.isAligned32)(l)||d.push(l=(0,Hr.copyBytes)(l));for(var f=(0,Hr.u32)(l),h=f[0],p=f[1],v=f[2],m=f[3],g=0;g+4<=s.length;){var y;h=(y=Vh(o,h^=s[g+0],p^=s[g+1],v^=s[g+2],m^=s[g+3])).s0,p=y.s1,v=y.s2,m=y.s3,c[g++]=h,c[g++]=p,c[g++]=v,c[g++]=m}if(r){var b,w=tp(n.subarray(4*g));h=(b=Vh(o,h^=w[0],p^=w[1],v^=w[2],m^=w[3])).s0,p=b.s1,v=b.s2,m=b.s3,c[g++]=h,c[g++]=p,c[g++]=v,c[g++]=m}return Hr.clean.apply(void 0,d),u},decrypt:function(n,i){Qh(n);var o=qh(e),a=t,s=[o];(0,Hr.isAligned32)(a)||s.push(a=(0,Hr.copyBytes)(a));var c=(0,Hr.u32)(a),u=Yh(n.length,i);(0,Hr.isAligned32)(n)||s.push(n=(0,Hr.copyBytes)(n));for(var l=(0,Hr.u32)(n),d=(0,Hr.u32)(u),f=c[0],h=c[1],p=c[2],v=c[3],m=0;m+4<=l.length;){var g=f,y=h,b=p,w=v,E=Gh(o,f=l[m+0],h=l[m+1],p=l[m+2],v=l[m+3]),k=E.s0,_=E.s1,S=E.s2,C=E.s3;d[m++]=k^g,d[m++]=_^y,d[m++]=S^b,d[m++]=C^w}return Hr.clean.apply(void 0,s),ep(u,r)}}}),Tr.cfb=(0,Hr.wrapCipher)({blockSize:16,nonceLength:16},function(e,t){function n(n,r,i){(0,Kr.bytes)(n);var o=n.length;i=Yh(o,i);var a=zh(e),s=t,c=[a];(0,Hr.isAligned32)(s)||c.push(s=(0,Hr.copyBytes)(s)),(0,Hr.isAligned32)(n)||c.push(n=(0,Hr.copyBytes)(n));for(var u=(0,Hr.u32)(n),l=(0,Hr.u32)(i),d=r?l:u,f=(0,Hr.u32)(s),h=f[0],p=f[1],v=f[2],m=f[3],g=0;g+4<=u.length;){var y=Vh(a,h,p,v,m),b=y.s0,w=y.s1,E=y.s2,k=y.s3;l[g+0]=u[g+0]^b,l[g+1]=u[g+1]^w,l[g+2]=u[g+2]^E,l[g+3]=u[g+3]^k,h=d[g++],p=d[g++],v=d[g++],m=d[g++]}var _=Fr*Math.floor(u.length/4);if(_<o){var S=Vh(a,h,p,v,m);h=S.s0,p=S.s1,v=S.s2,m=S.s3;for(var C=(0,Hr.u8)(new Uint32Array([h,p,v,m])),A=_,x=0;A<o;A++,x++)i[A]=n[A]^C[x];(0,Hr.clean)(C)}return Hr.clean.apply(void 0,c),i}return(0,Kr.bytes)(e),(0,Kr.bytes)(t,16),{encrypt:function(e,t){return n(e,!0,t)},decrypt:function(e,t){return n(e,!1,t)}}}),Tr.gcm=(0,Hr.wrapCipher)({blockSize:16,nonceLength:12,tagLength:16},function(e,t,n){if((0,Kr.bytes)(e),(0,Kr.bytes)(t),void 0!==n&&(0,Kr.bytes)(n),t.length<8)throw new Error("aes/gcm: invalid nonce length");function r(e,t,r){for(var i=np(Ur.ghash,!1,e,r,n),o=0;o<t.length;o++)i[o]^=t[o];return i}function i(){var n=zh(e),r=zr.slice(),i=zr.slice();if(Jh(n,!1,i,i,r),12===t.length)i.set(t);else{var o=zr.slice(),a=(0,Hr.createView)(o);(0,Hr.setBigUint64)(a,8,BigInt(8*t.length),!1);var s=Ur.ghash.create(r).update(t).update(o);s.digestInto(i),s.destroy()}return{xk:n,authKey:r,counter:i,tagMask:Jh(n,!1,i,zr)}}return{encrypt:function(e){(0,Kr.bytes)(e);var t=i(),n=t.xk,o=t.authKey,a=t.counter,s=t.tagMask,c=new Uint8Array(e.length+16),u=[n,o,a,s];(0,Hr.isAligned32)(e)||u.push(e=(0,Hr.copyBytes)(e)),Jh(n,!1,a,e,c);var l=r(o,s,c.subarray(0,c.length-16));return u.push(l),c.set(l,e.length),Hr.clean.apply(void 0,u),c},decrypt:function(e){if((0,Kr.bytes)(e),e.length<16)throw new Error("aes/gcm: ciphertext less than tagLen (16)");var t=i(),n=t.xk,o=t.authKey,a=t.counter,s=t.tagMask,c=[n,o,s,a];(0,Hr.isAligned32)(e)||c.push(e=(0,Hr.copyBytes)(e));var u=e.subarray(0,-16),l=e.subarray(-16),d=r(o,s,u);if(c.push(d),!(0,Hr.equalBytes)(d,l))throw new Error("aes/gcm: invalid ghash tag");var f=Jh(n,!1,a,u);return Hr.clean.apply(void 0,c),f}}}),Xr=function(e,t,n){return function(r){if(!Number.isSafeInteger(r)||t>r||r>n)throw new Error("".concat(e,": invalid value=").concat(r,", must be [").concat(t,"..").concat(n,"]"))}},Tr.siv=(0,Hr.wrapCipher)({blockSize:16,nonceLength:12,tagLength:16},function(e,t,n){var r=Xr("AAD",0,Math.pow(2,36)),i=Xr("plaintext",0,Math.pow(2,36)),o=Xr("nonce",12,12),a=Xr("ciphertext",16,Math.pow(2,36)+16);function s(){var n=zh(e),r=new Uint8Array(e.length),i=new Uint8Array(16),o=[n,r],a=t;(0,Hr.isAligned32)(a)||o.push(a=(0,Hr.copyBytes)(a));var s,c=(0,Hr.u32)(a),u=0,l=c[0],d=c[1],f=c[2],h=0,p=_([i,r].map(Hr.u32));try{for(p.s();!(s=p.n()).done;)for(var v=s.value,m=(0,Hr.u32)(v),g=0;g<m.length;g+=2){var y=Vh(n,u,l,d,f),b=y.s0,w=y.s1;m[g+0]=b,m[g+1]=w,u=++h}}catch(Cs){p.e(Cs)}finally{p.f()}var E={authKey:i,encKey:zh(r)};return Hr.clean.apply(void 0,o),E}function c(e,r,i){for(var o,a=np(Ur.polyval,!0,r,i,n),s=0;s<12;s++)a[s]^=t[s];a[15]&=127;var c=(0,Hr.u32)(a),u=c[0],l=c[1],d=c[2],f=c[3];return u=(o=Vh(e,u,l,d,f)).s0,l=o.s1,d=o.s2,f=o.s3,c[0]=u,c[1]=l,c[2]=d,c[3]=f,a}function u(e,t,n){var r=(0,Hr.copyBytes)(t);r[15]|=128;var i=Jh(e,!0,r,n);return(0,Hr.clean)(r),i}return(0,Kr.bytes)(e,16,24,32),(0,Kr.bytes)(t),o(t.length),void 0!==n&&((0,Kr.bytes)(n),r(n.length)),{encrypt:function(e){(0,Kr.bytes)(e),i(e.length);var t=s(),n=t.encKey,r=t.authKey,o=c(n,r,e),a=[n,r,o];(0,Hr.isAligned32)(e)||a.push(e=(0,Hr.copyBytes)(e));var l=new Uint8Array(e.length+16);return l.set(o,e.length),l.set(u(n,o,e)),Hr.clean.apply(void 0,a),l},decrypt:function(e){(0,Kr.bytes)(e),a(e.length);var t=e.subarray(-16),n=s(),r=n.encKey,i=n.authKey,o=[r,i];(0,Hr.isAligned32)(e)||o.push(e=(0,Hr.copyBytes)(e));var l=u(r,t,e.subarray(0,-16)),d=c(r,i,l);if(o.push(d),!(0,Hr.equalBytes)(t,d))throw Hr.clean.apply(void 0,o),new Error("invalid polyval tag");return Hr.clean.apply(void 0,o),l}}}),ei={encrypt:function(e,t){if(t.length>=Math.pow(2,32))throw new Error("plaintext should be less than 4gb");var n=zh(e);if(16===t.length)ip(n,t);else{for(var r=(0,Hr.u32)(t),i=r[0],o=r[1],a=0,s=1;a<6;a++)for(var c=2;c<r.length;c+=2,s++){var u=Vh(n,i,o,r[c],r[c+1]),l=u.s0,d=u.s1,f=u.s2,h=u.s3;i=l,o=d^Yr(s),r[c]=f,r[c+1]=h}r[0]=i,r[1]=o}n.fill(0)},decrypt:function(e,t){if(t.length-8>=Math.pow(2,32))throw new Error("ciphertext should be less than 4gb");var n=qh(e),r=t.length/8-1;if(1===r)op(n,t);else{for(var i=(0,Hr.u32)(t),o=i[0],a=i[1],s=0,c=6*r;s<6;s++)for(var u=2*r;u>=1;u-=2,c--){var l=Gh(n,o,a^=Yr(c),i[u],i[u+1]),d=l.s0,f=l.s1,h=l.s2,p=l.s3;o=d,a=f,i[u]=h,i[u+1]=p}i[0]=o,i[1]=a}n.fill(0)}},ti=new Uint8Array(8).fill(166),Tr.aeskw=(0,Hr.wrapCipher)({blockSize:8},function(e){return{encrypt:function(t){if((0,Kr.bytes)(t),!t.length||t.length%8!=0)throw new Error("invalid plaintext length");if(8===t.length)throw new Error("8-byte keys not allowed in AESKW, use AESKWP instead");var n=(0,Hr.concatBytes)(ti,t);return ei.encrypt(e,n),n},decrypt:function(t){if((0,Kr.bytes)(t),t.length%8!=0||t.length<24)throw new Error("invalid ciphertext length");var n=(0,Hr.copyBytes)(t);if(ei.decrypt(e,n),!(0,Hr.equalBytes)(n.subarray(0,8),ti))throw new Error("integrity check failed");return n.subarray(0,8).fill(0),n.subarray(8)}}}),ni=2790873510,Tr.aeskwp=(0,Hr.wrapCipher)({blockSize:8},function(e){return{encrypt:function(t){if((0,Kr.bytes)(t),!t.length)throw new Error("invalid plaintext length");var n=8*Math.ceil(t.length/8),r=new Uint8Array(8+n);r.set(t,8);var i=(0,Hr.u32)(r);return i[0]=ni,i[1]=Yr(t.length),ei.encrypt(e,r),r},decrypt:function(t){if((0,Kr.bytes)(t),t.length<16)throw new Error("invalid ciphertext length");var n=(0,Hr.copyBytes)(t),r=(0,Hr.u32)(n);ei.decrypt(e,n);var i=Yr(r[1])>>>0,o=8*Math.ceil(i/8);if(r[0]!==ni||n.length-8!==o)throw new Error("integrity check failed");for(var a=i;a<o;a++)if(0!==n[8+a])throw new Error("integrity check failed");return n.subarray(0,8).fill(0),n.subarray(8,8+i)}}}),Tr.unsafe={expandKeyLE:zh,expandKeyDecLE:qh,encrypt:Vh,decrypt:Gh,encryptBlock:ip,decryptBlock:op,ctrCounter:Zh,ctr32:Jh},Object.defineProperty(Mr,"__esModule",{value:!0}),Mr.aes256cbc=Mr.aes256gcm=void 0,ri=Tr,Mr.aes256gcm=function(e,t,n){return(0,ri.gcm)(e,t,n)},Mr.aes256cbc=function(e,t,n){return(0,ri.cbc)(e,t)},ii={},oi={},ai={},Object.defineProperty(ai,"__esModule",{value:!0}),ai.sigma=void 0,ai.rotl=function(e,t){return e<<t|e>>>32-t},ai.createCipher=function(e,t){var n=(0,ci.checkOpts)({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t),r=n.allowShortKeys,i=n.extendNonceFn,o=n.counterLength,a=n.counterRight,s=n.rounds;if("function"!=typeof e)throw new Error("core must be a function");return(0,si.number)(o),(0,si.number)(s),(0,si.bool)(a),(0,si.bool)(r),function(t,n,c,u){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;(0,si.bytes)(t),(0,si.bytes)(n),(0,si.bytes)(c);var d=c.length;if(void 0===u&&(u=new Uint8Array(d)),(0,si.bytes)(u),(0,si.number)(l),l<0||l>=mi)throw new Error("arx: counter overflow");if(u.length<d)throw new Error("arx: output (".concat(u.length,") is shorter than data (").concat(d,")"));var f,h,p=[],v=t.length;if(32===v)p.push(f=(0,ci.copyBytes)(t)),h=hi;else{if(16!==v||!r)throw new Error("arx: invalid 32-byte key, got length=".concat(v));(f=new Uint8Array(32)).set(t),f.set(t,16),h=fi,p.push(f)}ap(n)||p.push(n=(0,ci.copyBytes)(n));var m=(0,ci.u32)(f);if(i){if(24!==n.length)throw new Error("arx: extended nonce must be 24 bytes");i(h,m,(0,ci.u32)(n.subarray(0,16)),m),n=n.subarray(16)}var g=16-o;if(g!==n.length)throw new Error("arx: nonce must be ".concat(g," or 16 bytes"));if(12!==g){var y=new Uint8Array(12);y.set(n,a?0:12-n.length),n=y,p.push(n)}var b=(0,ci.u32)(n);return function(e,t,n,r,i,o,a,s){for(var c=i.length,u=new Uint8Array(pi),l=(0,ci.u32)(u),d=ap(i)&&ap(o),f=d?(0,ci.u32)(i):gi,h=d?(0,ci.u32)(o):gi,p=0;p<c;a++){if(e(t,n,r,l,a,s),a>=mi)throw new Error("arx: counter overflow");var v=Math.min(pi,c-p);if(d&&v===pi){var m=p/4;if(p%4!=0)throw new Error("arx: invalid block position");for(var g,y=0;y<vi;y++)h[g=m+y]=f[g]^l[y];p+=pi}else{for(var b,w=0;w<v;w++)o[b=p+w]=i[b]^u[w];p+=v}}}(e,h,m,b,c,u,l,s),ci.clean.apply(void 0,p),u}},si=vt,ci=pt,ui=function(e){return Uint8Array.from(e.split("").map(function(e){return e.charCodeAt(0)}))},li=ui("expand 16-byte k"),di=ui("expand 32-byte k"),fi=(0,ci.u32)(li),hi=(0,ci.u32)(di),ai.sigma=hi.slice(),pi=64,vi=16,mi=Math.pow(2,32)-1,gi=new Uint32Array,yi={},Object.defineProperty(yi,"__esModule",{value:!0}),yi.poly1305=void 0,yi.wrapConstructorWithKey=sp,bi=vt,wi=pt,Ei=function(e,t){return 255&e[t++]|(255&e[t++])<<8},ki=function(){return h(function e(t){p(this,e),this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,t=(0,wi.toBytes)(t),(0,bi.bytes)(t,32);var n=Ei(t,0),r=Ei(t,2),i=Ei(t,4),o=Ei(t,6),a=Ei(t,8),s=Ei(t,10),c=Ei(t,12),u=Ei(t,14);this.r[0]=8191&n,this.r[1]=8191&(n>>>13|r<<3),this.r[2]=7939&(r>>>10|i<<6),this.r[3]=8191&(i>>>7|o<<9),this.r[4]=255&(o>>>4|a<<12),this.r[5]=a>>>1&8190,this.r[6]=8191&(a>>>14|s<<2),this.r[7]=8065&(s>>>11|c<<5),this.r[8]=8191&(c>>>8|u<<8),this.r[9]=u>>>5&127;for(var l=0;l<8;l++)this.pad[l]=Ei(t,16+2*l)},[{key:"process",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?0:2048,r=this.h,i=this.r,o=i[0],a=i[1],s=i[2],c=i[3],u=i[4],l=i[5],d=i[6],f=i[7],h=i[8],p=i[9],v=Ei(e,t+0),m=Ei(e,t+2),g=Ei(e,t+4),y=Ei(e,t+6),b=Ei(e,t+8),w=Ei(e,t+10),E=Ei(e,t+12),k=Ei(e,t+14),_=r[0]+(8191&v),S=r[1]+(8191&(v>>>13|m<<3)),C=r[2]+(8191&(m>>>10|g<<6)),A=r[3]+(8191&(g>>>7|y<<9)),x=r[4]+(8191&(y>>>4|b<<12)),M=r[5]+(b>>>1&8191),T=r[6]+(8191&(b>>>14|w<<2)),O=r[7]+(8191&(w>>>11|E<<5)),R=r[8]+(8191&(E>>>8|k<<8)),P=r[9]+(k>>>5|n),I=0,L=I+_*o+S*(5*p)+C*(5*h)+A*(5*f)+x*(5*d);I=L>>>13,L&=8191;var N=(I+=(L+=M*(5*l)+T*(5*u)+O*(5*c)+R*(5*s)+P*(5*a))>>>13)+_*a+S*o+C*(5*p)+A*(5*h)+x*(5*f);I=N>>>13,N&=8191,I+=(N+=M*(5*d)+T*(5*l)+O*(5*u)+R*(5*c)+P*(5*s))>>>13,N&=8191;var D=I+_*s+S*a+C*o+A*(5*p)+x*(5*h);I=D>>>13,D&=8191,I+=(D+=M*(5*f)+T*(5*d)+O*(5*l)+R*(5*u)+P*(5*c))>>>13,D&=8191;var B=I+_*c+S*s+C*a+A*o+x*(5*p);I=B>>>13,B&=8191,I+=(B+=M*(5*h)+T*(5*f)+O*(5*d)+R*(5*l)+P*(5*u))>>>13,B&=8191;var j=I+_*u+S*c+C*s+A*a+x*o;I=j>>>13,j&=8191,I+=(j+=M*(5*p)+T*(5*h)+O*(5*f)+R*(5*d)+P*(5*l))>>>13,j&=8191;var K=I+_*l+S*u+C*c+A*s+x*a;I=K>>>13,K&=8191,I+=(K+=M*o+T*(5*p)+O*(5*h)+R*(5*f)+P*(5*d))>>>13,K&=8191;var U=I+_*d+S*l+C*u+A*c+x*s;I=U>>>13,U&=8191,I+=(U+=M*a+T*o+O*(5*p)+R*(5*h)+P*(5*f))>>>13,U&=8191;var H=I+_*f+S*d+C*l+A*u+x*c;I=H>>>13,H&=8191,I+=(H+=M*s+T*a+O*o+R*(5*p)+P*(5*h))>>>13,H&=8191;var F=I+_*h+S*f+C*d+A*l+x*u;I=F>>>13,F&=8191,I+=(F+=M*c+T*s+O*a+R*o+P*(5*p))>>>13,F&=8191;var z=I+_*p+S*h+C*f+A*d+x*l;I=z>>>13,z&=8191,I+=(z+=M*u+T*c+O*s+R*a+P*o)>>>13,z&=8191,L=8191&(I=(I=(I<<2)+I|0)+(L&=8191)|0),N+=I>>>=13,r[0]=L,r[1]=N,r[2]=D,r[3]=B,r[4]=j,r[5]=K,r[6]=U,r[7]=H,r[8]=F,r[9]=z}},{key:"finalize",value:function(){var e=this.h,t=this.pad,n=new Uint16Array(10),r=e[1]>>>13;e[1]&=8191;for(var i=2;i<10;i++)e[i]+=r,r=e[i]>>>13,e[i]&=8191;e[0]+=5*r,r=e[0]>>>13,e[0]&=8191,e[1]+=r,r=e[1]>>>13,e[1]&=8191,e[2]+=r,n[0]=e[0]+5,r=n[0]>>>13,n[0]&=8191;for(var o=1;o<10;o++)n[o]=e[o]+r,r=n[o]>>>13,n[o]&=8191;n[9]-=8192;for(var a=(1^r)-1,s=0;s<10;s++)n[s]&=a;a=~a;for(var c=0;c<10;c++)e[c]=e[c]&a|n[c];e[0]=65535&(e[0]|e[1]<<13),e[1]=65535&(e[1]>>>3|e[2]<<10),e[2]=65535&(e[2]>>>6|e[3]<<7),e[3]=65535&(e[3]>>>9|e[4]<<4),e[4]=65535&(e[4]>>>12|e[5]<<1|e[6]<<14),e[5]=65535&(e[6]>>>2|e[7]<<11),e[6]=65535&(e[7]>>>5|e[8]<<8),e[7]=65535&(e[8]>>>8|e[9]<<5);var u=e[0]+t[0];e[0]=65535&u;for(var l=1;l<8;l++)u=(e[l]+t[l]|0)+(u>>>16)|0,e[l]=65535&u;(0,wi.clean)(n)}},{key:"update",value:function(e){(0,bi.exists)(this);for(var t=this.buffer,n=this.blockLen,r=(e=(0,wi.toBytes)(e)).length,i=0;i<r;){var o=Math.min(n-this.pos,r-i);if(o!==n)t.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===n&&(this.process(t,0,!1),this.pos=0);else for(;n<=r-i;i+=n)this.process(e,i)}return this}},{key:"destroy",value:function(){(0,wi.clean)(this.h,this.r,this.buffer,this.pad)}},{key:"digestInto",value:function(e){(0,bi.exists)(this),(0,bi.output)(e,this),this.finished=!0;var t=this.buffer,n=this.h,r=this.pos;if(r){for(t[r++]=1;r<16;r++)t[r]=0;this.process(t,0,!0)}this.finalize();for(var i=0,o=0;o<8;o++)e[i++]=n[o]>>>0,e[i++]=n[o]>>>8;return e}},{key:"digest",value:function(){var e=this.buffer,t=this.outputLen;this.digestInto(e);var n=e.slice(0,t);return this.destroy(),n}}])}(),yi.poly1305=sp(function(e){return new ki(e)}),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.xchacha20poly1305=e.chacha20poly1305=e._poly1305_aead=e.chacha12=e.chacha8=e.xchacha20=e.chacha20=e.chacha20orig=void 0,e.hchacha=a;var t=ai,n=vt,r=yi,i=pt;function o(e,n,r,i,o){for(var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:20,s=e[0],c=e[1],u=e[2],l=e[3],d=n[0],f=n[1],h=n[2],p=n[3],v=n[4],m=n[5],g=n[6],y=n[7],b=o,w=r[0],E=r[1],k=r[2],_=s,S=c,C=u,A=l,x=d,M=f,T=h,O=p,R=v,P=m,I=g,L=y,N=b,D=w,B=E,j=k,K=0;K<a;K+=2)_=_+x|0,R=R+(N=(0,t.rotl)(N^_,16))|0,_=_+(x=(0,t.rotl)(x^R,12))|0,R=R+(N=(0,t.rotl)(N^_,8))|0,x=(0,t.rotl)(x^R,7),S=S+M|0,P=P+(D=(0,t.rotl)(D^S,16))|0,S=S+(M=(0,t.rotl)(M^P,12))|0,P=P+(D=(0,t.rotl)(D^S,8))|0,M=(0,t.rotl)(M^P,7),C=C+T|0,I=I+(B=(0,t.rotl)(B^C,16))|0,C=C+(T=(0,t.rotl)(T^I,12))|0,I=I+(B=(0,t.rotl)(B^C,8))|0,T=(0,t.rotl)(T^I,7),A=A+O|0,L=L+(j=(0,t.rotl)(j^A,16))|0,A=A+(O=(0,t.rotl)(O^L,12))|0,L=L+(j=(0,t.rotl)(j^A,8))|0,O=(0,t.rotl)(O^L,7),_=_+M|0,I=I+(j=(0,t.rotl)(j^_,16))|0,_=_+(M=(0,t.rotl)(M^I,12))|0,I=I+(j=(0,t.rotl)(j^_,8))|0,M=(0,t.rotl)(M^I,7),S=S+T|0,L=L+(N=(0,t.rotl)(N^S,16))|0,S=S+(T=(0,t.rotl)(T^L,12))|0,L=L+(N=(0,t.rotl)(N^S,8))|0,T=(0,t.rotl)(T^L,7),C=C+O|0,R=R+(D=(0,t.rotl)(D^C,16))|0,C=C+(O=(0,t.rotl)(O^R,12))|0,R=R+(D=(0,t.rotl)(D^C,8))|0,O=(0,t.rotl)(O^R,7),A=A+x|0,P=P+(B=(0,t.rotl)(B^A,16))|0,A=A+(x=(0,t.rotl)(x^P,12))|0,P=P+(B=(0,t.rotl)(B^A,8))|0,x=(0,t.rotl)(x^P,7);var U=0;i[U++]=s+_|0,i[U++]=c+S|0,i[U++]=u+C|0,i[U++]=l+A|0,i[U++]=d+x|0,i[U++]=f+M|0,i[U++]=h+T|0,i[U++]=p+O|0,i[U++]=v+R|0,i[U++]=m+P|0,i[U++]=g+I|0,i[U++]=y+L|0,i[U++]=b+N|0,i[U++]=w+D|0,i[U++]=E+B|0,i[U++]=k+j|0}function a(e,n,r,i){for(var o=e[0],a=e[1],s=e[2],c=e[3],u=n[0],l=n[1],d=n[2],f=n[3],h=n[4],p=n[5],v=n[6],m=n[7],g=r[0],y=r[1],b=r[2],w=r[3],E=0;E<20;E+=2)o=o+u|0,h=h+(g=(0,t.rotl)(g^o,16))|0,o=o+(u=(0,t.rotl)(u^h,12))|0,h=h+(g=(0,t.rotl)(g^o,8))|0,u=(0,t.rotl)(u^h,7),a=a+l|0,p=p+(y=(0,t.rotl)(y^a,16))|0,a=a+(l=(0,t.rotl)(l^p,12))|0,p=p+(y=(0,t.rotl)(y^a,8))|0,l=(0,t.rotl)(l^p,7),s=s+d|0,v=v+(b=(0,t.rotl)(b^s,16))|0,s=s+(d=(0,t.rotl)(d^v,12))|0,v=v+(b=(0,t.rotl)(b^s,8))|0,d=(0,t.rotl)(d^v,7),c=c+f|0,m=m+(w=(0,t.rotl)(w^c,16))|0,c=c+(f=(0,t.rotl)(f^m,12))|0,m=m+(w=(0,t.rotl)(w^c,8))|0,f=(0,t.rotl)(f^m,7),o=o+l|0,v=v+(w=(0,t.rotl)(w^o,16))|0,o=o+(l=(0,t.rotl)(l^v,12))|0,v=v+(w=(0,t.rotl)(w^o,8))|0,l=(0,t.rotl)(l^v,7),a=a+d|0,m=m+(g=(0,t.rotl)(g^a,16))|0,a=a+(d=(0,t.rotl)(d^m,12))|0,m=m+(g=(0,t.rotl)(g^a,8))|0,d=(0,t.rotl)(d^m,7),s=s+f|0,h=h+(y=(0,t.rotl)(y^s,16))|0,s=s+(f=(0,t.rotl)(f^h,12))|0,h=h+(y=(0,t.rotl)(y^s,8))|0,f=(0,t.rotl)(f^h,7),c=c+u|0,p=p+(b=(0,t.rotl)(b^c,16))|0,c=c+(u=(0,t.rotl)(u^p,12))|0,p=p+(b=(0,t.rotl)(b^c,8))|0,u=(0,t.rotl)(u^p,7);var k=0;i[k++]=o,i[k++]=a,i[k++]=s,i[k++]=c,i[k++]=g,i[k++]=y,i[k++]=b,i[k++]=w}e.chacha20orig=(0,t.createCipher)(o,{counterRight:!1,counterLength:8,allowShortKeys:!0}),e.chacha20=(0,t.createCipher)(o,{counterRight:!1,counterLength:4,allowShortKeys:!1}),e.xchacha20=(0,t.createCipher)(o,{counterRight:!1,counterLength:8,extendNonceFn:a,allowShortKeys:!1}),e.chacha8=(0,t.createCipher)(o,{counterRight:!1,counterLength:4,rounds:8}),e.chacha12=(0,t.createCipher)(o,{counterRight:!1,counterLength:4,rounds:12});var s=new Uint8Array(16),c=function(e,t){e.update(t);var n=t.length%16;n&&e.update(s.subarray(n))},u=new Uint8Array(32);function l(e,t,n,o,a){var s=e(t,n,u),l=r.poly1305.create(s);a&&c(l,a),c(l,o);var d=new Uint8Array(16),f=(0,i.createView)(d);(0,i.setBigUint64)(f,0,BigInt(a?a.length:0),!0),(0,i.setBigUint64)(f,8,BigInt(o.length),!0),l.update(d);var h=l.digest();return(0,i.clean)(s,d),h}e._poly1305_aead=function(e){return function(t,r,o){return(0,n.bytes)(t,32),(0,n.bytes)(r),{encrypt:function(a,s){var c=a.length,u=c+16;s?(0,n.bytes)(s,u):s=new Uint8Array(u),e(t,r,a,s,1);var d=l(e,t,r,s.subarray(0,-16),o);return s.set(d,c),(0,i.clean)(d),s},decrypt:function(a,s){var c=a.length,u=c-16;if(c<16)throw new Error("encrypted data must be at least 16 bytes");s?(0,n.bytes)(s,u):s=new Uint8Array(u);var d=a.subarray(0,-16),f=a.subarray(-16),h=l(e,t,r,d,o);if(!(0,i.equalBytes)(f,h))throw new Error("invalid tag");return e(t,r,d,s,1),(0,i.clean)(h),s}}}},e.chacha20poly1305=(0,i.wrapCipher)({blockSize:64,nonceLength:12,tagLength:16},(0,e._poly1305_aead)(e.chacha20)),e.xchacha20poly1305=(0,i.wrapCipher)({blockSize:64,nonceLength:24,tagLength:16},(0,e._poly1305_aead)(e.xchacha20))}(oi),Object.defineProperty(ii,"__esModule",{value:!0}),ii.xchacha20=void 0,Ai=oi,ii.xchacha20=function(e,t,n){return(0,Ai.xchacha20poly1305)(e,t,n)},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.aesDecrypt=e.aesEncrypt=e.symDecrypt=e.symEncrypt=void 0;var t=pt,n=kt,r=Mr,i=ii,o=mt,a=gt;function s(e,t,n,s){var c=(0,o.symmetricAlgorithm)();if("aes-256-gcm"===c)return e(r.aes256gcm,t,n,(0,o.symmetricNonceLength)(),a.AEAD_TAG_LENGTH,s);if("xchacha20"===c)return e(i.xchacha20,t,n,a.XCHACHA20_NONCE_LENGTH,a.AEAD_TAG_LENGTH,s);if("aes-256-cbc"===c)return e(r.aes256cbc,t,n,16,0);throw new Error("Not implemented")}function c(e,r,i,o,a,s){var c=(0,n.randomBytes)(o),u=e(r,c,s).encrypt(i);if(0===a)return(0,t.concatBytes)(c,u);var l=u.length-a,d=u.subarray(0,l),f=u.subarray(l);return(0,t.concatBytes)(c,f,d)}function u(e,n,r,i,o,a){var s=r.subarray(0,i),c=e(n,Uint8Array.from(s),a),u=r.subarray(i);if(0===o)return c.decrypt(u);var l=u.subarray(0,o),d=u.subarray(o);return c.decrypt((0,t.concatBytes)(d,l))}e.symEncrypt=function(e,t,n){return s(c,e,t,n)},e.symDecrypt=function(e,t,n){return s(u,e,t,n)},e.aesEncrypt=e.symEncrypt,e.aesDecrypt=e.symDecrypt}(xr),_i=wt,Si=ft&&ft.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),Ci=ft&&ft.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||Si(t,e,n)},Object.defineProperty(_i,"__esModule",{value:!0}),Ci(Et,_i),Ci(wr,_i),Ci(br,_i),Ci(xr,_i),xi={},Object.defineProperty(xi,"__esModule",{value:!0}),xi.PublicKey=void 0,Mi=pt,Ti=wt,xi.PublicKey=function(){function e(e){this.data=(0,Ti.convertPublicKeyFormat)(e,!0)}return e.fromHex=function(t){return new e((0,Ti.hexToPublicKey)(t))},Object.defineProperty(e.prototype,"uncompressed",{get:function(){return af.from((0,Ti.convertPublicKeyFormat)(this.data,!1))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"compressed",{get:function(){return af.from(this.data)},enumerable:!1,configurable:!0}),e.prototype.toHex=function(e){return void 0===e&&(e=!0),(0,Mi.bytesToHex)(e?this.data:this.uncompressed)},e.prototype.decapsulate=function(e,t){void 0===t&&(t=!1);var n=t?this.data:this.uncompressed,r=e.multiply(this,t);return(0,Ti.getSharedKey)(n,r)},e.prototype.equals=function(e){return(0,Mi.equalBytes)(this.data,e.data)},e}(),Object.defineProperty(bt,"__esModule",{value:!0}),bt.PrivateKey=void 0,Oi=pt,Ri=wt,Pi=xi,bt.PrivateKey=function(){function e(e){if(void 0===e)this.data=(0,Ri.getValidSecret)();else{if(!(0,Ri.isValidPrivateKey)(e))throw new Error("Invalid private key");this.data=e}this.publicKey=new Pi.PublicKey((0,Ri.getPublicKey)(this.data))}return e.fromHex=function(t){return new e((0,Ri.decodeHex)(t))},Object.defineProperty(e.prototype,"secret",{get:function(){return af.from(this.data)},enumerable:!1,configurable:!0}),e.prototype.toHex=function(){return(0,Oi.bytesToHex)(this.data)},e.prototype.encapsulate=function(e,t){void 0===t&&(t=!1);var n=t?this.publicKey.compressed:this.publicKey.uncompressed,r=this.multiply(e,t);return(0,Ri.getSharedKey)(n,r)},e.prototype.multiply=function(e,t){return void 0===t&&(t=!1),(0,Ri.getSharedPoint)(this.data,e.compressed,t)},e.prototype.equals=function(e){return(0,Oi.equalBytes)(this.data,e.data)},e}(),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PublicKey=e.PrivateKey=void 0;var t=bt;Object.defineProperty(e,"PrivateKey",{enumerable:!0,get:function(){return t.PrivateKey}});var n=xi;Object.defineProperty(e,"PublicKey",{enumerable:!0,get:function(){return n.PublicKey}})}(yt),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.utils=e.PublicKey=e.PrivateKey=e.ECIES_CONFIG=void 0,e.encrypt=function(e,o){var a=new r.PrivateKey,s=e instanceof Uint8Array?new r.PublicKey(e):r.PublicKey.fromHex(e),c=a.encapsulate(s,(0,n.isHkdfKeyCompressed)()),u=(0,n.isEphemeralKeyCompressed)()?a.publicKey.compressed:a.publicKey.uncompressed,l=(0,i.symEncrypt)(c,o);return af.from((0,t.concatBytes)(u,l))},e.decrypt=function(e,t){var o=e instanceof Uint8Array?new r.PrivateKey(e):r.PrivateKey.fromHex(e),a=(0,n.ephemeralKeySize)(),s=new r.PublicKey(t.subarray(0,a)),c=t.subarray(a),u=s.decapsulate(o,(0,n.isHkdfKeyCompressed)());return af.from((0,i.symDecrypt)(u,c))};var t=pt,n=mt,r=yt,i=wt,o=mt;Object.defineProperty(e,"ECIES_CONFIG",{enumerable:!0,get:function(){return o.ECIES_CONFIG}});var a=yt;Object.defineProperty(e,"PrivateKey",{enumerable:!0,get:function(){return a.PrivateKey}}),Object.defineProperty(e,"PublicKey",{enumerable:!0,get:function(){return a.PublicKey}}),e.utils={aesEncrypt:i.aesEncrypt,aesDecrypt:i.aesDecrypt,symEncrypt:i.symEncrypt,symDecrypt:i.symDecrypt,decodeHex:i.decodeHex,getValidSecret:i.getValidSecret,remove0x:i.remove0x}}(ht),Ii=(0,W.default)("KeyExchange:Layer"),Li=(0,W.default)("SocketService:Layer"),Ni=(0,W.default)("Ecies:Layer"),Di=(0,W.default)("RemoteCommunication:Layer"),Ii.color="##95c44e",Li.color="#f638d7",Ni.color="#465b9c",Di.color="#47a2be",Bi={KeyExchange:Ii,SocketService:Li,Ecies:Ni,RemoteCommunication:Di},Ki=[],Ui=[],Hi=function(e,t){return Jd(void 0,void 0,void 0,L().m(function n(){return L().w(function(n){for(;;)switch(n.n){case 0:ji=t,Ui.push(e),function(e){return Jd(this,void 0,void 0,L().m(function t(){var n,r,i,o,a,s,c,u,l;return L().w(function(t){for(;;)switch(t.p=t.n){case 0:if(ji&&e){t.n=1;break}return t.a(2);case 1:if(function(){var e=Ui;Ui=Ki,Ki=e}(),n=ji.endsWith("/")?"".concat(ji,"evt"):"".concat(ji,"/evt"),delete(r=Object.assign({},e)).params,e.params)for(i=0,o=Object.entries(e.params);i<o.length;i++)a=x(o[i],2),s=a[0],c=a[1],r[s]=c;return u=JSON.stringify(r),Bi.RemoteCommunication("[sendBufferedEvents] Sending ".concat(Ki.length," analytics events to ").concat(n)),t.p=2,t.n=3,(0,V.default)(n,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:u});case 3:return t.n=4,t.v.text();case 4:l=t.v,Bi.RemoteCommunication("[sendBufferedEvents] Response: ".concat(l)),Ki.length=0,t.n=6;break;case 5:t.p=5,t.v;case 6:return t.a(2)}},t,null,[[2,5]])}))}(e).catch(function(){});case 1:return n.a(2)}},n)}))},Fi=function(){return h(function e(t){p(this,e),this.enabled=!0,null!=t&&t.debug&&W.default.enable("Ecies:Layer"),this.ecies=(null==t?void 0:t.privateKey)?ht.PrivateKey.fromHex(t.privateKey):new ht.PrivateKey,Bi.Ecies("[ECIES constructor()] initialized secret: ",this.ecies.toHex()),Bi.Ecies("[ECIES constructor()] initialized public: ",this.ecies.publicKey.toHex()),Bi.Ecies("[ECIES constructor()] init with",this)},[{key:"generateECIES",value:function(){this.ecies=new ht.PrivateKey}},{key:"getPublicKey",value:function(){return this.ecies.publicKey.toHex()}},{key:"encrypt",value:function(e,t){var n=e;if(this.enabled)try{Bi.Ecies("[ECIES: encrypt()] using otherPublicKey",t);var r=af.from(e),i=ht.encrypt(t,r);n=af.from(i).toString("base64")}catch(o){throw Bi.Ecies("[ECIES: encrypt()] error encrypt:",o),Bi.Ecies("[ECIES: encrypt()] private: ",this.ecies.toHex()),Bi.Ecies("[ECIES: encrypt()] data: ",e),Bi.Ecies("[ECIES: encrypt()] otherkey: ",t),o}return n}},{key:"decrypt",value:function(e){var t=e;if(this.enabled)try{Bi.Ecies("[ECIES: decrypt()] using privateKey",this.ecies.toHex());var n=af.from(e.toString(),"base64");t=ht.decrypt(this.ecies.toHex(),n).toString()}catch(r){throw Bi.Ecies("[ECIES: decrypt()] error decrypt",r),Bi.Ecies("[ECIES: decrypt()] private: ",this.ecies.toHex()),Bi.Ecies("[ECIES: decrypt()] encryptedData: ",e),r}return t}},{key:"getKeyInfo",value:function(){return{private:this.ecies.toHex(),public:this.ecies.publicKey.toHex()}}},{key:"toString",value:function(){Bi.Ecies("[ECIES: toString()]",this.getKeyInfo())}}])}(),zi={name:"@metamask/sdk-communication-layer",version:"0.33.1",description:"",homepage:"https://github.com/MetaMask/metamask-sdk#readme",bugs:{url:"https://github.com/MetaMask/metamask-sdk/issues"},repository:{type:"git",url:"https://github.com/MetaMask/metamask-sdk.git",directory:"packages/sdk-communication-layer"},main:"dist/node/cjs/metamask-sdk-communication-layer.js",unpkg:"dist/browser/umd/metamask-sdk-communication-layer.js",module:"dist/node/es/metamask-sdk-communication-layer.js",browser:"dist/browser/es/metamask-sdk-communication-layer.js","react-native":"dist/react-native/es/metamask-sdk-communication-layer.js",types:"dist/types/src/index.d.ts",files:["/dist"],scripts:{"build:types":"tsc --project tsconfig.build.json --emitDeclarationOnly --outDir dist/types","build:clean":"yarn clean && yarn build",build:"yarn build:types && rollup -c --bundleConfigAsCjs","build:dev":"yarn build:types && NODE_ENV=dev rollup -c --bundleConfigAsCjs",dev:'concurrently "tsc --watch" "rollup -c --bundleConfigAsCjs -w"',"build:post-tsc":"echo 'N/A'","build:pre-tsc":"echo 'N/A'",size:"size-limit",clean:"rimraf ./dist",lint:"yarn lint:eslint && yarn lint:misc --check","lint:changelog":"../../scripts/validate-changelog.sh @metamask/sdk-communication-layer","lint:eslint":"eslint . --cache --ext js,ts","lint:fix":"yarn lint:eslint --fix && yarn lint:misc --write","lint:misc":"prettier '**/*.json' '**/*.md' '!CHANGELOG.md' --ignore-path ../../.gitignore","publish:preview":"yarn npm publish --tag preview",prepack:"../../scripts/prepack.sh",reset:"yarn clean && rimraf ./node_modules/",test:'jest --testPathIgnorePatterns "/e2e/"',"test:e2e":'jest --testPathPattern "/e2e/"',"test:coverage":"jest --coverage","test:ci":'jest --coverage --passWithNoTests --setupFilesAfterEnv ./jest-preload.js --testPathIgnorePatterns "/e2e/"',"test:dev":"jest",watch:"rollup -c --bundleConfigAsCjs -w"},dependencies:{"@metamask/sdk-analytics":"workspace:*",bufferutil:"^4.0.8","date-fns":"^2.29.3",debug:"4.3.4","utf-8-validate":"^5.0.2",uuid:"^8.3.2"},devDependencies:{"@jest/globals":"^29.3.1","@lavamoat/allow-scripts":"^2.3.1","@metamask/auto-changelog":"3.1.0","@metamask/eslint-config":"^6.0.0","@metamask/eslint-config-nodejs":"^6.0.0","@metamask/eslint-config-typescript":"^6.0.0","@rollup/plugin-commonjs":"^25.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.2","@rollup/plugin-replace":"^6.0.1","@rollup/plugin-terser":"^0.4.4","@size-limit/preset-big-lib":"^11.0.2","@types/jest":"^29.2.4","@types/node":"^20.1.3","@types/uuid":"^9.0.0","@typescript-eslint/eslint-plugin":"^4.26.0","@typescript-eslint/parser":"^4.26.0",concurrently:"^9.1.2","cross-fetch":"^4.0.0",eciesjs:"^0.4.11",eslint:"^7.30.0","eslint-config-prettier":"^8.3.0","eslint-plugin-import":"^2.23.4","eslint-plugin-jest":"^24.4.0","eslint-plugin-jsdoc":"^36.1.0","eslint-plugin-node":"^11.1.0","eslint-plugin-prettier":"^3.4.0",eventemitter2:"^6.4.9",jest:"^29.3.1",prettier:"^2.3.0",rimraf:"^3.0.2",rollup:"^4.26.0","rollup-plugin-jscc":"^2.0.0","rollup-plugin-natives":"^0.7.5","rollup-plugin-node-builtins":"^2.1.2","rollup-plugin-node-globals":"^1.4.0","rollup-plugin-peer-deps-external":"^2.2.4","rollup-plugin-polyfill-node":"^0.13.0","rollup-plugin-sizes":"^1.0.6","rollup-plugin-typescript2":"^0.31.2","rollup-plugin-visualizer":"^5.12.0","size-limit":"^11.1.6","socket.io-client":"^4.5.1","stream-browserify":"^3.0.0","ts-jest":"^29.0.3","ts-node":"^10.9.1",typescript:"^5.6.3"},peerDependencies:{"cross-fetch":"^4.0.0",eciesjs:"*",eventemitter2:"^6.4.9","readable-stream":"^3.6.2","socket.io-client":"^4.5.1"},publishConfig:{access:"public",registry:"https://registry.npmjs.org/"},lavamoat:{allowScripts:{"@lavamoat/preinstall-always-fail":!1,canvas:!0,"eciesjs>secp256k1":!1,"socket.io-client>engine.io-client>ws>bufferutil":!1,"socket.io-client>engine.io-client>ws>utf-8-validate":!1,bufferutil:!1,"utf-8-validate":!1}}},i("DEFAULT_SERVER_URL",qi="https://metamask-sdk.api.cx.metamask.io/"),$i=["websocket"],Wi=6048e5,Gi=[(Vi={METAMASK_GETPROVIDERSTATE:"metamask_getProviderState",METAMASK_CONNECTSIGN:"metamask_connectSign",METAMASK_CONNECTWITH:"metamask_connectWith",METAMASK_OPEN:"metamask_open",METAMASK_BATCH:"metamask_batch",PERSONAL_SIGN:"personal_sign",WALLET_REQUESTPERMISSIONS:"wallet_requestPermissions",WALLET_REVOKEPERMISSIONS:"wallet_revokePermissions",WALLET_GETPERMISSIONS:"wallet_getPermissions",WALLET_WATCHASSET:"wallet_watchAsset",WALLET_SWITCHETHEREUMCHAIN:"wallet_switchEthereumChain",WALLET_ADDETHEREUMCHAIN:"wallet_addEthereumChain",ETH_REQUESTACCOUNTS:"eth_requestAccounts",ETH_ACCOUNTS:"eth_accounts",ETH_CHAINID:"eth_chainId",ETH_SENDTRANSACTION:"eth_sendTransaction",ETH_SIGNTYPEDDATA:"eth_signTypedData",ETH_SIGNTYPEDDATA_V3:"eth_signTypedData_v3",ETH_SIGNTYPEDDATA_V4:"eth_signTypedData_v4",ETH_SIGNTRANSACTION:"eth_signTransaction",ETH_SIGN:"eth_sign",PERSONAL_EC_RECOVER:"personal_ecRecover"}).METAMASK_CONNECTSIGN,Vi.METAMASK_CONNECTWITH,Vi.METAMASK_OPEN,Vi.METAMASK_BATCH,Vi.PERSONAL_SIGN,Vi.WALLET_REQUESTPERMISSIONS,Vi.WALLET_REVOKEPERMISSIONS,Vi.WALLET_WATCHASSET,Vi.ETH_SENDTRANSACTION,Vi.ETH_SIGNTYPEDDATA,Vi.ETH_SIGNTYPEDDATA_V3,Vi.ETH_SIGNTYPEDDATA_V4,Vi.ETH_SIGNTRANSACTION,Vi.ETH_SIGN,Vi.PERSONAL_EC_RECOVER],(to=Yi||i("ConnectionStatus",Yi={})).DISCONNECTED="disconnected",to.WAITING="waiting",to.TIMEOUT="timeout",to.LINKED="linked",to.PAUSED="paused",to.TERMINATED="terminated",(fs=Zi||i("EventType",Zi={})).KEY_INFO="key_info",fs.SERVICE_STATUS="service_status",fs.PROVIDER_UPDATE="provider_update",fs.RPC_UPDATE="rpc_update",fs.KEYS_EXCHANGED="keys_exchanged",fs.JOIN_CHANNEL="join_channel",fs.PUBLIC_KEY="public_key",fs.CHANNEL_CREATED="channel_created",fs.CLIENTS_CONNECTED="clients_connected",fs.CLIENTS_DISCONNECTED="clients_disconnected",fs.CLIENTS_WAITING="clients_waiting",fs.CLIENTS_READY="clients_ready",fs.REJECTED="rejected",fs.WALLET_INIT="wallet_init",fs.CHANNEL_PERSISTENCE="channel_persistence",fs.CONFIG="config",fs.MESSAGE_ACK="ack",fs.SOCKET_DISCONNECTED="socket_disconnected",fs.SOCKET_RECONNECT="socket_reconnect",fs.OTP="otp",fs.SDK_RPC_CALL="sdk_rpc_call",fs.AUTHORIZED="authorized",fs.CONNECTION_STATUS="connection_status",fs.MESSAGE="message",fs.TERMINATE="terminate",(Ji||(Ji={})).KEY_EXCHANGE="key_exchange",function(e){e.KEY_HANDSHAKE_START="key_handshake_start",e.KEY_HANDSHAKE_CHECK="key_handshake_check",e.KEY_HANDSHAKE_SYN="key_handshake_SYN",e.KEY_HANDSHAKE_SYNACK="key_handshake_SYNACK",e.KEY_HANDSHAKE_ACK="key_handshake_ACK",e.KEY_HANDSHAKE_WALLET="key_handshake_wallet",e.KEY_HANDSHAKE_NONE="none"}(Qi||(Qi={})),no=function(e){function t(e){var n,r=e.communicationLayer,i=e.otherPublicKey,s=e.context,c=e.ecies,u=e.logging;return p(this,t),(n=o(this,t)).keysExchanged=!1,n.step=Qi.KEY_HANDSHAKE_NONE,n.debug=!1,n.context=s,n.communicationLayer=r,null!=c&&c.privateKey&&i&&(Bi.KeyExchange("[KeyExchange: constructor()] otherPubKey=".concat(i," set keysExchanged to true!"),c),n.keysExchanged=!0),n.myECIES=new Fi(Object.assign(Object.assign({},c),{debug:null==u?void 0:u.eciesLayer})),n.communicationLayer.state.eciesInstance=n.myECIES,n.myPublicKey=n.myECIES.getPublicKey(),n.debug=!0===(null==u?void 0:u.keyExchangeLayer),i&&n.setOtherPublicKey(i),n.communicationLayer.on(Ji.KEY_EXCHANGE,n.onKeyExchangeMessage.bind(a(n))),n}return s(t,e),h(t,[{key:"onKeyExchangeMessage",value:function(e){var t=this.communicationLayer.remote.state.relayPersistence;if(Bi.KeyExchange("[KeyExchange: onKeyExchangeMessage()] context=".concat(this.context," keysExchanged=").concat(this.keysExchanged," relayPersistence=").concat(t),e),t)Bi.KeyExchange("[KeyExchange: onKeyExchangeMessage()] Ignoring key exchange message because relay persistence is activated");else{var n=e.message;this.keysExchanged&&Bi.KeyExchange("[KeyExchange: onKeyExchangeMessage()] context=".concat(this.context," received handshake while already exchanged. step=").concat(this.step," otherPubKey=").concat(this.otherPublicKey)),this.emit(Zi.KEY_INFO,n.type),n.type===Qi.KEY_HANDSHAKE_SYN?(this.checkStep([Qi.KEY_HANDSHAKE_NONE,Qi.KEY_HANDSHAKE_ACK]),Bi.KeyExchange("[KeyExchange: onKeyExchangeMessage()] KEY_HANDSHAKE_SYN",n),n.pubkey&&this.setOtherPublicKey(n.pubkey),this.communicationLayer.sendMessage({type:Qi.KEY_HANDSHAKE_SYNACK,pubkey:this.myPublicKey}).catch(function(e){Bi.KeyExchange("[KeyExchange: onKeyExchangeMessage()] Error sending KEY_HANDSHAKE_SYNACK",e)}),this.setStep(Qi.KEY_HANDSHAKE_ACK)):n.type===Qi.KEY_HANDSHAKE_SYNACK?(this.checkStep([Qi.KEY_HANDSHAKE_SYNACK,Qi.KEY_HANDSHAKE_ACK,Qi.KEY_HANDSHAKE_NONE]),Bi.KeyExchange("[KeyExchange: onKeyExchangeMessage()] KEY_HANDSHAKE_SYNACK"),n.pubkey&&this.setOtherPublicKey(n.pubkey),this.communicationLayer.sendMessage({type:Qi.KEY_HANDSHAKE_ACK}).catch(function(e){Bi.KeyExchange("[KeyExchange: onKeyExchangeMessage()] Error sending KEY_HANDSHAKE_ACK",e)}),this.keysExchanged=!0,this.setStep(Qi.KEY_HANDSHAKE_ACK),this.emit(Zi.KEYS_EXCHANGED)):n.type===Qi.KEY_HANDSHAKE_ACK&&(Bi.KeyExchange("[KeyExchange: onKeyExchangeMessage()] KEY_HANDSHAKE_ACK set keysExchanged to true!"),this.checkStep([Qi.KEY_HANDSHAKE_ACK,Qi.KEY_HANDSHAKE_NONE]),this.keysExchanged=!0,this.setStep(Qi.KEY_HANDSHAKE_ACK),this.emit(Zi.KEYS_EXCHANGED))}}},{key:"resetKeys",value:function(e){this.clean(),this.myECIES=new Fi(e)}},{key:"clean",value:function(){Bi.KeyExchange("[KeyExchange: clean()] context=".concat(this.context," reset handshake state")),this.setStep(Qi.KEY_HANDSHAKE_NONE),this.emit(Zi.KEY_INFO,this.step),this.keysExchanged=!1}},{key:"start",value:function(e){var t=e.isOriginator,n=e.force,r=this.communicationLayer.remote.state,i=r.relayPersistence,o=r.protocolVersion,a=o>=2;i?Bi.KeyExchange("[KeyExchange: start()] Ignoring key exchange message because relay persistence is activated"):(Bi.KeyExchange("[KeyExchange: start()] context=".concat(this.context," protocolVersion=").concat(o," isOriginator=").concat(t," step=").concat(this.step," force=").concat(n," relayPersistence=").concat(i," keysExchanged=").concat(this.keysExchanged)),t?!(this.keysExchanged||this.step!==Qi.KEY_HANDSHAKE_NONE&&this.step!==Qi.KEY_HANDSHAKE_SYNACK)||n?(Bi.KeyExchange("[KeyExchange: start()] context=".concat(this.context," -- start key exchange (force=").concat(n,") -- step=").concat(this.step),this.step),this.clean(),this.setStep(Qi.KEY_HANDSHAKE_SYNACK),this.communicationLayer.sendMessage({type:Qi.KEY_HANDSHAKE_SYN,pubkey:this.myPublicKey,v:2}).catch(function(e){Bi.KeyExchange("[KeyExchange: start()] Error sending KEY_HANDSHAKE_SYN",e)})):Bi.KeyExchange("[KeyExchange: start()] context=".concat(this.context," -- key exchange already ").concat(this.keysExchanged?"done":"in progress"," -- aborted."),this.step):this.keysExchanged&&!0!==n?Bi.KeyExchange("[KeyExchange: start()] don't send KEY_HANDSHAKE_START -- exchange already done."):a?this.communicationLayer.sendMessage({type:Qi.KEY_HANDSHAKE_SYNACK,pubkey:this.myPublicKey,v:2}).catch(function(e){Bi.KeyExchange("[KeyExchange: start()] Error sending KEY_HANDSHAKE_SYNACK",e)}):(this.communicationLayer.sendMessage({type:Qi.KEY_HANDSHAKE_START}).catch(function(e){Bi.KeyExchange("[KeyExchange: start()] Error sending KEY_HANDSHAKE_START",e)}),this.clean()))}},{key:"setStep",value:function(e){this.step=e,this.emit(Zi.KEY_INFO,e)}},{key:"checkStep",value:function(e){e.length>0&&e.indexOf(this.step.toString())}},{key:"setRelayPersistence",value:function(e){var t=e.localKey,n=e.otherKey;this.otherPublicKey=n,this.myECIES=new Fi({privateKey:t,debug:this.debug}),this.keysExchanged=!0}},{key:"setKeysExchanged",value:function(e){this.keysExchanged=e}},{key:"areKeysExchanged",value:function(){return this.keysExchanged}},{key:"getMyPublicKey",value:function(){return this.myPublicKey}},{key:"getOtherPublicKey",value:function(){return this.otherPublicKey}},{key:"setOtherPublicKey",value:function(e){Bi.KeyExchange("[KeyExchange: setOtherPubKey()]",e),this.otherPublicKey=e}},{key:"encryptMessage",value:function(e){if(!this.otherPublicKey)throw new Error("encryptMessage: Keys not exchanged - missing otherPubKey");return this.myECIES.encrypt(e,this.otherPublicKey)}},{key:"decryptMessage",value:function(e){if(!this.otherPublicKey)throw new Error("decryptMessage: Keys not exchanged - missing otherPubKey");return this.myECIES.decrypt(e)}},{key:"getKeyInfo",value:function(){return{ecies:Object.assign(Object.assign({},this.myECIES.getKeyInfo()),{otherPubKey:this.otherPublicKey}),step:this.step,keysExchanged:this.areKeysExchanged()}}},{key:"toString",value:function(){var e={keyInfo:this.getKeyInfo(),keysExchanged:this.keysExchanged,step:this.step};return JSON.stringify(e)}}])}(q.EventEmitter2),function(e){e.TERMINATE="terminate",e.ANSWER="answer",e.OFFER="offer",e.CANDIDATE="candidate",e.JSONRPC="jsonrpc",e.WALLET_INFO="wallet_info",e.WALLET_INIT="wallet_init",e.ORIGINATOR_INFO="originator_info",e.PAUSE="pause",e.OTP="otp",e.AUTHORIZED="authorized",e.PING="ping",e.READY="ready"}(Xi||i("MessageType",Xi={})),function(e){e.REQUEST="sdk_connect_request_started",e.REQUEST_MOBILE="sdk_connect_request_started_mobile",e.RECONNECT="sdk_reconnect_request_started",e.CONNECTED="sdk_connection_established",e.CONNECTED_MOBILE="sdk_connection_established_mobile",e.AUTHORIZED="sdk_connection_authorized",e.REJECTED="sdk_connection_rejected",e.TERMINATED="sdk_connection_terminated",e.DISCONNECTED="sdk_disconnected",e.SDK_USE_EXTENSION="sdk_use_extension",e.SDK_RPC_REQUEST="sdk_rpc_request",e.SDK_RPC_REQUEST_RECEIVED="sdk_rpc_request_received",e.SDK_RPC_REQUEST_DONE="sdk_rpc_request_done",e.SDK_EXTENSION_UTILIZED="sdk_extension_utilized",e.SDK_USE_INAPP_BROWSER="sdk_use_inapp_browser"}(eo||(eo={})),ro=function(e,t,n){return Jd(void 0,void 0,void 0,L().m(function r(){var i,o,a,s,c,u,l,d,f,h,p,v,m,g,y,b,w;return L().w(function(r){for(;;)switch(r.n){case 0:if(l=e.remote,d=e.state,f=d.channelId,h=d.isOriginator,"error_terminated"!==t){r.n=1;break}return r.a(2,(Bi.SocketService("handleJoinChannelResults: Channel ".concat(f," terminated")),void e.emit(Zi.TERMINATE)));case 1:if(n){r.n=2;break}return r.a(2,void Bi.SocketService("handleJoinChannelResults: No result for channel ".concat(f)));case 2:if(p=n.persistence,v=n.walletKey,m=n.rejected,Bi.SocketService("handleJoinChannelResults: Channel ".concat(f," persistence=").concat(p," walletKey=").concat(v," rejected=").concat(m)),!m){r.n=4;break}return Bi.SocketService("handleJoinChannelResults: Channel ".concat(f," rejected")),r.n=3,e.remote.disconnect({terminate:!0});case 3:return e.remote.emit(Zi.REJECTED,{channelId:f}),r.a(2,void e.remote.emitServiceStatusEvent());case 4:if(!v||(null===(i=l.state.channelConfig)||void 0===i?void 0:i.otherKey)){r.n=6;break}return e.getKeyExchange().setOtherPublicKey(v),null===(o=e.state.keyExchange)||void 0===o||o.setKeysExchanged(!0),l.state.ready=!0,l.state.authorized=!0,l.emit(Zi.AUTHORIZED),g=l.state,y=g.communicationLayer,b=g.storageManager,w=Object.assign(Object.assign({},l.state.channelConfig),{channelId:null!==(a=l.state.channelId)&&void 0!==a?a:"",validUntil:Date.now()+Wi,localKey:null==y?void 0:y.getKeyInfo().ecies.private,otherKey:v}),e.sendMessage({type:Qi.KEY_HANDSHAKE_ACK}).catch(function(e){}),null===(s=e.state.socket)||void 0===s||s.emit(Xi.PING,{id:f,clientType:h?"dapp":"wallet",context:"on_channel_reconnect",message:""}),r.n=5,null==b?void 0:b.persistChannelConfig(w);case 5:l.emitServiceStatusEvent(),l.setConnectionStatus(Yi.LINKED);case 6:p&&(e.emit(Zi.CHANNEL_PERSISTENCE),null===(c=e.state.keyExchange)||void 0===c||c.setKeysExchanged(!0),l.state.ready=!0,l.state.authorized=!0,l.emit(Zi.AUTHORIZED),Hi(Object.assign(Object.assign({id:null!=f?f:"",event:h?eo.CONNECTED:eo.CONNECTED_MOBILE},e.remote.state.originatorInfo),{sdkVersion:e.remote.state.sdkVersion,commLayer:e.state.communicationLayerPreference,commLayerVersion:zi.version,walletVersion:null===(u=e.remote.state.walletInfo)||void 0===u?void 0:u.version}),d.communicationServerUrl).catch(function(e){}));case 7:return r.a(2)}},r)}))},io=function(e){return new Promise(function(t){setTimeout(t,e)})},oo=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return Jd(void 0,[e,t].concat(r),void 0,function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200;return L().m(function r(){var i,o,a;return L().w(function(r){for(;;)switch(r.n){case 0:o=Date.now(),a=!1;case 1:if(a){r.n=4;break}if(a=Date.now()-o>3e5,void 0===(i=t[e]).elapsedTime){r.n=2;break}return r.a(2,i);case 2:return r.n=3,io(n);case 3:r.n=1;break;case 4:throw new Error("RPC ".concat(e," timed out"));case 5:return r.a(2)}},r)})()})},ao=function(e){return Jd(void 0,void 0,void 0,L().m(function t(){var n,r,i,o,a,s,c;return L().w(function(t){for(;;)switch(t.p=t.n){case 0:if(n=e.state,r=n.socket,i=n.channelId,o=n.context,a=n.isOriginator,!n.isReconnecting){t.n=1;break}return t.a(2,(Bi.SocketService("[SocketService: reconnectSocket()] Reconnection already in progress, skipping",e),!1));case 1:if(r){t.n=2;break}return t.a(2,(Bi.SocketService("[SocketService: reconnectSocket()] socket is not defined",e),!1));case 2:if(i){t.n=3;break}return t.a(2,!1);case 3:s=r.connected,n.isReconnecting=!0,n.reconnectionAttempts=0,Bi.SocketService("[SocketService: reconnectSocket()] connected=".concat(s," trying to reconnect after socketio disconnection"),e),t.p=4;case 5:if(!(3>n.reconnectionAttempts)){t.n=15;break}return Bi.SocketService("[SocketService: reconnectSocket()] Attempt ".concat(n.reconnectionAttempts+1," of 3"),e),t.n=6,io(200);case 6:if(!r.connected){t.n=7;break}return t.a(2,(Bi.SocketService("Socket already connected --- ping to retrieve messages"),r.emit(Xi.PING,{id:i,clientType:a?"dapp":"wallet",context:"on_channel_config",message:""}),!0));case 7:return n.resumed=!0,r.connect(),e.emit(Zi.SOCKET_RECONNECT),t.p=8,t.n=9,new Promise(function(t,n){r.emit(Zi.JOIN_CHANNEL,{channelId:i,context:"".concat(o,"connect_again"),clientType:a?"dapp":"wallet"},function(r,i){return Jd(void 0,void 0,void 0,L().m(function o(){var a;return L().w(function(o){for(;;)switch(o.p=o.n){case 0:return o.p=0,o.n=1,ro(e,r,i);case 1:t(),o.n=3;break;case 2:o.p=2,a=o.v,n(a);case 3:return o.a(2)}},o,null,[[0,2]])}))})});case 9:return t.n=10,io(100);case 10:if(!r.connected){t.n=11;break}return t.a(2,(Bi.SocketService("Reconnection successful on attempt ".concat(n.reconnectionAttempts+1)),!0));case 11:t.n=13;break;case 12:t.p=12,c=t.v,Bi.SocketService("Error during reconnection attempt ".concat(n.reconnectionAttempts+1,":"),c);case 13:if(n.reconnectionAttempts+=1,!(3>n.reconnectionAttempts)){t.n=14;break}return t.n=14,io(200);case 14:t.n=5;break;case 15:return t.a(2,(Bi.SocketService("Failed to reconnect after 3 attempts"),!1));case 16:return t.p=16,n.isReconnecting=!1,n.reconnectionAttempts=0,t.f(16);case 17:return t.a(2)}},t,null,[[8,12],[4,,16,17]])}))},function(e){e.RPC_CHECK="rpcCheck",e.SKIPPED_RPC="skippedRpc"}(so||(so={})),co=["eth_sendTransaction","eth_signTypedData","eth_signTransaction","personal_sign","wallet_requestPermissions","wallet_switchEthereumChain","eth_signTypedData_v3","eth_signTypedData_v4","metamask_connectSign","metamask_connectWith","metamask_batch"].map(function(e){return e.toLowerCase()}),uo=[{event:Zi.CLIENTS_CONNECTED,handler:function(e,t){var n=this;return function(r){return Jd(n,void 0,void 0,L().m(function n(){var r,i,o,a,s,c,u,l,d,f,h,p,v;return L().w(function(n){for(;;)switch(n.n){case 0:p=null!==(i=null===(r=e.remote.state.channelConfig)||void 0===r?void 0:r.relayPersistence)&&void 0!==i&&i,Bi.SocketService("[SocketService: handleClientsConnected()] context=".concat(e.state.context," on 'clients_connected-").concat(t,"' relayPersistence=").concat(p," resumed=").concat(e.state.resumed,"  clientsPaused=").concat(e.state.clientsPaused," keysExchanged=").concat(null===(o=e.state.keyExchange)||void 0===o?void 0:o.areKeysExchanged()," isOriginator=").concat(e.state.isOriginator)),e.emit(Zi.CLIENTS_CONNECTED,{isOriginator:e.state.isOriginator,keysExchanged:null===(a=e.state.keyExchange)||void 0===a?void 0:a.areKeysExchanged(),context:e.state.context}),e.state.resumed?(e.state.isOriginator||(Bi.SocketService("[SocketService: handleClientsConnected()] context=".concat(e.state.context," 'clients_connected' / keysExchanged=").concat(null===(s=e.state.keyExchange)||void 0===s?void 0:s.areKeysExchanged()," -- backward compatibility")),null===(c=e.state.keyExchange)||void 0===c||c.start({isOriginator:null!==(u=e.state.isOriginator)&&void 0!==u&&u})),e.state.resumed=!1):e.state.clientsPaused?Bi.SocketService("[SocketService: handleClientsConnected()] 'clients_connected' skip sending originatorInfo on pause"):e.state.isOriginator||(v=!p,Bi.SocketService("[SocketService: handleClientsConnected()] context=".concat(e.state.context," on 'clients_connected' / keysExchanged=").concat(null===(l=e.state.keyExchange)||void 0===l?void 0:l.areKeysExchanged()," -- force=").concat(v," -- backward compatibility")),Bi.SocketService("[SocketService: handleClientsConnected()] context=".concat(e.state.context," on 'clients_connected' / keysExchanged=").concat(null===(d=e.state.keyExchange)||void 0===d?void 0:d.areKeysExchanged()," -- force=").concat(v," -- backward compatibility")),null===(f=e.state.keyExchange)||void 0===f||f.start({isOriginator:null!==(h=e.state.isOriginator)&&void 0!==h&&h,force:v})),e.state.clientsConnected=!0,e.state.clientsPaused=!1;case 1:return n.a(2)}},n)}))}}},{event:Zi.CHANNEL_CREATED,handler:function(e,t){return function(n){Bi.SocketService("[SocketService: handleChannelCreated()] context=".concat(e.state.context," on 'channel_created-").concat(t,"'"),n),e.emit(Zi.CHANNEL_CREATED,n)}}},{event:Zi.CLIENTS_DISCONNECTED,handler:function(e,t){return function(){var n;e.state.clientsConnected=!1,Bi.SocketService("[SocketService: handlesClientsDisconnected()] context=".concat(e.state.context," on 'clients_disconnected-").concat(t,"'")),e.remote.state.relayPersistence?Bi.SocketService("[SocketService: handlesClientsDisconnected()] context=".concat(e.state.context," on 'clients_disconnected-").concat(t,"' - relayPersistence enabled, skipping key exchange cleanup.")):(e.state.isOriginator&&!e.state.clientsPaused&&(null===(n=e.state.keyExchange)||void 0===n||n.clean()),e.emit(Zi.CLIENTS_DISCONNECTED,t))}}},{event:Zi.CONFIG,handler:function(e,t){var n=this;return function(r){return Jd(n,void 0,void 0,L().m(function n(){var i,o,a,s,c;return L().w(function(n){for(;;)switch(n.n){case 0:if(Bi.SocketService("[SocketService: handleChannelConfig()] update relayPersistence on 'config-".concat(t,"'"),r),s=r.persistence,c=r.walletKey,!e.state.isOriginator||!e.remote.state.channelConfig){n.n=5;break}if(!(r.walletKey&&!e.remote.state.channelConfig.otherKey)){n.n=3;break}return Bi.SocketService("Setting wallet key ".concat(c)),e.remote.state.channelConfig.otherKey=c,e.getKeyExchange().setOtherPublicKey(r.walletKey),null===(i=e.state.keyExchange)||void 0===i||i.setKeysExchanged(!0),n.n=1,e.remote.sendMessage({type:Qi.KEY_HANDSHAKE_ACK});case 1:return n.n=2,e.remote.sendMessage({type:Xi.PING});case 2:return n.n=3,null===(o=e.remote.state.storageManager)||void 0===o?void 0:o.persistChannelConfig(e.remote.state.channelConfig);case 3:if(!0!==s||e.remote.state.channelConfig.relayPersistence){n.n=4;break}return Bi.SocketService("Setting relay persistence ".concat(s)),e.remote.state.channelConfig.relayPersistence=s,e.remote.state.relayPersistence=!0,e.remote.emit(Zi.CHANNEL_PERSISTENCE),e.remote.state.authorized=!0,e.remote.state.ready=!0,e.remote.emit(Zi.AUTHORIZED),n.n=4,null===(a=e.remote.state.storageManager)||void 0===a?void 0:a.persistChannelConfig(e.remote.state.channelConfig);case 4:n.n=6;break;case 5:e.state.isOriginator||r.persistence&&(e.remote.state.relayPersistence=!0,e.remote.emit(Zi.CHANNEL_PERSISTENCE));case 6:return n.a(2)}},n)}))}}},{event:Zi.MESSAGE,handler:function(e,t){return function(n){var r,i,o,a,s,c,u,l,d,f,h,p,v,m,g,y,b,w,E=n.ackId,k=n.message,_=n.error,S=null!==(r=e.remote.state.relayPersistence)&&void 0!==r&&r;if(Bi.SocketService("[SocketService handleMessage()]  relayPersistence=".concat(S,"  context=").concat(e.state.context," on 'message' ").concat(t," keysExchanged=").concat(null===(i=e.state.keyExchange)||void 0===i?void 0:i.areKeysExchanged()),n),_)throw Bi.SocketService("\n      [SocketService handleMessage()] context=".concat(e.state.context,"::on 'message' error=").concat(_)),new Error(_);var C="string"==typeof k;if(!C&&(null==k?void 0:k.type)===Qi.KEY_HANDSHAKE_START){if(S)return;return Bi.SocketService("[SocketService handleMessage()] context=".concat(e.state.context,"::on 'message' received HANDSHAKE_START isOriginator=").concat(e.state.isOriginator),k),void(null===(o=e.state.keyExchange)||void 0===o||o.start({isOriginator:null!==(a=e.state.isOriginator)&&void 0!==a&&a,force:!0}))}if(!C&&(null===(s=null==k?void 0:k.type)||void 0===s?void 0:s.startsWith("key_handshake"))){if(S)return;return Bi.SocketService("[SocketService handleMessage()] context=".concat(e.state.context,"::on 'message' emit KEY_EXCHANGE"),k),void e.emit(Ji.KEY_EXCHANGE,{message:k,context:e.state.context})}if(C&&!(null===(c=e.state.keyExchange)||void 0===c?void 0:c.areKeysExchanged())){var A=!1;try{Bi.SocketService("[SocketService handleMessage()] context=".concat(e.state.context,"::on 'message' trying to decrypt message")),null===(u=e.state.keyExchange)||void 0===u||u.decryptMessage(k),A=!0}catch(I){Bi.SocketService("[SocketService handleMessage()] context=".concat(e.state.context,"::on 'message' error"),I)}if(!A)return e.state.isOriginator?null===(d=e.state.keyExchange)||void 0===d||d.start({isOriginator:null!==(f=e.state.isOriginator)&&void 0!==f&&f}):e.sendMessage({type:Qi.KEY_HANDSHAKE_START}).catch(function(e){}),void Bi.SocketService("Message ignored because invalid key exchange status. step=".concat(null===(h=e.state.keyExchange)||void 0===h?void 0:h.getKeyInfo().step),null===(p=e.state.keyExchange)||void 0===p?void 0:p.getKeyInfo(),k);Bi.SocketService("Invalid key exchange status detected --- updating it."),null===(l=e.state.keyExchange)||void 0===l||l.setKeysExchanged(!0)}else if(!C&&(null==k?void 0:k.type))return void e.emit(Zi.MESSAGE,k);if(C){var x=null===(v=e.state.keyExchange)||void 0===v?void 0:v.decryptMessage(k),M=JSON.parse(null!=x?x:"{}");if(E&&(null==E?void 0:E.length)>0&&(Bi.SocketService("[SocketService handleMessage()] context=".concat(e.state.context,"::on 'message' ackid=").concat(E," channelId=").concat(t)),null===(m=e.state.socket)||void 0===m||m.emit(Zi.MESSAGE_ACK,{ackId:E,channelId:t,clientType:e.state.isOriginator?"dapp":"wallet"})),e.state.clientsPaused=(null==M?void 0:M.type)===Xi.PAUSE,e.state.isOriginator&&M.data){var T=M.data,O=e.state.rpcMethodTracker[T.id];if(O){var R=Date.now()-O.timestamp;Bi.SocketService("[SocketService handleMessage()] context=".concat(e.state.context,"::on 'message' received answer for id=").concat(T.id," method=").concat(O.method," responseTime=").concat(R),M),e.remote.state.analytics&&co.includes(O.method.toLowerCase())&&Hi(Object.assign(Object.assign({id:null!==(g=e.remote.state.channelId)&&void 0!==g?g:"",event:eo.SDK_RPC_REQUEST_DONE,sdkVersion:e.remote.state.sdkVersion,commLayerVersion:zi.version},e.remote.state.originatorInfo),{walletVersion:null===(y=e.remote.state.walletInfo)||void 0===y?void 0:y.version,params:{method:O.method,from:"mobile"}}),e.remote.state.communicationServerUrl).catch(function(e){}),cp(O.method)&&$.analytics.track(T.error?4001===T.error.code?"sdk_action_rejected":"sdk_action_failed":"sdk_action_succeeded",{action:O.method});var P=Object.assign(Object.assign({},O),{result:T.result,error:T.error?{code:null===(b=T.error)||void 0===b?void 0:b.code,message:null===(w=T.error)||void 0===w?void 0:w.message}:void 0,elapsedTime:R});e.state.rpcMethodTracker[T.id]=P,e.emit(Zi.RPC_UPDATE,P)}}e.emit(Zi.MESSAGE,{message:M})}else e.emit(Zi.MESSAGE,k)}}},{event:Zi.REJECTED,handler:function(e,t){var n=this;return function(r){return Jd(n,void 0,void 0,L().m(function n(){var r;return L().w(function(n){for(;;)switch(n.n){case 0:if(!e.state.isOriginator||e.remote.state.ready){n.n=2;break}return Bi.SocketService("[SocketService: handleChannelRejected()] context=".concat(e.state.context," channelId=").concat(t," isOriginator=").concat(e.state.isOriginator," ready=").concat(e.remote.state.ready),e.remote.state.originatorInfo),Hi(Object.assign(Object.assign({id:t,event:eo.REJECTED},e.remote.state.originatorInfo),{sdkVersion:e.remote.state.sdkVersion,commLayer:e.state.communicationLayerPreference,commLayerVersion:zi.version,walletVersion:null===(r=e.remote.state.walletInfo)||void 0===r?void 0:r.version}),e.remote.state.communicationServerUrl).catch(function(e){}),$.analytics.track("sdk_connection_rejected",{transport_type:"websocket"}),n.n=1,e.remote.disconnect({terminate:!0});case 1:e.remote.emit(Zi.REJECTED,{channelId:t}),e.remote.setConnectionStatus(Yi.DISCONNECTED),n.n=3;break;case 2:Bi.SocketService("[SocketService: handleChannelRejected()] SKIP -- channelId=".concat(t," isOriginator=").concat(e.state.isOriginator," ready=").concat(e.remote.state.ready));case 3:return n.a(2)}},n)}))}}},{event:"clients_waiting_to_join",handler:function(e,t){return function(n){Bi.SocketService("[SocketService: handleClientsWaitingToJoin()] context=".concat(e.state.context," on 'clients_waiting_to_join-").concat(t,"'"),n),e.emit(Zi.CLIENTS_WAITING,n)}}}],lo=[{event:Zi.KEY_INFO,handler:function(e){return function(t){Bi.SocketService("[SocketService: handleKeyInfo()] on 'KEY_INFO'",t),e.emit(Zi.KEY_INFO,t)}}},{event:Zi.KEYS_EXCHANGED,handler:function(e){return function(){var t,n,r;Bi.SocketService("[SocketService: handleKeysExchanged()] on 'keys_exchanged' keyschanged=".concat(null===(t=e.state.keyExchange)||void 0===t?void 0:t.areKeysExchanged()));var i=e.remote.state.channelConfig;if(i){var o=e.getKeyExchange().getKeyInfo().ecies;i.localKey=o.private,i.otherKey=o.otherPubKey,e.remote.state.channelConfig=i,null===(n=e.remote.state.storageManager)||void 0===n||n.persistChannelConfig(i).catch(function(e){})}e.emit(Zi.KEYS_EXCHANGED,{keysExchanged:null===(r=e.state.keyExchange)||void 0===r?void 0:r.areKeysExchanged(),isOriginator:e.state.isOriginator});var a={keyInfo:e.getKeyInfo()};e.emit(Zi.SERVICE_STATUS,a)}}}],fo=function(e){function t(e){var n;p(this,t),(n=o(this,t)).state={clientsConnected:!1,clientsPaused:!1,manualDisconnect:!1,lastRpcId:void 0,rpcMethodTracker:{},hasPlaintext:!1,communicationServerUrl:"",focusListenerAdded:!1,removeFocusListener:void 0,isReconnecting:!1,reconnectionAttempts:0},n.options=e;var r=e.reconnect,i=e.communicationLayerPreference,a=e.communicationServerUrl,s=e.context,c=e.remote,u=e.logging;return n.state.resumed=r,n.state.context=s,n.state.isOriginator=c.state.isOriginator,n.state.communicationLayerPreference=i,n.state.debug=!0===(null==u?void 0:u.serviceLayer),n.remote=c,!0===(null==u?void 0:u.serviceLayer)&&W.default.enable("SocketService:Layer"),n.state.communicationServerUrl=a,n.state.hasPlaintext="https://metamask-sdk.api.cx.metamask.io/"!==n.state.communicationServerUrl&&!0===(null==u?void 0:u.plaintext),Bi.SocketService("[SocketService: constructor()] Socket IO url: ".concat(n.state.communicationServerUrl)),n.initSocket(),n}return s(t,e),h(t,[{key:"initSocket",value:function(){var e,t=this.options,n=t.otherPublicKey,r=t.ecies,i=t.logging,o={autoConnect:!1,transports:$i,withCredentials:!0},a=this.state.communicationServerUrl;Bi.SocketService("[SocketService: initSocket()] Socket IO url: ".concat(a)),this.state.socket=Zd(a,o),function(e){if("undefined"!=typeof window&&"undefined"!=typeof document&&(Bi.SocketService("[SocketService: setupSocketFocusListener()] hasFocus=".concat(document.hasFocus()),e),!e.state.focusListenerAdded)){var t=function(){Bi.SocketService("Document has focus --- reconnecting socket"),ao(e).catch(function(e){})};window.addEventListener("focus",t),e.state.focusListenerAdded=!0,e.state.removeFocusListener=function(){window.removeEventListener("focus",t),e.state.focusListenerAdded=!1}}}(this);var s={communicationLayer:this,otherPublicKey:n,sendPublicKey:!1,context:null!==(e=this.state.context)&&void 0!==e?e:"",ecies:r,logging:i};this.state.keyExchange=new no(s)}},{key:"resetKeys",value:function(){var e;Bi.SocketService("[SocketService: resetKeys()] Resetting keys."),null===(e=this.state.keyExchange)||void 0===e||e.resetKeys()}},{key:"createChannel",value:function(){return Jd(this,void 0,void 0,L().m(function e(){return L().w(function(e){for(;;)if(0===e.n)return e.a(2,function(e){return Jd(this,void 0,void 0,L().m(function t(){var n,r,i,o,a,s=this;return L().w(function(t){for(;;)switch(t.n){case 0:if(Bi.SocketService("[SocketService: createChannel()] context=".concat(e.state.context)),e.state.socket||e.initSocket(),!(null===(n=e.state.socket)||void 0===n?void 0:n.connected)){t.n=1;break}throw new Error("socket already connected");case 1:return null===(r=e.state.socket)||void 0===r||r.connect(),e.state.manualDisconnect=!1,e.state.isOriginator=!0,o=z(),e.state.channelId=o,dp(e,o),t.n=2,new Promise(function(t,n){var r;null===(r=e.state.socket)||void 0===r||r.emit(Zi.JOIN_CHANNEL,{channelId:o,context:"".concat(e.state.context,"createChannel"),clientType:"dapp"},function(r,i){return Jd(s,void 0,void 0,L().m(function o(){var a;return L().w(function(o){for(;;)switch(o.p=o.n){case 0:return o.p=0,o.n=1,ro(e,r,i);case 1:t(),o.n=3;break;case 2:o.p=2,a=o.v,n(a);case 3:return o.a(2)}},o,null,[[0,2]])}))})});case 2:return a=null===(i=e.state.keyExchange)||void 0===i?void 0:i.getKeyInfo(),t.a(2,{channelId:o,pubKey:(null==a?void 0:a.ecies.public)||"",privKey:(null==a?void 0:a.ecies.private)||""})}},t)}))}(this))},e,this)}))}},{key:"connectToChannel",value:function(e){var t=e.channelId,n=e.withKeyExchange;return function(e){return Jd(this,arguments,void 0,function(e){var t=this,n=e.options,r=e.instance;return L().m(function e(){var i,o,a,s,c,u,l,d,f,h,p,v;return L().w(function(e){for(;;)switch(e.n){case 0:if(i=n.channelId,o=n.authorized,a=n.withKeyExchange,s=r.state,c=r.remote,u=s.isOriginator,l=void 0!==u&&u,d=s.socket,f=s.keyExchange,h=c.state.channelConfig,!(null==d?void 0:d.connected)){e.n=1;break}throw new Error("socket already connected");case 1:return l&&(null==h?void 0:h.relayPersistence)&&(p=h.localKey,v=h.otherKey,p&&v&&(null==f||f.setRelayPersistence({localKey:p,otherKey:v}))),e.a(2,(Object.assign(s,{manualDisconnect:!1,withKeyExchange:a,isOriginator:l,channelId:i}),null!=d&&d.connect(),dp(r,i),!l&&o&&(null!=f&&f.setKeysExchanged(!0),Object.assign(c.state,{ready:!0,authorized:!0})),new Promise(function(e){var n,a=null===(n=null==f?void 0:f.getKeyInfo())||void 0===n?void 0:n.ecies.public;null==d||d.emit(Zi.JOIN_CHANNEL,{channelId:i,context:"".concat(s.context,"_connectToChannel"),clientType:l?"dapp":"wallet",publicKey:o&&!l?a:void 0},function(n,i){return Jd(t,void 0,void 0,L().m(function t(){return L().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,ro(r,n,i);case 1:e();case 2:return t.a(2)}},t)}))})})))}},e)})()})}({options:{channelId:t,withKeyExchange:void 0!==n&&n,authorized:e.authorized},instance:this})}},{key:"getKeyInfo",value:function(){return this.state.keyExchange.getKeyInfo()}},{key:"keyCheck",value:function(){var e,t;null===(t=(e=this).state.socket)||void 0===t||t.emit(Zi.MESSAGE,{id:e.state.channelId,context:e.state.context,message:{type:Qi.KEY_HANDSHAKE_CHECK,pubkey:e.getKeyInfo().ecies.otherPubKey}})}},{key:"getKeyExchange",value:function(){return this.state.keyExchange}},{key:"sendMessage",value:function(e){return Jd(this,void 0,void 0,L().m(function t(){return L().w(function(t){for(;;)if(0===t.n)return t.a(2,function(e,t){return Jd(this,void 0,void 0,L().m(function n(){var r,i,o,a;return L().w(function(n){for(;;)switch(n.n){case 0:if(e.state.channelId){n.n=1;break}throw Bi.SocketService("handleSendMessage: no channelId - Create a channel first"),new Error("Create a channel first");case 1:if(Bi.SocketService("[SocketService: handleSendMessage()] context=".concat(e.state.context," areKeysExchanged=").concat(null===(r=e.state.keyExchange)||void 0===r?void 0:r.areKeysExchanged()),t),!(null===(i=null==t?void 0:t.type)||void 0===i?void 0:i.startsWith("key_handshake"))){n.n=2;break}return n.a(2,(function(e,t){var n;Bi.SocketService("[SocketService: handleKeyHandshake()] context=".concat(e.state.context),t),null===(n=e.state.socket)||void 0===n||n.emit(Zi.MESSAGE,{id:e.state.channelId,context:e.state.context,clientType:e.state.isOriginator?"dapp":"wallet",message:t})}(e,t),!0));case 2:return function(e,t){var n;if(!(null===(n=e.state.keyExchange)||void 0===n?void 0:n.areKeysExchanged())&&!e.remote.state.relayPersistence)throw Bi.SocketService("[SocketService: validateKeyExchange()] context=".concat(e.state.context," ERROR keys not exchanged"),t),new Error("Keys not exchanged BBB")}(e,t),function(e,t){var n,r=null!==(n=null==t?void 0:t.method)&&void 0!==n?n:"",i=null==t?void 0:t.id;e.state.isOriginator&&i&&(e.state.rpcMethodTracker[i]={id:i,timestamp:Date.now(),method:r},e.emit(Zi.RPC_UPDATE,e.state.rpcMethodTracker[i]))}(e,t),n.n=3,lp(e,t);case 3:return a=n.v,n.a(2,(e.remote.state.analytics&&e.remote.state.isOriginator&&t.method&&co.includes(t.method.toLowerCase())&&Hi({id:null!==(o=e.remote.state.channelId)&&void 0!==o?o:"",event:eo.SDK_RPC_REQUEST,params:{method:t.method,from:"mobile"}},e.remote.state.communicationServerUrl).catch(function(e){}),e.remote.state.isOriginator&&t.method&&cp(t.method)&&$.analytics.track("sdk_action_requested",{action:t.method}),function(e,t){return Jd(this,void 0,void 0,L().m(function n(){var r,i,o,a,s,c,u,l,d,f=this;return L().w(function(n){for(;;)switch(n.p=n.n){case 0:if(i=null==t?void 0:t.id,o=null!==(r=null==t?void 0:t.method)&&void 0!==r?r:"",!e.state.isOriginator||!i){n.n=7;break}return n.p=1,a=oo(i,e.state.rpcMethodTracker,200).then(function(e){return{type:so.RPC_CHECK,result:e}}),s=function(){return Jd(f,void 0,void 0,L().m(function t(){var n,r;return L().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,function(e){return Jd(void 0,[e],void 0,function(e){var t=e.rpcId,n=e.instance;return L().m(function e(){return L().w(function(e){for(;;)switch(e.n){case 0:if(n.state.lastRpcId!==t&&void 0!==n.state.lastRpcId){e.n=2;break}return e.n=1,io(200);case 1:e.n=0;break;case 2:return e.a(2,n.state.lastRpcId)}},e)})()})}({instance:e,rpcId:i});case 1:return n=t.v,t.n=2,oo(n,e.state.rpcMethodTracker,200);case 2:return r=t.v,t.a(2,{type:so.SKIPPED_RPC,result:r})}},t)}))}(),n.n=2,Promise.race([a,s]);case 2:if((c=n.v).type!==so.RPC_CHECK){n.n=3;break}u=c.result,Bi.SocketService("[SocketService:handleRpcReplies()] id=".concat(t.id," ").concat(o," ( ").concat(u.elapsedTime," ms)"),u.result),n.n=5;break;case 3:if(c.type===so.SKIPPED_RPC){n.n=4;break}throw new Error("Error handling RPC replies for ".concat(i));case 4:l=Object.assign(Object.assign({},e.state.rpcMethodTracker[i]),{error:new Error("SDK_CONNECTION_ISSUE")}),e.emit(Zi.RPC_UPDATE,l),d={data:Object.assign(Object.assign({},l),{jsonrpc:"2.0"}),name:"metamask-provider"},e.emit(Zi.MESSAGE,{message:d});case 5:n.n=7;break;case 6:throw n.p=6,n.v;case 7:return n.a(2)}},n,null,[[1,6]])}))}(e,t).catch(function(e){}),a))}},n)}))}(this,e))},t,this)}))}},{key:"ping",value:function(){return function(e){return Jd(this,void 0,void 0,L().m(function t(){var n,r;return L().w(function(t){for(;;)switch(t.n){case 0:Bi.SocketService("[SocketService: ping()] context=".concat(e.state.context," originator=").concat(e.state.isOriginator," keysExchanged=").concat(null===(n=e.state.keyExchange)||void 0===n?void 0:n.areKeysExchanged())),null===(r=e.state.socket)||void 0===r||r.emit(Xi.PING,{id:e.state.channelId,context:"ping",clientType:e.remote.state.isOriginator?"dapp":"wallet",message:""});case 1:return t.a(2)}},t)}))}(this)}},{key:"pause",value:function(){return function(e){return Jd(this,void 0,void 0,L().m(function t(){var n,r;return L().w(function(t){for(;;)switch(t.n){case 0:if(Bi.SocketService("[SocketService: pause()] context=".concat(e.state.context)),e.state.manualDisconnect=!0,!(!(null===(n=e.state.keyExchange)||void 0===n)&&n.areKeysExchanged())){t.n=1;break}return t.n=1,e.sendMessage({type:Xi.PAUSE});case 1:null===(r=e.state.socket)||void 0===r||r.disconnect();case 2:return t.a(2)}},t)}))}(this)}},{key:"isConnected",value:function(){var e;return null===(e=this.state.socket)||void 0===e?void 0:e.connected}},{key:"resume",value:function(){return function(e){return Jd(this,void 0,void 0,L().m(function t(){var n,r,i,o,a,s,c,u,l=this;return L().w(function(t){for(;;)switch(t.n){case 0:if(n=e.state,r=e.remote,i=n.socket,o=n.channelId,a=n.context,s=n.keyExchange,c=n.isOriginator,u=r.state.isOriginator,Bi.SocketService("[SocketService: resume()] channelId=".concat(o," context=").concat(a," connected=").concat(null==i?void 0:i.connected," manualDisconnect=").concat(n.manualDisconnect," resumed=").concat(n.resumed," keysExchanged=").concat(null==s?void 0:s.areKeysExchanged())),o){t.n=1;break}throw Bi.SocketService("[SocketService: resume()] channelId is not defined"),new Error("ChannelId is not defined");case 1:if(!(null==i?void 0:i.connected)){t.n=5;break}if(Bi.SocketService("[SocketService: resume()] already connected."),i.emit(Xi.PING,{id:o,clientType:u?"dapp":"wallet",context:"on_channel_config",message:""}),r.hasRelayPersistence()||null!=s&&s.areKeysExchanged()){t.n=4;break}if(!c){t.n=3;break}return t.n=2,e.sendMessage({type:Xi.READY});case 2:t.n=4;break;case 3:null==s||s.start({isOriginator:!1});case 4:t.n=6;break;case 5:null!=i&&i.connect(),Bi.SocketService("[SocketService: resume()] after connecting socket --\x3e connected=".concat(null==i?void 0:i.connected)),null==i||i.emit(Zi.JOIN_CHANNEL,{channelId:o,context:"".concat(a,"_resume"),clientType:u?"dapp":"wallet"},function(t,n){return Jd(l,void 0,void 0,L().m(function r(){return L().w(function(r){for(;;)switch(r.p=r.n){case 0:return r.p=0,r.n=1,ro(e,t,n);case 1:r.n=3;break;case 2:r.p=2,r.v;case 3:return r.a(2)}},r,null,[[0,2]])}))});case 6:n.manualDisconnect=!1,n.resumed=!0;case 7:return t.a(2)}},t)}))}(this)}},{key:"getRPCMethodTracker",value:function(){return this.state.rpcMethodTracker}},{key:"disconnect",value:function(e){return function(e,t){var n,r,i,o,a;Bi.SocketService("[SocketService: disconnect()] context=".concat(e.state.context),t),null!=t&&t.terminate&&(null===(r=(n=e.state).removeFocusListener)||void 0===r||r.call(n),e.state.channelId=t.channelId,null===(i=e.state.socket)||void 0===i||i.removeAllListeners(),null===(o=e.state.keyExchange)||void 0===o||o.clean(),e.remote.state.ready=!1,e.state.socket=void 0,e.state.rpcMethodTracker={}),e.state.manualDisconnect=!0,null===(a=e.state.socket)||void 0===a||a.disconnect()}(this,e)}}])}(q.EventEmitter2),(ho||i("CommunicationLayerPreference",ho={})).SOCKET="socket",function(e){e.NonBrowser="nodejs",e.MetaMaskMobileWebview="in-app-browser",e.DesktopWeb="web-desktop",e.MobileWeb="web-mobile",e.ReactNative="react-native"}(po||i("PlatformType",po={})),mo=function(e){function t(e){var n;p(this,t),(n=o(this,t)).state={ready:!1,anonId:"",authorized:!1,isOriginator:!1,terminated:!1,protocolVersion:1,paused:!1,deeplinkProtocolAvailable:!1,platformType:"metamask-mobile",analytics:!1,reconnection:!1,originatorInfoSent:!1,communicationServerUrl:qi,context:"",persist:!1,clientsConnected:!1,sessionDuration:Wi,originatorConnectStarted:!1,debug:!1,_connectionStatus:Yi.DISCONNECTED},n._options=e;var r=e.anonId,i=e.platformType,a=e.communicationLayerPreference,s=e.otherPublicKey,c=e.reconnect,u=e.walletInfo,l=e.dappMetadata,d=e.protocolVersion,f=e.transports,h=e.context,v=e.relayPersistence,m=e.ecies,g=e.analytics,y=void 0!==g&&g,b=e.storage,w=e.sdkVersion,E=e.communicationServerUrl,k=void 0===E?qi:E,_=e.logging,S=e.autoConnect,C=void 0===S?{timeout:3e3}:S;return n.state.anonId=r,n.state.otherPublicKey=s,n.state.dappMetadata=l,n.state.walletInfo=u,n.state.transports=f,n.state.platformType=i,n.state.analytics=y,n.state.protocolVersion=null!=d?d:1,n.state.isOriginator=!s,n.state.relayPersistence=v,n.state.communicationServerUrl=k,n.state.context=h,n.state.terminated=!1,n.state.sdkVersion=w,n.setMaxListeners(50),n.setConnectionStatus(Yi.DISCONNECTED),null!=b&&b.duration&&(n.state.sessionDuration=Wi),n.state.storageOptions=b,n.state.autoConnectOptions=C,n.state.debug=!0===(null==_?void 0:_.remoteLayer),!0===(null==_?void 0:_.remoteLayer)&&W.default.enable("RemoteCommunication:Layer"),!0===(null==_?void 0:_.serviceLayer)&&W.default.enable("SocketService:Layer"),!0===(null==_?void 0:_.eciesLayer)&&W.default.enable("ECIES:Layer"),!0===(null==_?void 0:_.keyExchangeLayer)&&W.default.enable("KeyExchange:Layer"),n.state.logging=_,null!=b&&b.storageManager&&(n.state.storageManager=b.storageManager),Bi.RemoteCommunication("[RemoteCommunication: constructor()] protocolVersion=".concat(d," relayPersistence=").concat(v," isOriginator=").concat(n.state.isOriginator," communicationLayerPreference=").concat(a," otherPublicKey=").concat(s," reconnect=").concat(c)),n.state.isOriginator||fp({communicationLayerPreference:a,otherPublicKey:s,reconnect:c,ecies:m,communicationServerUrl:k,instance:n}),n.emitServiceStatusEvent({context:"constructor"}),n}return s(t,e),h(t,[{key:"initFromDappStorage",value:function(){return Jd(this,void 0,void 0,L().m(function e(){var t,n;return L().w(function(e){for(;;)switch(e.n){case 0:if(!this.state.storageManager){e.n=2;break}return e.n=1,this.state.storageManager.getPersistedChannelConfig({});case 1:if(n=e.v,!n){e.n=2;break}if(this.state.channelConfig=n,this.state.channelId=n.channelId,this.state.deeplinkProtocolAvailable=null!==(t=n.deeplinkProtocolAvailable)&&void 0!==t&&t,!n.relayPersistence){e.n=2;break}return this.state.authorized=!0,this.state.ready=!0,this.setConnectionStatus(Yi.LINKED),e.n=2,this.connectToChannel({channelId:n.channelId});case 2:fp({communicationLayerPreference:ho.SOCKET,otherPublicKey:this.state.otherPublicKey,reconnect:this._options.reconnect,ecies:this._options.ecies,communicationServerUrl:this.state.communicationServerUrl,instance:this});case 3:return e.a(2)}},e,this)}))}},{key:"originatorSessionConnect",value:function(){return Jd(this,void 0,void 0,L().m(function e(){return L().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,function(e){return Jd(this,void 0,void 0,L().m(function t(){var n,r,i;return L().w(function(t){for(;;)switch(t.n){case 0:if((r=e.state).storageManager){t.n=1;break}return t.a(2,void Bi.RemoteCommunication("[RemoteCommunication: originatorSessionConnect()] no storage manager defined - skip"));case 1:return t.n=2,r.storageManager.getPersistedChannelConfig({});case 2:if(i=t.v,Bi.RemoteCommunication("[RemoteCommunication: originatorSessionConnect()] autoStarted=".concat(r.originatorConnectStarted," channelConfig"),i),!(null===(n=r.communicationLayer)||void 0===n?void 0:n.isConnected())){t.n=3;break}return t.a(2,(Bi.RemoteCommunication("[RemoteCommunication: originatorSessionConnect()] socket already connected - skip"),i));case 3:if(!i){t.n=5;break}if(!(i.validUntil>Date.now())){t.n=4;break}return t.a(2,(r.channelConfig=i,r.originatorConnectStarted=!0,r.channelId=null==i?void 0:i.channelId,r.reconnection=!0,i));case 4:Bi.RemoteCommunication("[RemoteCommunication: autoConnect()] Session has expired");case 5:r.originatorConnectStarted=!1;case 6:return t.a(2)}},t)}))}(this);case 1:return e.a(2,e.v)}},e,this)}))}},{key:"generateChannelIdConnect",value:function(){return Jd(this,void 0,void 0,L().m(function e(){return L().w(function(e){for(;;)if(0===e.n)return e.a(2,function(e){return Jd(this,void 0,void 0,L().m(function t(){var n,r,i,o,a,s,c,u;return L().w(function(t){for(;;)switch(t.n){case 0:if(e.communicationLayer){t.n=1;break}throw new Error("communication layer not initialized");case 1:if(!e.ready){t.n=2;break}throw new Error("Channel already connected");case 2:if(!e.channelId||!(null===(n=e.communicationLayer)||void 0===n?void 0:n.isConnected())){t.n=3;break}return t.a(2,(e.channelConfig=Object.assign(Object.assign({},e.channelConfig),{channelId:e.channelId,validUntil:Date.now()+e.sessionDuration}),null===(r=e.storageManager)||void 0===r||r.persistChannelConfig(e.channelConfig),{channelId:e.channelId,privKey:null===(o=null===(i=e.communicationLayer)||void 0===i?void 0:i.getKeyInfo())||void 0===o?void 0:o.ecies.private,pubKey:null===(s=null===(a=e.communicationLayer)||void 0===a?void 0:a.getKeyInfo())||void 0===s?void 0:s.ecies.public}));case 3:return Bi.RemoteCommunication("[RemoteCommunication: generateChannelId()]"),t.n=4,e.communicationLayer.createChannel();case 4:return c=t.v,Bi.RemoteCommunication("[RemoteCommunication: generateChannelId()] channel created",c),u=Object.assign(Object.assign({},e.channelConfig),{channelId:c.channelId,localKey:c.privKey,validUntil:Date.now()+e.sessionDuration}),t.a(2,(e.channelId=c.channelId,e.channelConfig=u,{channelId:e.channelId,pubKey:c.pubKey,privKey:c.privKey}))}},t)}))}(this.state))},e,this)}))}},{key:"clean",value:function(){return up(this.state)}},{key:"connectToChannel",value:function(e){var t=e.channelId,n=e.withKeyExchange;return function(e){return Jd(this,arguments,void 0,function(e){var t=e.channelId,n=e.withKeyExchange,r=e.authorized,i=e.state;return L().m(function e(){var o,a,s,c;return L().w(function(e){for(;;)switch(e.n){case 0:if(K(t)){e.n=1;break}throw Bi.RemoteCommunication("[RemoteCommunication: connectToChannel()] context=".concat(i.context," invalid channel channelId=").concat(t)),new Error("Invalid channel ".concat(t));case 1:if(Bi.RemoteCommunication("[RemoteCommunication: connectToChannel()] context=".concat(i.context," channelId=").concat(t," withKeyExchange=").concat(n)),!(null===(o=i.communicationLayer)||void 0===o?void 0:o.isConnected())){e.n=2;break}return e.a(2,void Bi.RemoteCommunication("[RemoteCommunication: connectToChannel()] context=".concat(i.context," already connected - interrupt connection.")));case 2:return i.channelId=t,e.n=3,null===(a=i.communicationLayer)||void 0===a?void 0:a.connectToChannel({channelId:t,authorized:r,withKeyExchange:n});case 3:c=Object.assign(Object.assign({},i.channelConfig),{channelId:t,validUntil:Date.now()+i.sessionDuration}),i.channelConfig=c,null===(s=i.storageManager)||void 0===s||s.persistChannelConfig(c);case 4:return e.a(2)}},e)})()})}({channelId:t,authorized:e.authorized,withKeyExchange:n,state:this.state})}},{key:"sendMessage",value:function(e){return Jd(this,void 0,void 0,L().m(function t(){var n,r;return L().w(function(t){for(;;)switch(t.p=t.n){case 0:return(n=this.state.isOriginator&&e.method&&cp(e.method))&&$.analytics.track("sdk_action_requested",{action:e.method}),t.p=1,t.n=2,function(e,t){return Jd(this,void 0,void 0,L().m(function n(){var r,i,o;return L().w(function(n){for(;;)switch(n.p=n.n){case 0:if(o=e.state,Bi.RemoteCommunication("[RemoteCommunication: sendMessage()] context=".concat(o.context," paused=").concat(o.paused," ready=").concat(o.ready," relayPersistence=").concat(o.relayPersistence," authorized=").concat(o.authorized," socket=").concat(null===(r=o.communicationLayer)||void 0===r?void 0:r.isConnected()," clientsConnected=").concat(o.clientsConnected," status=").concat(o._connectionStatus),t),o.relayPersistence||o.ready&&!(null===(i=o.communicationLayer)||void 0===i)&&i.isConnected()&&o.clientsConnected){n.n=2;break}return Bi.RemoteCommunication("[RemoteCommunication: sendMessage()] context=".concat(o.context,"  SKIP message waiting for MM mobile readiness.")),n.n=1,new Promise(function(t){e.once(Zi.CLIENTS_READY,t)});case 1:Bi.RemoteCommunication("[RemoteCommunication: sendMessage()] context=".concat(o.context,"  AFTER SKIP / READY -- sending pending message"));case 2:return n.p=2,n.n=3,function(e,t){return Jd(this,void 0,void 0,L().m(function n(){return L().w(function(n){for(;;)if(0===n.n)return n.a(2,new Promise(function(n){var r,i=e.state;Bi.RemoteCommunication("[RemoteCommunication: handleAuthorization()] context=".concat(i.context," ready=").concat(i.ready," authorized=").concat(i.authorized," method=").concat(t.method)),!i.isOriginator||i.authorized||i.relayPersistence?null===(r=i.communicationLayer)||void 0===r||r.sendMessage(t).then(function(e){n(e)}).catch(function(e){n(!1)}):e.once(Zi.AUTHORIZED,function(){var e;Bi.RemoteCommunication("[RemoteCommunication: handleAuthorization()] context=".concat(i.context,"  AFTER SKIP / AUTHORIZED -- sending pending message")),null===(e=i.communicationLayer)||void 0===e||e.sendMessage(t).then(function(e){n(e)}).catch(function(e){n(!1)})})}))},n)}))}(e,t);case 3:return n.a(2,n.v);case 4:throw n.p=4,n.v;case 5:return n.a(2)}},n,null,[[2,4]])}))}(this,e);case 2:return t.a(2,t.v);case 3:throw t.p=3,r=t.v,n&&$.analytics.track("sdk_action_failed",{action:e.method}),r;case 4:return t.a(2)}},t,this,[[1,3]])}))}},{key:"testStorage",value:function(){return Jd(this,void 0,void 0,L().m(function e(){return L().w(function(e){for(;;)if(0===e.n)return e.a(2,function(e){return Jd(this,void 0,void 0,L().m(function t(){var n,r;return L().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,null===(n=e.storageManager)||void 0===n?void 0:n.getPersistedChannelConfig();case 1:r=t.v,Bi.RemoteCommunication("[RemoteCommunication: testStorage()] res",r);case 2:return t.a(2)}},t)}))}(this.state))},e,this)}))}},{key:"hasDeeplinkProtocol",value:function(){return this.state.deeplinkProtocolAvailable}},{key:"getChannelConfig",value:function(){return this.state.channelConfig}},{key:"isReady",value:function(){return this.state.ready}},{key:"isConnected",value:function(){var e;return null===(e=this.state.communicationLayer)||void 0===e?void 0:e.isConnected()}},{key:"isAuthorized",value:function(){return this.state.authorized}},{key:"isPaused",value:function(){return this.state.paused}},{key:"getCommunicationLayer",value:function(){return this.state.communicationLayer}},{key:"ping",value:function(){return Jd(this,void 0,void 0,L().m(function e(){var t;return L().w(function(e){for(;;)switch(e.n){case 0:return Bi.RemoteCommunication("[RemoteCommunication: ping()] channel=".concat(this.state.channelId)),e.n=1,null===(t=this.state.communicationLayer)||void 0===t?void 0:t.ping();case 1:return e.a(2)}},e,this)}))}},{key:"testLogger",value:function(){Bi.RemoteCommunication("testLogger() channel=".concat(this.state.channelId)),Bi.SocketService("testLogger() channel=".concat(this.state.channelId)),Bi.Ecies("testLogger() channel=".concat(this.state.channelId)),Bi.KeyExchange("testLogger() channel=".concat(this.state.channelId))}},{key:"keyCheck",value:function(){var e;Bi.RemoteCommunication("[RemoteCommunication: keyCheck()] channel=".concat(this.state.channelId)),null===(e=this.state.communicationLayer)||void 0===e||e.keyCheck()}},{key:"setConnectionStatus",value:function(e){this.state._connectionStatus!==e&&(this.state._connectionStatus=e,this.emit(Zi.CONNECTION_STATUS,e),this.emitServiceStatusEvent({context:"setConnectionStatus"}))}},{key:"emitServiceStatusEvent",value:function(){this.emit(Zi.SERVICE_STATUS,this.getServiceStatus())}},{key:"getConnectionStatus",value:function(){return this.state._connectionStatus}},{key:"getServiceStatus",value:function(){return{originatorInfo:this.state.originatorInfo,keyInfo:this.getKeyInfo(),connectionStatus:this.state._connectionStatus,channelConfig:this.state.channelConfig,channelId:this.state.channelId}}},{key:"getKeyInfo",value:function(){var e;return null===(e=this.state.communicationLayer)||void 0===e?void 0:e.getKeyInfo()}},{key:"resetKeys",value:function(){var e;null===(e=this.state.communicationLayer)||void 0===e||e.resetKeys()}},{key:"setOtherPublicKey",value:function(e){var t,n=null===(t=this.state.communicationLayer)||void 0===t?void 0:t.getKeyExchange();if(!n)throw new Error("KeyExchange is not initialized.");n.getOtherPublicKey()!==e&&n.setOtherPublicKey(e)}},{key:"pause",value:function(){return Jd(this,void 0,void 0,L().m(function e(){var t;return L().w(function(e){for(;;)switch(e.n){case 0:return Bi.RemoteCommunication("[RemoteCommunication: pause()] channel=".concat(this.state.channelId)),e.n=1,null===(t=this.state.communicationLayer)||void 0===t?void 0:t.pause();case 1:this.setConnectionStatus(Yi.PAUSED);case 2:return e.a(2)}},e,this)}))}},{key:"getVersion",value:function(){return zi.version}},{key:"hasRelayPersistence",value:function(){var e;return null!==(e=this.state.relayPersistence)&&void 0!==e&&e}},{key:"resume",value:function(){return Jd(this,void 0,void 0,L().m(function e(){return L().w(function(e){for(;;)if(0===e.n)return e.a(2,function(e){return Jd(this,void 0,void 0,L().m(function t(){var n,r;return L().w(function(t){for(;;)switch(t.n){case 0:return r=e.state,Bi.RemoteCommunication("[RemoteCommunication: resume()] channel=".concat(r.channelId)),t.n=1,null===(n=r.communicationLayer)||void 0===n?void 0:n.resume();case 1:e.setConnectionStatus(Yi.LINKED);case 2:return t.a(2)}},t)}))}(this))},e,this)}))}},{key:"encrypt",value:function(e){var t,n,r,i=null===(t=this.state.communicationLayer)||void 0===t?void 0:t.getKeyExchange(),o=null==i?void 0:i.getOtherPublicKey();if(!o)throw new Error("KeyExchange not completed");return null===(r=null===(n=this.state.communicationLayer)||void 0===n?void 0:n.state.eciesInstance)||void 0===r?void 0:r.encrypt(e,o)}},{key:"decrypt",value:function(e){var t,n,r;if(!(null===(t=this.state.communicationLayer)||void 0===t?void 0:t.state.eciesInstance))throw new Error("ECIES instance is not initialized");return null===(r=null===(n=this.state.communicationLayer)||void 0===n?void 0:n.state.eciesInstance)||void 0===r?void 0:r.decrypt(e)}},{key:"getChannelId",value:function(){return this.state.channelId}},{key:"getRPCMethodTracker",value:function(){var e;return null===(e=this.state.communicationLayer)||void 0===e?void 0:e.getRPCMethodTracker()}},{key:"reject",value:function(e){return function(e){return Jd(this,arguments,void 0,function(e){var t=e.channelId,n=e.state;return L().m(function e(){var r,i,o,a,s;return L().w(function(e){for(;;)switch(e.n){case 0:if(K(t)){e.n=1;break}throw Bi.RemoteCommunication("[RemoteCommunication: connectToChannel()] context=".concat(n.context," invalid channel channelId=").concat(t)),new Error("Invalid channel ".concat(t));case 1:if(!n.isOriginator){e.n=2;break}return e.a(2,void Bi.RemoteCommunication("[RemoteCommunication: reject()] context=".concat(n.context," isOriginator=").concat(n.isOriginator," channelId=").concat(t)));case 2:return a=null!==(i=null===(r=n.communicationLayer)||void 0===r?void 0:r.state)&&void 0!==i?i:{},null!=(s=a.socket)&&s.connected||(Bi.RemoteCommunication("[RemoteCommunication: reject()] context=".concat(n.context," socket already connected")),null!=s&&s.connect()),Hi(Object.assign(Object.assign({id:t,event:eo.REJECTED},n.originatorInfo),{sdkVersion:n.sdkVersion,commLayerVersion:zi.version,walletVersion:null===(o=n.walletInfo)||void 0===o?void 0:o.version}),n.communicationServerUrl).catch(function(e){}),e.n=3,new Promise(function(e,r){null==s||s.emit(Zi.REJECTED,{channelId:t},function(t,i){Bi.RemoteCommunication("[RemoteCommunication: reject()] context=".concat(n.context," socket=").concat(null==s?void 0:s.id),{error:t,response:i}),t?r(t):e(i)})});case 3:return e.a(2)}},e)})()})}({channelId:e.channelId,state:this.state})}},{key:"disconnect",value:function(e){return Jd(this,void 0,void 0,L().m(function t(){return L().w(function(t){for(;;)if(0===t.n)return t.a(2,hp({options:e,instance:this}))},t,this)}))}}])}(q.EventEmitter2),function(e){e.RENEW="renew",e.LINK="link"}(vo||(vo={})),go="ERC721",yo="ERC1155",bo={errors:{disconnected:function(){return"MetaMask: Disconnected from chain. Attempting to connect."},permanentlyDisconnected:function(){return"MetaMask: Disconnected from MetaMask background. Page reload required."},sendSiteMetadata:function(){return"MetaMask: Failed to send site metadata. This is an internal error, please report this bug."},unsupportedSync:function(e){return"MetaMask: The MetaMask Ethereum provider does not support synchronous methods like ".concat(e," without a callback parameter.")},invalidDuplexStream:function(){return"Must provide a Node.js-style duplex stream."},invalidNetworkParams:function(){return"MetaMask: Received invalid network parameters. Please report this bug."},invalidRequestArgs:function(){return"Expected a single, non-array, object argument."},invalidRequestMethod:function(){return"'args.method' must be a non-empty string."},invalidRequestParams:function(){return"'args.params' must be an object or array if provided."},invalidLoggerObject:function(){return"'args.logger' must be an object if provided."},invalidLoggerMethod:function(e){return"'args.logger' must include required method '".concat(e,"'.")}},info:{connected:function(e){return'MetaMask: Connected to chain with ID "'.concat(e,'".')}},warnings:{chainIdDeprecation:"MetaMask: 'ethereum.chainId' is deprecated and may be removed in the future. Please use the 'eth_chainId' RPC method instead.\nFor more information, see: https://github.com/MetaMask/metamask-improvement-proposals/discussions/23",networkVersionDeprecation:"MetaMask: 'ethereum.networkVersion' is deprecated and may be removed in the future. Please use the 'net_version' RPC method instead.\nFor more information, see: https://github.com/MetaMask/metamask-improvement-proposals/discussions/23",selectedAddressDeprecation:"MetaMask: 'ethereum.selectedAddress' is deprecated and may be removed in the future. Please use the 'eth_accounts' RPC method instead.\nFor more information, see: https://github.com/MetaMask/metamask-improvement-proposals/discussions/23",enableDeprecation:"MetaMask: 'ethereum.enable()' is deprecated and may be removed in the future. Please use the 'eth_requestAccounts' RPC method instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1102",sendDeprecation:"MetaMask: 'ethereum.send(...)' is deprecated and may be removed in the future. Please use 'ethereum.sendAsync(...)' or 'ethereum.request(...)' instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193",events:{close:"MetaMask: The event 'close' is deprecated and may be removed in the future. Please use 'disconnect' instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193#disconnect",data:"MetaMask: The event 'data' is deprecated and will be removed in the future. Use 'message' instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193#message",networkChanged:"MetaMask: The event 'networkChanged' is deprecated and may be removed in the future. Use 'chainChanged' instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193#chainchanged",notification:"MetaMask: The event 'notification' is deprecated and may be removed in the future. Use 'message' instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193#message"},rpc:{ethDecryptDeprecation:"MetaMask: The RPC method 'eth_decrypt' is deprecated and may be removed in the future.\nFor more information, see: https://medium.com/metamask/metamask-api-method-deprecation-2b0564a84686",ethGetEncryptionPublicKeyDeprecation:"MetaMask: The RPC method 'eth_getEncryptionPublicKey' is deprecated and may be removed in the future.\nFor more information, see: https://medium.com/metamask/metamask-api-method-deprecation-2b0564a84686",walletWatchAssetNFTExperimental:"MetaMask: The RPC method 'wallet_watchAsset' is experimental for ERC721/ERC1155 assets and may change in the future.\nFor more information, see: https://github.com/MetaMask/metamask-improvement-proposals/blob/main/MIPs/mip-1.md and https://github.com/MetaMask/metamask-improvement-proposals/blob/main/PROCESS-GUIDE.md#proposal-lifecycle"},experimentalMethods:"MetaMask: 'ethereum._metamask' exposes non-standard, experimental methods. They may be removed or changed without warning."}},wo=4294967295,Eo=Math.floor(Math.random()*wo),ko=function(e,t,n){if(!t.has(e))throw TypeError("Cannot "+n)},_o=function(e,t,n){return ko(e,t,"read from private field"),n?n.call(e):t.get(e)},So=function(e,t,n){if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Co=function(e,t,n,r){return ko(e,t,"write to private field"),t.set(e,n),n},Ao=function(e,t,n){return ko(e,t,"access private method"),n},xo={invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},Mo={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},To=function(e,t){return Object.hasOwnProperty.call(e,t)},Oo=function(e){function t(e,r){var i,s;p(this,t);var c=e.message,u=e.explanation,l=v(e,n),d=e.path,f=0===d.length?c:"At path: ".concat(d.join(".")," -- ").concat(c);return i=o(this,t,[null!=u?u:f]),null!=u&&(i.cause=f),Object.assign(a(i),l),i.name=i.constructor.name,i.failures=function(){return null!=s?s:s=[e].concat(E(r()))},i}return s(t,e),h(t)}(c(TypeError)),Ro=function(){return h(function e(t){var n=this;p(this,e);var r=t.type,i=t.schema,o=t.validator,a=t.refiner,s=t.coercer,c=void 0===s?function(e){return e}:s,u=t.entries,l=void 0===u?L().m(function e(){return L().w(function(e){for(;;)if(0===e.n)return e.a(2)},e)}):u;this.type=r,this.schema=i,this.entries=l,this.coercer=c,this.validator=o?function(e,t){return bp(o(e,t),t,n,e)}:function(){return[]},this.refiner=a?function(e,t){return bp(a(e,t),t,n,e)}:function(){return[]}},[{key:"assert",value:function(e,t){return Ep(e,this,t)}},{key:"create",value:function(e,t){return kp(e,this,t)}},{key:"is",value:function(e){return _p(e,this)}},{key:"mask",value:function(e,t){return function(e,t,n){var r=Sp(e,t,{coerce:!0,mask:!0,message:n});if(r[0])throw r[0];return r[1]}(e,this,t)}},{key:"validate",value:function(e){return Sp(e,this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}}])}(),Po=function(e){function t(e){var n;return p(this,t),(n=o(this,t,[e.message])).code="ERR_ASSERTION",n}return s(t,e),h(t)}(c(Error)),Io=Np,Lo=Dp,"function"==typeof tt.setTimeout&&(Io=setTimeout),"function"==typeof tt.clearTimeout&&(Lo=clearTimeout),Do=[],Bo=!1,jo=-1,Up.prototype.run=function(){this.fun.apply(null,this.array)},Ko=Hp,Uo=Hp,Ho=Hp,Fo=Hp,zo=Hp,qo=Hp,$o=Hp,Wo=tt.performance||{},Vo=Wo.now||Wo.mozNow||Wo.msNow||Wo.oNow||Wo.webkitNow||function(){return(new Date).getTime()},Go=new Date,Yo={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];Do.push(new Up(e,t)),1!==Do.length||Bo||Bp(Kp)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:Ko,addListener:Uo,once:Ho,off:Fo,removeListener:zo,removeAllListeners:qo,emit:$o,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*Vo.call(Wo),n=Math.floor(t),r=Math.floor(t%1*1e9);return e&&(n-=e[0],(r-=e[1])<0&&(n--,r+=1e9)),[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-Go)/1e3}},Zo=function(e){return Op(e)},ea=Lp([Mp(null),Cp("boolean",function(e){return"boolean"==typeof e}),Cp("finite number",function(e){return _p(e,Tp())&&Number.isFinite(e)}),Ip(),xp(Ap(function(){return ea})),Pp(Ip(),Ap(function(){return ea}))]),Jo=ea,Qo=Cp("any",function(){return!0}),Xo=function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Assertion failed",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Po;try{Ep(e,t)}catch(i){throw function(e,t){var n;return Boolean("string"==typeof(null===(n=e)||void 0===n||null===(n=n.prototype)||void 0===n||null===(n=n.constructor)||void 0===n?void 0:n.name))?new e({message:t}):e({message:t})}(r,"".concat(n,": ").concat(function(e){return(t=e,"object"==D(n=t)&&null!==n&&"message"in n&&"string"==typeof t.message?t.message:null==t?"":String(t)).replace(/\.$/,"");var t,n}(i),"."))}}(e,ea),JSON.parse(JSON.stringify(e,function(e,t){if("__proto__"!==e&&"constructor"!==e)return t}))},ta=new Ro(A(A({},Jo),{},{coercer:function(e,t){return _p(e,Qo)?Jo.coercer(Xo(e),t):Jo.coercer(e,t)}})),na=Mp("2.0"),ra=function(e){return new Ro(A(A({},e),{},{validator:function(t,n){return null===t||e.validator(t,n)},refiner:function(t,n){return null===t||e.refiner(t,n)}}))}(Lp([Tp(),Ip()])),ia=Zo({code:Cp("integer",function(e){return"number"==typeof e&&!isNaN(e)&&Number.isInteger(e)||"Expected an integer, but received: ".concat(gp(e))}),message:Ip(),data:zp(ta),stack:zp(Ip())}),oa=Lp([Pp(Ip(),ta),xp(ta)]),aa=Zo({id:ra,jsonrpc:na,method:Ip(),params:zp(oa)}),sa=Zo({jsonrpc:na,method:Ip(),params:zp(oa)}),Op({id:ra,jsonrpc:na,result:Rp(Cp("unknown",function(){return!0})),error:Rp(ia)}),Lp([Zo({id:ra,jsonrpc:na,result:ta}),Zo({id:ra,jsonrpc:na,error:ia})]),ua="Unspecified error message. This is a bug, please report it.",la={code:ca=xo.internal,message:Vp(ca)},da="Unspecified server error.",fa=Qp,Qp.default=Qp,Qp.stable=nv,Qp.stableStringify=nv,ha="[...]",pa="[Circular]",va=[],ma=[],ga=zf(fa),ya=function(e){function t(e,n,r){var i;if(p(this,t),!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!n||"string"!=typeof n)throw new Error('"message" must be a non-empty string.');return(i=o(this,t,[n])).code=e,void 0!==r&&(i.data=r),i}return s(t,e),h(t,[{key:"serialize",value:function(){var e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data,function(e){if("object"!=D(e)||null===e)return!1;try{for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(n){return!1}}(this.data)&&(e.data.cause=Yp(this.data.cause))),this.stack&&(e.stack=this.stack),e}},{key:"toString",value:function(){return ga(this.serialize(),ov,2)}}])}(c(Error)),ba=function(e){return function(e,t){var n=x(function(e){if(e){if("string"==typeof e)return[e];if("object"==D(e)&&!Array.isArray(e)){var t=e.message,n=e.data;if(t&&"string"!=typeof t)throw new Error("Must specify string message.");return[null!=t?t:void 0,n]}}return[]}(t),2),r=n[0],i=n[1];return new ya(e,null!=r?r:Vp(e),i)}(xo.invalidRequest,e)},wa={},av.prototype=Object.create(null),sv.EventEmitter=sv,sv.usingDomains=!1,sv.prototype.domain=void 0,sv.prototype._events=void 0,sv.prototype._maxListeners=void 0,sv.defaultMaxListeners=10,sv.init=function(){this.domain=null,sv.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new av,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},sv.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},sv.prototype.getMaxListeners=function(){return cv(this)},sv.prototype.emit=function(e){var t,n,r,i,o,a,s,c="error"===e;if(a=this._events)c=c&&null==a.error;else if(!c)return!1;if(s=this.domain,c){if(t=arguments[1],!s){if(t instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}return t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=s,t.domainThrown=!1,s.emit("error",t),!1}if(!(n=a[e]))return!1;var l="function"==typeof n;switch(r=arguments.length){case 1:!function(e,t,n){if(t)e.call(n);else for(var r=e.length,i=fv(e,r),o=0;o<r;++o)i[o].call(n)}(n,l,this);break;case 2:!function(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,o=fv(e,i),a=0;a<i;++a)o[a].call(n,r)}(n,l,this,arguments[1]);break;case 3:!function(e,t,n,r,i){if(t)e.call(n,r,i);else for(var o=e.length,a=fv(e,o),s=0;s<o;++s)a[s].call(n,r,i)}(n,l,this,arguments[1],arguments[2]);break;case 4:!function(e,t,n,r,i,o){if(t)e.call(n,r,i,o);else for(var a=e.length,s=fv(e,a),c=0;c<a;++c)s[c].call(n,r,i,o)}(n,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),o=1;o<r;o++)i[o-1]=arguments[o];!function(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,o=fv(e,i),a=0;a<i;++a)o[a].apply(n,r)}(n,l,this,i)}return!0},sv.prototype.addListener=function(e,t){return uv(this,e,t,!1)},sv.prototype.on=sv.prototype.addListener,sv.prototype.prependListener=function(e,t){return uv(this,e,t,!0)},sv.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,lv(this,e,t)),this},sv.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,lv(this,e,t)),this},sv.prototype.removeListener=function(e,t){var n,r,i,o,a;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(r=this._events))return this;if(!(n=r[e]))return this;if(n===t||n.listener&&n.listener===t)0==--this._eventsCount?this._events=new av:(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length;o-- >0;)if(n[o]===t||n[o].listener&&n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new av,this;delete r[e]}else!function(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}(n,i);r.removeListener&&this.emit("removeListener",e,a||t)}return this},sv.prototype.off=function(e,t){return this.removeListener(e,t)},sv.prototype.removeAllListeners=function(e){var t,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new av,this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=new av:delete n[e]),this;if(0===arguments.length){for(var r,i=Object.keys(n),o=0;o<i.length;++o)"removeListener"!==(r=i[o])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=new av,this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)do{this.removeListener(e,t[t.length-1])}while(t[0]);return this},sv.prototype.listeners=function(e){var t,n=this._events;return n&&(t=n[e])?"function"==typeof t?[t.listener||t]:function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(t):[]},sv.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):dv.call(e,t)},sv.prototype.listenerCount=dv,sv.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]},Ea=qf(Object.freeze({__proto__:null,EventEmitter:sv,default:sv})),Object.defineProperty(wa,"__esModule",{value:!0}),ka=function(e){function t(){return p(this,t),o(this,t,arguments)}return s(t,e),h(t,[{key:"emit",value:function(e){var t="error"===e,n=this._events;if(void 0!==n)t=t&&void 0===n.error;else if(!t)return!1;for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];if(t){var a;if(i.length>0&&(a=x(i,1)[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" (".concat(a.message,")"):""));throw s.context=a,s}var c=n[e];if(void 0===c)return!1;if("function"==typeof c)hv(c,this,i);else for(var u=c.length,l=function(e){for(var t=e.length,n=new Array(t),r=0;r<t;r+=1)n[r]=e[r];return n}(c),d=0;d<u;d+=1)hv(l[d],this,i);return!0}}])}(Ea.EventEmitter),Fa=wa.default=ka,za=function(e){function t(){var e,n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).notificationHandler;return p(this,t),e=o(this,t),So(a(e),Aa),So(a(e),Ma),So(a(e),Oa),So(a(e),_a,!1),So(a(e),Sa,void 0),So(a(e),Ca,void 0),Co(a(e),Sa,[]),Co(a(e),Ca,n),e}return s(t,e),h(t,[{key:"destroy",value:function(){_o(this,Sa).forEach(function(e){"destroy"in e&&"function"==typeof e.destroy&&e.destroy()}),Co(this,Sa,[]),Co(this,_a,!0)}},{key:"push",value:function(e){Ao(this,Aa,xa).call(this),_o(this,Sa).push(e)}},{key:"handle",value:function(e,t){if(Ao(this,Aa,xa).call(this),t&&"function"!=typeof t)throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?t?Ao(this,Ma,Ta).call(this,e,t):Ao(this,Ma,Ta).call(this,e):t?Ao(this,Oa,Ra).call(this,e,t):this._promiseHandle(e)}},{key:"asMiddleware",value:function(){var e=this;return Ao(this,Aa,xa).call(this),function(){var n=g(L().m(function n(r,i,o,a){var s,c,u,l,d,f,h,p,v;return L().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,n.n=1,Ao(s=t,La,Na).call(s,r,i,_o(e,Sa));case 1:if(u=n.v,l=x(u,3),d=l[0],f=l[1],h=l[2],!f){n.n=3;break}return n.n=2,Ao(c=t,ja,Ka).call(c,h);case 2:p=a(d),n.n=4;break;case 3:p=o(function(){var e=g(L().m(function e(n){var r,i;return L().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,Ao(r=t,ja,Ka).call(r,h);case 1:e.n=3;break;case 2:return e.p=2,i=e.v,e.a(2,n(i));case 3:return e.a(2,n())}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}());case 4:return n.a(2,p);case 5:return n.p=5,v=n.v,n.a(2,a(v))}},n,null,[[0,5]])}));return function(e,t,r,i){return n.apply(this,arguments)}}()}},{key:"_promiseHandle",value:(n=g(L().m(function e(t){var n=this;return L().w(function(e){for(;;)if(0===e.n)return e.a(2,new Promise(function(e,r){Ao(n,Oa,Ra).call(n,t,function(t,n){t&&void 0===n?r(t):e(n)}).catch(r)}))},e)})),function(e){return n.apply(this,arguments)})}]);var n}(Fa),_a=new WeakMap,Sa=new WeakMap,Ca=new WeakMap,Aa=new WeakSet,xa=function(){if(_o(this,_a))throw new Error("This engine is destroyed and can no longer be used.")},Ma=new WeakSet,Ta=function(){var e=g(L().m(function e(t,n){var r,i,o;return L().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,0!==t.length){e.n=1;break}return r=[{id:null,jsonrpc:"2.0",error:new ya(xo.invalidRequest,"Request batch must contain plain objects. Received an empty array")}],e.a(2,n?n(null,r):r);case 1:return e.n=2,Promise.all(t.map(this._promiseHandle.bind(this)));case 2:return i=e.v.filter(function(e){return void 0!==e}),e.a(2,n?n(null,i):i);case 3:if(e.p=3,o=e.v,!n){e.n=4;break}return e.a(2,n(o));case 4:throw o;case 5:return e.a(2)}},e,this,[[0,3]])}));return function(t,n){return e.apply(this,arguments)}}(),Oa=new WeakSet,Ra=function(){var e=g(L().m(function e(t,n){var r,i,o,a,s,c,u,l,d;return L().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t&&!Array.isArray(t)&&"object"==D(t)){e.n=1;break}return i=new ya(xo.invalidRequest,"Requests must be plain objects. Received: "+D(t),{request:t}),e.a(2,n(i,{id:null,jsonrpc:"2.0",error:i}));case 1:if("string"==typeof t.method){e.n=2;break}return a=new ya(xo.invalidRequest,"Must specify a string method. Received: "+D(t.method),{request:t}),e.a(2,_o(this,Ca)&&!$p(t)?n(null):n(a,{id:null!==(o=t.id)&&void 0!==o?o:null,jsonrpc:"2.0",error:a}));case 2:if(!_o(this,Ca)||!_p(t,sa)||$p(t)){e.n=7;break}return e.p=3,e.n=4,_o(this,Ca).call(this,t);case 4:e.n=6;break;case 5:return e.p=5,l=e.v,e.a(2,n(l));case 6:return e.a(2,n(null));case 7:return s=null,c=A({},t),u={id:c.id,jsonrpc:c.jsonrpc},e.p=8,e.n=9,Ao(r=za,Pa,Ia).call(r,c,u,_o(this,Sa));case 9:e.n=11;break;case 10:e.p=10,d=e.v,s=d;case 11:return e.a(2,(s&&(delete u.result,u.error||(u.error=Gp(s))),n(s,u)))}},e,this,[[8,10],[3,5]])}));return function(t,n){return e.apply(this,arguments)}}(),Pa=new WeakSet,Ia=function(){var e=g(L().m(function e(t,n,r){var i,o,a,s,c,u,l,d;return L().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Ao(i=za,La,Na).call(i,t,n,r);case 1:return s=e.v,c=x(s,3),u=c[0],l=c[1],d=c[2],Ao(o=za,Ua,Ha).call(o,t,n,l),e.n=2,Ao(a=za,ja,Ka).call(a,d);case 2:if(!u){e.n=3;break}throw u;case 3:return e.a(2)}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),La=new WeakSet,Na=function(){var e=g(L().m(function e(t,n,r){var i,o,a,s,c,u,l,d,f,h;return L().w(function(e){for(;;)switch(e.p=e.n){case 0:o=[],a=null,s=!1,c=_(r),e.p=1,c.s();case 2:if((u=c.n()).done){e.n=5;break}return f=u.value,e.n=3,Ao(i=za,Da,Ba).call(i,t,n,f,o);case 3:if(l=e.v,d=x(l,2),a=d[0],!(s=d[1])){e.n=4;break}return e.a(3,5);case 4:e.n=2;break;case 5:e.n=7;break;case 6:e.p=6,h=e.v,c.e(h);case 7:return e.p=7,c.f(),e.f(7);case 8:return e.a(2,[a,s,o.reverse()])}},e,null,[[1,6,7,8]])}));return function(t,n,r){return e.apply(this,arguments)}}(),Da=new WeakSet,Ba=function(){var e=g(L().m(function e(t,n,r,i){return L().w(function(e){for(;;)if(0===e.n)return e.a(2,new Promise(function(e){var o=function(t){var r=t||n.error;r&&(n.error=Gp(r)),e([r,!0])};try{r(t,n,function(r){n.error?o(n.error):(r&&("function"!=typeof r&&o(new ya(xo.internal,'JsonRpcEngine: "next" return handlers must be functions. Received "'.concat(D(r),'" for request:\n').concat(pv(t)),{request:t})),i.push(r)),e([null,!1]))},o)}catch(a){o(a)}}))},e)}));return function(t,n,r,i){return e.apply(this,arguments)}}(),ja=new WeakSet,Ka=function(){var e=g(L().m(function e(t){var n,r,i,o;return L().w(function(e){for(;;)switch(e.p=e.n){case 0:n=_(t),e.p=1,i=L().m(function e(){var t;return L().w(function(e){for(;;)switch(e.n){case 0:return t=r.value,e.n=1,new Promise(function(e,n){t(function(t){return t?n(t):e()})});case 1:return e.a(2)}},e)}),n.s();case 2:if((r=n.n()).done){e.n=4;break}return e.d(w(i()),3);case 3:e.n=2;break;case 4:e.n=6;break;case 5:e.p=5,o=e.v,n.e(o);case 6:return e.p=6,n.f(),e.f(6);case 7:return e.a(2)}},e,null,[[1,5,6,7]])}));return function(t){return e.apply(this,arguments)}}(),Ua=new WeakSet,Ha=function(e,t,n){if(!To(t,"result")&&!To(t,"error"))throw new ya(xo.internal,"JsonRpcEngine: Response has no error or result for request:\n".concat(pv(e)),{request:e});if(!n)throw new ya(xo.internal,"JsonRpcEngine: Nothing ended request:\n".concat(pv(e)),{request:e})},So(za,Pa),So(za,La),So(za,Da),So(za,ja),So(za,Ua),qa=za,$a=Object.freeze(["eth_subscription"]),Wa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:console;return[function(e,t,n,r){var i=e.id,o=Eo=(Eo+1)%wo;e.id=o,t.id=o,n(function(n){e.id=i,t.id=i,n()})},vv(e),pp(e)]},Va=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function(r,i){r||i.error?t(r||i.error):!n||Array.isArray(i)?e(i):e(i.result)}},Ga=function(e){return Boolean(e)&&"string"==typeof e&&e.startsWith("0x")},Ya=function(){},Za=function(e,t,n){if(!t.has(e))throw TypeError("Cannot "+n)},Ja=function(e,t,n){return Za(e,t,"read from private field"),n?n.call(e):t.get(e)},Qa=function(e,t,n){if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Xa=function(e,t,n,r){return Za(e,t,"write to private field"),t.set(e,n),n},es=function(e){function t(){return p(this,t),o(this,t,arguments)}return s(t,e),h(t,[{key:"emit",value:function(e){var t="error"===e,n=this._events;if(void 0!==n)t=t&&void 0===n.error;else if(!t)return!1;for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];if(t){var a;if(i.length>0&&(a=x(i,1)[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" (".concat(a.message,")"):""));throw s.context=a,s}var c=n[e];if(void 0===c)return!1;if("function"==typeof c)_v(c,this,i);else for(var u=c.length,l=function(e){for(var t=e.length,n=new Array(t),r=0;r<t;r+=1)n[r]=e[r];return n}(c),d=0;d<u;d+=1)_v(l[d],this,i);return!0}}])}(sv),rs=zf(function e(t,n){if(t===n)return!0;if(t&&n&&"object"==D(t)&&"object"==D(n)){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!=i--;){var a=o[i];if(!e(t[a],n[a]))return!1}return!0}return t!=t&&n!=n}),is=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.logger,i=void 0===r?console:r,s=n.maxEventListeners,c=void 0===s?100:s,u=n.rpcMiddleware,l=void 0===u?[]:u;p(this,t),e=o(this,t),Qa(a(e),ts,void 0),Qa(a(e),ns,void 0),e._log=i,e.setMaxListeners(c),e._state=A({},t._defaultState),Xa(a(e),ns,null),Xa(a(e),ts,null),e._handleAccountsChanged=e._handleAccountsChanged.bind(a(e)),e._handleConnect=e._handleConnect.bind(a(e)),e._handleChainChanged=e._handleChainChanged.bind(a(e)),e._handleDisconnect=e._handleDisconnect.bind(a(e)),e._handleUnlockStateChanged=e._handleUnlockStateChanged.bind(a(e)),e._rpcRequest=e._rpcRequest.bind(a(e)),e.request=e.request.bind(a(e));var d=new qa;return l.forEach(function(e){return d.push(e)}),e._rpcEngine=d,e}return s(t,e),h(t,[{key:"chainId",get:function(){return Ja(this,ts)}},{key:"selectedAddress",get:function(){return Ja(this,ns)}},{key:"isConnected",value:function(){return this._state.isConnected}},{key:"request",value:(n=g(L().m(function e(t){var n,r,i,o=this;return L().w(function(e){for(;;)switch(e.n){case 0:if(t&&"object"==D(t)&&!Array.isArray(t)){e.n=1;break}throw ba({message:bo.errors.invalidRequestArgs(),data:t});case 1:if(n=t.method,r=t.params,"string"==typeof n&&0!==n.length){e.n=2;break}throw ba({message:bo.errors.invalidRequestMethod(),data:t});case 2:if(void 0===r||Array.isArray(r)||"object"==D(r)&&null!==r){e.n=3;break}throw ba({message:bo.errors.invalidRequestParams(),data:t});case 3:return i=null==r?{method:n}:{method:n,params:r},e.a(2,new Promise(function(e,t){o._rpcRequest(i,Va(e,t))}))}},e)})),function(e){return n.apply(this,arguments)})},{key:"_initializeState",value:function(e){if(this._state.initialized)throw new Error("Provider already initialized.");if(e){var t=e.accounts,n=e.chainId,r=e.isUnlocked,i=e.networkVersion;this._handleConnect(n),this._handleChainChanged({chainId:n,networkVersion:i}),this._handleUnlockStateChanged({accounts:t,isUnlocked:r}),this._handleAccountsChanged(t)}this._state.initialized=!0,this.emit("_initialized")}},{key:"_rpcRequest",value:function(e,t){var n=this,r=t;return Array.isArray(e)||(e.jsonrpc||(e.jsonrpc="2.0"),"eth_accounts"!==e.method&&"eth_requestAccounts"!==e.method||(r=function(r,i){var o;n._handleAccountsChanged(null!==(o=i.result)&&void 0!==o?o:[],"eth_accounts"===e.method),t(r,i)})),this._rpcEngine.handle(e,r)}},{key:"_handleConnect",value:function(e){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId:e}),this._log.debug(bo.info.connected(e)))}},{key:"_handleDisconnect",value:function(e,t){var n;(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!e)&&(this._state.isConnected=!1,e?(n=new ya(1013,null!=t?t:bo.errors.disconnected()),this._log.debug(n)):(n=new ya(1011,null!=t?t:bo.errors.permanentlyDisconnected()),this._log.error(n),Xa(this,ts,null),this._state.accounts=null,Xa(this,ns,null),this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",n))}},{key:"_handleChainChanged",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).chainId;Ga(e)?(this._handleConnect(e),e!==Ja(this,ts)&&(Xa(this,ts,e),this._state.initialized&&this.emit("chainChanged",Ja(this,ts)))):this._log.error(bo.errors.invalidNetworkParams(),{chainId:e})}},{key:"_handleAccountsChanged",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e;Array.isArray(e)||(this._log.error("MetaMask: Received invalid accounts parameter. Please report this bug.",e),n=[]);var r,i=_(e);try{for(i.s();!(r=i.n()).done;){if("string"!=typeof r.value){this._log.error("MetaMask: Received non-string account. Please report this bug.",e),n=[];break}}}catch(Cs){i.e(Cs)}finally{i.f()}if(!rs(this._state.accounts,n)&&(t&&null!==this._state.accounts&&this._log.error("MetaMask: 'eth_accounts' unexpectedly updated accounts. Please report this bug.",n),this._state.accounts=n,Ja(this,ns)!==n[0]&&Xa(this,ns,n[0]||null),this._state.initialized)){var o=E(n);this.emit("accountsChanged",o)}}},{key:"_handleUnlockStateChanged",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.accounts,n=e.isUnlocked;"boolean"==typeof n?n!==this._state.isUnlocked&&(this._state.isUnlocked=n,this._handleAccountsChanged(null!=t?t:[])):this._log.error("MetaMask: Received invalid isUnlocked parameter. Please report this bug.")}}]);var n}(es),ts=new WeakMap,ns=new WeakMap,is._defaultState={accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1},as=is,ss={exports:{}},cs=Ea.EventEmitter,us=qf(dt),os="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e},ls=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},ds=/%[sdj%]/g,hs={},xv.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},xv.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},ps=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],vs="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0,Xv.custom=vs,ys={inherits:os,_extend:Jv,log:Zv,isBuffer:Vv,isPrimitive:Wv,isFunction:$v,isError:qv,isDate:zv,isObject:Fv,isRegExp:Hv,isUndefined:Uv,isSymbol:Kv,isString:jv,isNumber:Bv,isNullOrUndefined:Dv,isNull:Nv,isBoolean:Lv,isArray:Iv,inspect:xv,deprecate:Cv,format:Sv,debuglog:Av,promisify:Xv,callbackify:tm},bs=qf(Object.freeze({__proto__:null,_extend:Jv,callbackify:tm,debuglog:Av,default:ys,deprecate:Cv,format:Sv,inherits:os,inspect:xv,isArray:Iv,isBoolean:Lv,isBuffer:Vv,isDate:zv,isError:qv,isFunction:$v,isNull:Nv,isNullOrUndefined:Dv,isNumber:Bv,isObject:Fv,isPrimitive:Wv,isRegExp:Hv,isString:jv,isSymbol:Kv,isUndefined:Uv,log:Zv,promisify:Xv})),ws={destroy:function(e,t){var n=this,r=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return r||i?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,Yo.nextTick(om,this,e)):Yo.nextTick(om,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?n._writableState?n._writableState.errorEmitted?Yo.nextTick(im,n):(n._writableState.errorEmitted=!0,Yo.nextTick(rm,n,e)):Yo.nextTick(rm,n,e):t?(Yo.nextTick(im,n),t(e)):Yo.nextTick(im,n)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}},Es={},ks={},am("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),am("ERR_INVALID_ARG_TYPE",function(e,t,n){var r,i,o,a,s,c;if("string"==typeof t&&(i="not ",t.substr(0,4)===i)?(r="must not be",t=t.replace(/^not /,"")):r="must be",a=e,s=" argument",(void 0===c||c>a.length)&&(c=a.length),a.substring(c-9,c)===s)o="The ".concat(e," ").concat(r," ").concat(sm(t,"type"));else{var u=function(e,t,n){return"number"!=typeof n&&(n=0),!(n+1>e.length)&&-1!==e.indexOf(".",n)}(e)?"property":"argument";o='The "'.concat(e,'" ').concat(u," ").concat(r," ").concat(sm(t,"type"))}return o+". Received type ".concat(D(n))},TypeError),am("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),am("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),am("ERR_STREAM_PREMATURE_CLOSE","Premature close"),am("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),am("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),am("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),am("ERR_STREAM_WRITE_AFTER_END","write after end"),am("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),am("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),am("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Es.codes=ks,_s=Es.codes.ERR_INVALID_OPT_VALUE,Ms={getHighWaterMark:function(e,t,n,r){var i,o,a,s=(o=r,a=n,null!=(i=t).highWaterMark?i.highWaterMark:o?i[a]:null);if(null!=s){if(!isFinite(s)||Math.floor(s)!==s||s<0)throw new _s(r?n:"highWaterMark",s);return Math.floor(s)}return e.objectMode?16:16384}},Ts="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e},Os=qf(Object.freeze({__proto__:null,default:Ts})),Rs=function(e,t){if(cm("noDeprecation"))return e;var n=!1;return function(){if(!n){if(cm("throwDeprecation"))throw new Error(t);cm("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}},Ps=af.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},dm.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";if(e=e.slice(n,e.length),!((r=(t=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(t.length-1))>=55296&&r<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var r,i=e.length;if(this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),i=(t+=e.toString(this.encoding,0,i)).length-1,(r=t.charCodeAt(i))>=55296&&r<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,i)}return t},dm.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(t<=2&&n>>4==14){this.charLength=3;break}if(t<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=t},dm.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;t+=r.slice(0,n).toString(i)}return t},Is=qf(Object.freeze({__proto__:null,StringDecoder:dm})),Ls=Es.codes.ERR_STREAM_PREMATURE_CLOSE,Hs=function e(t,n,r){if("function"==typeof n)return e(t,null,n);var i,o;n||(n={}),i=r||vm,o=!1,r=function(){if(!o){o=!0;for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.apply(this,t)}};var a=n.readable||!1!==n.readable&&t.readable,s=n.writable||!1!==n.writable&&t.writable,c=function(){t.writable||l()},u=t._writableState&&t._writableState.finished,l=function(){s=!1,u=!0,a||r.call(t)},d=t._readableState&&t._readableState.endEmitted,f=function(){a=!1,d=!0,s||r.call(t)},h=function(e){r.call(t,e)},p=function(){var e;return a&&!d?(t._readableState&&t._readableState.ended||(e=new Ls),r.call(t,e)):s&&!u?(t._writableState&&t._writableState.ended||(e=new Ls),r.call(t,e)):void 0},v=function(){t.req.on("finish",l)};return function(e){return e.setHeader&&"function"==typeof e.abort}(t)?(t.on("complete",l),t.on("abort",p),t.req?v():t.on("request",v)):s&&!t._writableState&&(t.on("end",c),t.on("close",c)),t.on("end",f),t.on("finish",l),!1!==n.error&&t.on("error",h),t.on("close",p),function(){t.removeListener("complete",l),t.removeListener("abort",p),t.removeListener("request",v),t.req&&t.req.removeListener("finish",l),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",l),t.removeListener("end",f),t.removeListener("error",h),t.removeListener("close",p)}},Fs=bm,zs=Es.codes,qs=zs.ERR_METHOD_NOT_IMPLEMENTED,$s=zs.ERR_MULTIPLE_CALLBACK,Ws=zs.ERR_TRANSFORM_ALREADY_TRANSFORMING,Vs=zs.ERR_TRANSFORM_WITH_LENGTH_0,Gs=lm(),Os(bm,Gs),bm.prototype.push=function(e,t){return this._transformState.needTransform=!1,Gs.prototype.push.call(this,e,t)},bm.prototype._transform=function(e,t,n){n(new qs("_transform()"))},bm.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},bm.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},bm.prototype._destroy=function(e,t){Gs.prototype._destroy.call(this,e,function(e){t(e)})},Zs=km,Os(km,Js=Fs),km.prototype._transform=function(e,t,n){n(null,e)},Qs=Es.codes,Xs=Qs.ERR_MISSING_ARGS,ec=Qs.ERR_STREAM_DESTROYED,tc=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i,o=(i=t).length?"function"!=typeof i[i.length-1]?_m:i.pop():_m;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Xs("streams");var a=t.map(function(e,n){var i=n<t.length-1;return function(e,t,n,r){var i,o;i=r,o=!1,r=function(){o||(o=!0,i.apply(void 0,arguments))};var a=!1;e.on("close",function(){a=!0}),void 0===Ys&&(Ys=Hs),Ys(e,{readable:t,writable:n},function(e){if(e)return r(e);a=!0,r()});var s=!1;return function(t){if(!a&&!s)return s=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void r(t||new ec("pipe"))}}(e,i,n>0,function(e){r||(r=e),e&&a.forEach(Sm),i||(a.forEach(Sm),o(r))})});return t.reduce(Cm)},ms=ss.exports,(ms=ss.exports=gm()).Stream=ms,ms.Readable=ms,ms.Writable=um(),ms.Duplex=lm(),ms.Transform=Fs,ms.PassThrough=Zs,ms.finished=Hs,ms.pipeline=tc,nc=ss.exports,rc={},oc=function e(t,n){if(t&&n)return e(t)(n);if("function"!=typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach(function(e){r[e]=t[e]}),r;function r(){for(var e=new Array(arguments.length),n=0;n<e.length;n++)e[n]=arguments[n];var r=t.apply(this,e),i=e[e.length-1];return"function"==typeof r&&r!==i&&Object.keys(i).forEach(function(e){r[e]=i[e]}),r}},(ic={exports:{}}).exports=oc(Am),ic.exports.strict=oc(xm),Am.proto=Am(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return Am(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return xm(this)},configurable:!0})}),ac=ic.exports,sc={},Object.defineProperty(sc,"__esModule",{value:!0}),sc.Substream=void 0,cc=function(e){function t(e){var n,r=e.parent,i=e.name;return p(this,t),(n=o(this,t,[{objectMode:!0}]))._parent=r,n._name=i,n}return s(t,e),h(t,[{key:"_read",value:function(){}},{key:"_write",value:function(e,t,n){this._parent.push({name:this._name,data:e}),n()}}])}(nc.Duplex),sc.Substream=cc,uc=ft&&ft.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Object.defineProperty(rc,"__esModule",{value:!0}),rc.ObjectMultiplex=void 0,lc=nc,dc=uc(ac),fc=sc,hc=Symbol("IGNORE_SUBSTREAM"),pc=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return p(this,t),(e=o(this,t,[Object.assign(Object.assign({},n),{objectMode:!0})]))._substreams={},e}return s(t,e),h(t,[{key:"createStream",value:function(e){if(this.destroyed)throw new Error('ObjectMultiplex - parent stream for name "'.concat(e,'" already destroyed'));if(this._readableState.ended||this._writableState.ended)throw new Error('ObjectMultiplex - parent stream for name "'.concat(e,'" already ended'));if(!e)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw new Error('ObjectMultiplex - Substream for name "'.concat(e,'" already exists'));var t,n,r=new fc.Substream({parent:this,name:e});return this._substreams[e]=r,t=this,n=(0,dc.default)(function(e){return r.destroy(e||void 0)}),(0,lc.finished)(t,{readable:!1},n),(0,lc.finished)(t,{writable:!1},n),r}},{key:"ignoreStream",value:function(e){if(!e)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw new Error('ObjectMultiplex - Substream for name "'.concat(e,'" already exists'));this._substreams[e]=hc}},{key:"_read",value:function(){}},{key:"_write",value:function(e,t,n){var r=e.name,i=e.data;if(!r)return console.warn('ObjectMultiplex - malformed chunk without name "'.concat(e,'"')),n();var o=this._substreams[r];return o?(o!==hc&&o.push(i),n()):(console.warn('ObjectMultiplex - orphaned data for stream "'.concat(r,'"')),n())}}])}(lc.Duplex),rc.ObjectMultiplex=pc,vc=zf(rc.ObjectMultiplex),mc=function(e){return null!==e&&"object"==D(e)&&"function"==typeof e.pipe},mc.writable=function(e){return mc(e)&&!1!==e.writable&&"function"==typeof e._write&&"object"==D(e._writableState)},mc.readable=function(e){return mc(e)&&!1!==e.readable&&"function"==typeof e._read&&"object"==D(e._readableState)},mc.duplex=function(e){return mc.writable(e)&&mc.readable(e)},mc.transform=function(e){return mc.duplex(e)&&"function"==typeof e._transform},yc=mc,bc=function(e){function t(e,n){var r,i=n.jsonRpcStreamName,a=n.logger,s=void 0===a?console:a,c=n.maxEventListeners,u=void 0===c?100:c,l=n.rpcMiddleware,d=void 0===l?[]:l;if(p(this,t),r=o(this,t,[{logger:s,maxEventListeners:u,rpcMiddleware:d}]),!yc.duplex(e))throw new Error(bo.errors.invalidDuplexStream());r._handleStreamDisconnect=r._handleStreamDisconnect.bind(r);var f=new vc;return nc.pipeline(e,f,e,r._handleStreamDisconnect.bind(r,"MetaMask")),r._jsonRpcConnection=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},n=new nc.Duplex({objectMode:!0,read:function(){},write:function(n,o,a){var s,c=null;try{n.id?function(e){var n=e.id;if(null!==n){var r=t[n];r?(delete t[n],Object.assign(r.res,e),setTimeout(r.end)):console.warn('StreamMiddleware - Unknown response id "'.concat(n,'"'))}}(n):(s=n,(null==e?void 0:e.retryOnMessage)&&s.method===e.retryOnMessage&&Object.values(t).forEach(function(e){var n=e.req,r=e.retryCount,o=void 0===r?0:r;if(n.id){if(o>=3)throw new Error('StreamMiddleware - Retry limit exceeded for request id "'.concat(n.id,'"'));var a=t[n.id];a&&(a.retryCount=o+1),i(n)}}),r.emit("notification",s))}catch(u){c=u}a(c)}}),r=new Fa;return{events:r,middleware:function(e,n,r,o){t[e.id]={req:e,res:n,next:r,end:o},i(e)},stream:n};function i(e){n.push(e)}}({retryOnMessage:"METAMASK_EXTENSION_CONNECT_CAN_RETRY"}),nc.pipeline(r._jsonRpcConnection.stream,f.createStream(i),r._jsonRpcConnection.stream,r._handleStreamDisconnect.bind(r,"MetaMask RpcProvider")),r._rpcEngine.push(r._jsonRpcConnection.middleware),r._jsonRpcConnection.events.on("notification",function(t){var n=t.method,i=t.params;"metamask_accountsChanged"===n?r._handleAccountsChanged(i):"metamask_unlockStateChanged"===n?r._handleUnlockStateChanged(i):"metamask_chainChanged"===n?r._handleChainChanged(i):$a.includes(n)?r.emit("message",{type:n,data:i}):"METAMASK_STREAM_FAILURE"===n&&e.destroy(new Error(bo.errors.permanentlyDisconnected()))}),r}return s(t,e),h(t,[{key:"_initializeStateAsync",value:(n=g(L().m(function e(){var t,n;return L().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,this.request({method:"metamask_getProviderState"});case 1:t=e.v,e.n=3;break;case 2:e.p=2,n=e.v,this._log.error("MetaMask: Failed to get initial state. Please report this bug.",n);case 3:this._initializeState(t);case 4:return e.a(2)}},e,this,[[0,2]])})),function(){return n.apply(this,arguments)})},{key:"_handleStreamDisconnect",value:function(e,t){var n='MetaMask: Lost connection to "'.concat(e,'".');null!=t&&t.stack&&(n+="\n".concat(t.stack)),this._log.warn(n),this.listenerCount("error")>0&&this.emit("error",n),this._handleDisconnect(!1,t?t.message:void 0)}},{key:"_handleChainChanged",value:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.chainId,o=n.networkVersion;Ga(i)&&(e=o,Boolean(e)&&"string"==typeof e)?"loading"===o?this._handleDisconnect(!0):r(t,"_handleChainChanged",this,3)([{chainId:i}]):this._log.error(bo.errors.invalidNetworkParams(),{chainId:i,networkVersion:o})}}]);var n}(as),wc=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.jsonRpcStreamName,s=void 0===i?"metamask-provider":i,c=r.logger,u=void 0===c?console:c,l=r.maxEventListeners,d=void 0===l?100:l,f=r.shouldSendMetadata;if(p(this,t),(n=o(this,t,[e,{jsonRpcStreamName:s,logger:u,maxEventListeners:d,rpcMiddleware:Wa(u)}]))._sentWarnings={chainId:!1,networkVersion:!1,selectedAddress:!1,enable:!1,experimentalMethods:!1,send:!1,events:{close:!1,data:!1,networkChanged:!1,notification:!1}},Qa(a(n),gc,void 0),n._initializeStateAsync(),Xa(a(n),gc,null),n.isMetaMask=!0,n._sendSync=n._sendSync.bind(a(n)),n.enable=n.enable.bind(a(n)),n.send=n.send.bind(a(n)),n.sendAsync=n.sendAsync.bind(a(n)),n._warnOfDeprecation=n._warnOfDeprecation.bind(a(n)),n._metamask=n._getExperimentalApi(),n._jsonRpcConnection.events.on("notification",function(e){var t=e.method;$a.includes(t)&&(n.emit("data",e),n.emit("notification",e.params.result))}),f)if("complete"===document.readyState)mv(n._rpcEngine,n._log);else{var h=function(){mv(n._rpcEngine,n._log),window.removeEventListener("DOMContentLoaded",h)};window.addEventListener("DOMContentLoaded",h)}return n}return s(t,e),h(t,[{key:"chainId",get:function(){return this._sentWarnings.chainId||(this._log.warn(bo.warnings.chainIdDeprecation),this._sentWarnings.chainId=!0),r(t,"chainId",this,1)}},{key:"networkVersion",get:function(){return this._sentWarnings.networkVersion||(this._log.warn(bo.warnings.networkVersionDeprecation),this._sentWarnings.networkVersion=!0),Ja(this,gc)}},{key:"selectedAddress",get:function(){return this._sentWarnings.selectedAddress||(this._log.warn(bo.warnings.selectedAddressDeprecation),this._sentWarnings.selectedAddress=!0),r(t,"selectedAddress",this,1)}},{key:"sendAsync",value:function(e,t){this._rpcRequest(e,t)}},{key:"addListener",value:function(e,n){return this._warnOfDeprecation(e),r(t,"addListener",this,3)([e,n])}},{key:"on",value:function(e,n){return this._warnOfDeprecation(e),r(t,"on",this,3)([e,n])}},{key:"once",value:function(e,n){return this._warnOfDeprecation(e),r(t,"once",this,3)([e,n])}},{key:"prependListener",value:function(e,n){return this._warnOfDeprecation(e),r(t,"prependListener",this,3)([e,n])}},{key:"prependOnceListener",value:function(e,n){return this._warnOfDeprecation(e),r(t,"prependOnceListener",this,3)([e,n])}},{key:"_handleDisconnect",value:function(e,n){r(t,"_handleDisconnect",this,3)([e,n]),Ja(this,gc)&&!e&&Xa(this,gc,null)}},{key:"_warnOfDeprecation",value:function(e){var t;!1===(null===(t=this._sentWarnings)||void 0===t?void 0:t.events[e])&&(this._log.warn(bo.warnings.events[e]),this._sentWarnings.events[e]=!0)}},{key:"enable",value:(n=g(L().m(function e(){var t=this;return L().w(function(e){for(;;)if(0===e.n)return e.a(2,(this._sentWarnings.enable||(this._log.warn(bo.warnings.enableDeprecation),this._sentWarnings.enable=!0),new Promise(function(e,n){try{t._rpcRequest({method:"eth_requestAccounts",params:[]},Va(e,n))}catch(r){n(r)}})))},e,this)})),function(){return n.apply(this,arguments)})},{key:"send",value:function(e,t){var n=this;return this._sentWarnings.send||(this._log.warn(bo.warnings.sendDeprecation),this._sentWarnings.send=!0),"string"!=typeof e||t&&!Array.isArray(t)?e&&"object"==D(e)&&"function"==typeof t?this._rpcRequest(e,t):this._sendSync(e):new Promise(function(r,i){try{n._rpcRequest({method:e,params:t},Va(r,i,!1))}catch(o){i(o)}})}},{key:"_sendSync",value:function(e){var t,n,r;switch(e.method){case"eth_accounts":r=this.selectedAddress?[this.selectedAddress]:[];break;case"eth_coinbase":r=null!==(t=this.selectedAddress)&&void 0!==t?t:null;break;case"eth_uninstallFilter":this._rpcRequest(e,Ya),r=!0;break;case"net_version":r=null!==(n=Ja(this,gc))&&void 0!==n?n:null;break;default:throw new Error(bo.errors.unsupportedSync(e.method))}return{id:e.id,jsonrpc:e.jsonrpc,result:r}}},{key:"_getExperimentalApi",value:function(){var e,t,n=this;return new Proxy({isUnlocked:(t=g(L().m(function e(){return L().w(function(e){for(;;)switch(e.n){case 0:if(n._state.initialized){e.n=1;break}return e.n=1,new Promise(function(e){n.on("_initialized",function(){return e()})});case 1:return e.a(2,n._state.isUnlocked)}},e)})),function(){return t.apply(this,arguments)}),requestBatch:(e=g(L().m(function e(t){return L().w(function(e){for(;;)switch(e.n){case 0:if(Array.isArray(t)){e.n=1;break}throw ba({message:"Batch requests must be made with an array of request objects.",data:t});case 1:return e.a(2,new Promise(function(e,r){n._rpcRequest(t,Va(e,r))}))}},e)})),function(t){return e.apply(this,arguments)})},{get:function(e,t){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];return n._sentWarnings.experimentalMethods||(n._log.warn(bo.warnings.experimentalMethods),n._sentWarnings.experimentalMethods=!0),Reflect.get.apply(Reflect,[e,t].concat(i))}})}},{key:"_handleChainChanged",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.chainId,i=e.networkVersion;r(t,"_handleChainChanged",this,3)([{chainId:n,networkVersion:i}]),this._state.isConnected&&i!==Ja(this,gc)&&(Xa(this,gc,i),this._state.initialized&&this.emit("networkChanged",Ja(this,gc)))}}]);var n}(bc),gc=new WeakMap,(Ec=(0,W.default)("MM_SDK")).color="#FFAC1C",_c={},Sc={},Object.defineProperty(Sc,"__esModule",{value:!0}),Sc.EthereumProviderError=Sc.EthereumRpcError=void 0,Cc=fa,Ac=function(e){function t(e,n,r){var i;if(p(this,t),!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!n||"string"!=typeof n)throw new Error('"message" must be a nonempty string.');return(i=o(this,t,[n])).code=e,void 0!==r&&(i.data=r),i}return s(t,e),h(t,[{key:"serialize",value:function(){var e={code:this.code,message:this.message};return void 0!==this.data&&(e.data=this.data),this.stack&&(e.stack=this.stack),e}},{key:"toString",value:function(){return Cc.default(this.serialize(),Mm,2)}}])}(c(Error)),Sc.EthereumRpcError=Ac,Sc.EthereumProviderError=function(e){function t(e,n,r){if(p(this,t),i=e,!(Number.isInteger(i)&&i>=1e3&&i<=4999))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');var i;return o(this,t,[e,n,r])}return s(t,e),h(t)}(Ac),xc={},Mc={},Object.defineProperty(Mc,"__esModule",{value:!0}),Mc.errorValues=Mc.errorCodes=void 0,Mc.errorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901}},Mc.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."}},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.serializeError=e.isValidCode=e.getMessageFromCode=e.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;var t=Mc,n=Sc,r=t.errorCodes.rpc.internal,i={code:r,message:o(r)};function o(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Unspecified error message. This is a bug, please report it.";if(Number.isInteger(n)){var i=n.toString();if(u(t.errorValues,i))return t.errorValues[i].message;if(s(n))return e.JSON_RPC_SERVER_ERROR_MESSAGE}return r}function a(e){if(!Number.isInteger(e))return!1;var n=e.toString();return!!t.errorValues[n]||!!s(e)}function s(e){return e>=-32099&&e<=-32e3}function c(e){return e&&"object"==D(e)&&!Array.isArray(e)?Object.assign({},e):e}function u(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.",e.getMessageFromCode=o,e.isValidCode=a,e.serializeError=function(e){var t,r,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=s.fallbackError,d=void 0===l?i:l,f=s.shouldIncludeStack,h=void 0!==f&&f;if(!d||!Number.isInteger(d.code)||"string"!=typeof d.message)throw new Error("Must provide fallback error with integer number code and string message.");if(e instanceof n.EthereumRpcError)return e.serialize();var p={};if(e&&"object"==D(e)&&!Array.isArray(e)&&u(e,"code")&&a(e.code)){var v=e;p.code=v.code,v.message&&"string"==typeof v.message?(p.message=v.message,u(v,"data")&&(p.data=v.data)):(p.message=o(p.code),p.data={originalError:c(e)})}else{p.code=d.code;var m=null===(t=e)||void 0===t?void 0:t.message;p.message=m&&"string"==typeof m?m:d.message,p.data={originalError:c(e)}}var g=null===(r=e)||void 0===r?void 0:r.stack;return h&&e&&g&&"string"==typeof g&&(p.stack=g),p}}(xc),Tc={},Object.defineProperty(Tc,"__esModule",{value:!0}),Tc.ethErrors=void 0,Oc=Sc,Rc=xc,Pc=Mc,Tc.ethErrors={rpc:{parse:function(e){return Tm(Pc.errorCodes.rpc.parse,e)},invalidRequest:function(e){return Tm(Pc.errorCodes.rpc.invalidRequest,e)},invalidParams:function(e){return Tm(Pc.errorCodes.rpc.invalidParams,e)},methodNotFound:function(e){return Tm(Pc.errorCodes.rpc.methodNotFound,e)},internal:function(e){return Tm(Pc.errorCodes.rpc.internal,e)},server:function(e){if(!e||"object"!=D(e)||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");var t=e.code;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return Tm(t,e)},invalidInput:function(e){return Tm(Pc.errorCodes.rpc.invalidInput,e)},resourceNotFound:function(e){return Tm(Pc.errorCodes.rpc.resourceNotFound,e)},resourceUnavailable:function(e){return Tm(Pc.errorCodes.rpc.resourceUnavailable,e)},transactionRejected:function(e){return Tm(Pc.errorCodes.rpc.transactionRejected,e)},methodNotSupported:function(e){return Tm(Pc.errorCodes.rpc.methodNotSupported,e)},limitExceeded:function(e){return Tm(Pc.errorCodes.rpc.limitExceeded,e)}},provider:{userRejectedRequest:function(e){return Om(Pc.errorCodes.provider.userRejectedRequest,e)},unauthorized:function(e){return Om(Pc.errorCodes.provider.unauthorized,e)},unsupportedMethod:function(e){return Om(Pc.errorCodes.provider.unsupportedMethod,e)},disconnected:function(e){return Om(Pc.errorCodes.provider.disconnected,e)},chainDisconnected:function(e){return Om(Pc.errorCodes.provider.chainDisconnected,e)},custom:function(e){if(!e||"object"!=D(e)||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");var t=e.code,n=e.message,r=e.data;if(!n||"string"!=typeof n)throw new Error('"message" must be a nonempty string');return new Oc.EthereumProviderError(t,n,r)}}},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getMessageFromCode=e.serializeError=e.EthereumProviderError=e.EthereumRpcError=e.ethErrors=e.errorCodes=void 0;var t=Sc;Object.defineProperty(e,"EthereumRpcError",{enumerable:!0,get:function(){return t.EthereumRpcError}}),Object.defineProperty(e,"EthereumProviderError",{enumerable:!0,get:function(){return t.EthereumProviderError}});var n=xc;Object.defineProperty(e,"serializeError",{enumerable:!0,get:function(){return n.serializeError}}),Object.defineProperty(e,"getMessageFromCode",{enumerable:!0,get:function(){return n.getMessageFromCode}});var r=Tc;Object.defineProperty(e,"ethErrors",{enumerable:!0,get:function(){return r.ethErrors}});var i=Mc;Object.defineProperty(e,"errorCodes",{enumerable:!0,get:function(){return i.errorCodes}})}(_c),(Ic={exports:{}}).exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==D(e)&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=90)}({17:function(e,t,n){t.__esModule=!0,t.default=void 0;var r=n(18);t.default=function(){function e(){}return e.getFirstMatch=function(e,t){var n=t.match(e);return n&&n.length>0&&n[1]||""},e.getSecondMatch=function(e,t){var n=t.match(e);return n&&n.length>1&&n[2]||""},e.matchAndReturnConst=function(e,t,n){if(e.test(t))return n},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map(function(e){return parseInt(e,10)||0});if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map(function(e){return parseInt(e,10)||0});if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,n,r){void 0===r&&(r=!1);var i=e.getVersionPrecision(t),o=e.getVersionPrecision(n),a=Math.max(i,o),s=0,c=e.map([t,n],function(t){var n=a-e.getVersionPrecision(t),r=t+new Array(n+1).join(".0");return e.map(r.split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});for(r&&(s=a-Math.min(i,o)),a-=1;a>=s;){if(c[0][a]>c[1][a])return 1;if(c[0][a]===c[1][a]){if(a===s)return 0;a-=1}else if(c[0][a]<c[1][a])return-1}},e.map=function(e,t){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n+=1)r.push(t(e[n]));return r},e.find=function(e,t){var n,r;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(n=0,r=e.length;n<r;n+=1){var i=e[n];if(t(i,n))return i}},e.assign=function(e){for(var t,n,r=e,i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];if(Object.assign)return Object.assign.apply(Object,[e].concat(o));var s=function(){var e=o[t];"object"==D(e)&&null!==e&&Object.keys(e).forEach(function(t){r[t]=e[t]})};for(t=0,n=o.length;t<n;t+=1)s();return e},e.getBrowserAlias=function(e){return r.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return r.BROWSER_MAP[e]||""},e}(),e.exports=t.default},18:function(e,t,n){t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,i=(r=n(91))&&r.__esModule?r:{default:r},o=n(18);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}t.default=function(){function e(){}var t,n;return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("UserAgent should be a string");return new i.default(e,t)},e.parse=function(e){return new i.default(e).getResult()},t=e,n=[{key:"BROWSER_MAP",get:function(){return o.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return o.ENGINE_MAP}},{key:"OS_MAP",get:function(){return o.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return o.PLATFORMS_MAP}}],null&&a(t.prototype,null),n&&a(t,n),e}(),e.exports=t.default},91:function(e,t,n){t.__esModule=!0,t.default=void 0;var r=c(n(92)),i=c(n(93)),o=c(n(94)),a=c(n(95)),s=c(n(17));function c(e){return e&&e.__esModule?e:{default:e}}t.default=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=s.default.find(r.default,function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=s.default.find(i.default,function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=s.default.find(o.default,function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=s.default.find(a.default,function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some(function(t){return e.test(t)});throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return s.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,n={},r=0,i={},o=0;if(Object.keys(e).forEach(function(t){var a=e[t];"string"==typeof a?(i[t]=a,o+=1):"object"==D(a)&&(n[t]=a,r+=1)}),r>0){var a=Object.keys(n),c=s.default.find(a,function(e){return t.isOS(e)});if(c){var u=this.satisfies(n[c]);if(void 0!==u)return u}var l=s.default.find(a,function(e){return t.isPlatform(e)});if(l){var d=this.satisfies(n[l]);if(void 0!==d)return d}}if(o>0){var f=Object.keys(i),h=s.default.find(f,function(e){return t.isBrowser(e,!0)});if(void 0!==h)return this.compareVersion(i[h])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var n=this.getBrowserName().toLowerCase(),r=e.toLowerCase(),i=s.default.getBrowserTypeByAlias(r);return t&&i&&(r=i.toLowerCase()),r===n},t.compareVersion=function(e){var t=[0],n=e,r=!1,i=this.getBrowserVersion();if("string"==typeof i)return">"===e[0]||"<"===e[0]?(n=e.substr(1),"="===e[1]?(r=!0,n=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?n=e.substr(1):"~"===e[0]&&(r=!0,n=e.substr(1)),t.indexOf(s.default.compareVersions(i,n,r))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e,t){return void 0===t&&(t=!1),this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some(function(e){return t.is(e)})},e}(),e.exports=t.default},92:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=/version\/(\d+(\.?_?\d+)+)/i;t.default=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},n=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},n=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},n=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},n=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},n=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},n=i.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},n=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},n=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},n=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},n=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},n=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},n=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},n=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},n=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},n=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return n&&(t.version=n),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},n=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},n=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},n=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},n=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},n=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},n=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},n=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},n=i.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MiuiBrowser/i],describe:function(e){var t={name:"Miui"},n=i.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},n=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},n=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},n=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t={name:"Android Browser"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(t,e),version:i.default.getSecondMatch(t,e)}}}],e.exports=t.default},93:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18);t.default=[{test:[/Roku\/DVP/],describe:function(e){var t=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:o.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),n=i.default.getWindowsVersionName(t);return{name:o.OS_MAP.Windows,version:t,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:o.OS_MAP.iOS},n=i.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return n&&(t.version=n),t}},{test:[/macintosh/i],describe:function(e){var t=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),n=i.default.getMacOSVersionName(t),r={name:o.OS_MAP.MacOS,version:t};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:o.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),n=i.default.getAndroidVersionName(t),r={name:o.OS_MAP.Android,version:t};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),n={name:o.OS_MAP.WebOS};return t&&t.length&&(n.version=t),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||i.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:o.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:o.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:o.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.PlayStation4,version:t}}}],e.exports=t.default},94:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18);t.default=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=i.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",n={type:o.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(n.model=t),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),n=e.test(/like (ipod|iphone)/i);return t&&!n},describe:function(e){var t=i.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:o.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}}],e.exports=t.default},95:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18);t.default=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:o.ENGINE_MAP.Blink};var t=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:o.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:o.ENGINE_MAP.Trident},n=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:o.ENGINE_MAP.Presto},n=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=e.test(/gecko/i),n=e.test(/like gecko/i);return t&&!n},describe:function(e){var t={name:o.ENGINE_MAP.Gecko},n=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:o.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:o.ENGINE_MAP.WebKit},n=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}}],e.exports=t.default}}),Lc=zf(Ic.exports),i("MetaMaskSDKEvent",Nc={Initialized:"initialized",DisplayURI:"display_uri",ProviderUpdate:"provider_update",ConnectWithResponse:"connectWithResponse",ConnectionStatus:"connection_status",ServiceStatus:"service_status"}),Dc=function(){function e(t){var n=this,r=t.shouldSetOnWindow,i=t.connectionStream,o=t.shouldSendMetadata,a=void 0!==o&&o,s=t.shouldShimWeb3,c=t.sdkInstance;p(this,e);var u,l=new Kc({connectionStream:i,shouldSendMetadata:a,shouldSetOnWindow:r,shouldShimWeb3:s,autoRequestAccounts:!1});if(this.provider=new Proxy(l,{deleteProperty:function(){return!0}}),this.sdkInstance=c,r&&"undefined"!=typeof window)try{u=l,window.ethereum=u,window.dispatchEvent(new Event("ethereum#initialized"))}catch(d){Ec("[Ethereum] Unable to set global provider - window.ethereum may be read-only",d)}if(s&&"undefined"!=typeof window)try{!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:console,n=!1,r=!1;if(!window.web3){var i="__isMetaMaskShim__",o={currentProvider:e};Object.defineProperty(o,i,{value:!0,enumerable:!0,configurable:!1,writable:!1}),o=new Proxy(o,{get:function(o,a){for(var s=arguments.length,c=new Array(s>2?s-2:0),u=2;u<s;u++)c[u-2]=arguments[u];return"currentProvider"!==a||n?"currentProvider"===a||a===i||r||(r=!0,t.error("MetaMask no longer injects web3. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3"),e.request({method:"metamask_logWeb3ShimUsage"}).catch(function(e){t.debug("MetaMask: Failed to log web3 shim usage.",e)})):(n=!0,t.warn("You are accessing the MetaMask window.web3.currentProvider shim. This property is deprecated; use window.ethereum instead. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3")),Reflect.get.apply(Reflect,[o,a].concat(c))},set:function(){return t.warn("You are accessing the MetaMask window.web3 shim. This object is deprecated; use window.ethereum instead. For details, see: https://docs.metamask.io/guide/provider-migration.html#replacing-window-web3"),Reflect.set.apply(Reflect,arguments)}}),Object.defineProperty(window,"web3",{value:o,enumerable:!1,configurable:!0,writable:!0})}}(this.provider)}catch(d){Ec("[Ethereum] Unable to shim web3 - window.web3 may be read-only",d)}this.provider.on("display_uri",function(e){n.sdkInstance.emit(Nc.DisplayURI,e)}),this.provider.on("_initialized",function(){var e={chainId:n.provider.getChainId(),isConnected:n.provider.isConnected(),isMetaMask:n.provider.isMetaMask,selectedAddress:n.provider.getSelectedAddress(),networkVersion:n.provider.getNetworkVersion()};n.sdkInstance.emit(Nc.Initialized,e),Ec("[Ethereum: constructor()] provider initialized",e)})}return h(e,null,[{key:"init",value:function(t){var n;return Ec("[Ethereum: init()] Initializing Ethereum service"),this.instance=new e(t),null===(n=this.instance)||void 0===n?void 0:n.provider}},{key:"destroy",value:function(){}},{key:"getInstance",value:function(){var e;if(!(null===(e=this.instance)||void 0===e?void 0:e.provider))throw new Error("Ethereum instance not intiialized - call Ethereum.factory first.");return this.instance}},{key:"getProvider",value:function(){var e;if(!(null===(e=this.instance)||void 0===e?void 0:e.provider))throw new Error("Ethereum instance not intiialized - call Ethereum.factory first.");return this.instance.provider}}])}(),Bc=function(){function e(t){var n=t.useDeepLink,r=t.preferredOpenLink,i=t.debug,o=void 0!==i&&i;p(this,e),this.state={platformType:void 0,useDeeplink:!1,preferredOpenLink:void 0,debug:!1},this.state.platformType=this.getPlatformType(),this.state.useDeeplink=n,this.state.preferredOpenLink=r,this.state.debug=o}return h(e,[{key:"openDeeplink",value:function(e,t,n){return function(e,t,n,r){var i=e.state;Ec("[PlatfformManager: openDeeplink()] universalLink --\x3e ".concat(t)),Ec("[PlatfformManager: openDeeplink()] deepLink --\x3e ".concat(n));try{if(i.preferredOpenLink)return void i.preferredOpenLink(i.useDeeplink?n:t,r);if(Ec("[PlatfformManager: openDeeplink()] open link now useDeepLink=".concat(i.useDeeplink," link=").concat(i.useDeeplink?n:t)),i.useDeeplink)"undefined"!=typeof window&&(window.location.href=n);else if("undefined"!=typeof document){var o=document.createElement("a");o.href=t,o.target="_self",o.rel="noreferrer noopener",o.click()}}catch(o){console.log("[PlatfformManager: openDeeplink()] can't open link",o)}}(this,e,t,n)}},{key:"isReactNative",value:function(){var e;return this.isNotBrowser()&&"undefined"!=typeof window&&(null===window||void 0===window?void 0:window.navigator)&&"ReactNative"===(null===(e=window.navigator)||void 0===e?void 0:e.product)}},{key:"isMetaMaskInstalled",value:function(){return function(){var e=Dc.getProvider()||(null===window||void 0===window?void 0:window.ethereum);return Ec("[PlatfformManager: isMetaMaskInstalled()] isMetaMask=".concat(null==e?void 0:e.isMetaMask," isConnected=").concat(null==e?void 0:e.isConnected())),(null==e?void 0:e.isMetaMask)&&(null==e?void 0:e.isConnected())}()}},{key:"isDesktopWeb",value:function(){return this.isBrowser()&&!this.isMobileWeb()}},{key:"isMobile",value:function(){var e,t,n=Lc.parse(window.navigator.userAgent);return"mobile"===(null===(e=null==n?void 0:n.platform)||void 0===e?void 0:e.type)||"tablet"===(null===(t=null==n?void 0:n.platform)||void 0===t?void 0:t.type)}},{key:"isSecure",value:function(){return this.isReactNative()||this.isMobileWeb()}},{key:"isMetaMaskMobileWebView",value:function(){return"undefined"!=typeof window&&Boolean(window.ReactNativeWebView)&&Boolean(navigator.userAgent.endsWith("MetaMaskMobile"))}},{key:"isMobileWeb",value:function(){return this.state.platformType===po.MobileWeb}},{key:"isNotBrowser",value:function(){return e.isNotBrowser()}},{key:"isBrowser",value:function(){return e.isBrowser()}},{key:"isNodeJS",value:function(){return this.isNotBrowser()&&!this.isReactNative()}},{key:"isUseDeepLink",value:function(){return this.state.useDeeplink}},{key:"getPlatformType",value:function(){return function(e){var t=e.state;return t.platformType?t.platformType:e.isReactNative()?po.ReactNative:e.isNotBrowser()?po.NonBrowser:e.isMetaMaskMobileWebView()?po.MetaMaskMobileWebview:e.isMobile()?po.MobileWeb:po.DesktopWeb}(this)}}],[{key:"isNotBrowser",value:function(){var e;return"undefined"==typeof window||!(null===window||void 0===window?void 0:window.navigator)||void 0!==tt&&"ReactNative"===(null===(e=null==tt?void 0:tt.navigator)||void 0===e?void 0:e.product)||"ReactNative"===(null===navigator||void 0===navigator?void 0:navigator.product)}},{key:"isBrowser",value:function(){return!this.isNotBrowser()}}])}(),jc=function(e){return Jd(void 0,void 0,void 0,L().m(function t(){var n,r;return L().w(function(t){for(;;)switch(t.n){case 0:if(!Bc.isBrowser()){t.n=2;break}return t.n=1,Promise.resolve().then(function(){return Ru});case 1:return n=t.v,r=n.StorageManagerWeb,t.a(2,new r(e));case 2:return t.a(2,Promise.resolve({persistChannelConfig:function(){return Jd(void 0,void 0,void 0,L().m(function e(){return L().w(function(e){for(;;)if(0===e.n)return e.a(2)},e)}))},getPersistedChannelConfig:function(){return Jd(void 0,void 0,void 0,L().m(function e(){return L().w(function(e){for(;;)if(0===e.n)return e.a(2)},e)}))},persistAccounts:function(){return Jd(void 0,void 0,void 0,L().m(function e(){return L().w(function(e){for(;;)if(0===e.n)return e.a(2)},e)}))},getCachedAccounts:function(){return Jd(void 0,void 0,void 0,L().m(function e(){return L().w(function(e){for(;;)if(0===e.n)return e.a(2,[])},e)}))},persistChainId:function(){return Jd(void 0,void 0,void 0,L().m(function e(){return L().w(function(e){for(;;)if(0===e.n)return e.a(2)},e)}))},getCachedChainId:function(){return Jd(void 0,void 0,void 0,L().m(function e(){return L().w(function(e){for(;;)if(0===e.n)return e.a(2)},e)}))},terminate:function(){return Jd(void 0,void 0,void 0,L().m(function e(){return L().w(function(e){for(;;)if(0===e.n)return e.a(2)},e)}))}}))}},t)}))},i("SDKProvider",Kc=function(e){function t(e){var n,r=e.connectionStream,i=e.shouldSendMetadata,a=e.autoRequestAccounts,s=void 0!==a&&a;return p(this,t),(n=o(this,t,[r,{logger:console,maxEventListeners:100,shouldSendMetadata:i}])).state={accounts:null,autoRequestAccounts:!1,providerStateRequested:!1,chainId:"",networkVersion:""},Ec("[SDKProvider: constructor()] autoRequestAccounts=".concat(s)),n.state.autoRequestAccounts=s,n}return s(t,e),h(t,[{key:"forceInitializeState",value:function(){return Jd(this,void 0,void 0,L().m(function e(){return L().w(function(e){for(;;)if(0===e.n)return e.a(2,(Ec("[SDKProvider: forceInitializeState()] autoRequestAccounts=".concat(this.state.autoRequestAccounts)),this._initializeStateAsync()))},e,this)}))}},{key:"_setConnected",value:function(){Ec("[SDKProvider: _setConnected()] Setting connected state"),this._state.isConnected=!0}},{key:"getState",value:function(){return this._state}},{key:"getSDKProviderState",value:function(){return this.state}},{key:"getSelectedAddress",value:function(){var e,t=this._state.accounts;return t&&0!==t.length?(null===(e=t[0])||void 0===e?void 0:e.toLowerCase())||"":(Ec("[SDKProvider: getSelectedAddress] No accounts found"),null)}},{key:"getChainId",value:function(){return this.state.chainId}},{key:"getNetworkVersion",value:function(){return this.state.networkVersion}},{key:"setSDKProviderState",value:function(e){this.state=Object.assign(Object.assign({},this.state),e)}},{key:"handleAccountsChanged",value:function(e,t){return this._handleAccountsChanged(e,t)}},{key:"handleDisconnect",value:function(e){var t=e.terminate;!function(e){var t=e.terminate,n=void 0!==t&&t,r=e.instance,i=r.state;Ec("[SDKProvider: handleDisconnect()] cleaning up provider state terminate=".concat(n),r),n&&(r._state.accounts=null,r._state.isUnlocked=!1,r._state.isPermanentlyDisconnected=!0,r._state.initialized=!1),r._handleAccountsChanged([]),r._state.isConnected=!1,r.emit("disconnect",_c.ethErrors.provider.disconnected()),i.providerStateRequested=!1}({terminate:void 0!==t&&t,instance:this})}},{key:"_initializeStateAsync",value:function(){return Jd(this,void 0,void 0,L().m(function e(){return L().w(function(e){for(;;)if(0===e.n)return e.a(2,function(e){var t,n;return Jd(this,void 0,void 0,L().m(function r(){var i,o,a,s,c,u,l,d,f,h;return L().w(function(r){for(;;)switch(r.p=r.n){case 0:if(void 0===e.state&&(e.state={accounts:null,autoRequestAccounts:!1,providerStateRequested:!1,chainId:""}),!(i=e.state).providerStateRequested){r.n=1;break}Ec("[SDKProvider: initializeStateAsync()] initialization already in progress"),r.n=14;break;case 1:return i.providerStateRequested=!0,s=null,c=!1,u=!1,r.n=2,jc({enabled:!0});case 2:if(!(l=r.v)){r.n=6;break}return r.n=3,l.getPersistedChannelConfig({});case 3:return d=r.v,c=null!==(t=null==d?void 0:d.relayPersistence)&&void 0!==t&&t,r.n=4,l.getCachedChainId();case 4:return a=r.v,r.n=5,l.getCachedAccounts();case 5:(f=r.v).length>0&&(s=f[0]);case 6:if(Ec("[SDKProvider: initializeStateAsync()] relayPersistence=".concat(c),{relayPersistence:c,cachedChainId:a,cachedSelectedAddress:s}),!c){r.n=10;break}if(!a||!s){r.n=7;break}o={accounts:[s],chainId:a,isUnlocked:!1},u=!0,r.n=10;break;case 7:return r.p=7,r.n=8,e.request({method:"metamask_getProviderState"});case 8:o=r.v,r.n=10;break;case 9:return r.p=9,h=r.v,e._log.error("MetaMask: Failed to get initial state. Please report this bug.",h),i.providerStateRequested=!1,r.a(2);case 10:if(0!==(null===(n=null==o?void 0:o.accounts)||void 0===n?void 0:n.length)){r.n=13;break}if(!e.getSelectedAddress()){r.n=11;break}o.accounts=[e.getSelectedAddress()],r.n=13;break;case 11:return Ec("[SDKProvider: initializeStateAsync()] Fetch accounts remotely."),r.n=12,e.request({method:"eth_requestAccounts",params:[]});case 12:o.accounts=r.v;case 13:e._initializeState(o),i.providerStateRequested=!1,u&&(e._state.isConnected=!0,e.emit("connect",{chainId:null==o?void 0:o.chainId}));case 14:return r.a(2)}},r,null,[[7,9]])}))}(this))},e,this)}))}},{key:"_initializeState",value:function(e){return Ec("[SDKProvider: _initializeState()]",e),function(e,t,n){return Ec("[SDKProvider: initializeState()] set state._initialized to false"),e._state.initialized=!1,t(n)}(this,r(t,"_initializeState",this,1).bind(this),e)}},{key:"_handleChainChanged",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.chainId,i=e.networkVersion;this.state.chainId=n,this.state.networkVersion=i,function(e){var t=e.instance,n=e.chainId,r=e.networkVersion,i=e.superHandleChainChanged;Ec("[SDKProvider: handleChainChanged()] chainId=".concat(n," networkVersion=").concat(r));var o=r;r||(Ec("[SDKProvider: handleChainChanged()] forced network version to prevent provider error"),o="1"),n!==kc&&($.analytics.track("sdk_used_chain",{caip_chain_id:"eip155:".concat(parseInt(null!=n?n:"0x1",16))}),kc=n),t._state.isConnected=!0,t.emit("connect",{chainId:n}),i({chainId:n,networkVersion:o})}({instance:this,chainId:n,networkVersion:i,superHandleChainChanged:r(t,"_handleChainChanged",this,1).bind(this)})}}])}(wc)),Hc={name:"@metamask/sdk",version:"0.33.1",description:"",homepage:"https://github.com/MetaMask/metamask-sdk#readme",bugs:{url:"https://github.com/MetaMask/metamask-sdk/issues"},repository:{type:"git",url:"https://github.com/MetaMask/metamask-sdk",directory:"packages/sdk"},main:"dist/node/cjs/metamask-sdk.js",module:"dist/browser/es/metamask-sdk.js",browser:"dist/browser/es/metamask-sdk.js",unpkg:"dist/browser/umd/metamask-sdk.js","react-native":"dist/react-native/es/metamask-sdk.js",types:"dist/types/src/index.d.ts",sideEffects:!1,files:["/dist"],scripts:{"build:types":"tsc --project tsconfig.build.json --emitDeclarationOnly --outDir dist/types",build:"yarn build:types && rollup -c --bundleConfigAsCjs","build:clean":"yarn clean && yarn build","build:post-tsc":"echo 'N/A'","build:pre-tsc":"echo 'N/A'",typecheck:"tsc --noEmit",clean:"rimraf ./dist",size:"node bundle-size && size-limit",lint:"yarn lint:eslint && yarn lint:misc --check","lint:changelog":"../../scripts/validate-changelog.sh @metamask/sdk","lint:eslint":"eslint . --cache --ext js,ts","lint:fix":"yarn lint:eslint --fix && yarn lint:misc --write","lint:misc":"prettier '**/*.json' '**/*.md' '!CHANGELOG.md' --ignore-path ../../.gitignore",prepack:"../../scripts/prepack.sh","publish:preview":"yarn npm publish --tag preview",reset:"yarn clean && rimraf ./node_modules/",test:'jest --testPathIgnorePatterns "/e2e/"',"test:coverage":'jest --coverage --testPathIgnorePatterns "/e2e/"',"test:e2e":'jest --testPathPattern "/e2e/"',"test:ci":'jest --coverage --passWithNoTests --setupFilesAfterEnv ./jest-preload.js --testPathIgnorePatterns "/e2e/"',"test:dev":'jest -c ./jest.config.ts --detectOpenHandles  --testPathIgnorePatterns "/e2e/"',watch:"rollup -c -w",dev:'concurrently "tsc --watch" "rollup -c -w --bundleConfigAsCjs"',"build:dev":"yarn build:types && NODE_ENV=dev rollup -c --bundleConfigAsCjs"},dependencies:{"@babel/runtime":"^7.26.0","@metamask/onboarding":"^1.0.1","@metamask/providers":"16.1.0","@metamask/sdk-analytics":"workspace:*","@metamask/sdk-communication-layer":"workspace:*","@metamask/sdk-install-modal-web":"workspace:*","@paulmillr/qr":"^0.2.1",bowser:"^2.9.0","cross-fetch":"^4.0.0",debug:"4.3.4",eciesjs:"^0.4.11","eth-rpc-errors":"^4.0.3",eventemitter2:"^6.4.9","obj-multiplex":"^1.0.0",pump:"^3.0.0","readable-stream":"^3.6.2","socket.io-client":"^4.5.1",tslib:"^2.6.0",util:"^0.12.4",uuid:"^8.3.2"},devDependencies:{"@jest/globals":"^29.3.1","@lavamoat/allow-scripts":"^2.3.1","@metamask/auto-changelog":"3.1.0","@metamask/eslint-config":"^6.0.0","@metamask/eslint-config-nodejs":"^6.0.0","@metamask/eslint-config-typescript":"^6.0.0","@react-native-async-storage/async-storage":"^1.19.6","@rollup/plugin-alias":"^5.1.1","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.2","@rollup/plugin-replace":"^6.0.1","@rollup/plugin-terser":"^0.4.1","@size-limit/preset-big-lib":"^11.0.2","@types/dom-screen-wake-lock":"^1.0.2","@types/node":"^20.1.3","@types/pump":"^1.1.1","@types/qrcode-terminal":"^0.12.0","@types/uuid":"^10.0.0","@typescript-eslint/eslint-plugin":"^4.26.0","@typescript-eslint/parser":"^4.26.0","browserify-zlib":"^0.2.0",buffer:"^6.0.3",concurrently:"^9.1.2","crypto-browserify":"^3.12.0",eslint:"^7.30.0","eslint-config-prettier":"^8.3.0","eslint-plugin-import":"^2.23.4","eslint-plugin-jest":"^24.4.0","eslint-plugin-jsdoc":"^36.1.0","eslint-plugin-node":"^11.1.0","eslint-plugin-prettier":"^3.4.0","https-browserify":"^1.0.0",jest:"^29.3.1","jest-environment-jsdom":"^29.3.1",prettier:"^2.3.0",process:"^0.11.10",rimraf:"^4.4.0",rollup:"^4.26.0","rollup-plugin-analyzer":"^4.0.0","rollup-plugin-jscc":"^2.0.0","rollup-plugin-natives":"^0.7.5","rollup-plugin-node-builtins":"^2.1.2","rollup-plugin-polyfill-node":"^0.13.0","rollup-plugin-sizes":"^1.0.6","rollup-plugin-typescript2":"^0.31.2","rollup-plugin-visualizer":"^5.12.0","size-limit":"^11.0.2","stream-browserify":"^3.0.0","stream-http":"^3.2.0","ts-jest":"^29.0.3","ts-node":"^10.9.1",typescript:"^4.3.2",url:"^0.11.0",webpack:"^5.0.0"},publishConfig:{access:"public",registry:"https://registry.npmjs.org/"},lavamoat:{allowScripts:{"eciesjs>secp256k1":!1,"socket.io-client>engine.io-client>ws>bufferutil":!1,"socket.io-client>engine.io-client>ws>utf-8-validate":!1,"@metamask/sdk-communication-layer>bufferutil":!1,"@metamask/sdk-communication-layer>eciesjs>secp256k1":!1,"@metamask/sdk-communication-layer>utf-8-validate":!1}}},function(e){e.INPAGE="metamask-inpage",e.CONTENT_SCRIPT="metamask-contentscript",e.PROVIDER="metamask-provider"}(Uc||(Uc={})),Fc="direct",zc="https://metamask.app.link/connect",qc="metamask://connect",$c={NAME:"MetaMask",RDNS:["io.metamask","io.metamask.flask"]},Wc=/(?:^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[0-9a-f]{4}-[0-9a-f]{12}$)|(?:^0{8}-0{4}-0{4}-0{4}-0{12}$)/,P(P(P(P(P(P(P(P(P(P(N={},(Vc={METAMASK_GETPROVIDERSTATE:"metamask_getProviderState",METAMASK_CONNECTSIGN:"metamask_connectSign",METAMASK_CONNECTWITH:"metamask_connectWith",METAMASK_OPEN:"metamask_open",METAMASK_BATCH:"metamask_batch",PERSONAL_SIGN:"personal_sign",WALLET_REQUESTPERMISSIONS:"wallet_requestPermissions",WALLET_REVOKEPERMISSIONS:"wallet_revokePermissions",WALLET_GETPERMISSIONS:"wallet_getPermissions",WALLET_WATCHASSET:"wallet_watchAsset",WALLET_ADDETHEREUMCHAIN:"wallet_addEthereumChain",WALLET_SWITCHETHETHEREUMCHAIN:"wallet_switchEthereumChain",ETH_REQUESTACCOUNTS:"eth_requestAccounts",ETH_ACCOUNTS:"eth_accounts",ETH_CHAINID:"eth_chainId",ETH_SENDTRANSACTION:"eth_sendTransaction",ETH_SIGNTYPEDDATA:"eth_signTypedData",ETH_SIGNTYPEDDATA_V3:"eth_signTypedData_v3",ETH_SIGNTYPEDDATA_V4:"eth_signTypedData_v4",ETH_SIGNTRANSACTION:"eth_signTransaction",ETH_SIGN:"eth_sign",PERSONAL_EC_RECOVER:"personal_ecRecover"}).ETH_REQUESTACCOUNTS,!0),Vc.ETH_SENDTRANSACTION,!0),Vc.ETH_SIGNTRANSACTION,!0),Vc.ETH_SIGN,!0),Vc.PERSONAL_SIGN,!0),Vc.ETH_ACCOUNTS,!1),Vc.ETH_CHAINID,!1),Vc.PERSONAL_SIGN,!0),Vc.ETH_SIGNTYPEDDATA,!0),Vc.ETH_SIGNTYPEDDATA_V3,!0),P(P(P(P(P(P(P(P(P(P(N,Vc.ETH_SIGNTYPEDDATA_V4,!0),Vc.WALLET_REQUESTPERMISSIONS,!0),Vc.WALLET_GETPERMISSIONS,!0),Vc.WALLET_WATCHASSET,!0),Vc.WALLET_ADDETHEREUMCHAIN,!0),Vc.WALLET_SWITCHETHETHEREUMCHAIN,!0),Vc.METAMASK_CONNECTSIGN,!0),Vc.METAMASK_CONNECTWITH,!0),Vc.PERSONAL_EC_RECOVER,!0),Vc.METAMASK_BATCH,!0),Gc=P(N,Vc.METAMASK_OPEN,!0),Yc=Object.keys(Gc).filter(function(e){return!0===Gc[e]}).map(function(e){return e.toLowerCase()}),Zc=["eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sign"].map(function(e){return e.toLowerCase()}),Jc=".sdk-comm",Qc="providerType",Xc=".MMSDK_cached_address",eu=".MMSDK_cached_chainId",tu={CHAIN_CHANGED:"chainChanged",ACCOUNTS_CHANGED:"accountsChanged",DISCONNECT:"disconnect",CONNECT:"connect",CONNECTED:"connected"},nu=1e6,function(e){e.TERMINATE="terminate",e.EXTENSION="extension",e.INITIALIZED="initialized"}(ru||i("PROVIDER_UPDATE_TYPE",ru={})),iu="undefined"!=typeof window&&window.localStorage,ou=function(e){function t(e){var n,r=e.name,i=e.remote,s=e.deeplinkProtocol,c=e.platformManager;return p(this,t),(n=o(this,t,[{objectMode:!0}])).state={_name:null,remote:null,deeplinkProtocol:!1,platformManager:null},n.state._name=r,n.state.remote=i,n.state.deeplinkProtocol=s,n.state.platformManager=c,n._onMessage=n._onMessage.bind(a(n)),n.state.remote.on(Zi.MESSAGE,n._onMessage),n}return s(t,e),h(t,[{key:"_write",value:function(e,t,n){return Jd(this,void 0,void 0,L().m(function t(){return L().w(function(t){for(;;)if(0===t.n)return t.a(2,Nm(this,e,0,n))},t,this)}))}},{key:"_read",value:function(){}},{key:"_onMessage",value:function(e){return function(e,t){try{if(Ec("[RCPMS: onMessage()] message",t),!t||"object"!=D(t))return;if("object"!=D(null==t?void 0:t.data))return;if(!(null==t?void 0:t.name))return void Ec("[RCPMS: onMessage()] ignore message without name",t);if((null==t?void 0:t.name)!==Uc.PROVIDER)return void Ec("[RCPMS: onMessage()] ignore message with wrong name message=".concat(t));if(af.isBuffer(t)){var n=af.from(t);e.push(n)}else e.push(t)}catch(r){Ec("[RCPMS: onMessage()] ignore message error err=".concat(r))}}(this,e)}},{key:"start",value:function(){}}])}(nc.Duplex),au=1,su=function(e){return new Promise(function(t){setTimeout(function(){t(!0)},e)})},cu=function(e){var t=e.checkInstallationOnAllCalls,n=void 0!==t&&t,r=e.communicationLayerPreference,i=e.injectProvider,o=e.shouldShimWeb3,a=e.platformManager,s=e.installer,c=e.sdk,u=e.remoteConnection,l=e.debug;return Jd(void 0,void 0,void 0,L().m(function e(){var t,d,f,h,p,v,m,g,y,b,w,k,_,S,C,A,M,T,O,R,P;return L().w(function(e){for(;;)switch(e.p=e.n){case 0:if(f=function(e){var t=e.name,n=e.remoteConnection;if(!n||!(null==n?void 0:n.getConnector()))throw new Error("Missing remote connection parameter");return new ou({name:t,remote:null==n?void 0:n.getConnector(),deeplinkProtocol:null==n?void 0:n.state.deeplinkProtocol,platformManager:null==n?void 0:n.getPlatformManager()})}({name:Uc.INPAGE,target:Uc.CONTENT_SCRIPT,platformManager:a,communicationLayerPreference:r,remoteConnection:u}),h=a.getPlatformType(),p=c.options.dappMetadata,v="Sdk/Javascript SdkVersion/".concat(Hc.version," Platform/").concat(h," dApp/").concat(null!==(t=p.url)&&void 0!==t?t:p.name," dAppTitle/").concat(p.name),m=null,g=null,!(y=null===(d=c.options.storage)||void 0===d?void 0:d.storageManager)){e.n=7;break}return e.p=1,e.n=2,y.getCachedAccounts();case 2:(b=e.v).length>0&&(m=b[0]),e.n=4;break;case 3:e.p=3,R=e.v,console.error("[initializeMobileProvider] failed to get cached addresses: ".concat(R));case 4:return e.p=4,e.n=5,y.getCachedChainId();case 5:(w=e.v)&&(g=w),e.n=7;break;case 6:e.p=6,P=e.v,console.error("[initializeMobileProvider] failed to parse cached chainId: ".concat(P));case 7:return Ec("[initializeMobileProvider] cachedAccountAddress: ".concat(m,", cachedChainId: ").concat(g)),k=!(!i||h===po.NonBrowser||h===po.ReactNative),_=Dc.init({shouldSetOnWindow:k,connectionStream:f,shouldShimWeb3:o,sdkInstance:c}),S=!1,C=function(e){S=e},A=function(){return S},M=function(e,t,r,i){return Jd(void 0,void 0,void 0,L().m(function o(){var l,d,f,h,p,b,w,k,_,M,T,O,R,P,I,N,B,j,K,U,H,F,z,q,$,W,G,Y,Z,J,Q,X,ee,te,ne,re,ie,oe,ae,se,ce,ue;return L().w(function(o){for(;;)switch(o.p=o.n){case 0:if(M=Dc.getProvider(),!S){o.n=4;break}M.emit("display_uri",(null==u?void 0:u.state.qrcodeLink)||""),null==u||u.showActiveModal(),T=A();case 1:if(!T){o.n=3;break}return O=A(),R=null==u?void 0:u.isAuthorized(),T=O&&!R,Ec("[initializeMobileProvider: sendRequest()] waiting for initialization to complete - initializing: ".concat(O," authorized: ").concat(R)),o.n=2,su(1e3);case 2:o.n=1;break;case 3:return o.a(2,(Ec("[initializeMobileProvider: sendRequest()] initial method completed -- prevent installation and call provider"),r.apply(void 0,E(t))));case 4:if(P=a.isMetaMaskInstalled(),I=null==u?void 0:u.isConnected(),N=null,B=null,j=null,N=null!==(l=M.getSelectedAddress())&&void 0!==l?l:m,j=M.getChainId()||g,N&&y&&N!==m&&y.persistAccounts([N]).catch(function(e){console.error("[initializeMobileProvider] failed to persist account: ".concat(e))}),j&&(g=j,y&&y.persistChainId(j).catch(function(e){console.error("[initializeMobileProvider] failed to persist chainId: ".concat(e))})),Ec("[initializeMobileProvider: sendRequest()]",{selectedAddress:N,chainId:j}),i&&Ec("[initializeMobileProvider: sendRequest()] method=".concat(e," ongoing=").concat(S," selectedAddress=").concat(N," isInstalled=").concat(P," checkInstallationOnAllCalls=").concat(n," socketConnected=").concat(I)),!N||e.toLowerCase()!==Vc.ETH_ACCOUNTS.toLowerCase()){o.n=5;break}return o.a(2,[N]);case 5:if(!j||e.toLowerCase()!==Vc.ETH_CHAINID.toLowerCase()){o.n=6;break}return o.a(2,j);case 6:if(K=[Vc.ETH_REQUESTACCOUNTS,Vc.WALLET_REQUESTPERMISSIONS,Vc.METAMASK_CONNECTSIGN,Vc.METAMASK_CONNECTWITH],U=!Gc[e],!(H=null===(d=c.options.readonlyRPCMap)||void 0===d?void 0:d[j])||!U){o.n=10;break}return o.p=7,F=null===(f=null==t?void 0:t[0])||void 0===f?void 0:f.params,o.n=8,function(e){var t=e.rpcEndpoint,n=e.method,r=e.sdkInfo,i=e.params;return Jd(void 0,void 0,void 0,L().m(function e(){var o,a,s,c;return L().w(function(e){for(;;)switch(e.p=e.n){case 0:return o=JSON.stringify({jsonrpc:"2.0",method:n,params:i,id:(au+=1,au)}),a={Accept:"application/json","Content-Type":"application/json"},t.includes("infura")&&(a["Metamask-Sdk-Info"]=r),e.p=1,e.n=2,(0,V.default)(t,{method:"POST",headers:a,body:o});case 2:s=e.v,e.n=4;break;case 3:throw e.p=3,(c=e.v)instanceof Error?new Error("Failed to fetch from RPC: ".concat(c.message)):new Error("Failed to fetch from RPC: ".concat(c));case 4:if(s.ok){e.n=5;break}throw new Error("Server responded with a status of ".concat(s.status));case 5:return e.n=6,s.json();case 6:return e.a(2,e.v.result)}},e,null,[[1,3]])}))}({rpcEndpoint:H,sdkInfo:v,method:e,params:F||[]});case 8:return z=o.v,o.a(2,(i&&Ec("initializeProvider::ReadOnlyRPCResponse ".concat(z)),z));case 9:o.p=9,ae=o.v,console.warn("[initializeMobileProvider: sendRequest()] method=".concat(e," readOnlyRPCRequest failed:"),ae);case 10:if(P&&(!P||I)||e===Vc.METAMASK_GETPROVIDERSTATE){o.n=36;break}if(q=(null===(h=null==t?void 0:t[0])||void 0===h?void 0:h.params)||[],-1===K.indexOf(e)&&!n){o.n=32;break}return C(!0),$=e===Vc.METAMASK_CONNECTWITH,W="".concat(Date.now()),o.p=11,o.n=12,s.start({wait:!1,connectWith:$?{method:e,id:W,params:q}:void 0});case 12:return o.n=13,new Promise(function(e,t){null!=u&&u.isAuthorized()&&(Ec("[initializeMobileProvider: sendRequest()] already authorized"),e(!0)),null!=u&&u.getConnector().once(Zi.AUTHORIZED,function(){e(!0)}),c.once(Zi.PROVIDER_UPDATE,function(e){Ec("[initializeMobileProvider: sendRequest()] PROVIDER_UPDATE --- remote provider request interupted type=".concat(e)),e===ru.EXTENSION?t(Zi.PROVIDER_UPDATE):t(new Error("Connection Terminated"))})});case 13:o.n=24;break;case 14:if(o.p=14,se=o.v,ru.EXTENSION!==se){o.n=22;break}if(Ec("[initializeMobileProvider: sendRequest()] extension provider detect: re-create ".concat(e," on the active provider")),e.toLowerCase()!==Vc.METAMASK_CONNECTSIGN.toLowerCase()){o.n=18;break}return o.n=15,null===(p=c.getProvider())||void 0===p?void 0:p.request({method:Vc.ETH_REQUESTACCOUNTS,params:[]});case 15:if((G=o.v).length){o.n=16;break}throw new Error("SDK state invalid -- undefined accounts");case 16:return o.n=17,null===(b=c.getProvider())||void 0===b?void 0:b.request({method:Vc.PERSONAL_SIGN,params:[q[0],G[0]]});case 17:return Y=o.v,o.a(2,(c.emit(Nc.ConnectWithResponse,Y),Y));case 18:if(e.toLowerCase()!==Vc.METAMASK_CONNECTWITH.toLowerCase()){o.n=20;break}return Z=x(q,1),J=Z[0],o.n=19,function(e){var t=e.method,n=e.sdk,r=e.params;return Jd(void 0,void 0,void 0,L().m(function e(){var i,o,a,s,c,u,l,d;return L().w(function(e){for(;;)switch(e.n){case 0:if(n.isExtensionActive()){e.n=1;break}throw new Error("SDK state invalid -- extension is not active");case 1:return Ec("[MetaMaskProvider: extensionConnectWithOverwrite()] Overwriting request method",t,r),e.n=2,null===(i=n.getProvider())||void 0===i?void 0:i.request({method:Vc.ETH_REQUESTACCOUNTS,params:[]});case 2:if((c=e.v).length){e.n=3;break}throw new Error("SDK state invalid -- undefined accounts");case 3:if((null==t?void 0:t.toLowerCase())!==Vc.PERSONAL_SIGN.toLowerCase()){e.n=5;break}return u={method:t,params:[r[0],c[0]]},e.n=4,null===(o=n.getProvider())||void 0===o?void 0:o.request(u);case 4:return e.a(2,e.v);case 5:if((null==t?void 0:t.toLowerCase())!==Vc.ETH_SENDTRANSACTION.toLowerCase()){e.n=7;break}return l={method:t,params:[Object.assign(Object.assign({},r[0]),{from:c[0]})]},e.n=6,null===(a=n.getProvider())||void 0===a?void 0:a.request(l);case 6:return e.a(2,e.v);case 7:if(!Zc.includes(t.toLowerCase())){e.n=8;break}console.warn("MetaMaskSDK connectWith method=".concat(t," -- not handled by the extension -- call separately")),d=c,e.n=10;break;case 8:return e.n=9,null===(s=n.getProvider())||void 0===s?void 0:s.request({method:t,params:r});case 9:d=e.v;case 10:return e.a(2,d)}},e)}))}({method:J.method,sdk:c,params:J.params});case 19:return Q=o.v,o.a(2,(c.emit(Nc.ConnectWithResponse,Q),Q));case 20:return Ec("[initializeMobileProvider: sendRequest()] sending '".concat(e,"' on active provider"),q),o.n=21,null===(w=c.getProvider())||void 0===w?void 0:w.request({method:e,params:q});case 21:return o.a(2,o.v);case 22:if(se!==Zi.REJECTED){o.n=23;break}throw null!=u&&u.closeModal(),null===(k=c.getProvider())||void 0===k||k.handleDisconnect({terminate:!1}),Object.assign(new Error("User rejected connection"),{code:4001});case 23:throw Ec("[initializeMobileProvider: sendRequest()] failed to start installer: ".concat(se)),se;case 24:return o.p=24,C(!1),o.f(24);case 25:if(e!==Vc.ETH_REQUESTACCOUNTS){o.n=27;break}return o.n=26,new Promise(function(e){var t=setInterval(function(){var n=M.getState().accounts;n&&(clearInterval(t),e(n))},100)});case 26:return B=o.v,Ec("[initializeMobileProvider: sendRequest()] selectedAddress: ".concat(N," --- SKIP rpc call")),o.a(2,B);case 27:if(e!==Vc.METAMASK_CONNECTWITH){o.n=31;break}return o.p=28,ee=0,te=function(e){var t=e.resolve,n=e.reject;ee+=1;var r=null==u?void 0:u.getConnector().getRPCMethodTracker(),i=null==r?void 0:r[W];Ec("TRACKER: update method ".concat(W),i),(null==i?void 0:i.result)?(Ec("[initializeMobileProvider: sendRequest()] found result",i.result),c.emit(Nc.ConnectWithResponse,i.result),t(i.result)):(null==i?void 0:i.error)?(Ec("[initializeMobileProvider: sendRequest()] found error",i.error),n(i.error)):ee>=5?(Ec("[initializeMobileProvider: sendRequest()] max message count reached without result"),n(new Error("Max message count reached without result"))):Ec("[initializeMobileProvider: sendRequest()] not found yet, need to wait for next update")},o.n=29,new Promise(function(e,t){var n=null==u?void 0:u.getConnector().getRPCMethodTracker();Ec("TRACKER: method ".concat(W),n),(null==n?void 0:n[W].result)?(Ec("[initializeMobileProvider: sendRequest()] found result",null==n?void 0:n[W].result),e(null==n?void 0:n[W].result)):null!=n&&n[W].error&&(Ec("[initializeMobileProvider: sendRequest()] found error",null==n?void 0:n[W].error),t(null==n?void 0:n[W].error)),z=function(){return te({resolve:e,reject:t})},ne=null==u?void 0:u.getConnector().on(Zi.RPC_UPDATE,z)});case 29:return re=o.v,o.a(2,(z&&null!==(X=ne)&&void 0!==X&&X.off(Zi.RPC_UPDATE,z),Ec("TRACKER: result",re),re));case 30:throw o.p=30,ce=o.v,Ec("[initializeMobileProvider: sendRequest()] error:",ce),ce;case 31:return t[0]&&"object"==D(t[0])&&(t[0].params={__triggeredInstaller:!0,wrappedParams:t[0].params}),o.a(2,r.apply(void 0,E(t)));case 32:if(!a.isSecure()||!Gc[e]){o.n=33;break}return o.a(2,r.apply(void 0,E(t)));case 33:if(!c.isExtensionActive()){o.n=35;break}return Ec("[initializeMobileProvider: sendRequest()] EXTENSION active - redirect request '".concat(e,"' to it"),t,q),o.n=34,null===(_=c.getProvider())||void 0===_?void 0:_.request({method:e,params:q});case 34:return o.a(2,o.v);case 35:throw Ec("[initializeMobileProvider: sendRequest()] method=".concat(e," --- skip --- not connected/installed")),new Error("MetaMask is not connected/installed, please call eth_requestAccounts to connect first.");case 36:return o.p=36,o.n=37,r.apply(void 0,E(t));case 37:return ie=o.v,Ec("[initializeMobileProvider: sendRequest()] method=".concat(e," rpcResponse"),ie),e===Vc.WALLET_REQUESTPERMISSIONS&&(oe=ie.reduce(function(e,t){var n;if("eth_accounts"===t.parentCapability){var r=null===(n=t.caveats.find(function(e){return"restrictReturnedAccounts"===e.type}))||void 0===n?void 0:n.value;r&&e.push.apply(e,E(r))}return e},[]),Ec("[initializeMobileProvider: sendRequest()] accountsToPersist:",oe),oe.length>0&&(M.handleAccountsChanged(oe,!1),null==y||y.persistAccounts(oe))),o.a(2,ie);case 38:throw o.p=38,ue=o.v,console.error("[initializeMobileProvider: sendRequest()] error:",ue),ue;case 39:return o.a(2)}},o,null,[[36,38],[28,30],[11,14,24,25],[7,9]])}))},T=_.request,_.request=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Jd(void 0,void 0,void 0,L().m(function e(){return L().w(function(e){for(;;)if(0===e.n)return e.a(2,M(null==t?void 0:t[0].method,t,T,l))},e)}))},O=_.send,e.a(2,(_.send=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Jd(void 0,void 0,void 0,L().m(function e(){return L().w(function(e){for(;;)if(0===e.n)return e.a(2,M(null==t?void 0:t[0],t,O,l))},e)}))},Ec("[initializeMobileProvider: sendRequest()] metamaskStream.start()"),f.start(),_))}},e,null,[[4,6],[1,3]])}))},uu=function(){return h(function e(t){var n=t.serverUrl,r=t.enabled,i=t.originatorInfo;p(this,e),this.serverURL=qi,this.serverURL=n,this.originatorInfo=i,this.enabled=null==r||r},[{key:"send",value:function(e){var t=e.event,n=e.params;if(this.enabled){var r=Object.assign(Object.assign({id:"sdk",event:t,sdkVersion:Hc.version},this.originatorInfo),{params:n});Ec("[Analytics: send()] event: ".concat(t),r),Hi(r,this.serverURL).catch(function(e){Ec("[Analytics: send()] error: ".concat(e))})}}}])}(),lu=function(){if("undefined"!=typeof document){for(var e,t=document.getElementsByTagName("link"),n=0;n<t.length;n++)"icon"!==t[n].getAttribute("rel")&&"shortcut icon"!==t[n].getAttribute("rel")||(e=t[n].getAttribute("href"));return e}},du=163400,fu=function(e,t,n){if(cp(e))if(n||t&&"object"==D(t)&&null!==t&&"error"in t){var r=n||(null==t?void 0:t.error);r&&4001===r.code?$.analytics.track("sdk_action_rejected",{action:e}):$.analytics.track("sdk_action_failed",{action:e})}else $.analytics.track("sdk_action_succeeded",{action:e})},hu=function(e){var t=e.provider,n=e.sdkInstance;if("state"in t)throw new Error("INVALID EXTENSION PROVIDER");return new Proxy(t,{get:function(e,r){return"request"===r?function(t){var r,i;return Jd(this,void 0,void 0,L().m(function o(){var a,s,c,u,l,d,f,h,p;return L().w(function(o){for(;;)switch(o.p=o.n){case 0:if(Ec("[wrapExtensionProvider()] Overwriting request method",t),a=t.method,s=t.params,c=Yc.includes(a.toLowerCase()),u=Bm(n),l=u.id,d=u.from,c&&(null===(r=n.analytics)||void 0===r||r.send({event:eo.SDK_RPC_REQUEST,params:{method:a,from:d,id:l}})),cp(a)&&$.analytics.track("sdk_action_requested",{action:a}),a!==Vc.METAMASK_BATCH||!Array.isArray(s)){o.n=1;break}return o.a(2,function(e){var t=e.target,n=e.args,r=e.trackEvent,i=e.sdkInstance;return Jd(void 0,void 0,void 0,L().m(function e(){var o,a,s,c,u,l,d,f,h,p,v,m,g,y,b;return L().w(function(e){for(;;)switch(e.p=e.n){case 0:if("metamask_batch"===n.method){e.n=1;break}throw new Error("Invalid usage");case 1:s=[],c=null!==(o=null==n?void 0:n.params)&&void 0!==o?o:[],u=_(c),e.p=2,u.s();case 3:if((l=u.n()).done){e.n=6;break}return d=l.value,e.n=4,null==t?void 0:t.request({method:d.method,params:d.params});case 4:f=e.v,s.push(f);case 5:e.n=3;break;case 6:e.n=8;break;case 7:e.p=7,b=e.v,u.e(b);case 8:return e.p=8,u.f(),e.f(8);case 9:for(h=Bm(i),p=h.id,v=h.from,r&&(null===(a=i.analytics)||void 0===a||a.send({event:eo.SDK_RPC_REQUEST_DONE,params:{method:n.method,from:v,id:p}})),m=0,g=s;m<g.length;m++)y=g[m],fu(n.method,y,null);return e.a(2,s)}},e,null,[[2,7,8,9]])}))}({target:e,args:t,trackEvent:c,sdkInstance:n}));case 1:if(a.toLowerCase()!==Vc.METAMASK_CONNECTSIGN.toLowerCase()||!Array.isArray(s)){o.n=2;break}return o.a(2,function(e){var t=e.target,n=e.params;return Jd(void 0,void 0,void 0,L().m(function e(){var r,i,o,a;return L().w(function(e){for(;;)switch(e.p=e.n){case 0:return i=null,e.p=1,e.n=2,t.request({method:Vc.ETH_REQUESTACCOUNTS,params:[]});case 2:if((o=e.v).length){e.n=3;break}throw new Error("SDK state invalid -- undefined accounts");case 3:return e.n=4,t.request({method:Vc.PERSONAL_SIGN,params:[n[0],o[0]]});case 4:return r=e.v,e.a(2,r);case 5:throw e.p=5,a=e.v,i=a,a;case 6:return e.p=6,fu(Vc.PERSONAL_SIGN,r,i),e.f(6);case 7:return e.a(2)}},e,null,[[1,5,6,7]])}))}({target:e,params:s}));case 2:if(a.toLowerCase()!==Vc.METAMASK_CONNECTWITH.toLowerCase()||!Array.isArray(s)){o.n=3;break}return o.a(2,function(e){var t=e.target,n=e.params;return Jd(void 0,void 0,void 0,L().m(function e(){var r,i,o,a,s,c,u,l,d,f,h;return L().w(function(e){for(;;)switch(e.p=e.n){case 0:return r=x(n,1),i=r[0],o=i.method,a=i.params,c=null,e.p=1,e.n=2,t.request({method:Vc.ETH_REQUESTACCOUNTS,params:[]});case 2:if(u=e.v,Array.isArray(u)&&u.length){e.n=3;break}throw new Error("SDK state invalid -- undefined accounts");case 3:if((null==o?void 0:o.toLowerCase())!==Vc.PERSONAL_SIGN.toLowerCase()){e.n=5;break}return e.n=4,t.request({method:o,params:[a[0],u[0]]});case 4:s=e.v,l=s,e.n=12;break;case 5:if((null==o?void 0:o.toLowerCase())!==Vc.ETH_SENDTRANSACTION.toLowerCase()){e.n=7;break}return e.n=6,t.request({method:o,params:[Object.assign(Object.assign({},a[0]),{from:u[0]})]});case 6:s=e.v,d=s,e.n=11;break;case 7:if(!Zc.includes(o.toLowerCase())){e.n=8;break}console.warn("MetaMaskSDK connectWith method=".concat(o," -- not handled by the extension -- call separately")),f=s=u,e.n=10;break;case 8:return e.n=9,t.request({method:o,params:a});case 9:s=e.v,f=s;case 10:d=f;case 11:l=d;case 12:return e.a(2,l);case 13:throw e.p=13,h=e.v,c=h,h;case 14:return e.p=14,fu(o,s,c),e.f(14);case 15:return e.a(2)}},e,null,[[1,13,14,15]])}))}({target:e,params:s}));case 3:return h=null,o.p=4,o.n=5,e.request(t);case 5:return f=o.v,o.a(2,f);case 6:throw o.p=6,p=o.v,h=p,p;case 7:return o.p=7,c&&(null===(i=n.analytics)||void 0===i||i.send({event:eo.SDK_RPC_REQUEST_DONE,params:{method:a,from:d,id:l}})),fu(a,f,h),o.f(7);case 8:return o.a(2)}},o,null,[[4,6,7,8]])}))}:"getChainId"===r?function(){return t.chainId}:"getNetworkVersion"===r?function(){return t.networkVersion}:"getSelectedAddress"===r?function(){return t.selectedAddress}:"isConnected"===r?function(){return t._state.isConnected}:e[r]}})},function(e){e.Announce="eip6963:announceProvider",e.Request="eip6963:requestProvider"}(pu||(pu={})),vu=function(e){return Jd(void 0,void 0,void 0,L().m(function t(){var n,r,i;return L().w(function(t){for(;;)switch(t.n){case 0:if(n=e.options,r=n.infuraAPIKey){t.n=1;break}return t.a(2);case 1:i={"0x1":"https://mainnet.infura.io/v3/".concat(r),"0x5":"https://goerli.infura.io/v3/".concat(r),"0xaa36a7":"https://sepolia.infura.io/v3/".concat(r),"0xe708":"https://linea-mainnet.infura.io/v3/".concat(r),"0xe704":"https://linea-goerli.infura.io/v3/".concat(r),"0x89":"https://polygon-mainnet.infura.io/v3/".concat(r),"0x13881":"https://polygon-mumbai.infura.io/v3/".concat(r),"0x45":"https://optimism-mainnet.infura.io/v3/".concat(r),"0x1a4":"https://optimism-goerli.infura.io/v3/".concat(r),"0xa4b1":"https://arbitrum-mainnet.infura.io/v3/".concat(r),"0x66eed":"https://arbitrum-goerli.infura.io/v3/".concat(r),"0x2a15c308d":"https://palm-mainnet.infura.io/v3/".concat(r),"0x2a15c3083":"https://palm-testnet.infura.io/v3/".concat(r),"0xa86a":"https://avalanche-mainnet.infura.io/v3/".concat(r),"0xa869":"https://avalanche-fuji.infura.io/v3/".concat(r),"0x4e454152":"https://aurora-mainnet.infura.io/v3/".concat(r),"0x4e454153":"https://aurora-testnet.infura.io/v3/".concat(r),"0x534e5f4d41494e":"https://starknet-mainnet.infura.io/v3/".concat(r),"0x534e5f474f45524c49":"https://starknet-goerli.infura.io/v3/".concat(r),"0x534e5f474f45524c4932":"https://starknet-goerli2.infura.io/v3/".concat(r),"0xa4ec":"https://celo-mainnet.infura.io/v3/".concat(r),"0xaef3":"https://celo-alfajores.infura.io/v3/".concat(r)},e.options.readonlyRPCMap?e.options.readonlyRPCMap=Object.assign(Object.assign({},e.options.readonlyRPCMap),i):e.options.readonlyRPCMap=i;case 2:return t.a(2)}},t)}))},mu=function(e){return Jd(void 0,void 0,void 0,L().m(function t(){var n,r;return L().w(function(t){for(;;)switch(t.p=t.n){case 0:if(n=e.options,!(r=n.readonlyRPCMap)){t.n=3;break}t.p=1,Ec("[MetaMaskSDK: setupReadOnlyRPCProviders()] Setting up Readonly RPC Providers",r),e.setReadOnlyRPCCalls(!0),t.n=3;break;case 2:throw t.p=2,t.v,new Error("Invalid Infura Settings");case 3:return t.a(2)}},t,null,[[1,2]])}))},gu="INSTALLED",yu="NOT_INSTALLED",bu="REGISTERED",wu="REGISTERING",Eu="RELOADING",ku={CHROME:"https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn",FIREFOX:"https://addons.mozilla.org/firefox/addon/ether-metamask/",DEFAULT:"https://metamask.io"},_u="REGISTRATION_IN_PROGRESS",Su="FORWARDER_ID",Cu=function(){function e(t){var n=void 0===t?{}:t,r=n.forwarderOrigin,i=void 0===r?"https://fwd.metamask.io":r,o=n.forwarderMode,a=void 0===o?e.FORWARDER_MODE.INJECT:o;this.forwarderOrigin=i,this.forwarderMode=a,this.state=e.isMetaMaskInstalled()?gu:yu;var s=e._detectBrowser();this.downloadUrl=s?ku[s]:ku.DEFAULT,this._onMessage=this._onMessage.bind(this),this._onMessageFromForwarder=this._onMessageFromForwarder.bind(this),this._openForwarder=this._openForwarder.bind(this),this._openDownloadPage=this._openDownloadPage.bind(this),this.startOnboarding=this.startOnboarding.bind(this),this.stopOnboarding=this.stopOnboarding.bind(this),window.addEventListener("message",this._onMessage),a===e.FORWARDER_MODE.INJECT&&"true"===sessionStorage.getItem(_u)&&e._injectForwarder(this.forwarderOrigin)}return e.prototype._onMessage=function(e){if(e.origin===this.forwarderOrigin)return"metamask:reload"===e.data.type?this._onMessageFromForwarder(e):void console.debug("Unknown message from '"+e.origin+"' with data "+JSON.stringify(e.data))},e.prototype._onMessageUnknownStateError=function(e){throw new Error("Unknown state: '"+e+"'")},e.prototype._onMessageFromForwarder=function(t){return function(e,t,n,r){return new(n||(n=Promise))(function(t,i){function o(e){try{s(r.next(e))}catch(t){i(t)}}function a(e){try{s(r.throw(e))}catch(t){i(t)}}function s(e){var r;e.done?t(e.value):(r=e.value,r instanceof n?r:new n(function(e){e(r)})).then(o,a)}s((r=r.apply(e,[])).next())})}(this,0,void 0,function(){return function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}(this,function(n){switch(n.label){case 0:switch(this.state){case Eu:return[3,1];case yu:return[3,2];case gu:return[3,3];case wu:return[3,5];case bu:return[3,6]}return[3,7];case 1:return console.debug("Ignoring message while reloading"),[3,8];case 2:return console.debug("Reloading now to register with MetaMask"),this.state=Eu,location.reload(),[3,8];case 3:return console.debug("Registering with MetaMask"),this.state=wu,[4,e._register()];case 4:return n.sent(),this.state=bu,t.source.postMessage({type:"metamask:registrationCompleted"},t.origin),this.stopOnboarding(),[3,8];case 5:return console.debug("Already registering - ignoring reload message"),[3,8];case 6:return console.debug("Already registered - ignoring reload message"),[3,8];case 7:this._onMessageUnknownStateError(this.state),n.label=8;case 8:return[2]}})})},e.prototype.startOnboarding=function(){sessionStorage.setItem(_u,"true"),this._openDownloadPage(),this._openForwarder()},e.prototype.stopOnboarding=function(){"true"===sessionStorage.getItem(_u)&&(this.forwarderMode===e.FORWARDER_MODE.INJECT&&(console.debug("Removing forwarder"),e._removeForwarder()),sessionStorage.setItem(_u,"false"))},e.prototype._openForwarder=function(){this.forwarderMode===e.FORWARDER_MODE.OPEN_TAB?window.open(this.forwarderOrigin,"_blank"):e._injectForwarder(this.forwarderOrigin)},e.prototype._openDownloadPage=function(){window.open(this.downloadUrl,"_blank")},e.isMetaMaskInstalled=function(){return Boolean(window.ethereum&&window.ethereum.isMetaMask)},e._register=function(){return window.ethereum.request({method:"wallet_registerOnboarding"})},e._injectForwarder=function(e){var t=document.body,n=document.createElement("iframe");n.setAttribute("height","0"),n.setAttribute("width","0"),n.setAttribute("style","display: none;"),n.setAttribute("src",e),n.setAttribute("id",Su),t.insertBefore(n,t.children[0])},e._removeForwarder=function(){var e;null===(e=document.getElementById(Su))||void 0===e||e.remove()},e._detectBrowser=function(){var e=Lc.parse(window.navigator.userAgent);return"Firefox"===e.browser.name?"FIREFOX":["Chrome","Chromium"].includes(e.browser.name||"")?"CHROME":null},e.FORWARDER_MODE={INJECT:"INJECT",OPEN_TAB:"OPEN_TAB"},e}(),Au=function(){return h(function e(t){var n=t.remote,r=t.preferDesktop,i=t.platformManager,o=t.debug,a=void 0!==o&&o;p(this,e),this.state={isInstalling:!1,hasInstalled:!1,resendRequest:null,preferDesktop:!1,platformManager:null,remote:null,debug:!1,connectWith:void 0},this.state.remote=n,this.state.preferDesktop=r,this.state.platformManager=i,this.state.debug=a},[{key:"startDesktopOnboarding",value:function(){return function(){return Jd(this,void 0,void 0,L().m(function e(){return L().w(function(e){for(;;)switch(e.n){case 0:Ec("[MetamaskInstaller: startDesktopOnboarding() starting desktop onboarding"),window.ethereum&&(window.ethereum=void 0),(new Cu).startOnboarding();case 1:return e.a(2)}},e)}))}()}},{key:"redirectToProperInstall",value:function(){return Jd(this,void 0,void 0,L().m(function e(){return L().w(function(e){for(;;)if(0===e.n)return e.a(2,function(e){var t,n;return Jd(this,void 0,void 0,L().m(function r(){var i,o,a;return L().w(function(r){for(;;)switch(r.p=r.n){case 0:if(i=e.state,o=null===(t=i.platformManager)||void 0===t?void 0:t.getPlatformType(),Ec("[MetamaskInstaller: redirectToProperInstall()] platform=".concat(o)),o!==po.MetaMaskMobileWebview){r.n=1;break}return r.a(2,!1);case 1:return i.isInstalling=!0,r.p=2,r.n=3,null===(n=i.remote)||void 0===n?void 0:n.startConnection({connectWith:i.connectWith});case 3:i.isInstalling=!1,i.hasInstalled=!0,r.n=5;break;case 4:throw r.p=4,a=r.v,i.isInstalling=!1,a;case 5:return r.a(2,!0)}},r,null,[[2,4]])}))}(this))},e,this)}))}},{key:"checkInstallation",value:function(){return Jd(this,void 0,void 0,L().m(function e(){return L().w(function(e){for(;;)if(0===e.n)return e.a(2,function(e){var t;return Jd(this,void 0,void 0,L().m(function n(){var r,i,o;return L().w(function(n){for(;;)switch(n.n){case 0:if(r=e.state,i=null===(t=r.platformManager)||void 0===t?void 0:t.isMetaMaskInstalled(),Ec("[MetamaskInstaller: checkInstallation()] isInstalled=".concat(i)),o=!!i){n.n=2;break}return n.n=1,e.redirectToProperInstall();case 1:o=n.v;case 2:return n.a(2,o)}},n)}))}(this))},e,this)}))}},{key:"start",value:function(e){var t=e.wait,n=void 0!==t&&t,r=e.connectWith;return Jd(this,void 0,void 0,L().m(function e(){return L().w(function(e){for(;;)switch(e.n){case 0:return this.state.connectWith=r,Ec("[MetaMaskInstaller: start()] wait=".concat(n),r),e.n=1,Km(this,{wait:n});case 1:return e.a(2)}},e,this)}))}}])}(),xu=function(){return h(function e(t){var n=t.debug,r=t.sdkVersion;p(this,e),this.containers={install:void 0,pending:void 0,select:void 0},this.defined={install:!1,pending:!1,select:!1},this.debug=null!=n&&n,this.sdkVersion=r},[{key:"loadComponent",value:function(e){return Jd(this,void 0,void 0,L().m(function t(){var n,r;return L().w(function(t){for(;;)switch(t.p=t.n){case 0:if(this.defined[e]){t.n=4;break}return this.defined[e]=!0,t.p=1,t.n=2,Promise.resolve().then(function(){return Yl});case 2:n=t.v,console.log("loader",n),n.defineCustomElements(),t.n=4;break;case 3:t.p=3,r=t.v,console.error("Failed to load ".concat(e," modal:"),r);case 4:return t.a(2)}},t,this,[[1,3]])}))}},{key:"renderInstallModal",value:function(e){var t;return Jd(this,void 0,void 0,L().m(function n(){var r;return L().w(function(n){for(;;)switch(n.n){case 0:return this.debug&&console.debug("ModalLoader: renderInstallModal",e),this.containers.install=e.parentElement,n.n=1,this.loadComponent("install");case 1:(r=document.createElement("mm-install-modal")).link=e.link,r.preferDesktop=e.preferDesktop,r.sdkVersion=null!==(t=e.sdkVersion)&&void 0!==t?t:this.sdkVersion,r.addEventListener("close",function(t){var n=t.detail.shouldTerminate;return e.onClose(n)}),r.addEventListener("startDesktopOnboarding",e.metaMaskInstaller.startDesktopOnboarding),r.addEventListener("trackAnalytics",function(t){var n;return null===(n=e.onAnalyticsEvent)||void 0===n?void 0:n.call(e,t.detail)}),e.parentElement.appendChild(r);case 2:return n.a(2)}},n,this)}))}},{key:"renderSelectModal",value:function(e){var t;return Jd(this,void 0,void 0,L().m(function n(){var r,i=this;return L().w(function(n){for(;;)switch(n.n){case 0:return this.containers.select=e.parentElement,n.n=1,this.loadComponent("select");case 1:(r=document.createElement("mm-select-modal")).link=e.link,r.sdkVersion=null!==(t=e.sdkVersion)&&void 0!==t?t:this.sdkVersion,r.preferDesktop=e.preferDesktop,r.addEventListener("close",function(t){var n=t.detail.shouldTerminate;return e.onClose(n)}),r.addEventListener("connectWithExtension",e.connectWithExtension),e.parentElement.appendChild(r),setTimeout(function(){return i.updateQRCode(e.link)},100);case 2:return n.a(2)}},n,this)}))}},{key:"renderPendingModal",value:function(e){var t;return Jd(this,void 0,void 0,L().m(function n(){var r;return L().w(function(n){for(;;)switch(n.n){case 0:return this.containers.pending=e.parentElement,n.n=1,this.loadComponent("pending");case 1:(r=document.createElement("mm-pending-modal")).sdkVersion=null!==(t=e.sdkVersion)&&void 0!==t?t:this.sdkVersion,r.displayOTP=e.displayOTP,r.addEventListener("close",e.onClose),r.addEventListener("updateOTPValue",function(t){var n=t.detail.otpValue;return e.updateOTPValue(n)}),e.onDisconnect&&r.addEventListener("disconnect",e.onDisconnect),e.parentElement.appendChild(r);case 2:return n.a(2)}},n,this)}))}},{key:"updateOTPValue",value:function(e){var t=this;setTimeout(function(){var n,r;(r=null===(n=t.containers.pending)||void 0===n?void 0:n.querySelector("mm-pending-modal"))&&(r.otpCode=e)},800)}},{key:"updateQRCode",value:function(e){var t,n,r=null===(t=this.containers.install)||void 0===t?void 0:t.querySelector("mm-install-modal");if(r)r.link=e;else{var i=null===(n=this.containers.select)||void 0===n?void 0:n.querySelector("mm-select-modal");i&&(i.link=e)}}},{key:"unmount",value:function(){var e=this;Object.entries(this.containers).forEach(function(t){var n,r=x(t,2),i=r[0],o=r[1];null===(n=null==o?void 0:o.parentNode)||void 0===n||n.removeChild(o),e.containers[i]=void 0})}}])}(),Mu=function(e){var t=e.link,n=e.debug,r=e.installer,i=e.terminate,o=e.connectWithExtension,a=e.preferDesktop,s=e.onAnalyticsEvent,c=null,u=null;Ec("[UI: InstallModal-web: sdkWebInstallModal()] ################## Installing Modal #################"),Ec("[UI: InstallModal-web: sdkWebInstallModal()] link=".concat(t)),Ec('[UI: InstallModal-web: sdkWebInstallModal()] npx uri-scheme open "'.concat(t,'" --ios')),Ec('[UI: InstallModal-web: sdkWebInstallModal()] npx uri-scheme open "'.concat(t,'" --android')),Ec('[UI: InstallModal-web: sdkWebInstallModal()] adb shell am start -a android.intent.action.VIEW -d "'.concat(t,'"'));var l=function(e){var t;Ec("[UI: InstallModal-web: sdkWebInstallModal()] installModal-web unmounting install modal -- shouldTerminate:",e,u),null!=u&&u.parentNode&&(null===(t=u.parentNode)||void 0===t||t.removeChild(u)),u=null,c=null,!0===e&&(null==i||i())};return{mount:function(e){if(Ec("[UI: InstallModal-web: sdkWebInstallModal()] installModal-web mounting install modal",u),u)return u.style.display="block",void(null==c||c.updateQRCode(e));c=new xu({debug:n,sdkVersion:Hc.version}),u=document.createElement("div"),document.body.appendChild(u),window.extension?c.renderSelectModal({parentElement:u,connectWithExtension:function(){l(),null==o||o()},onClose:l,link:t,preferDesktop:null!=a&&a}).catch(function(e){console.error(e)}):c.renderInstallModal({parentElement:u,preferDesktop:null!=a&&a,link:t,metaMaskInstaller:r,onClose:l,onAnalyticsEvent:s}).catch(function(e){console.error("[UI: InstallModal-web: sdkWebInstallModal()]",e)})},unmount:l}},Tu=function(e){var t=e.onDisconnect,n=e.debug,r=null,i=null,o=function(){Ec("[UI: pendingModal-web: sdkWebPendingModal()] pendingModal-web unmount",r),null!=r&&r.parentNode&&r.parentNode.removeChild(r),r=null,i=null},a=function(e){Ec("[UI: pendingModal-web: sdkWebPendingModal()] pendingModal-web updateOTPValue",e),i&&i.updateOTPValue(e)},s=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{displayOTP:!0}).displayOTP;Ec("[UI: pendingModal-web: sdkWebPendingModal()] pendingModal-web mount",r),r?r.style.display="block":(i=new xu({debug:n,sdkVersion:Hc.version}),r=document.createElement("div"),document.body.appendChild(r),i.renderPendingModal({parentElement:r,onClose:o,onDisconnect:t,updateOTPValue:a,displayOTP:e}).catch(function(e){console.error("[UI: pendingModal-web: sdkWebPendingModal()]",e)}))};return s(),{mount:s,unmount:o,updateOTPValue:a}},Ou=function(){return h(function e(t){var n,r,i;p(this,e),this.state={connector:void 0,qrcodeLink:void 0,analytics:void 0,developerMode:!1,authorized:!1,reconnection:!1,preferDesktop:!1,deeplinkProtocol:!1,listeners:[],communicationLayerPreference:void 0,platformManager:void 0,pendingModal:void 0,installModal:void 0,otpAnswer:void 0},this.options=t;var o=!0===(null===(n=t.logging)||void 0===n?void 0:n.developerMode)||!0===(null===(r=t.logging)||void 0===r?void 0:r.sdk);this.state.developerMode=o,this.state.analytics=t.analytics,this.state.preferDesktop=null!==(i=t.preferDesktop)&&void 0!==i&&i,this.state.useDeeplink=t.sdk.options.useDeeplink,this.state.communicationLayerPreference=t.communicationLayerPreference,this.state.platformManager=t.platformManager,t.modals.install||(t.modals.install=Mu),t.modals.otp||(t.modals.otp=Tu)},[{key:"startConnection",value:function(e){return Jd(this,void 0,void 0,L().m(function t(){return L().w(function(t){for(;;)if(0===t.n)return t.a(2,qm(this.state,this.options,e))},t,this)}))}},{key:"initRemoteCommunication",value:function(e){var t,n,r,i=e.sdkInstance;return Jd(this,void 0,void 0,L().m(function e(){var o,a;return L().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,null===(n=null===(t=i.options.storage)||void 0===t?void 0:t.storageManager)||void 0===n?void 0:n.getPersistedChannelConfig();case 1:return o=e.v,this.options.ecies||(a={privateKey:null==o?void 0:o.localKey},this.options.ecies=a),Um(this.state,this.options),e.n=2,null===(r=this.getConnector())||void 0===r?void 0:r.initFromDappStorage();case 2:zm(this.state,this.options);case 3:return e.a(2)}},e,this)}))}},{key:"showActiveModal",value:function(){return function(e){var t,n,r,i;e.authorized?Ec("[RemoteConnection: showActiveModal()] already authorized"):e.pendingModal?null===(n=(t=e.pendingModal).mount)||void 0===n||n.call(t):e.installModal&&(null===(i=(r=e.installModal).mount)||void 0===i||i.call(r,e.qrcodeLink||""))}(this.state)}},{key:"closeModal",value:function(){var e,t,n,r;null===(t=null===(e=this.state.pendingModal)||void 0===e?void 0:e.unmount)||void 0===t||t.call(e),null===(r=null===(n=this.state.installModal)||void 0===n?void 0:n.unmount)||void 0===r||r.call(n,!1)}},{key:"getUniversalLink",value:function(){if(!this.state.qrcodeLink)throw new Error("connection not started. run startConnection() first.");return this.state.qrcodeLink}},{key:"getChannelConfig",value:function(){var e;return null===(e=this.state.connector)||void 0===e?void 0:e.getChannelConfig()}},{key:"getKeyInfo",value:function(){var e;return null===(e=this.state.connector)||void 0===e?void 0:e.getKeyInfo()}},{key:"getConnector",value:function(){if(!this.state.connector)throw new Error("invalid remote connector");return this.state.connector}},{key:"getPlatformManager",value:function(){if(!this.state.platformManager)throw new Error("PlatformManager not available");return this.state.platformManager}},{key:"isConnected",value:function(){var e;return(null===(e=this.state.connector)||void 0===e?void 0:e.isReady())||!1}},{key:"isAuthorized",value:function(){var e;return(null===(e=this.state.connector)||void 0===e?void 0:e.isAuthorized())||!1}},{key:"isPaused",value:function(){var e;return null===(e=this.state.connector)||void 0===e?void 0:e.isPaused()}},{key:"disconnect",value:function(e){var t,n,r,i;Ec("[RemoteConnection: disconnect()]",e),null!=e&&e.terminate&&(Dc.getProvider().handleDisconnect({terminate:!0}),null===(n=null===(t=this.state.pendingModal)||void 0===t?void 0:t.unmount)||void 0===n||n.call(t),this.state.otpAnswer=void 0),null===(r=this.state.connector)||void 0===r||r.disconnect(e),i=this.state,Ec("[RemoteConnection: cleanupConnector()] cleaning up connector"),i.connector&&(Hm(i),i.connector.disconnect({terminate:!0}).catch(function(e){Ec("[RemoteConnection: cleanupConnector()] error disconnecting connector",e)}))}}])}(),i("default",i("MetaMaskSDK",function(e){function t(){var e,n,r,i,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{storage:{enabled:!0},injectProvider:!0,forceInjectProvider:!1,enableAnalytics:!0,shouldShimWeb3:!0,useDeeplink:!0,extensionOnly:!0,headless:!1,dappMetadata:{name:"",url:"",iconUrl:""},_source:Fc,i18nOptions:{enabled:!1}};p(this,t),(e=o(this,t)).extensionActive=!1,e._initialized=!1,e.sdkInitPromise=void 0,e.debug=!1,e.readonlyRPCCalls=!1,e.availableLanguages=["en"],e.ANON_ID_STORAGE_KEY="mm-sdk-anon-id",W.default.disable();var s=!0===(null===(n=a.logging)||void 0===n?void 0:n.developerMode);if((!(null===(r=a.logging)||void 0===r)&&r.sdk||s)&&W.default.enable("MM_SDK"),Ec("[MetaMaskSDK: constructor()]: begin."),e.setMaxListeners(50),!(null===(i=a.dappMetadata)||void 0===i?void 0:i.url)){if("undefined"==typeof window||"undefined"==typeof document)throw new Error("You must provide dAppMetadata url");a.dappMetadata=Object.assign(Object.assign({},a.dappMetadata),{url:"".concat(window.location.protocol,"//").concat(window.location.host)})}return e.options=a,e.options._source||(a._source=Fc),e.init().then(function(){Ec("[MetaMaskSDK: constructor()]: initialized successfully."),"undefined"!=typeof window&&(window.mmsdk=e)}).catch(function(e){console.error("[MetaMaskSDK: constructor()] error during initialization",e)}),e}return s(t,e),h(t,[{key:"init",value:function(){return Jd(this,void 0,void 0,L().m(function e(){return L().w(function(e){for(;;)if(0===e.n)return e.a(2,function(e){var t;return Jd(this,void 0,void 0,L().m(function n(){var r;return L().w(function(n){for(;;)switch(n.p=n.n){case 0:if("undefined"==typeof window||!(null===(t=window.mmsdk)||void 0===t?void 0:t.isInitialized())){n.n=1;break}return n.a(2,(Ec("[MetaMaskSDK: initializeMetaMaskSDK()] already initialized"),Promise.resolve(window.mmsdk)));case 1:if(!e._initialized){n.n=2;break}return n.a(2,(Ec("[MetaMaskSDK: initializeMetaMaskSDK()] already initialized"),e.sdkInitPromise));case 2:if(!e.sdkInitPromise){n.n=3;break}return n.a(2,(Ec("[MetaMaskSDK: initializeMetaMaskSDK()] already initializing"),e.sdkInitPromise));case 3:return n.p=3,e.sdkInitPromise=$m(e),n.n=4,e.sdkInitPromise;case 4:n.n=6;break;case 5:throw n.p=5,r=n.v,console.error(r),r;case 6:return n.a(2,e.sdkInitPromise)}},n,null,[[3,5]])}))}(this))},e,this)}))}},{key:"isExtensionActive",value:function(){return this.extensionActive}},{key:"checkExtensionAvailability",value:function(){var e;return"undefined"!=typeof window&&Boolean(null===(e=window.ethereum)||void 0===e?void 0:e.isMetaMask)}},{key:"connect",value:function(){return Jd(this,void 0,void 0,L().m(function e(){return L().w(function(e){for(;;)if(0===e.n)return e.a(2,function(e){return Jd(this,void 0,void 0,L().m(function t(){var n;return L().w(function(t){for(;;)switch(t.n){case 0:if(e._initialized){t.n=1;break}return Ec("[MetaMaskSDK: connect()] provider not ready -- wait for init()"),t.n=1,e.init();case 1:if(Ec("[MetaMaskSDK: connect()] isExtensionActive=".concat(e.isExtensionActive()," activeProvider"),e.activeProvider),e.activeProvider){t.n=2;break}throw new Error("SDK state invalid -- undefined provider");case 2:return n=e.activeProvider.getSelectedAddress(),t.a(2,n?[n]:e.activeProvider.request({method:Vc.ETH_REQUESTACCOUNTS,params:[]}))}},t)}))}(this))},e,this)}))}},{key:"connectAndSign",value:function(e){var t=e.msg;return Jd(this,void 0,void 0,L().m(function e(){return L().w(function(e){for(;;)if(0===e.n)return e.a(2,Pm({instance:this,msg:t}))},e,this)}))}},{key:"connectWith",value:function(e){return Jd(this,void 0,void 0,L().m(function t(){return L().w(function(t){for(;;)if(0===t.n)return t.a(2,function(e){var t=e.instance,n=e.rpc;return Jd(this,void 0,void 0,L().m(function e(){return L().w(function(e){for(;;)switch(e.n){case 0:if(t._initialized){e.n=1;break}return Ec("[MetaMaskSDK: connectWith()] provider not ready -- wait for init()"),e.n=1,t.init();case 1:if(Ec("[MetaMaskSDK: connectWith()] method: ".concat(n.method," rpc=").concat(n)),t.activeProvider){e.n=2;break}throw new Error("SDK state invalid -- undefined provider");case 2:return e.a(2,t.activeProvider.request({method:Vc.METAMASK_CONNECTWITH,params:[n]}))}},e)}))}({instance:this,rpc:e}))},t,this)}))}},{key:"resume",value:function(){return function(e){var t,n,r;return Jd(this,void 0,void 0,L().m(function i(){return L().w(function(i){for(;;)switch(i.n){case 0:if(null===(n=null===(t=e.remoteConnection)||void 0===t?void 0:t.getConnector())||void 0===n?void 0:n.isReady()){i.n=1;break}return i.a(2,(Ec("[MetaMaskSDK: resume()] channel is not ready -- starting connection"),void(null===(r=e.remoteConnection)||void 0===r||r.startConnection())));case 1:Ec("[MetaMaskSDK: resume()] channel is ready");case 2:return i.a(2)}},i)}))}(this)}},{key:"disconnect",value:function(){return console.warn("MetaMaskSDK.disconnect() is deprecated, use terminate()"),this.terminate()}},{key:"isAuthorized",value:function(){var e;null===(e=this.remoteConnection)||void 0===e||e.isAuthorized()}},{key:"terminate",value:function(){return function(e){var t,n,r;return Jd(this,void 0,void 0,L().m(function i(){var o;return L().w(function(i){for(;;)switch(i.p=i.n){case 0:if(null===(t=e.platformManager)||void 0===t?void 0:t.isMetaMaskMobileWebView()){i.n=6;break}if(iu&&(window.localStorage.removeItem(Qc),window.localStorage.removeItem(eu),window.localStorage.removeItem(Xc)),!e.extensionActive){i.n=5;break}return i.p=1,i.n=2,null===(n=e.activeProvider)||void 0===n?void 0:n.request({method:Vc.WALLET_REVOKEPERMISSIONS,params:[{eth_accounts:{}}]});case 2:i.n=4;break;case 3:i.p=3,o=i.v,Ec("[MetaMaskSDK: terminate()] error revoking permissions",o);case 4:return e.options.extensionOnly?(e.emit(Nc.ProviderUpdate,ru.TERMINATE),Ec("[MetaMaskSDK: terminate()] extensionOnly --- prevent switching providers")):(e.activeProvider=e.sdkProvider,window.ethereum=e.activeProvider,e.extensionActive=!1,e.emit(Nc.ProviderUpdate,ru.TERMINATE)),i.a(2);case 5:e.emit(Nc.ProviderUpdate,ru.TERMINATE),Ec("[MetaMaskSDK: terminate()] remoteConnection=".concat(e.remoteConnection)),null===(r=e.remoteConnection)||void 0===r||r.disconnect({terminate:!0,sendMessage:!0});case 6:return i.a(2)}},i,null,[[1,3]])}))}(this)}},{key:"isInitialized",value:function(){return this._initialized}},{key:"setReadOnlyRPCCalls",value:function(e){this.readonlyRPCCalls=e}},{key:"hasReadOnlyRPCCalls",value:function(){return this.readonlyRPCCalls}},{key:"getProvider",value:function(){if(this.activeProvider)return this.activeProvider;console.warn("MetaMaskSDK: No active provider found")}},{key:"getMobileProvider",value:function(){if(!this.sdkProvider)throw new Error("SDK state invalid -- undefined mobile provider");return this.sdkProvider}},{key:"getUniversalLink",value:function(){var e,t=null===(e=this.remoteConnection)||void 0===e?void 0:e.getUniversalLink();if(!t)throw new Error("No Universal Link available, please call eth_requestAccounts first.");return t}},{key:"getChannelId",value:function(){var e,t;return null===(t=null===(e=this.remoteConnection)||void 0===e?void 0:e.getChannelConfig())||void 0===t?void 0:t.channelId}},{key:"getRPCHistory",value:function(){var e,t;return null===(t=null===(e=this.remoteConnection)||void 0===e?void 0:e.getConnector())||void 0===t?void 0:t.getRPCMethodTracker()}},{key:"getVersion",value:function(){return Hc.version}},{key:"getDappId",value:function(){var e,t,n,r;return"undefined"==typeof window||void 0===window.location?null!==(r=null!==(t=null===(e=this.options.dappMetadata)||void 0===e?void 0:e.name)&&void 0!==t?t:null===(n=this.options.dappMetadata)||void 0===n?void 0:n.url)&&void 0!==r?r:"N/A":window.location.hostname}},{key:"getAnonId",value:function(){var e,t;return Jd(this,void 0,void 0,L().m(function n(){var r,i,o;return L().w(function(n){for(;;)switch(n.n){case 0:if(!this._anonId){n.n=1;break}return n.a(2,this._anonId);case 1:if(!(null===(e=this.platformManager)||void 0===e?void 0:e.isBrowser())){n.n=2;break}i=this.getBrowserAnonId(),n.n=6;break;case 2:if(!(null===(t=this.platformManager)||void 0===t?void 0:t.isReactNative())){n.n=4;break}return n.n=3,this.getReactNativeAnonId();case 3:o=n.v,n.n=5;break;case 4:o=z();case 5:i=o;case 6:return r=i,this._anonId=r,n.a(2,r)}},n,this)}))}},{key:"getBrowserAnonId",value:function(){var e=this.ANON_ID_STORAGE_KEY;try{var t=localStorage.getItem(e);if(t)return t;var n=z();return localStorage.setItem(e,n),n}catch(r){return console.error("[MetaMaskSDK: getBrowserAnonId()] LocalStorage access error:",r),z()}}},{key:"getReactNativeAnonId",value:function(){return Jd(this,void 0,void 0,L().m(function e(){var t,n,r,i,o;return L().w(function(e){for(;;)switch(e.p=e.n){case 0:return t=this.ANON_ID_STORAGE_KEY,e.p=1,n=l("@react-native-async-storage/async-storage").default,e.n=2,n.getItem(t);case 2:if(!(r=e.v)){e.n=3;break}return e.a(2,r);case 3:return i=z(),e.n=4,n.setItem(t,i);case 4:return e.a(2,i);case 5:return e.p=5,o=e.v,e.a(2,(console.error("[MetaMaskSDK: getReactNativeAnonId()] Error accessing AsyncStorage:",o),z()))}},e,this,[[1,5]])}))}},{key:"getWalletStatus",value:function(){var e,t;return null===(t=null===(e=this.remoteConnection)||void 0===e?void 0:e.getConnector())||void 0===t?void 0:t.getConnectionStatus()}},{key:"_getChannelConfig",value:function(){var e;return null===(e=this.remoteConnection)||void 0===e?void 0:e.getChannelConfig()}},{key:"_ping",value:function(){var e,t;null===(t=null===(e=this.remoteConnection)||void 0===e?void 0:e.getConnector())||void 0===t||t.ping()}},{key:"_keyCheck",value:function(){var e,t;null===(t=null===(e=this.remoteConnection)||void 0===e?void 0:e.getConnector())||void 0===t||t.keyCheck()}},{key:"_getServiceStatus",value:function(){var e,t;return null===(t=null===(e=this.remoteConnection)||void 0===e?void 0:e.getConnector())||void 0===t?void 0:t.getServiceStatus()}},{key:"_getRemoteConnection",value:function(){return this.remoteConnection}},{key:"_getDappMetadata",value:function(){return this.dappMetadata}},{key:"_getKeyInfo",value:function(){var e;return null===(e=this.remoteConnection)||void 0===e?void 0:e.getKeyInfo()}},{key:"_resetKeys",value:function(){var e,t;null===(t=null===(e=this.remoteConnection)||void 0===e?void 0:e.getConnector())||void 0===t||t.resetKeys()}},{key:"_getConnection",value:function(){return this.remoteConnection}},{key:"emit",value:function(e,n){return r(t,"emit",this,3)([e,n])}},{key:"on",value:function(e,n){return r(t,"on",this,3)([e,n])}}])}(q.default))),Ru=Object.freeze({__proto__:null,StorageManagerWeb:function(){return h(function e(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{enabled:!1}).enabled;p(this,e),this.enabled=!1,this.enabled=t},[{key:"persistChannelConfig",value:function(e){return Jd(this,void 0,void 0,L().m(function t(){var n;return L().w(function(t){for(;;)switch(t.n){case 0:n=JSON.stringify(e),Ec("[StorageManagerWeb: persistChannelConfig()] enabled=".concat(this.enabled),e),localStorage.setItem(Jc,n);case 1:return t.a(2)}},t,this)}))}},{key:"getPersistedChannelConfig",value:function(){return Jd(this,void 0,void 0,L().m(function e(){var t,n,r;return L().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,Ec("[StorageManagerWeb: getPersistedChannelConfig()] enabled=".concat(this.enabled)),t=localStorage.getItem(Jc),Ec("[StorageManagerWeb: getPersistedChannelConfig()]",t),t){e.n=1;break}return e.a(2);case 1:return n=JSON.parse(t),e.a(2,(Ec("[StorageManagerWeb: getPersistedChannelConfig()] channelConfig",n),n));case 2:return e.p=2,r=e.v,console.error("[StorageManagerWeb: getPersistedChannelConfig()] Can't find existing channel config",r),e.a(2)}},e,this,[[0,2]])}))}},{key:"persistAccounts",value:function(e){return Jd(this,void 0,void 0,L().m(function t(){var n;return L().w(function(t){for(;;)switch(t.n){case 0:Ec("[StorageManagerWeb: persistAccounts()] enabled=".concat(this.enabled),e),n=JSON.stringify(e),localStorage.setItem(Xc,n);case 1:return t.a(2)}},t,this)}))}},{key:"getCachedAccounts",value:function(){return Jd(this,void 0,void 0,L().m(function e(){var t,n;return L().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,t=localStorage.getItem(Xc),e.a(2,t?JSON.parse(t):[]);case 1:throw e.p=1,n=e.v,console.error("[StorageManagerWeb: getCachedAccounts()] Error reading cached accounts",n),n;case 2:return e.a(2)}},e,null,[[0,1]])}))}},{key:"persistChainId",value:function(e){return Jd(this,void 0,void 0,L().m(function t(){return L().w(function(t){for(;;)switch(t.n){case 0:Ec("[StorageManagerWeb: persistChainId()] enabled=".concat(this.enabled),e),localStorage.setItem(eu,e);case 1:return t.a(2)}},t,this)}))}},{key:"getCachedChainId",value:function(){return Jd(this,void 0,void 0,L().m(function e(){var t,n;return L().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,t=localStorage.getItem(eu),e.a(2,null!=t?t:void 0);case 1:throw e.p=1,n=e.v,console.error("[StorageManagerWeb: getCachedChainId()] Error reading cached chainId",n),n;case 2:return e.a(2)}},e,null,[[0,1]])}))}},{key:"terminate",value:function(){return Jd(this,void 0,void 0,L().m(function e(){return L().w(function(e){for(;;)switch(e.n){case 0:Ec("[StorageManagerWeb: terminate()] enabled=".concat(this.enabled)),localStorage.removeItem(Jc);case 1:return e.a(2)}},e,this)}))}}])}()}),Pu=Object.defineProperty,Iu=new WeakMap,Lu=function(e){return Iu.get(e)},Nu=function(e,t){return Iu.set(t.$lazyInstance$=e,t)},Du=function(e,t){return t in e},Bu=function(e,t){return(0,console.error)(e,t)},ju=new Map,Ku=new Map,Uu="slot-fb{display:contents}slot-fb[hidden]{display:none}",Hu="undefined"!=typeof window?window:{},Fu=Hu.document||{head:{}},zu={$flags$:0,$resourcesUrl$:"",jmp:function(e){return e()},raf:function(e){return requestAnimationFrame(e)},ael:function(e,t,n,r){return e.addEventListener(t,n,r)},rel:function(e,t,n,r){return e.removeEventListener(t,n,r)},ce:function(e,t){return new CustomEvent(e,t)}},qu=function(){try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch(fs){}return!1}(),$u=!1,Wu=[],Gu=function(e,t){return function(t){e.push(t),$u||($u=!0,4&zu.$flags$?Ju(Zu):zu.raf(Zu))}},Yu=function(e){for(var t=0;t<e.length;t++)try{e[t](performance.now())}catch(n){Bu(n)}e.length=0},Zu=function(){Yu(Wu),Yu(Vu),($u=Wu.length>0)&&zu.raf(Zu)},Ju=function(e){return Promise.resolve(void 0).then(e)},Qu=Gu(Vu=[]),Xu={},el=function(e){return"object"===(e=D(e))||"function"===e},function(e,t){for(var n in t)Pu(e,n,{get:t[n],enumerable:!0})}({},{err:function(){return nl},map:function(){return Vm},ok:function(){return tl},unwrap:function(){return il},unwrapErr:function(){return ol}}),tl=function(e){return{isOk:!0,isErr:!1,value:e}},nl=function(e){return{isOk:!1,isErr:!0,value:e}},il=function(e){if(e.isOk)return e.value;throw e.value},ol=function(e){if(e.isErr)return e.value;throw e.value},al=function(e,t){for(var n=null,r=!1,i=!1,o=[],a=function(t){for(var s=0;s<t.length;s++)n=t[s],Array.isArray(n)?a(n):null!=n&&"boolean"!=typeof n&&((r="function"!=typeof e&&!el(n))&&(n=String(n)),r&&i?o[o.length-1].$text$+=n:o.push(r?sl(null,n):n),i=r)},s=arguments.length,c=new Array(s>2?s-2:0),u=2;u<s;u++)c[u-2]=arguments[u];if(a(c),t){var l=t.className||t.class;l&&(t.class="object"!=D(l)?l:Object.keys(l).filter(function(e){return l[e]}).join(" "))}if("function"==typeof e)return e(null===t?{}:t,o,ul);var d=sl(e,null);return d.$attrs$=t,o.length>0&&(d.$children$=o),d},sl=function(e,t){return{$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null,$attrs$:null}},cl={},ul={forEach:function(e,t){return e.map(ll).forEach(t)},map:function(e,t){return e.map(ll).map(t).map(dl)}},ll=function(e){return{vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}},dl=function(e){if("function"==typeof e.vtag){var t=A({},e.vattrs);return e.vkey&&(t.key=e.vkey),e.vname&&(t.name=e.vname),al.apply(void 0,[e.vtag,t].concat(E(e.vchildren||[])))}var n=sl(e.vtag,e.vtext);return n.$attrs$=e.vattrs,n.$children$=e.vchildren,n.$key$=e.vkey,n.$name$=e.vname,n},fl=function(e){return Lu(e).$hostElement$},hl=function(e,t,n){var r=fl(e);return{emit:function(e){return pl(r,t,{bubbles:!!(4&n),composed:!!(2&n),cancelable:!!(1&n),detail:e})}}},pl=function(e,t,n){var r=zu.ce(t,n);return e.dispatchEvent(r),r},vl=new WeakMap,ml=function(e){var t=e.$cmpMeta$,n=e.$hostElement$,r=t.$flags$,i=(t.$tagName$,function(){}),o=function(e,t){var n,r=gl(t),i=Ku.get(r);if(e=11===e.nodeType?e:Fu,i)if("string"==typeof i){e=e.head||e;var o,a=vl.get(e);if(a||vl.set(e,a=new Set),!a.has(r)){(o=Fu.createElement("style")).innerHTML=i;var s=null!=(n=zu.$nonce$)?n:Wm(Fu);if(null!=s&&o.setAttribute("nonce",s),!(1&t.$flags$))if("HEAD"===e.nodeName){var c=e.querySelectorAll("link[rel=preconnect]"),u=c.length>0?c[c.length-1].nextSibling:e.querySelector("style");e.insertBefore(o,u)}else if("host"in e)if(qu){var l=new CSSStyleSheet;l.replaceSync(i),e.adoptedStyleSheets=[l].concat(E(e.adoptedStyleSheets))}else{var d=e.querySelector("style");d?d.innerHTML=i+d.innerHTML:e.prepend(o)}else e.append(o);1&t.$flags$&&"HEAD"!==e.nodeName&&e.insertBefore(o,null),4&t.$flags$&&(o.innerHTML+=Uu),a&&a.add(r)}}else e.adoptedStyleSheets.includes(i)||(e.adoptedStyleSheets=[].concat(E(e.adoptedStyleSheets),[i]));return r}(n.shadowRoot?n.shadowRoot:n.getRootNode(),t);10&r&&2&r&&(n["s-sc"]=o,n.classList.add(o+"-h")),i()},gl=function(e,t){return"sc-"+e.$tagName$},yl=function(e,t,n,r,i,o){if(n!==r){var a=Du(e,t),s=t.toLowerCase();if("class"===t){var c=e.classList,u=wl(n),l=wl(r);c.remove.apply(c,E(u.filter(function(e){return e&&!l.includes(e)}))),c.add.apply(c,E(l.filter(function(e){return e&&!u.includes(e)})))}else if("style"===t){for(var d in n)r&&null!=r[d]||(d.includes("-")?e.style.removeProperty(d):e.style[d]="");for(var f in r)n&&r[f]===n[f]||(f.includes("-")?e.style.setProperty(f,r[f]):e.style[f]=r[f])}else if(a||"o"!==t[0]||"n"!==t[1]){var h=el(r);if((a||h&&null!==r)&&!i)try{if(e.tagName.includes("-"))e[t]=r;else{var p=null==r?"":r;"list"===t?a=!1:null!=n&&e[t]==p||("function"==typeof e.__lookupSetter__(t)?e[t]=p:e.setAttribute(t,p))}}catch(m){}null==r||!1===r?!1===r&&""!==e.getAttribute(t)||e.removeAttribute(t):(!a||4&o||i)&&!h&&(r=!0===r?"":r,e.setAttribute(t,r))}else if(t="-"===t[2]?t.slice(3):Du(Hu,s)?s.slice(2):s[2]+t.slice(3),n||r){var v=t.endsWith(El);t=t.replace(kl,""),n&&zu.rel(e,t,n,v),r&&zu.ael(e,t,r,v)}}},bl=/\s/,wl=function(e){return e?e.split(bl):[]},El="Capture",kl=new RegExp(El+"$"),_l=function(e,t,n){var r,i=11===t.$elm$.nodeType&&t.$elm$.host?t.$elm$.host:t.$elm$,o=e&&e.$attrs$||Xu,a=t.$attrs$||Xu,s=_(Gm(Object.keys(o)));try{for(s.s();!(r=s.n()).done;){var c=r.value;c in a||yl(i,c,o[c],void 0,n,t.$flags$)}}catch(Cs){s.e(Cs)}finally{s.f()}var u,l=_(Gm(Object.keys(a)));try{for(l.s();!(u=l.n()).done;){var d=u.value;yl(i,d,o[d],a[d],n,t.$flags$)}}catch(Cs){l.e(Cs)}finally{l.f()}},Sl=!1,Cl=function(e,t,n,r){var i,o,a=t.$children$[n],s=0;if(null!==a.$text$)i=a.$elm$=Fu.createTextNode(a.$text$);else{if(Sl||(Sl="svg"===a.$tag$),i=a.$elm$=Fu.createElementNS(Sl?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",a.$tag$),Sl&&"foreignObject"===a.$tag$&&(Sl=!1),_l(null,a,Sl),i.getRootNode().querySelector("body"),a.$children$)for(s=0;s<a.$children$.length;++s)(o=Cl(e,a,s))&&i.appendChild(o);"svg"===a.$tag$?Sl=!1:"foreignObject"===i.tagName&&(Sl=!0)}return i["s-hn"]=rl,i},Al=function(e,t,n,r,i,o){var a,s=e;for(s.shadowRoot&&s.tagName===rl&&(s=s.shadowRoot);i<=o;++i)r[i]&&((a=Cl(null,n,i))&&(r[i].$elm$=a,Ol(s,a,t)))},xl=function(e,t,n){for(var r=t;r<=n;++r){var i=e[r];if(i){var o=i.$elm$;o&&o.remove()}}},Ml=function(e,t){return e.$tag$===t.$tag$},Tl=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.$elm$=e.$elm$,i=e.$children$,o=t.$children$,a=t.$tag$,s=t.$text$;null===s?(_l(e,t,Sl="svg"===a||"foreignObject"!==a&&Sl),null!==i&&null!==o?function(e,t,n,r){for(var i,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=0,s=0,c=t.length-1,u=t[0],l=t[c],d=r.length-1,f=r[0],h=r[d];a<=c&&s<=d;)null==u?u=t[++a]:null==l?l=t[--c]:null==f?f=r[++s]:null==h?h=r[--d]:Ml(u,f,o)?(Tl(u,f,o),u=t[++a],f=r[++s]):Ml(l,h,o)?(Tl(l,h,o),l=t[--c],h=r[--d]):Ml(u,h,o)?(Tl(u,h,o),Ol(e,u.$elm$,l.$elm$.nextSibling),u=t[++a],h=r[--d]):Ml(l,f,o)?(Tl(l,f,o),Ol(e,l.$elm$,u.$elm$),l=t[--c],f=r[++s]):(i=Cl(t&&t[s],n,s),f=r[++s],i&&Ol(u.$elm$.parentNode,i,u.$elm$));a>c?Al(e,null==r[d+1]?null:r[d+1].$elm$,n,r,s,d):s>d&&xl(t,a,c)}(r,i,t,o,n):null!==o?(null!==e.$text$&&(r.textContent=""),Al(r,null,t,o,0,o.length-1)):!n&&null!==i&&xl(i,0,i.length-1),Sl&&"svg"===a&&(Sl=!1)):e.$text$!==s&&(r.data=s)},Ol=function(e,t,n){return null==e?void 0:e.insertBefore(t,n)},Rl=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e.$hostElement$,o=e.$cmpMeta$,a=e.$vnode$||sl(null,null),s=(n=t)&&n.$tag$===cl?t:al(null,null,t);if(rl=i.tagName,r&&s.$attrs$)for(var c=0,u=Object.keys(s.$attrs$);c<u.length;c++){var l=u[c];i.hasAttribute(l)&&!["key","ref","style","class"].includes(l)&&(s.$attrs$[l]=i[l])}s.$tag$=null,s.$flags$|=4,e.$vnode$=s,s.$elm$=a.$elm$=i.shadowRoot||i,i["s-sc"],o.$flags$,Tl(a,s,r)},Pl=function(e,t){t&&!e.$onRenderResolve$&&t["s-p"]&&t["s-p"].push(new Promise(function(t){return e.$onRenderResolve$=t}))},Il=function(e,t){if(e.$flags$|=16,!(4&e.$flags$))return Pl(e,e.$ancestorComponent$),Qu(function(){return Ll(e,t)});e.$flags$|=512},Ll=function(e,t){var n=e.$hostElement$,r=(e.$cmpMeta$.$tagName$,function(){}),i=e.$lazyInstance$;if(!i)throw new Error("Can't render component <".concat(n.tagName.toLowerCase()," /> with invalid Stencil runtime! Make sure this imported component is compiled with a `externalRuntime: true` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime"));return r(),Nl(void 0,function(){return Bl(e,i,t)})},Nl=function(e,t){return Dl(e)?e.then(t).catch(function(e){console.error(e),t()}):t()},Dl=function(e){return e instanceof Promise||e&&e.then&&"function"==typeof e.then},Bl=function(){var e=g(L().m(function e(t,n,r){var i,o,a,s,c,u,l;return L().w(function(e){for(;;)switch(e.n){case 0:o=t.$hostElement$,t.$cmpMeta$.$tagName$,a=function(){},s=o["s-rc"],r&&ml(t),t.$cmpMeta$.$tagName$,c=function(){},jl(t,n,o,r),s&&(s.map(function(e){return e()}),o["s-rc"]=void 0),c(),a(),u=null!=(i=o["s-p"])?i:[],l=function(){return Kl(t)},0===u.length?l():(Promise.all(u).then(l),t.$flags$|=4,u.length=0);case 1:return e.a(2)}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),jl=function(e,t,n,r){try{t=t.render(),e.$flags$&=-17,e.$flags$|=2,Rl(e,t,r)}catch(i){Bu(i,e.$hostElement$)}return null},Kl=function(e){e.$cmpMeta$.$tagName$;var t=e.$hostElement$,n=e.$lazyInstance$,r=e.$ancestorComponent$;64&e.$flags$||(e.$flags$|=64,Fl(t),Hl(n,"componentDidLoad"),e.$onReadyResolve$(t),r||Ul()),e.$onRenderResolve$&&(e.$onRenderResolve$(),e.$onRenderResolve$=void 0),512&e.$flags$&&Ju(function(){return Il(e,!1)}),e.$flags$&=-517},Ul=function(e){Fl(Fu.documentElement),Ju(function(){return pl(Hu,"appload",{detail:{namespace:"sdk-install-modal-web"}})})},Hl=function(e,t,n){if(e&&e[t])try{return e[t](n)}catch(r){Bu(r)}},Fl=function(e){return e.classList.add("hydrated")},zl=function(e,t,n,r){var i=Lu(e);if(!i)throw new Error("Couldn't find host element for \"".concat(r.$tagName$,'" as it is unknown to this Stencil runtime. This usually happens when integrating a 3rd party Stencil component with another Stencil component or application. Please reach out to the maintainers of the 3rd party Stencil component or report this on the Stencil Discord server (https://chat.stenciljs.com) or comment on this similar [GitHub issue](https://github.com/ionic-team/stencil/issues/5457).'));var o=i.$hostElement$,a=i.$instanceValues$.get(t),s=i.$flags$,c=i.$lazyInstance$,u=n,l=r.$members$[t][0];n=null==u||el(u)?u:4&l?"false"!==u&&(""===u||!!u):1&l?String(u):u;var d=Number.isNaN(a)&&Number.isNaN(n);if((!(8&s)||void 0===a)&&n!==a&&!d&&(i.$instanceValues$.set(t,n),c)){if(r.$watchers$&&128&s){var f=r.$watchers$[t];f&&f.map(function(e){try{c[e](n,a,t)}catch(r){Bu(r,o)}})}2==(18&s)&&Il(i,!1)}},ql=function(e,t,n){var r,i,o=e.prototype;if(t.$members$||t.$watchers$||e.watchers){e.watchers&&!t.$watchers$&&(t.$watchers$=e.watchers);var a=Object.entries(null!=(r=t.$members$)?r:{});if(a.map(function(e){var r=x(e,2),i=r[0],a=x(r[1],1)[0];(31&a||2&n&&32&a)&&Object.defineProperty(o,i,{get:function(){return e=i,Lu(this).$instanceValues$.get(e);var e},set:function(e){zl(this,i,e,t)},configurable:!0,enumerable:!0})}),1&n){var s=new Map;o.attributeChangedCallback=function(e,n,r){var i=this;zu.jmp(function(){var a,c=s.get(e);if(i.hasOwnProperty(c))r=i[c],delete i[c];else{if(o.hasOwnProperty(c)&&"number"==typeof i[c]&&i[c]==r)return;if(null==c){var u=Lu(i),l=null==u?void 0:u.$flags$;if(l&&!(8&l)&&128&l&&r!==n){var d,f=u.$lazyInstance$;null===(d=null==(a=t.$watchers$)?void 0:a[e])||void 0===d||d.forEach(function(t){null!=f[t]&&f[t].call(f,r,n,e)})}return}}i[c]=(null!==r||"boolean"!=typeof i[c])&&r})},e.observedAttributes=Array.from(new Set([].concat(E(Object.keys(null!=(i=t.$watchers$)?i:{})),E(a.filter(function(e){var t=x(e,2);t[0];return 15&t[1][0]}).map(function(e){var t=x(e,2),n=t[0],r=t[1][1]||n;return s.set(r,n),r})))))}}return e},$l=function(){var e=g(L().m(function e(t,n,r,i){var o,a,s,c,l,d,f,h,p,v;return L().w(function(e){for(;;)switch(e.n){case 0:if(32&n.$flags$){e.n=7;break}if(n.$flags$|=32,!r.$lazyBundleId$){e.n=5;break}if(!(a=function(e){var t=e.$tagName$.replace(/-/g,"_"),n=e.$lazyBundleId$;if(n){var r=ju.get(n);if(r)return r[t];return"mm-install-modal_3"===n?Promise.resolve().then(function(){return kd}).then(function(e){return ju.set(n,e),e[t]},Bu):k(function(){return e="./".concat(n,".entry.js"),new Promise(function(t){return t(u.import(e))});var e},void 0).then(function(e){return ju.set(n,e),e[t]},Bu)}}(r))||!("then"in a)){e.n=2;break}return s=function(){},e.n=1,a;case 1:o=e.v,s(),e.n=3;break;case 2:o=a;case 3:if(o){e.n=4;break}throw new Error('Constructor for "'.concat(r.$tagName$,"#").concat(n.$modeName$,'" was not found'));case 4:o.isProxied||(r.$watchers$=o.watchers,ql(o,r,2),o.isProxied=!0),r.$tagName$,c=function(){},n.$flags$|=8;try{new o(n)}catch(i){Bu(i)}n.$flags$&=-9,n.$flags$|=128,c(),Wl(n.$lazyInstance$),e.n=6;break;case 5:o=t.constructor,l=t.localName,customElements.whenDefined(l).then(function(){return n.$flags$|=128});case 6:o&&o.style&&("string"==typeof o.style&&(d=o.style),f=gl(r),Ku.has(f)||(r.$tagName$,h=function(){},function(e,t,n){var r=Ku.get(e);qu&&n?"string"==typeof(r=r||new CSSStyleSheet)?r=t:r.replaceSync(t):r=t,Ku.set(e,r)}(f,d,!!(1&r.$flags$)),h()));case 7:p=n.$ancestorComponent$,v=function(){return Il(n,!0)},p&&p["s-rc"]?p["s-rc"].push(v):v();case 8:return e.a(2)}},e)}));return function(t,n,r,i){return e.apply(this,arguments)}}(),Wl=function(e){Hl(e,"connectedCallback")},Vl=function(e){Hl(e,"disconnectedCallback")},Gl=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=[],u=r.exclude||[],l=Hu.customElements,d=Fu.head,f=d.querySelector("meta[charset]"),v=Fu.createElement("style"),m=[],y=!0;Object.assign(zu,r),zu.$resourcesUrl$=new URL(r.resourcesUrl||"./",Fu.baseURI).href;var b=!1;if(e.map(function(e){e[1].map(function(t){var r,d={$flags$:t[0],$tagName$:t[1],$members$:t[2],$listeners$:t[3]};4&d.$flags$&&(b=!0),d.$members$=t[2],d.$watchers$=null!=(r=t[4])?r:{};var f=d.$tagName$,v=function(e){function t(e){var n,r,i;if(p(this,t),(n=o(this,t,[e])).hasRegisteredEventListeners=!1,r=e=a(n),(i={$flags$:0,$hostElement$:r,$cmpMeta$:d,$instanceValues$:new Map}).$onReadyPromise$=new Promise(function(e){return i.$onReadyResolve$=e}),r["s-p"]=[],r["s-rc"]=[],Iu.set(r,i),1&d.$flags$)if(e.shadowRoot){if("open"!==e.shadowRoot.mode)throw new Error("Unable to re-use existing shadow root for ".concat(d.$tagName$,"! Mode is set to ").concat(e.shadowRoot.mode," but Stencil only supports open shadow roots."))}else e.attachShadow({mode:"open"});return n}return s(t,e),h(t,[{key:"connectedCallback",value:function(){var e=this;Lu(this),this.hasRegisteredEventListeners||(this.hasRegisteredEventListeners=!0),n&&(clearTimeout(n),n=null),y?m.push(this):zu.jmp(function(){return function(e){if(!(1&zu.$flags$)){var t=Lu(e),n=t.$cmpMeta$,r=(n.$tagName$,function(){});if(1&t.$flags$)(null==t?void 0:t.$lazyInstance$)?Wl(t.$lazyInstance$):null!=t&&t.$onReadyPromise$&&t.$onReadyPromise$.then(function(){return Wl(t.$lazyInstance$)});else{t.$flags$|=1;for(var i=e;i=i.parentNode||i.host;)if(i["s-p"]){Pl(t,t.$ancestorComponent$=i);break}n.$members$&&Object.entries(n.$members$).map(function(t){var n=x(t,2),r=n[0];if(31&x(n[1],1)[0]&&e.hasOwnProperty(r)){var i=e[r];delete e[r],e[r]=i}}),$l(e,t,n)}r()}}(e)})}},{key:"disconnectedCallback",value:function(){var e=this;zu.jmp(function(){return(t=g(L().m(function e(t){var n;return L().w(function(e){for(;;)switch(e.n){case 0:1&zu.$flags$||((null==(n=Lu(t))?void 0:n.$lazyInstance$)?Vl(n.$lazyInstance$):null!=n&&n.$onReadyPromise$&&n.$onReadyPromise$.then(function(){return Vl(n.$lazyInstance$)}));case 1:return e.a(2)}},e)})),function(e){return t.apply(this,arguments)})(e);var t})}},{key:"componentOnReady",value:function(){return Lu(this).$onReadyPromise$}}])}(c(HTMLElement));d.$lazyBundleId$=e[0],u.includes(f)||l.get(f)||(i.push(f),l.define(f,ql(v,d,1)))})}),i.length>0&&(b&&(v.textContent+=Uu),v.textContent+=i.sort()+"{visibility:hidden}.hydrated{visibility:inherit}",v.innerHTML.length)){v.setAttribute("data-styles","");var w=null!=(t=zu.$nonce$)?t:Wm(Fu);null!=w&&v.setAttribute("nonce",w),d.insertBefore(v,f?f.nextSibling:d.firstChild)}y=!1,m.length?m.map(function(e){return e.connectedCallback()}):zu.jmp(function(){return n=setTimeout(Ul,30)})},function(){if("undefined"!=typeof window&&void 0!==window.Reflect&&void 0!==window.customElements){var e=HTMLElement;window.HTMLElement=function(){return Reflect.construct(e,[],this.constructor)},HTMLElement.prototype=e.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,e)}}(),Yl=Object.freeze({__proto__:null,defineCustomElements:(gs=g(L().m(function e(t,n){return L().w(function(e){for(;;)switch(e.n){case 0:if("undefined"==typeof window){e.n=2;break}return void(e.n=1);case 1:return e.a(2,Gl([["mm-install-modal_3",[[1,"mm-install-modal",{link:[1],sdkVersion:[1,"sdk-version"],preferDesktop:[4,"prefer-desktop"],tab:[32],isDefaultTab:[32],translationsLoaded:[32]},null,{preferDesktop:["updatePreferDesktop"]}],[1,"mm-pending-modal",{displayOTP:[4,"display-o-t-p"],sdkVersion:[1,"sdk-version"],otpCode:[1,"otp-code"],translationsLoaded:[32]}],[1,"mm-select-modal",{link:[1],sdkVersion:[1,"sdk-version"],preferDesktop:[4,"prefer-desktop"],tab:[32],isDefaultTab:[32],translationsLoaded:[32]},null,{preferDesktop:["updatePreferDesktop"]}]]]],n));case 2:return e.a(2)}},e)})),function(e,t){return gs.apply(this,arguments)}),setNonce:function(e){return zu.$nonce$=e}}),Zl={fontFamily:"Roboto, sans-serif"},Jl=function(e,t){var n=e.className;return al("div",{style:Zl,class:n},t)},Ql=function(e){var t=e.Icon,n=e.text;return al("div",{class:"flexContainer",style:{padding:"6",flexDirection:"row"}},al("div",{class:"flexItem1"},al(t,null)),al("div",{class:"flexItem11"},al("span",{style:{lineHeight:"2",color:"black"}},n)))},Xl=function(){return al("svg",{width:"20",height:"18",viewBox:"0 0 20 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},al("path",{d:"M20.0002 7.9702V10.0302C20.0002 10.5802 19.5602 11.0302 19.0002 11.0502H17.0402C15.9602 11.0502 14.9702 10.2602 14.8802 9.1802C14.8202 8.5502 15.0602 7.9602 15.4802 7.5502C15.8502 7.1702 16.3602 6.9502 16.9202 6.9502H19.0002C19.5602 6.9702 20.0002 7.4202 20.0002 7.9702Z",fill:"#037DD6"}),al("path",{d:"M18.47 12.55H17.04C15.14 12.55 13.54 11.12 13.38 9.3C13.29 8.26 13.67 7.22 14.43 6.48C15.07 5.82 15.96 5.45 16.92 5.45H18.47C18.76 5.45 19 5.21 18.97 4.92C18.75 2.49 17.14 0.83 14.75 0.55C14.51 0.51 14.26 0.5 14 0.5H5C4.72 0.5 4.45 0.52 4.19 0.56C1.64 0.88 0 2.78 0 5.5V12.5C0 15.26 2.24 17.5 5 17.5H14C16.8 17.5 18.73 15.75 18.97 13.08C19 12.79 18.76 12.55 18.47 12.55ZM11 6.75H5C4.59 6.75 4.25 6.41 4.25 6C4.25 5.59 4.59 5.25 5 5.25H11C11.41 5.25 11.75 5.59 11.75 6C11.75 6.41 11.41 6.75 11 6.75Z",fill:"#037DD6"}))},ed=function(){return al("svg",{width:"20",height:"18",viewBox:"0 0 20 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},al("path",{d:"M14.44 0.0999756C12.63 0.0999756 11.01 0.979976 10 2.32998C8.99 0.979976 7.37 0.0999756 5.56 0.0999756C2.49 0.0999756 0 2.59998 0 5.68998C0 6.87998 0.19 7.97998 0.52 8.99998C2.1 14 6.97 16.99 9.38 17.81C9.72 17.93 10.28 17.93 10.62 17.81C13.03 16.99 17.9 14 19.48 8.99998C19.81 7.97998 20 6.87998 20 5.68998C20 2.59998 17.51 0.0999756 14.44 0.0999756Z",fill:"#037DD6"}))},td=function(){return al("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},al("path",{d:"M16.28 7.53V6.28C16.28 3.58 15.63 0 10 0C4.37 0 3.72 3.58 3.72 6.28V7.53C0.92 7.88 0 9.3 0 12.79V14.65C0 18.75 1.25 20 5.35 20H14.65C18.75 20 20 18.75 20 14.65V12.79C20 9.3 19.08 7.88 16.28 7.53ZM10 16.74C8.33 16.74 6.98 15.38 6.98 13.72C6.98 12.05 8.34 10.7 10 10.7C11.66 10.7 13.02 12.06 13.02 13.72C13.02 15.39 11.67 16.74 10 16.74ZM5.35 7.44C5.27 7.44 5.2 7.44 5.12 7.44V6.28C5.12 3.35 5.95 1.4 10 1.4C14.05 1.4 14.88 3.35 14.88 6.28V7.45C14.8 7.45 14.73 7.45 14.65 7.45H5.35V7.44Z",fill:"#037DD6"}))},nd=function(){return al("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},al("path",{d:"M16.4405 8.8999C20.0405 9.2099 21.5105 11.0599 21.5105 15.1099V15.2399C21.5105 19.7099 19.7205 21.4999 15.2505 21.4999H8.74047C4.27047 21.4999 2.48047 19.7099 2.48047 15.2399V15.1099C2.48047 11.0899 3.93047 9.2399 7.47047 8.9099",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),al("path",{d:"M12 2V14.88",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),al("path",{d:"M15.3504 12.6499L12.0004 15.9999L8.65039 12.6499",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}))},rd=function(){return al("svg",{width:"14",height:"14",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},al("rect",{width:"16",height:"16",fill:"white"}),al("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.40554 2.40554C2.94627 1.86482 3.82296 1.86482 4.36369 2.40554L8 6.04186L11.6363 2.40554C12.177 1.86482 13.0537 1.86482 13.5945 2.40554C14.1352 2.94627 14.1352 3.82296 13.5945 4.36369L9.95814 8L13.5945 11.6363C14.1352 12.177 14.1352 13.0537 13.5945 13.5945C13.0537 14.1352 12.177 14.1352 11.6363 13.5945L8 9.95814L4.36369 13.5945C3.82296 14.1352 2.94627 14.1352 2.40554 13.5945C1.86482 13.0537 1.86482 12.177 2.40554 11.6363L6.04186 8L2.40554 4.36369C1.86482 3.82296 1.86482 2.94627 2.40554 2.40554Z",fill:"#BBC0C5"}))},id=function(){return al("svg",{width:"120",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 127 63"},al("path",{fill:"currentColor",d:"M71.554 48.607v13.81h-7.072v-9.568l-8.059.945c-1.77.205-2.548.79-2.548 1.864 0 1.575 1.478 2.239 4.648 2.239 1.932 0 4.073-.29 5.963-.79l-3.66 5.225c-1.479.332-2.92.496-4.44.496-6.414 0-10.074-2.57-10.074-7.132 0-4.023 2.877-6.136 9.416-6.884l8.638-1.012c-.467-2.532-2.362-3.633-6.13-3.633-3.537 0-7.443.912-10.937 2.613l1.111-6.18c3.248-1.369 6.95-2.074 10.69-2.074 8.226 0 12.461 3.444 12.461 10.075l-.008.005ZM7.938 31.315.208 62.416h7.73l3.836-15.628 6.65 8.039h8.06l6.65-8.039 3.836 15.628h7.73l-7.73-31.105-14.518 17.388L7.934 31.311l.004.004ZM36.97.21 22.452 17.598 7.938.21.208 31.315h7.73l3.836-15.628 6.65 8.039h8.06l6.65-8.039 3.836 15.628h7.73L36.97.21Zm53.17 48.107-6.25-.912c-1.562-.247-2.178-.747-2.178-1.617 0-1.41 1.52-2.032 4.647-2.032 3.62 0 6.868.747 10.283 2.364l-.862-6.094c-2.757-.995-5.922-1.491-9.212-1.491-7.688 0-11.886 2.696-11.886 7.547 0 3.776 2.303 5.889 7.196 6.636l6.335.954c1.603.248 2.261.87 2.261 1.865 0 1.41-1.478 2.074-4.481 2.074-3.948 0-8.225-.953-11.72-2.654l.7 6.094c3.003 1.122 6.91 1.785 10.57 1.785 7.896 0 12.007-2.78 12.007-7.715 0-3.94-2.303-6.057-7.4-6.8l-.01-.004ZM100.3 34.09v28.325h7.071V34.091H100.3Zm15.334 15.595 9.833-10.744h-8.8l-9.296 11.114 9.912 12.356h8.925l-10.574-12.73v.004Zm-16.321-25.09c0 4.56 3.66 7.13 10.074 7.13 1.52 0 2.961-.167 4.44-.495l3.66-5.225c-1.89.496-4.031.79-5.963.79-3.166 0-4.648-.664-4.648-2.239 0-1.079.783-1.659 2.549-1.864l8.058-.945v9.567h7.072v-13.81c0-6.635-4.236-10.075-12.461-10.075-3.744 0-7.442.705-10.691 2.075l-1.112 6.178c3.495-1.701 7.401-2.613 10.937-2.613 3.769 0 5.664 1.1 6.13 3.633l-8.637 1.013c-6.539.747-9.417 2.86-9.417 6.883l.009-.004Zm-19.779-1.492c0 5.725 3.29 8.627 9.787 8.627 2.59 0 4.732-.416 6.785-1.37l.903-6.261c-1.974 1.2-3.99 1.822-6.005 1.822-3.044 0-4.402-1.243-4.402-4.023v-8.295h10.732V7.84H86.601V2.948l-13.448 7.174v3.482h6.372V23.1l.008.004Zm-6.95-2.612v1.411H53.47c.862 2.873 3.423 4.187 7.97 4.187 3.62 0 6.993-.747 9.992-2.196l-.862 6.056c-2.757 1.16-6.251 1.785-9.829 1.785-9.5 0-14.68-4.23-14.68-12.066 0-7.838 5.264-12.235 13.406-12.235s13.119 4.771 13.119 13.062l-.005-.004ZM53.378 17.09h12.086c-.637-2.751-2.732-4.188-6.08-4.188-3.349 0-5.335 1.399-6.006 4.188Z"}))},od=function(){function e(t,n){p(this,e);var r=e.size(t),i=r.height,o=r.width;this.data=n||Array.from({length:i},function(){return Qm(o,void 0)}),this.height=i,this.width=o}return h(e,[{key:"point",value:function(e){return this.data[e.y][e.x]}},{key:"isInside",value:function(e){return 0<=e.x&&e.x<this.width&&0<=e.y&&e.y<this.height}},{key:"size",value:function(e){if(!e)return{height:this.height,width:this.width};var t=this.xy(e),n=t.x,r=t.y;return{height:this.height-r,width:this.width-n}}},{key:"xy",value:function(e){if("number"==typeof e&&(e={x:e,y:e}),!Number.isSafeInteger(e.x))throw new Error("Bitmap: wrong x=".concat(e.x));if(!Number.isSafeInteger(e.y))throw new Error("Bitmap: wrong y=".concat(e.y));return e.x=Jm(e.x,this.width),e.y=Jm(e.y,this.height),e}},{key:"rect",value:function(t,n,r){for(var i=this.xy(t),o=i.x,a=i.y,s=e.size(n,this.size({x:o,y:a})),c=s.height,u=s.width,l=0;l<c;l++)for(var d=0;d<u;d++)this.data[a+l][o+d]="function"==typeof r?r({x:d,y:l},this.data[a+l][o+d]):r;return this}},{key:"rectRead",value:function(e,t,n){return this.rect(e,t,function(e,t){return n(e,t),t})}},{key:"hLine",value:function(e,t,n){return this.rect(e,{width:t,height:1},n)}},{key:"vLine",value:function(e,t,n){return this.rect(e,{width:1,height:t},n)}},{key:"border",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,n=arguments.length>1?arguments[1]:void 0,r=this.height+2*t,i=this.width+2*t,o=Qm(t,n),a=Array.from({length:t},function(){return Qm(i,n)});return new e({height:r,width:i},[].concat(a,E(this.data.map(function(e){return[].concat(E(o),E(e),E(o))})),a))}},{key:"embed",value:function(e,t){return this.rect(e,t.size(),function(e){var n=e.x,r=e.y;return t.data[r][n]})}},{key:"rectSlice",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.size(),r=new e(e.size(n,this.size(this.xy(t))));return this.rect(t,n,function(e,t){var n=e.x,i=e.y;return r.data[i][n]=t}),r}},{key:"inverse",value:function(){var t=this,n=this.height;return new e({height:this.width,width:n}).rect({x:0,y:0},1/0,function(e){var n=e.x,r=e.y;return t.data[n][r]})}},{key:"scale",value:function(t){var n=this;if(!Number.isSafeInteger(t)||t>1024)throw new Error("Wrong scale factor: ".concat(t));var r=this.height,i=this.width;return new e({height:t*r,width:t*i}).rect({x:0,y:0},1/0,function(e){var r=e.x,i=e.y;return n.data[Math.floor(i/t)][Math.floor(r/t)]})}},{key:"clone",value:function(){var t=this;return new e(this.size()).rect({x:0,y:0},this.size(),function(e){var n=e.x,r=e.y;return t.data[r][n]})}},{key:"assertDrawn",value:function(){this.rectRead(0,1/0,function(e,t){if("boolean"!=typeof t)throw new Error("Invalid color type="+D(t))})}},{key:"toString",value:function(){return this.data.map(function(e){return e.map(function(e){return void 0===e?"?":e?"X":" "}).join("")}).join("\n")}},{key:"toASCII",value:function(){for(var e=this.height,t=this.width,n=this.data,r="",i=0;i<e;i+=2){for(var o=0;o<t;o++){var a=n[i][o],s=i+1>=e||n[i+1][o];a||s?!a&&s?r+="":a&&!s?r+="":a&&s&&(r+=" "):r+=""}r+="\n"}return r}},{key:"toTerm",value:function(){var e="[0m",t="[1;47m  ".concat(e),n="[40m  ".concat(e);return this.data.map(function(e){return e.map(function(e){return e?n:t}).join("")}).join("\n")}},{key:"toSVG",value:function(){var e='<svg xmlns:svg="http://www.w3.org/2000/svg" viewBox="0 0 '.concat(this.width," ").concat(this.height,'" version="1.1" xmlns="http://www.w3.org/2000/svg">');return this.rectRead(0,1/0,function(t,n){var r=t.x,i=t.y;n&&(e+='<rect x="'.concat(r,'" y="').concat(i,'" width="1" height="1" />'))}),e+="</svg>"}},{key:"toGIF",value:function(){var e=function(e){return[255&e,e>>>8&255]},t=[].concat(E(e(this.width)),E(e(this.height))),n=[];this.rectRead(0,1/0,function(e,t){return n.push(+(!0===t))});for(var r=126,i=[71,73,70,56,55,97].concat(E(t),[246,0,0,255,255,255],E(Qm(381,0)),[44,0,0,0,0],E(t),[0,7]),o=Math.floor(n.length/r),a=0;a<o;a++)i.push.apply(i,[127,128].concat(E(n.slice(r*a,r*(a+1)).map(function(e){return+e}))));return i.push.apply(i,[n.length%r+1,128].concat(E(n.slice(o*r).map(function(e){return+e})))),i.push(1,129,0,59),new Uint8Array(i)}},{key:"toImage",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.size(),n=t.height,r=t.width,i=new Uint8Array(n*r*(e?3:4)),o=0,a=0;a<n;a++)for(var s=0;s<r;s++){var c=this.data[a][s]?0:255;i[o++]=c,i[o++]=c,i[o++]=c,e||(i[o++]=255)}return{height:n,width:r,data:i}}}],[{key:"size",value:function(e,t){if("number"==typeof e&&(e={height:e,width:e}),!Number.isSafeInteger(e.height)&&e.height!==1/0)throw new Error("Bitmap: wrong height=".concat(e.height," (").concat(D(e.height),")"));if(!Number.isSafeInteger(e.width)&&e.width!==1/0)throw new Error("Bitmap: wrong width=".concat(e.width," (").concat(D(e.width),")"));return void 0!==t&&(e={width:Math.min(e.width,t.width),height:Math.min(e.height,t.height)}),e}},{key:"fromString",value:function(t){var n,r,i=(t=t.replace(/^\n+/g,"").replace(/\n+$/g,"")).split("\n"),o=i.length,a=new Array(o),s=_(i);try{for(s.s();!(r=s.n()).done;){var c=r.value.split("").map(function(e){if("X"===e)return!0;if(" "===e)return!1;if("?"!==e)throw new Error("Bitmap.fromString: unknown symbol=".concat(e))});if(n&&c.length!==n)throw new Error("Bitmap.fromString different row sizes: width=".concat(n," cur=").concat(c.length));n=c.length,a.push(c)}}catch(Cs){s.e(Cs)}finally{s.f()}return n||(n=0),new e({height:o,width:n},a)}}])}(),ad=["low","medium","quartile","high"],sd=["numeric","alphanumeric","byte","kanji","eci"],cd=[26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706],ud={low:[7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],medium:[10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],quartile:[13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],high:[17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]},ld={low:[1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],medium:[1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],quartile:[1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],high:[1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]},dd={size:{encode:function(e){return 21+4*(e-1)},decode:function(e){return(e-17)/4}},sizeType:function(e){return Math.floor((e+7)/17)},alignmentPatterns:function(e){if(1===e)return[];var t=dd.size.encode(e)-6-1,n=t-6,r=Math.ceil(n/28),i=Math.floor(n/r);i%2?i+=1:n%r*2>=r&&(i+=2);for(var o=[6],a=1;a<r;a++)o.push(t-(r-a)*i);return o.push(t),o},ECCode:{low:1,medium:0,quartile:3,high:2},formatMask:21522,formatBits:function(e,t){for(var n=dd.ECCode[e]<<3|t,r=n,i=0;i<10;i++)r=r<<1^1335*(r>>9);return(n<<10|r)^dd.formatMask},versionBits:function(e){for(var t=e,n=0;n<12;n++)t=t<<1^7973*(t>>11);return e<<12|t},alphabet:{numeric:tg("0123456789"),alphanumerc:tg("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:")},lengthBits:function(e,t){return{numeric:[10,12,14],alphanumeric:[9,11,13],byte:[8,16,16],kanji:[8,10,12],eci:[0,0,0]}[t][dd.sizeType(e)]},modeBits:{numeric:"0001",alphanumeric:"0010",byte:"0100",kanji:"1000",eci:"0111"},capacity:function(e,t){var n=cd[e-1],r=ud[t][e-1],i=ld[t][e-1],o=Math.floor(n/i)-r,a=i-n%i;return{words:r,numBlocks:i,shortBlocks:a,blockLen:o,capacity:8*(n-r*i),total:(r+o)*i+i-a}}},fd=[function(e,t){return(e+t)%2==0},function(e,t){return t%2==0},function(e,t){return e%3==0},function(e,t){return(e+t)%3==0},function(e,t){return(Math.floor(t/2)+Math.floor(e/3))%2==0},function(e,t){return e*t%2+e*t%3==0},function(e,t){return(e*t%2+e*t%3)%2==0},function(e,t){return((e+t)%2+e*t%3)%2==0}],hd={tables:function(){for(var e=Qm(256,0),t=Qm(256,0),n=0,r=1;n<256;n++)e[n]=r,t[r]=n,256&(r<<=1)&&(r^=285);return{exp:e,log:t}}(),exp:function(e){return hd.tables.exp[e]},log:function(e){if(0===e)throw new Error("GF.log: wrong arg=".concat(e));return hd.tables.log[e]%255},mul:function(e,t){return 0===e||0===t?0:hd.tables.exp[(hd.tables.log[e]+hd.tables.log[t])%255]},add:function(e,t){return e^t},pow:function(e,t){return hd.tables.exp[hd.tables.log[e]*t%255]},inv:function(e){if(0===e)throw new Error("GF.inverse: wrong arg=".concat(e));return hd.tables.exp[255-hd.tables.log[e]]},polynomial:function(e){if(0==e.length)throw new Error("GF.polymomial: wrong length");if(0!==e[0])return e;for(var t=0;t<e.length-1&&0==e[t];t++);return e.slice(t)},monomial:function(e,t){if(e<0)throw new Error("GF.monomial: wrong degree=".concat(e));if(0==t)return[0];var n=Qm(e+1,0);return n[0]=t,hd.polynomial(n)},degree:function(e){return e.length-1},coefficient:function(e,t){return e[hd.degree(e)-t]},mulPoly:function(e,t){if(0===e[0]||0===t[0])return[0];for(var n=Qm(e.length+t.length-1,0),r=0;r<e.length;r++)for(var i=0;i<t.length;i++)n[r+i]=hd.add(n[r+i],hd.mul(e[r],t[i]));return hd.polynomial(n)},mulPolyScalar:function(e,t){if(0==t)return[0];if(1==t)return e;for(var n=Qm(e.length,0),r=0;r<e.length;r++)n[r]=hd.mul(e[r],t);return hd.polynomial(n)},mulPolyMonomial:function(e,t,n){if(t<0)throw new Error("GF.mulPolyMonomial: wrong degree");if(0==n)return[0];for(var r=Qm(e.length+t,0),i=0;i<e.length;i++)r[i]=hd.mul(e[i],n);return hd.polynomial(r)},addPoly:function(e,t){var n;if(0===e[0])return t;if(0===t[0])return e;var r=e,i=t;r.length>i.length&&(r=(n=[i,r])[0],i=n[1]);for(var o=Qm(i.length,0),a=i.length-r.length,s=i.slice(0,a),c=0;c<s.length;c++)o[c]=s[c];for(var u=a;u<i.length;u++)o[u]=hd.add(r[u-a],i[u]);return hd.polynomial(o)},remainderPoly:function(e,t){for(var n=Array.from(e),r=0;r<e.length-t.length+1;r++){var i=n[r];if(0!==i)for(var o=1;o<t.length;o++)0!==t[o]&&(n[r+o]=hd.add(n[r+o],hd.mul(t[o],i)))}return n.slice(e.length-t.length+1,n.length)},divisorPoly:function(e){for(var t=[1],n=0;n<e;n++)t=hd.mulPoly(t,[1,hd.pow(2,n)]);return t},evalPoly:function(e,t){if(0==t)return hd.coefficient(e,0);for(var n=e[0],r=1;r<e.length;r++)n=hd.add(hd.mul(t,n),e[r]);return n},euclidian:function(e,t,n){var r;hd.degree(e)<hd.degree(t)&&(e=(r=[t,e])[0],t=r[1]);for(var i=e,o=t,a=[0],s=[1];2*hd.degree(o)>=n;){var c=i,u=a;if(a=s,0===(i=o)[0])throw new Error("rLast[0] === 0");o=c;for(var l=[0],d=hd.inv(i[0]);hd.degree(o)>=hd.degree(i)&&0!==o[0];){var f=hd.degree(o)-hd.degree(i),h=hd.mul(o[0],d);l=hd.addPoly(l,hd.monomial(f,h)),o=hd.addPoly(o,hd.mulPolyMonomial(i,f,h))}if(l=hd.mulPoly(l,a),s=hd.addPoly(l,u),hd.degree(o)>=hd.degree(i))throw new Error("Division failed r: ".concat(o,", rLast: ").concat(i))}var p=hd.coefficient(s,0);if(0==p)throw new Error("sigmaTilde(0) was zero");var v=hd.inv(p);return[hd.mulPolyScalar(s,v),hd.mulPolyScalar(o,v)]}},pd={DESKTOP:"Desktop",MOBILE:"Mobile",META_MASK_MOBILE_APP:"MetaMask mobile app",SCAN_TO_CONNECT:"Scan to connect and sign with",CONNECT_WITH_EXTENSION:"Connect With MetaMask Extension",INSTALL_MODAL:{TRUSTED_BY_USERS:"Trusted by over 30 million users to buy, store, send and swap crypto securely",LEADING_CRYPTO_WALLET:"The leading crypto wallet & gateway to blockchain apps built on Ethereum Mainnet, Polygon, Optimism, and many other networks",CONTROL_DIGITAL_INTERACTIONS:"Puts you in control of your digital interactions by making power of cryptography more accessible",INSTALL_META_MASK_EXTENSION:"Install MetaMask Extension"},PENDING_MODAL:{OPEN_META_MASK_SELECT_CODE:"Please open the MetaMask wallet app and select the code on the screen OR disconnect",OPEN_META_MASK_CONTINUE:"Open the MetaMask app to continue with your session.",NUMBER_AFTER_OPEN_NOTICE:"If a number doesn't appear after opening MetaMask, please click disconnect and re-scan the QRCode.",DISCONNECT:"Disconnect"},SELECT_MODAL:{CRYPTO_TAKE_CONTROL_TEXT:"Take control of your crypto and explore the blockchain with the wallet trusted by over 30 million people worldwide"},META_MASK_MODAL:{ADDRESS_COPIED:"Address copied to clipboard!",DISCONNECT:"Disconnect",ACTIVE_NETWORK:"Active Network"}},vd=function(){return h(function e(t){var n;p(this,e),this.translations=pd,this.supportedLocales=["es","fr","he","it","pt","tr"],this.baseUrl=null!==(n=null==t?void 0:t.baseUrl)&&void 0!==n?n:"https://raw.githubusercontent.com/MetaMask/metamask-sdk/refs/heads/gh-pages/locales"},[{key:"getBrowserLanguage",value:function(){if((navigator.languages||[navigator.language]).some(function(e){return e.toLowerCase().startsWith("en")}))return"en";var e=navigator.language.toLowerCase().split("-")[0];return this.supportedLocales.includes(e)?e:"en"}},{key:"init",value:(t=g(L().m(function e(t){var n;return L().w(function(e){for(;;)switch(e.n){case 0:return n=this.getBrowserLanguage()||t.fallbackLng,e.n=1,this.loadTranslations(n);case 1:return e.a(2)}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"loadTranslations",value:(e=g(L().m(function e(t){var n,r,i,o;return L().w(function(e){for(;;)switch(e.p=e.n){case 0:if("en"===(n=t.split("-")[0])||!this.supportedLocales.includes(n)){e.n=7;break}return e.p=1,r="".concat(this.baseUrl,"/").concat(n,".json"),e.n=2,fetch(r);case 2:if((i=e.v).ok){e.n=3;break}throw new Error("HTTP error! status: ".concat(i.status));case 3:return e.n=4,i.json();case 4:this.translations=e.v,e.n=6;break;case 5:e.p=5,o=e.v,console.warn(" Failed to load ".concat(n," translations, falling back to English:"),o),this.translations=pd;case 6:e.n=8;break;case 7:this.translations=pd;case 8:return e.a(2)}},e,this,[[1,5]])})),function(t){return e.apply(this,arguments)})},{key:"t",value:function(e){return this.getNestedTranslation(e,this.translations)||e}},{key:"getNestedTranslation",value:function(e,t){var n,r=t,i=_(e.split("."));try{for(i.s();!(n=i.n()).done;){var o=n.value;if("object"!=D(r))return"";r=r[o]}}catch(Cs){i.e(Cs)}finally{i.f()}return"string"==typeof r?r:""}}]);var e,t}(),function(e){e.SDK_MODAL_VIEWED="sdk_modal_viewed",e.SDK_MODAL_BUTTON_CLICKED="sdk_modal_button_clicked",e.SDK_MODAL_TOGGLE_CHANGED="sdk_modal_toggle_changed"}(md||(md={})),gd=function(){return h(function e(t){p(this,e),Nu(this,t),this.close=hl(this,"close",7),this.startDesktopOnboarding=hl(this,"startDesktopOnboarding",7),this.trackAnalytics=hl(this,"trackAnalytics",7),this.link=void 0,this.sdkVersion=void 0,this.preferDesktop=void 0,this.tab=1,this.isDefaultTab=!0,this.translationsLoaded=!1,this.onClose=this.onClose.bind(this),this.onStartDesktopOnboardingHandler=this.onStartDesktopOnboardingHandler.bind(this),this.setTab=this.setTab.bind(this),this.render=this.render.bind(this),this.setTab(this.preferDesktop?1:2),this.i18nInstance=new vd},[{key:"componentDidLoad",value:function(){this.trackAnalytics.emit({event:md.SDK_MODAL_VIEWED,params:{extensionInstalled:!1,tab:1===this.tab?"desktop":"mobile"}})}},{key:"connectedCallback",value:(e=g(L().m(function e(){return L().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.i18nInstance.init({fallbackLng:"en"});case 1:this.translationsLoaded=!0;case 2:return e.a(2)}},e,this)})),function(){return e.apply(this,arguments)})},{key:"updatePreferDesktop",value:function(e){e?this.setTab(1):this.setTab(2)}},{key:"onClose",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.close.emit({shouldTerminate:e})}},{key:"onStartDesktopOnboardingHandler",value:function(){this.trackAnalytics.emit({event:md.SDK_MODAL_BUTTON_CLICKED,params:{button_type:"install_extension",tab:"desktop"}}),this.startDesktopOnboarding.emit()}},{key:"setTab",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&this.trackAnalytics.emit({event:md.SDK_MODAL_TOGGLE_CHANGED,params:{toggle:1===this.tab?"desktop_to_mobile":"mobile_to_desktop"}}),this.tab=e,this.isDefaultTab=!1}},{key:"render",value:function(){var e=this;if(!this.translationsLoaded)return null;var t=function(t){return e.i18nInstance.t(t)},n=this.isDefaultTab?this.preferDesktop?1:2:this.tab,r=og(this.link,"svg",{ecc:"medium",scale:2});return al(Jl,{className:"install-model"},al("div",{class:"backdrop",onClick:function(){return e.onClose(!0)}}),al("div",{class:"modal"},al("div",{class:"closeButtonContainer"},al("div",{class:"right"},al("span",{class:"closeButton",onClick:function(){return e.onClose(!0)}},al(rd,null)))),al("div",{class:"logoContainer"},al(id,null)),al("div",null,al("div",{class:"tabcontainer"},al("div",{class:"flexContainer"},al("div",{onClick:function(){return e.setTab(1,!0)},class:"tab flexItem "+(1===n?"tabactive":"")},t("DESKTOP")),al("div",{onClick:function(){return e.setTab(2,!0)},class:"tab flexItem "+(2===n?"tabactive":"")},t("MOBILE")))),al("div",{style:{display:1===n?"none":"block"}},al("div",{class:"flexContainer"},al("div",{class:"flexItem",style:{textAlign:"center",marginTop:"4"}},r&&al("div",{id:"sdk-mm-qrcode",class:"center",innerHTML:r}),al("div",{class:"connectMobileText"},t("SCAN_TO_CONNECT")," ",al("br",null),al("span",{class:"blue"},al("b",null,t("META_MASK_MOBILE_APP"))))))),al("div",{style:{display:2===n?"none":"block"}},al("div",{class:"item"},al(Ql,{Icon:ed,text:t("INSTALL_MODAL.TRUSTED_BY_USERS")})),al("div",{class:"item"},al(Ql,{Icon:Xl,text:t("INSTALL_MODAL.LEADING_CRYPTO_WALLET")})),al("div",{class:"item"},al(Ql,{Icon:td,text:t("INSTALL_MODAL.CONTROL_DIGITAL_INTERACTIONS")})),al("button",{class:"button",onClick:function(){return e.onStartDesktopOnboardingHandler()}},al(nd,null),al("span",{class:"installExtensionText"},t("INSTALL_MODAL.INSTALL_META_MASK_EXTENSION"))))),al(Ym,{version:this.sdkVersion})))}},{key:"el",get:function(){return fl(this)}}],[{key:"watchers",get:function(){return{preferDesktop:["updatePreferDesktop"]}}}]);var e}(),gd.style=".flexContainer {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: row;\n}\n\n.flexItem {\n    flex: 1;\n    justify-content: center;\n    align-items: center;\n}\n\n.flexItem11 {\n    flex: 11;\n    justify-content: center;\n    align-items: center;\n}\n\n.flexItem1 {\n    flex: 1;\n    justify-content: center;\n    align-items: center;\n}\n\n.tab {\n    padding: 8px;\n    cursor: pointer;\n    background-color: #F2F4F6;\n    font-size: 12px;\n    text-align: center;\n    color: #24292E;\n}\n\n.tabcontainer {\n    padding: 4px;\n    background-color: #F2F4F6;\n    border-radius: 8px;\n    margin-bottom: 30px;\n    margin-top: 30px;\n}\n\n.tabactive {\n    background-color: white;\n    -webkit-transition: background-color 300ms linear;\n    -ms-transition: background-color 300ms linear;\n    transition: background-color 300ms linear;\n    border-radius: 8px;\n}\n\n.item {\n    font-size: 12px;\n    margin-bottom: 16px;\n    border-radius: 8px;\n    padding: 10px;\n    border: 2px #F2F4F6 solid;\n    color: #24292E;\n}\n\n.extensionLabel {\n    font-style: normal;\n    font-weight: bold;\n    font-size: 14px;\n    text-align: cetner;\n    color: #24272A;\n}\n\n.notice {\n    font-size: 12px;\n    margin-left: 10px;\n    margin-right: 10px;\n    color: grey;\n}\n\n.button {\n    margin-top: 41.5px;\n    margin-bottom: 20px;\n    width: 100%;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    padding: 12px 20px;\n    background: #037DD6;\n    border-radius: 32px;\n    color: white;\n    border: 0;\n    font-size: 14px;\n    cursor: pointer;\n}\n\n.backdrop {\n    visibility: visible;\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    width: 100%;\n    z-index: 99998;\n    background: rgba(0, 0, 0, 0.87);\n    opacity: 0.3;\n}\n\n.modal {\n    visibility: visible;\n    position: fixed;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    z-index: 99999;\n    background: white;\n    padding: 20px;\n    border-radius: 8px;\n    top: 50%;\n    max-width: 100%;\n    width: 460px;\n    min-width: 300px;\n    box-shadow: rgba(0, 0, 0, 0.2) 0px 11px 15px -7px, rgba(0, 0, 0, 0.14) 0px 24px 38px 3px, rgba(0, 0, 0, 0.12) 0px 9px 46px 8px;\n    -webkit-font-smoothing: antialiased;\n}\n\n.closeButton {\n    color: #BBC0C5;\n    cursor: pointer;\n}\n\n.logoContainer {\n    margin-left: 24px;\n    margin-right: 24px;\n    margin-top: 24px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.connectMobileText {\n    font-size: 14px;\n    color: black;\n    margin-top: 28px;\n    margin-bottom: 28px;\n    line-height: 2;\n}\n\n.blue {\n    color: #037DD6;\n    font-weight: 700;\n}\n\n.installExtensionText {\n    margin-left: 10px;\n}\n\n.center {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.right {\n    display: flex;\n    align-items: center;\n    justify-content: right;\n}\n\n#sdk-mm-qrcode {\n    svg {\n        width: 50%;\n    }\n}",yd=function(){return h(function e(t){p(this,e),Nu(this,t),this.close=hl(this,"close",7),this.disconnect=hl(this,"disconnect",7),this.updateOTPValue=hl(this,"updateOTPValue",7),this.displayOTP=void 0,this.sdkVersion=void 0,this.otpCode=void 0,this.translationsLoaded=!1,this.i18nInstance=new vd},[{key:"connectedCallback",value:(e=g(L().m(function e(){return L().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.i18nInstance.init({fallbackLng:"en"});case 1:this.translationsLoaded=!0;case 2:return e.a(2)}},e,this)})),function(){return e.apply(this,arguments)})},{key:"onClose",value:function(){this.close.emit()}},{key:"onDisconnect",value:function(){this.disconnect.emit()}},{key:"onUpdateOTPValueHandler",value:function(e){this.updateOTPValue.emit({otpValue:e})}},{key:"disconnectedCallback",value:function(){this.onClose()}},{key:"render",value:function(){var e,t=this;if(!this.translationsLoaded)return null;var n=null===(e=this.displayOTP)||void 0===e||e,r=this.sdkVersion,i=function(e){return t.i18nInstance.t(e)};return al(Jl,{className:"pending-modal"},al("div",{class:"backdrop",onClick:function(){return t.onClose()}}),al("div",{class:"modal"},al("div",{class:"closeButtonContainer"},al("div",{class:"right"},al("span",{class:"closeButton",onClick:function(){return t.onClose()}},al(rd,null)))),al("div",{class:"logoContainer"},al(id,null)),al("div",null,al("div",{class:"flexContainer",style:{flexDirection:"column",color:"black"}},al("div",{class:"flexItem",style:{textAlign:"center",marginTop:"30px",marginBottom:"30px",fontSize:"16px"}},i(n?"PENDING_MODAL.OPEN_META_MASK_SELECT_CODE":"PENDING_MODAL.OPEN_META_MASK_CONTINUE")),al("div",{id:"sdk-mm-otp-value",style:{padding:"10px",fontSize:"32px",display:this.otpCode?"block":"none"}},this.otpCode),n&&al("div",{class:"notice"},"* ",i("PENDING_MODAL.NUMBER_AFTER_OPEN_NOTICE"))),al("div",{style:{marginTop:"20px"}},al("button",{class:"button blue",style:{marginTop:"5px",color:"#0376C9",borderColor:"#0376C9",borderWidth:"1px",borderStyle:"solid",backgroundColor:"white"},onClick:function(){return t.onDisconnect()}},i("PENDING_MODAL.DISCONNECT")))),al(Ym,{version:r})))}},{key:"el",get:function(){return fl(this)}}]);var e}(),yd.style=".flexContainer {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: row;\n}\n\n.flexItem {\n    flex: 1;\n    justify-content: center;\n    align-items: center;\n}\n\n.flexItem11 {\n    flex: 11;\n    justify-content: center;\n    align-items: center;\n}\n\n.flexItem1 {\n    flex: 1;\n    justify-content: center;\n    align-items: center;\n}\n\n.tab {\n    padding: 8px;\n    cursor: pointer;\n    background-color: #F2F4F6;\n    font-size: 12px;\n    text-align: center;\n    color: #24292E;\n}\n\n.tabcontainer {\n    padding: 4px;\n    background-color: #F2F4F6;\n    border-radius: 8px;\n    margin-bottom: 30px;\n    margin-top: 30px;\n}\n\n.tabactive {\n    background-color: white;\n    -webkit-transition: background-color 300ms linear;\n    -ms-transition: background-color 300ms linear;\n    transition: background-color 300ms linear;\n    border-radius: 8px;\n}\n\n.item {\n    font-size: 12px;\n    margin-bottom: 16px;\n    border-radius: 8px;\n    padding: 10px;\n    border: 2px #F2F4F6 solid;\n    color: #24292E;\n}\n\n.extensionLabel {\n    font-style: normal;\n    font-weight: bold;\n    font-size: 14px;\n    text-align: cetner;\n    color: #24272A;\n}\n\n.notice {\n    font-size: 12px;\n    margin-left: 10px;\n    margin-right: 10px;\n    color: grey;\n}\n\n.button {\n    margin-top: 41.5px;\n    margin-bottom: 20px;\n    width: 100%;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    padding: 12px 20px;\n    background: #037DD6;\n    border-radius: 32px;\n    color: white;\n    border: 0;\n    font-size: 14px;\n    cursor: pointer;\n}\n\n.backdrop {\n    visibility: visible;\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    width: 100%;\n    z-index: 99998;\n    background: rgba(0, 0, 0, 0.87);\n    opacity: 0.3;\n}\n\n.modal {\n    visibility: visible;\n    position: fixed;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    z-index: 99999;\n    background: white;\n    padding: 20px;\n    border-radius: 8px;\n    top: 50%;\n    max-width: 100%;\n    width: 460px;\n    min-width: 300px;\n    box-shadow: rgba(0, 0, 0, 0.2) 0px 11px 15px -7px, rgba(0, 0, 0, 0.14) 0px 24px 38px 3px, rgba(0, 0, 0, 0.12) 0px 9px 46px 8px;\n    -webkit-font-smoothing: antialiased;\n}\n\n.closeButton {\n    color: #BBC0C5;\n    cursor: pointer;\n}\n\n.logoContainer {\n    margin-left: 24px;\n    margin-right: 24px;\n    margin-top: 24px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.connectMobileText {\n    font-size: 14px;\n    color: black;\n    margin-top: 28px;\n    margin-bottom: 28px;\n    line-height: 2;\n}\n\n.blue {\n    color: #037DD6;\n    font-weight: 700;\n}\n\n.installExtensionText {\n    margin-left: 10px;\n}\n\n.center {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.right {\n    display: flex;\n    align-items: center;\n    justify-content: right;\n}\n\n#sdk-mm-qrcode {\n    svg {\n        width: 50%;\n    }\n}",bd=function(){return al("svg",{width:"21",height:"15",viewBox:"0 0 21 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},al("path",{d:"M14.1364 14.9851C13.5909 14.9851 13.2273 14.5851 13.2273 13.9851C13.2273 13.3851 13.5909 12.9851 14.1364 12.9851C16.6818 12.9851 18.6818 10.7851 18.6818 7.98508C18.6818 5.18508 16.6818 2.98508 14.1364 2.98508C11.5909 2.98508 9.59091 5.18508 9.59091 7.98508C9.59091 8.58508 9.22727 8.98508 8.68182 8.98508C8.13636 8.98508 7.77273 8.58508 7.77273 7.98508C7.77273 4.08508 10.5909 0.985077 14.1364 0.985077C17.6818 0.985077 20.5 4.08508 20.5 7.98508C20.5 11.8851 17.6818 14.9851 14.1364 14.9851ZM6.68182 14.7851C3.22727 14.7851 0.5 11.6851 0.5 7.98508C0.5 4.28508 3.22727 1.18508 6.68182 1.18508C7.22727 1.18508 7.59091 1.58508 7.59091 2.18508C7.59091 2.78508 7.22727 3.18508 6.68182 3.18508C4.22727 3.18508 2.31818 5.38508 2.31818 7.98508C2.31818 10.5851 4.22727 12.7851 6.68182 12.7851C9.13636 12.7851 11.0455 10.6851 11.0455 7.98508C11.0455 7.38508 11.4091 6.98508 11.9545 6.98508C12.5 6.98508 12.8636 7.38508 12.8636 7.98508C12.7727 11.6851 10.0455 14.7851 6.68182 14.7851Z",fill:"white"}))},wd=function(){return al("svg",{width:"400",height:"300",viewBox:"0 0 400 300",fill:"none",xmlns:"http://www.w3.org/2000/svg"},al("rect",{width:"400",height:"300",fill:"white"}),al("path",{d:"M300.116 242.46L250.485 227.681L213.057 250.055L186.944 250.045L149.493 227.681L99.8843 242.46L84.7939 191.518L99.8843 134.979L84.7939 87.1777L99.8843 27.9336L177.402 74.2466H222.598L300.116 27.9336L315.206 87.1777L300.116 134.979L315.206 191.518L300.116 242.46Z",fill:"#FF5C16"}),al("path",{d:"M99.8955 27.9336L177.414 74.2792L174.331 106.085L99.8955 27.9336Z",fill:"#FF5C16"}),al("path",{d:"M149.505 191.539L183.612 217.521L149.505 227.681V191.539Z",fill:"#FF5C16"}),al("path",{d:"M180.886 148.585L174.33 106.107L132.369 134.991L132.348 134.98V135.001L132.477 164.732L149.493 148.585H149.504H180.886Z",fill:"#FF5C16"}),al("path",{d:"M300.116 27.9336L222.598 74.2792L225.67 106.085L300.116 27.9336Z",fill:"#FF5C16"}),al("path",{d:"M250.508 191.539L216.4 217.521L250.508 227.681V191.539Z",fill:"#FF5C16"}),al("path",{d:"M267.652 135.001H267.663H267.652V134.98L267.641 134.991L225.68 106.107L219.125 148.585H250.507L267.533 164.732L267.652 135.001Z",fill:"#FF5C16"}),al("path",{d:"M149.493 227.681L99.8843 242.46L84.7939 191.54H149.493V227.681Z",fill:"#E34807"}),al("path",{d:"M180.875 148.574L190.351 209.98L177.219 175.838L132.456 164.732L149.483 148.574H180.864H180.875Z",fill:"#E34807"}),al("path",{d:"M250.507 227.681L300.116 242.46L315.206 191.54H250.507V227.681Z",fill:"#E34807"}),al("path",{d:"M219.126 148.574L209.649 209.98L222.782 175.838L267.545 164.732L250.507 148.574H219.126Z",fill:"#E34807"}),al("path",{d:"M84.7939 191.517L99.8843 134.979H132.337L132.456 164.721L177.219 175.826L190.351 209.969L183.601 217.488L149.493 191.506H84.7939V191.517Z",fill:"#FF8D5D"}),al("path",{d:"M315.206 191.517L300.116 134.979H267.664L267.545 164.721L222.782 175.826L209.649 209.969L216.4 217.488L250.507 191.506H315.206V191.517Z",fill:"#FF8D5D"}),al("path",{d:"M222.598 74.2466H200H177.402L174.33 106.053L190.351 209.936H209.649L225.681 106.053L222.598 74.2466Z",fill:"#FF8D5D"}),al("path",{d:"M99.8843 27.9336L84.7939 87.1777L99.8843 134.979H132.337L174.319 106.085L99.8843 27.9336Z",fill:"#661800"}),al("path",{d:"M171.496 160.906H156.795L148.79 168.752L177.229 175.804L171.496 160.896V160.906Z",fill:"#661800"}),al("path",{d:"M300.116 27.9336L315.206 87.1777L300.116 134.979H267.663L225.681 106.085L300.116 27.9336Z",fill:"#661800"}),al("path",{d:"M228.525 160.906H243.248L251.253 168.763L222.781 175.826L228.525 160.896V160.906Z",fill:"#661800"}),al("path",{d:"M213.046 229.789L216.399 217.51L209.649 209.991H190.34L183.59 217.51L186.943 229.789",fill:"#661800"}),al("path",{d:"M213.047 229.789V250.066H186.944V229.789H213.047Z",fill:"#C0C4CD"}),al("path",{d:"M149.504 227.66L186.965 250.056V229.779L183.611 217.5L149.504 227.66Z",fill:"#E7EBF6"}),al("path",{d:"M250.506 227.66L213.045 250.056V229.779L216.398 217.5L250.506 227.66Z",fill:"#E7EBF6"}))},Ed=function(){return h(function e(t){p(this,e),Nu(this,t),this.close=hl(this,"close",7),this.connectWithExtension=hl(this,"connectWithExtension",7),this.link=void 0,this.sdkVersion=void 0,this.preferDesktop=void 0,this.tab=1,this.isDefaultTab=!0,this.translationsLoaded=!1,this.i18nInstance=new vd,this.setTab(this.preferDesktop?1:2)},[{key:"connectedCallback",value:(e=g(L().m(function e(){return L().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.i18nInstance.init({fallbackLng:"en"});case 1:this.translationsLoaded=!0;case 2:return e.a(2)}},e,this)})),function(){return e.apply(this,arguments)})},{key:"onClose",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.close.emit({shouldTerminate:e})}},{key:"connectWithExtensionHandler",value:function(){this.connectWithExtension.emit()}},{key:"setTab",value:function(e){this.tab=e,this.isDefaultTab=!1}},{key:"disconnectedCallback",value:function(){this.onClose()}},{key:"updatePreferDesktop",value:function(e){e?this.setTab(1):this.setTab(2)}},{key:"render",value:function(){var e=this;if(!this.translationsLoaded)return null;var t=function(t){return e.i18nInstance.t(t)},n=this.sdkVersion,r=this.isDefaultTab?this.preferDesktop?1:2:this.tab,i=og(this.link,"svg",{ecc:"medium",scale:2});return al(Jl,{className:"select-modal"},al("div",{class:"backdrop",onClick:function(){return e.onClose(!0)}}),al("div",{class:"modal"},al("div",{class:"closeButtonContainer"},al("div",{class:"right"},al("span",{class:"closeButton",onClick:function(){return e.onClose(!0)}},al(rd,null)))),al("div",{class:"logoContainer"},al(id,null)),al("div",null,al("div",{class:"tabcontainer"},al("div",{class:"flexContainer"},al("div",{onClick:function(){return e.setTab(1)},class:"tab flexItem "+(1===r?"tabactive":"")},t("DESKTOP")),al("div",{onClick:function(){return e.setTab(2)},class:"tab flexItem "+(2===r?"tabactive":"")},t("MOBILE")))),al("div",{style:{display:1===r?"none":"block"}},al("div",{class:"flexContainer"},al("div",{class:"flexItem",style:{textAlign:"center",marginTop:"4"}},al("div",{class:"center",id:"sdk-mm-qrcode",innerHTML:i}),al("div",{class:"connectMobileText"},t("SCAN_TO_CONNECT"),al("br",null),al("span",{class:"blue"},al("b",null,t("META_MASK_MOBILE_APP"))))))),al("div",{style:{display:2===r?"none":"block"}},al("div",{style:{display:"flex",justifyContent:"center",height:"300",marginTop:"-20"}},al(wd,null)),al("div",{class:"extensionLabel"},t("SELECT_MODAL.CRYPTO_TAKE_CONTROL_TEXT")),al("button",{class:"button",onClick:function(){return e.connectWithExtensionHandler()}},al(bd,null),al("span",{class:"installExtensionText"},t("CONNECT_WITH_EXTENSION"))))),al(Ym,{version:n})))}},{key:"el",get:function(){return fl(this)}}],[{key:"watchers",get:function(){return{preferDesktop:["updatePreferDesktop"]}}}]);var e}(),Ed.style=".flexContainer {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: row;\n}\n\n.flexItem {\n    flex: 1;\n    justify-content: center;\n    align-items: center;\n}\n\n.flexItem11 {\n    flex: 11;\n    justify-content: center;\n    align-items: center;\n}\n\n.flexItem1 {\n    flex: 1;\n    justify-content: center;\n    align-items: center;\n}\n\n.tab {\n    padding: 8px;\n    cursor: pointer;\n    background-color: #F2F4F6;\n    font-size: 12px;\n    text-align: center;\n    color: #24292E;\n}\n\n.tabcontainer {\n    padding: 4px;\n    background-color: #F2F4F6;\n    border-radius: 8px;\n    margin-bottom: 30px;\n    margin-top: 30px;\n}\n\n.tabactive {\n    background-color: white;\n    -webkit-transition: background-color 300ms linear;\n    -ms-transition: background-color 300ms linear;\n    transition: background-color 300ms linear;\n    border-radius: 8px;\n}\n\n.item {\n    font-size: 12px;\n    margin-bottom: 16px;\n    border-radius: 8px;\n    padding: 10px;\n    border: 2px #F2F4F6 solid;\n    color: #24292E;\n}\n\n.extensionLabel {\n    font-style: normal;\n    font-weight: bold;\n    font-size: 14px;\n    text-align: cetner;\n    color: #24272A;\n}\n\n.notice {\n    font-size: 12px;\n    margin-left: 10px;\n    margin-right: 10px;\n    color: grey;\n}\n\n.button {\n    margin-top: 41.5px;\n    margin-bottom: 20px;\n    width: 100%;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    padding: 12px 20px;\n    background: #037DD6;\n    border-radius: 32px;\n    color: white;\n    border: 0;\n    font-size: 14px;\n    cursor: pointer;\n}\n\n.backdrop {\n    visibility: visible;\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    width: 100%;\n    z-index: 99998;\n    background: rgba(0, 0, 0, 0.87);\n    opacity: 0.3;\n}\n\n.modal {\n    visibility: visible;\n    position: fixed;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    z-index: 99999;\n    background: white;\n    padding: 20px;\n    border-radius: 8px;\n    top: 50%;\n    max-width: 100%;\n    width: 460px;\n    min-width: 300px;\n    box-shadow: rgba(0, 0, 0, 0.2) 0px 11px 15px -7px, rgba(0, 0, 0, 0.14) 0px 24px 38px 3px, rgba(0, 0, 0, 0.12) 0px 9px 46px 8px;\n    -webkit-font-smoothing: antialiased;\n}\n\n.closeButton {\n    color: #BBC0C5;\n    cursor: pointer;\n}\n\n.logoContainer {\n    margin-left: 24px;\n    margin-right: 24px;\n    margin-top: 24px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.connectMobileText {\n    font-size: 14px;\n    color: black;\n    margin-top: 28px;\n    margin-bottom: 28px;\n    line-height: 2;\n}\n\n.blue {\n    color: #037DD6;\n    font-weight: 700;\n}\n\n.installExtensionText {\n    margin-left: 10px;\n}\n\n.center {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.right {\n    display: flex;\n    align-items: center;\n    justify-content: right;\n}\n\n#sdk-mm-qrcode {\n    svg {\n        width: 50%;\n    }\n}",kd=Object.freeze({__proto__:null,mm_install_modal:gd,mm_pending_modal:yd,mm_select_modal:Ed})}}})}();